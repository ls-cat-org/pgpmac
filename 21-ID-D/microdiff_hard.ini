; MD2 CONFIGURATION FILE
; This file contains the mapping between the control software variables
; and the Pmac controller variables

[version]
   version = 2.2
   ; Add of FastShutterCloseHist (not processed in VB yet ...)


[PMAC_STATION]
   PmacConfigFile          =  Pmac\Pmac_MD2.pmc
   
   ServoClockBaseFrequency =  9034.602
   ServoClockDivider       =  1        ; Servo clock frequency divider : divider = i7201 + 1
   StartupMode             =  &H124    ; Address where to store the Hot Start flag
   AllAborted              =  &H125    ; Address where to store the abort flag
   Simulation              =  0        ; 1 = All the hardware is simulated
                                       ; 0 = Simulation depends on each motor's simulation flag
   IsAMotorFaulty          =  &HC0     ; Global status flag for motor errors
   FaultyMotorIdFlag       =  &HC1     ; Global status flag that include faulty motor ID - NOT USED !
   HardwareFlags           =  &HC2     ; Global status flags that include ETEL status and air pressure state
   IsHardwareBusy          =  M370     ; Global status flag - Not cached to avoid de-synchro with listening remote client
   ResetLimitSafe          =  M2000    ; Fire the safety operations
   DeviceNumber			   =  0        ; Select PMAC device (PMAC 0 is SampleChanger if MD@ and SC3 both installed)
   UseDpramCache		   = False
   DpramCacheRefreshRate   = 200
   
[ORGAN_HOMING]
   Simulation		= 0 ; TRACK 187 (= 1 TESTED OK)
   CoordinateSystem        =  5
   ProgNumber              =  35
   PrgFlagAddress          =  M435
   PrgRetValAddress        =  
   PrgParamAddress         =  
   PrgTimeOut              =  60

[ORGUE_MOVE] ; NOT USED in MD2 1.5.1.x
   Simulation		= 1 ; PROG NOT USED in MD2 1.5.1.x
   CoordinateSystem        =  5
   ProgNumber              =  37
   PrgFlagAddress          =  M437
   PrgRetValAddress        =  
   PrgParamAddress         =  P169
   PrgNumberOfParam        =  3

[CENTRING_HOMING]
   Simulation			= 0 
   CoordinateSystem        =  2
   ProgNumber              =  53
   PrgFlagAddress          =  M453
   PrgRetValAddress        =  
   PrgParamAddress         =  
   PrgTimeOut              =  60

[PHIRotationAxis]
   ETELEnable              =  M1115
   ETELIsPowerOn           =  M1014
   ETELIsReady             =  M1013
   ETELIsInitOK            =  M1015
   SampleMagnetOff         =  M1100    ; With new I/O Panel Rev B0 (M1105 with Old I/O Panel Rev A0)
   AirBearingIsOK          =  M1001
   SampleMagnetIsOn        =  M1024
   SampleIsDetected        =  M1009
   HeadTypeDetection0	   =  M1028		; Std= 1 mK=1
   HeadTypeDetection1	   =  M1029		; Std= 1 mK=0
   HeadTypeDetection2	   =  M1030		; Std= 0 mK=0

   [PHIRotationAxis.PHIMotor]
      Simulation           =  0        ; 0 = Available
                                       ; 1 = Simulated
                                       ; 2 = Disabled (GUI will be disabled)
      CoordinateSystem     =  1
      MotorNumber          =  1
      Unit                 =  deg      ; Motor unit for positions in GUI
      UnitRatio            =  12800    ; Conversion ratio cts/deg
                                       ;  1 circle = 4608000 cts
                                       ;  1 deg    =   12800 cts
      MaxSpeedCts          =   1664    ; Max speed in cts/msec (must be same unit as default speed)
                                       ; default speed is in Pmac Ixx22 variable
      MaxSliderSpeedCts    =   1664    ; Max speed used by GUI in cts/msec (must be same unit as default speed)

      Precision            =   0.001   ; Max precision in motor unit
      SmallStep            =  10       ; Small step used by GUI in motor unit
      LargeStep            =  45       ; Large step used by GUI in motor unit

      ;optional parameters:
      ;********************

      MinPosition          = -Infinity ; Limits for software control in motor unit
      MaxPosition          =  Infinity ; (Omega has no physical limit)
      Backlash             =  0        ; To make up the motor play in motor unit,
                                       ; positive move to compensate mechanical play
                                       ; after reversing direction
      DynamicMove          =  0
      RelaxDelay           =  0        ; sec
      RelaxMove            =  0
      AngleOptimize        =  True     ; Use an internal offset to optimize move commands
      
      DataGatheringSource  =  0        ; Selector to record motor position in data gathering
      Status1Addr          =  M1       ; Status bit is stored in two words
      Status2Addr          =  M91
      PositionAddr         =  M211     ; Motor position register
      MotorModeAddr			=	M31		; Motor mode for IsHardwareBusy and IsAMotorFaulty flags processing
      HomeCaptureAddr      =  &H60     ; For data gathering - CERTAINLY NOT USED...

      [PHIRotationAxis.PHIMotor.Program]
	 Simulation       =  0			; No need to set to 1 when PhiMotor is simulated
         CoordinateSystem  =  1
         ProgNumber        =  1
         PrgFlagAddress    =  M401     ; Synchro flag for VB to know when it is finished
         PrgRetValAddress  =           ; For a homing program there are no parameters
         PrgParamAddress   =  
         PrgNumberOfParam  =  0        ; VB can pass parameters to a motion program
         PrgTimeOut        =  60       ; After timeout delay the application fires an error

[Analyser]
   [Analyser.AnalyserMotor]
	  Simulation           =  0
      CoordinateSystem     =  0
      MotorNumber          =  5
      Unit                 =  deg
      UnitRatio            =  142 ; 11377 pulse/deg
      MaxSpeedCts          =    3    
      Precision            =   1
      SmallStep            =  10
      LargeStep            =  45
      AngleOptimize        =  True
      Status1Addr          =  M5
      Status2Addr          =  M95
      PositionAddr         =  M215
      MotorModeAddr	   =	M35		; Motor mode for IsHardwareBusy and IsAMotorFaulty flags processing
      HomeCaptureAddr      =  

      ; WARNING PMAC PROGRAM NOT DEFINED FOR SLS in V1.0 (see PMAC File)
      ; BUT KEPT because of mAnalyserMotor.ReadConfiguration() VB Call
      [Analyser.AnalyserMotor.Program]
         Simulation        =  2
         PrgFlagAddress    =  
         PrgRetValAddress  =  
         PrgParamAddress   =  

[ApertureYZTable]
   [ApertureYZTable.ApertureYMotor]
      Simulation           =  0        
      CoordinateSystem     =  5
      MotorNumber          =  7
      Unit                 =  mm
      UnitRatio            =  121241.6
      MaxSpeedCts          =  201    ; Limite supérieure observée pas encore définie dans fichier de conf pmac - cf <Maximum Velocity (cnts/ms)> dans fichier PMAc -
      SmallStep            =  0.002;APS_NECAT: 0.002 +/- 1 um measured using Mahr comparator
      LargeStep            =  0.02; APS_NECAT: 0.02 +/- 1 um measured using Mahr comparator
      MinPosition          =  0 ; mm = 0.2 +0.165 - initialize i814 - Absolute PMac Position
									; 0.2 to avoid Aperture/Cam Lens collision  at Aperture high range position
									; 0.165 of deceldistsance with jogg command, cause Jogg command exist in motor joystick
      MaxPosition          =  2.90;   0.165 of deceldistsance not reported here to enlarge total range - 
								  ;		initialize i813 - Absolute PMac Position
	  Backlash             =  0.002
      Status1Addr          =  M7
      Status2Addr          =  M97
      PositionAddr         =  M217
      MotorModeAddr			=	M37		; Motor mode for IsHardwareBusy and IsAMotorFaulty flags processing
      HomeCaptureAddr      =  
      NeutralPosition		= 1.5 ; mm 0.3 ; 0 mm - Absolute PMac Position -  the ApY position in the coax cam whole axis
	  
      [ApertureYZTable.ApertureYMotor.Program]
         Simulation           =  0
         CoordinateSystem  =  5
         ProgNumber        =  7
         PrgFlagAddress    =  M407
         PrgRetValAddress  =  
         PrgParamAddress   =  
         PrgTimeOut        =  15		; 5 s Max time measured

   [ApertureYZTable.ApertureZMotor]
      Simulation           =  0	; TRACK 187  - TESTED OK for Synchronized Homing with = 1 and 2 (just GUI changes)      
      CoordinateSystem     =  5
      MotorNumber          =  8
      Unit                 =  mm
      UnitRatio            =  60620.8
      MaxSpeedCts          =  201      ; Limite supérieure observée pas encore définie dans fichier de conf pmac - cf <Maximum Velocity (cnts/ms)> dans fichier PMAc -
      SmallStep            =  0.002
      LargeStep            =  0.02
      MinPosition          =  0.1 ;mm  initialize i814 - Absolute PMac Position - ; 0.5 But ' <= 0' to afford homing command in MD2 GUI
      MaxPosition          =  80.6 ;mm  initialize i813 - Absolute PMac Position
      Backlash             =  0.005
      Status1Addr          =  M8
      Status2Addr          =  M98
      PositionAddr         =  M218
      MotorModeAddr			=	M38		; Motor mode for IsHardwareBusy and IsAMotorFaulty flags processing
      HomeCaptureAddr      =  
      NeutralPosition	   = 0 ; mm - Absolute PMac Position - could be 1.98 = HomeOffset8 / unit ratio 
	                                            
      [ApertureYZTable.ApertureZMotor.Program]
		Simulation           =  0	; TRACK 187
         CoordinateSystem  =  5
         ProgNumber        =  8
         PrgFlagAddress    =  M408
         PrgRetValAddress  =  
         PrgParamAddress   =  
         PrgTimeOut        =  30		; 24 s Max time measured

[CapillaryBSYZtable]
   [CapillaryBSYZtable.CapillaryBSYMotor]
      Simulation           =  0
           
      CoordinateSystem     =  5
      MotorNumber          =  9
      Unit                 =  mm
      UnitRatio            =  121241.6
      MaxSpeedCts          =     201      ; Limite supérieure observée pas encore définie dans fichier de conf pmac - cf <Maximum Velocity (cts/msec)> dans fichier PMAc -
      SmallStep            =  0.002; APS_NECAT: 0.002 +/- 1 um measured using Mahr comparator
      LargeStep            =  0.02; APS_NECAT: 0.02 +/- 1 um measured using Mahr comparator
      MinPosition          =  0.0	;;mm  initialize i814 - Absolute PMac Position ; - NeutralPosition + MinPosition > 0 => afford homing command in MD2 GUI
      MaxPosition          =  3.0	;mm	 initialize i813 - Absolute PMac Position - To avoid collision with SCI/Photodiode Arm
      Backlash             =  0.003
      Status1Addr          =  M9
      Status2Addr          =  M99
      PositionAddr         =  M219
      MotorModeAddr			=	M39		; Motor mode for IsHardwareBusy and IsAMotorFaulty flags processing
      HomeCaptureAddr      =  
      NeutralPosition	   = 1.5; mm - Absolute PMac Position - the CBS-Y position in the coax cam whole axis

      [CapillaryBSYZtable.CapillaryBSYMotor.Program]
		 Simulation        =  0           
         CoordinateSystem  =  5
         ProgNumber        =  9
         PrgFlagAddress    =  M409
         PrgRetValAddress  =  
         PrgParamAddress   =  
         PrgTimeOut        =  10

   [CapillaryBSYZtable.CapillaryBSZMotor]
      Simulation           =  0           
      CoordinateSystem     =  5
      MotorNumber          =  10
      Unit                 =  mm
      UnitRatio            =  19865.6    ; 2009-05-19 changed from 60620.8
      MaxSpeedCts          =    401      ; Limite supérieure observée pas encore définie dans fichier de conf pmac - cf <Maximum Velocity (cts/msec)> dans fichier PMAc -
      SmallStep            =  0.002; APS_NECAT: 0.002 +/- 1 um measured using Mahr comparator
      LargeStep            =  0.02; APS_NECAT: 0.026 mm measured using Mahr comparator
      MinPosition          =  0.0 ;mm   initialize i814 - Absolute PMac Position ( > HomeOffset10) ; 0.5 But ' <= 0' to afford homing command in MD2 GUI
      MaxPosition          = 81 ;mm  Checked for MRC with cover correctly inserted and MRC' cam (<=> beamstop) at full print in high pos
      Backlash             =  0.001
      Status1Addr          =  M10
      Status2Addr          =  M100
      PositionAddr         =  M220
      MotorModeAddr			=	M40		; Motor mode for IsHardwareBusy and IsAMotorFaulty flags processing
      HomeCaptureAddr      =  
      NeutralPosition		= 0 ; mm -Absolute PMac Position - could be 0.41 = HomeOffset10 / unit ratio

      [CapillaryBSYZtable.CapillaryBSZMotor.Program]
		 Simulation        =  0           
         CoordinateSystem  =  5
         ProgNumber        =  10
         PrgFlagAddress    =  M410
         PrgRetValAddress  =  
         PrgParamAddress   =  
         PrgTimeOut        =  25

[CentringXYTable] 
   [CentringXYTable.XCentringMotor] CHANGER HO dans prog 18 !!!!!
      Simulation           =  0 ; KB090518          
      CoordinateSystem     =  2
      MotorNumber          =  17
      Unit                 =  mm
      UnitRatio            =  182400 ; Theoric Ratio but Unit ratio of 187800 measured on A6BO-1 with the 200 um MarTest range
									; TODO ICI : To check with the 11 mm range KS along 5.02 mm range 
      ;?? measured at 15200 with 50 usteps using MarTest 800 SM along 0.2 mm range
      MaxSpeedCts          =      50     
      SmallStep            =  0.0005
      LargeStep            =  0.01
      MinPosition          = -2.30 ; with 182400    ; Checked APS_LSCAT_D - Specified as -2.5 mm
      MaxPosition          = +2.55 ; with 182400     ; Checked APS_LSCAT_D - Specified as +2.5 mm
      Backlash             =  0 ; TODO 0.004 ?	; Checked on A6BO-1 Centring Table with Phi = PhiRef - 90 deg = 85.6 deg
      Status1Addr          =  M17
      Status2Addr          =  M107
      PositionAddr         =  M227
      MotorModeAddr	   =  M47		; Motor mode for IsHardwareBusy and IsAMotorFaulty flags processing
      HomeCaptureAddr      =  
      StopSafetyMargin	  = 0.03
      NeutralPosition      = 2.594  ; KB 130327  NeutralPosition absent from MAATEL version

      [CentringXYTable.XCentringMotor.Program]
		Simulation        =  0 ; KB090518
         CoordinateSystem  =  2
         ProgNumber        =  17
         PrgFlagAddress    =  M417
         PrgRetValAddress  =  
         PrgParamAddress   =  
         PrgTimeOut        =  60

   [CentringXYTable.YCentringMotor]
      Simulation           =  0 ;  KB090518          
      CoordinateSystem     =  2
      MotorNumber          =  18
      Unit                 =  mm
      UnitRatio            =  182400 ; Theoric Ratio but Unit ratio of 215000 measured on A6BO-1 with the 200 um MarTest range
      ;?? measured at 165500 with 50 usteps using MarTest 800 SM along 0.2 mm range
      MaxSpeedCts          =     150      
      MaxSliderSpeedCts    =      50
      SmallStep            =  0.0005
      LargeStep            =  0.01
      MinPosition          = -2.55	; TODO ICI Checked on A6BO-1 Centring Table with PhiRef= 175.6 deg - Specified as -2.5 mm 	
      MaxPosition          = +2.35	; TODO ICI Checked on A6BO-1 Centring Table with PhiRef= 175.6 deg  - Specified as +2.5 mm
      Backlash             =  0.0 ; TODO 0.004 ? ; Checked on A6BO-1 Centring Table with PhiRef= 175.6 deg 
      Status1Addr          =  M18
      Status2Addr          =  M108
      PositionAddr         =  M228
      MotorModeAddr	   =  M48		; Motor mode for IsHardwareBusy and IsAMotorFaulty flags processing
      HomeCaptureAddr      =  
      StopSafetyMargin	   = 0.03
      NeutralPosition      = 2.626    ; KB 130327  NeutralPosition missing from MAATEL version

      [CentringXYTable.YCentringMotor.Program]
	 Simulation        =  0  ; KB090518
         CoordinateSystem  =  2
         ProgNumber        =  18
         PrgFlagAddress    =  M418
         PrgRetValAddress  =  
         PrgParamAddress   =  
         PrgTimeOut        =  60

   [CentringXYTable.JogProgram]
      Simulation        =  0 ; KB090518          
      CoordinateSystem     =  2
      ProgNumber           =  50
      PrgFlagAddress       =  M450
      PrgRetValAddress     =  
      PrgParamAddress      =  P170
      PrgNumberOfParam     =  2
		MaxSliderSpeedCts    =      2
		
   [CentringXYTable.XCentringOscilProgram]
	  Simulation        =  0 ; KB090518         
      CoordinateSystem     =  2
      ProgNumber           =  52
      PrgFlagAddress       =  M452	; M500 before MiniKappa trimming - Not used - Check M320 instead
      PrgRetValAddress     =  
      PrgParamAddress      =  
      XCentringOscilEn     =  M320

[MiniKappa]
	MiniKappaIsOK	=	M1025
   [MiniKappa.Kappa1]
      Simulation           =  0;   <========KB 090123
      CoordinateSystem     =  7
      MotorNumber          =  19
      Unit                 =  deg
      UnitRatio            =  2844.44444
      MaxSpeedCts          =    50
      MaxSliderSpeedCts    =    40      
      Precision            =   0.01
      SmallStep            =  10
      LargeStep            =  45
      MinPosition          =  -5 ; TODO
      MaxPosition          = 250
      Backlash             =   4 ; TODO
      DynamicMove          = 0.5
      RelaxDelay           = 0.5 ;sec
      RelaxMove            = 0.5
      Status1Addr          =  M19
      Status2Addr          =  M109
      PositionAddr         =  M229
      MotorModeAddr		   =  M49		; Motor mode for IsHardwareBusy and IsAMotorFaulty flags processing
      HomeCaptureAddr      =  
      StopSafetyMargin	  = 0.35
      NeutralPosition	  = 8

      [MiniKappa.Kappa1.Program]
         Simulation       = 0;  <==== KB 090123
         ;Signification de Simulation  =  x
            ;Moteur 
               ;simu: joystick non grise
               ;disable : joystick grise
            ;PRog
               ;simu: le bouton de homing est disponible
               ;disabled: le bouton homing disparait et p[as de homing possible (en Cold Start par exemple)
         CoordinateSystem  =  7
         ProgNumber        =  19
         PrgFlagAddress    =  M419
         PrgRetValAddress  =  
         PrgParamAddress   =
         PrgTimeOut        = 60 ; quite long if opened at maximum  

   [MiniKappa.Kappa2]
      Simulation           =  0;  <====== KB 090123
      CoordinateSystem     =  7
      MotorNumber          =  20
      Unit                 =  deg
      UnitRatio            =  711.11111
      MaxSpeedCts          =   50
      MaxSliderSpeedCts    =   40
      Precision            =  0.01
      SmallStep            = 10
      LargeStep            = 45
      Backlash             =  4 ; TODO
      DynamicMove          =  0.5
      RelaxDelay           =  0.5 ;sec
      RelaxMove            =  0.5
      AngleOptimize        =  True
      Status1Addr          =  M20
      Status2Addr          =  M110
      PositionAddr         =  M230
      MotorModeAddr	   =	M50		; Motor mode for IsHardwareBusy and IsAMotorFaulty flags processing
      HomeCaptureAddr      =  

      [MiniKappa.Kappa2.Program]
	 Simulation       =  0;  <====== KB 090123 
         CoordinateSystem  =  7
         ProgNumber        =  20
         PrgFlagAddress    =  M420
         PrgRetValAddress  =  
         PrgParamAddress   =  

[CryoCooler] ; Empty String to have them Simulated 
   CryoBack                =  M1102
   CryoIsFront             =  ; M1005
   CryoIsBack              =  M1006; Could be M1110  = 1^M1006 in PLC1 when IN6 CryoIsBack is normally closed 
   CryoFrontPushButtonIsOn =  M1002
   CryoBackPushButtonIsEnabled = P2100

[Ligthing] ; Backlight (ex Condenser)
   LightIntensityDAC       =  M1201
   CondenserOut            =  M1101
   CondenserIsOut          =  M1004
   CondenserIsIn           =  M1003
   DACMaxValue             =  &H4844 ; old value &H3F9A ; 16 bits DAC, 15 useful bits (for positive value only)


[FrontLigthing] ; Needs LED box
      LightIntensityDAC = M1200
      DACMaxValue       = &H7FFF ; 16 bits DAC  15 useful bits (for positive value only)
      Simulation	= 0
      
[PHIAxisXYZTable]
   [PHIAxisXYZTable.PHIXMotor]
      Simulation           =  0           
      CoordinateSystem     =  3
      MotorNumber          =  2
      Unit                 =  mm
      UnitRatio            =  60620.8
      MaxSpeedCts          =    121
      MaxSliderSpeedCts    =     34
      SmallStep            =  0.001
      LargeStep            =  0.01
      MinPosition          =  0.13;initialize i214 - Absolute PMac Position - ; can be '>= 0' cause NeutralPosition > MinPosition to afford homing command in MD2 GUI
      MaxPosition          = 6.43;initialize i213 - Absolute PMac Position
      Backlash             =  0.002
      Status1Addr          =  M2
      Status2Addr          =  M92
      PositionAddr         =  M212
      MotorModeAddr			=	M32		; Motor mode for IsHardwareBusy and IsAMotorFaulty flags processing
      HomeCaptureAddr      =  
      NeutralPosition	  =  0.8

      [PHIAxisXYZTable.PHIXMotor.Program]
         Simulation       =  0; 
         CoordinateSystem  =  3
         ProgNumber        =  2
         PrgFlagAddress    =  M402
         PrgRetValAddress  =  
         PrgParamAddress   =  
         PrgTimeOut        =  60

   [PHIAxisXYZTable.PHIYMotor]
      Simulation           =  0           
      CoordinateSystem     =  3
      MotorNumber          =  3
      Unit                 =  mm
      UnitRatio            =  60620.8
      MaxSpeedCts          =    121
      MaxSliderSpeedCts    =     34
      SmallStep            =   0.001
      LargeStep            =   0.01
      MinPosition          =  0.1;mm  = StopSafetyMargin initialize i314 - Absolute PMac Position - can be '>= 0' cause NeutralPosition > MinPosition to afford homing command in MD2 GUI
      MaxPosition          =  14.91;mm = HardLt+ - StopSafetyMargin  initialize i313 - Absolute PMac Position
      Backlash             =  0.001
      Status1Addr          =  M3
      Status2Addr          =  M93
      PositionAddr         =  M213
      MotorModeAddr			=	M33		; Motor mode for IsHardwareBusy and IsAMotorFaulty flags processing
      HomeCaptureAddr      =  
      NeutralPosition	  =  6.3

      [PHIAxisXYZTable.PHIYMotor.Program]
         Simulation       =  0       
         CoordinateSystem  =  3
         ProgNumber        =  3
         PrgFlagAddress    =  M403
         PrgRetValAddress  =  
         PrgParamAddress   =  
         PrgTimeOut        =  60

   [PHIAxisXYZTable.PHIZMotor]
      Simulation           =  0           
      CoordinateSystem     =  3
      MotorNumber          =  4
      Unit                 =  mm
      UnitRatio            =  60620.8
      MaxSpeedCts          =  121
      MaxSliderSpeedCts    =  34   
      SmallStep            =  0.001		; .0001 OK in Zoom 10 only
      LargeStep            =  0.01		; .001 OK in Zoom 10 only
      MinPosition          = 0,1;mm =  StopSafetyMargininitialize i814 - Absolute PMac Position -  can be '>= 0' cause NeutralPosition > MinPosition to afford homing command in MD2 GUI
      MaxPosition          = 6.38; mm = HardLt+ - StopSafetyMargin ; initialize i813 - Absolute PMac Position
      Backlash             =  0.002
      Status1Addr          =  M4
      Status2Addr          =  M94
      PositionAddr         =  M214
      MotorModeAddr			=	M34		; Motor mode for IsHardwareBusy and IsAMotorFaulty flags processing
      HomeCaptureAddr      =  
      NeutralPosition	  = 3.102
								 ; If changed, modify ZDefaultCentring_Z0, ZBeam_Z1 and ZScintillatorOut_Z2 in pref.ini

      [PHIAxisXYZTable.PHIZMotor.Program]
         Simulation       =  0       
         CoordinateSystem  =  3
         ProgNumber        =  4
         PrgFlagAddress    =  M404
         PrgRetValAddress  =  
         PrgParamAddress   =  
         PrgTimeOut        =  60

   [PHIAxisXYZTable.MoveTableProgram]
      Simulation       =  0       
      CoordinateSystem     =  3
      ProgNumber           =  54
      PrgFlagAddress       =  M454
      PrgRetValAddress     =  
      PrgParamAddress      =  P170
      PrgNumberOfParam     =  3

[ExternalPhotodiode]
   ADCSignalIn             =  M1302
   ADCGainBit0             =  M1130
   ADCGainBit1             =  M1131
   ; FOLLOWING VALUES HAVE BEEN COPIED FROM INTERNAL PHOTODIODE BENCHMARKING
   ; BECAUSE THEY DOT NOT DEPEND ON THE PHOTODIODE INTRINSICS BUT ON THE ADS and ADC CHARACTERISTICS
   MaxVoltage              =  8.5  
   ADCMaxValue             =  &H7FF ; NOT USED any more - See ADCMaxValue_G[0|1|2|3] values below
   ADCMaxValue_G0          =  &H7C0 ;; &H7FF ; Max measured value (laser ligthening) after ADS Ampli with Gain Factor = 1
   ADCMaxValue_G1          =  &H7B0 ;; &H6B0 ; Max measured value (laser ligthening) after ADS Ampli with Gain Factor = 10
   ADCMaxValue_G2          =  &H7B0 ;; &H6B0 ; Max measured value (laser ligthening) after ADS Ampli with Gain Factor = 100
   ADCMaxValue_G3          =  &H7B0 ;; &H6B0 ; Max measured value (laser ligthening) after ADS Ampli with Gain Factor = 1000
   ADCSlope_G0             =  215   ; vu pour Md2C Measured ADCValue/V ratio with Gain Factor = 1
   ADCSlope_G1             =  204   ; vu pour Md2C Measured ADCValue/V ratio with Gain Factor = 10
   ADCSlope_G2             =  204   ; TODO pour Md2C Measured ADCValue/V ratio with Gain Factor = 100
   ADCSlope_G3             =  202   ; vu pour Md2C Measured ADCValue/V ratio with Gain Factor = 1000
   V2I_G0                  =  1.0   ; mA/V
   V2I_G1                  =  0.1   ; mA/V
   V2I_G2                  =  0.01  ; mA/V
   V2I_G3                  =  0.001 ; mA/V
      

; photodiode interne
[ScintillatorPhotodiode]
   ScintillatorFocus       =  M1203
   ADCMaxValue             =  &H7FFE
   DryerOn                 =  M1103

   [ScintillatorPhotodiode.Zmotor]
      Simulation           =  0           
      CoordinateSystem     =  5
      MotorNumber          =  11
      Unit                 =  mm
      UnitRatio            =  19865.6
      MaxSpeedCts          =    151      
      SmallStep            =  0.002
      LargeStep            =  0.02
      MinPosition          =  0.2		; mm initialize i814 - Absolute PMac Position - ' <= 0' to afford homing command in MD2 GUI 
      MaxPosition          = 84   ; mm  initialize i813 - Absolute PMac Position - To avoid collision with Air Dryer 
      Status1Addr          =  M11
      Status2Addr          =  M101
      PositionAddr         =  M221
      MotorModeAddr			=	M41		; Motor mode for IsHardwareBusy and IsAMotorFaulty flags processing
      HomeCaptureAddr      =  
      NeutralPosition      = 2.014  ; KB 130327  NeutralPosition missing from MAATEL version

      [ScintillatorPhotodiode.Zmotor.Program]
        Simulation       =  0      
		CoordinateSystem  =  5
         ProgNumber        =  11
         PrgFlagAddress    =  M411
         PrgRetValAddress  =  
         PrgParamAddress   =  

   [ScintillatorPhotodiode.Photodiode]
      ADCSignalIn          =  M1301  
      ADCGainBit0          =  M1128
      ADCGainBit1          =  M1129
      MaxVoltage           =  8.5   ; NOT USED (we use the ADCSlope_G[0|1|2|3] values below)
      ADCMaxValue          =  &H6AE ;;&H7FF ; NOT USED any more - See ADCMaxValue_G[0|1|2|3] values below
      ADCMaxValue_G0       =  &H7C0 ;;&H7FF ; Max measured value (laser ligthening) after ADS Ampli with Gain Factor = 1
      ADCMaxValue_G1       =  &H7C0 ;;&H6B0 ; Max measured value (laser ligthening) after ADS Ampli with Gain Factor = 10
      ADCMaxValue_G2       =  &H7C0 ;;&H6B0 ; Max measured value (laser ligthening) after ADS Ampli with Gain Factor = 100
      ADCMaxValue_G3       =  &H7C0 ;;&H6B0 ; Max measured value (laser ligthening) after ADS Ampli with Gain Factor = 1000
      ADCSlope_G0          =  205   ; Measured ADCValue/V ratio with Gain Factor = 1  !!!!! TODO: MUST BE TUNNED
      ADCSlope_G1          =  205   ; Measured ADCValue/V ratio with Gain Factor = 10 !!!!! TODO: MUST BE TUNNED
      ADCSlope_G2          =  205   ; Measured ADCValue/V ratio with Gain Factor = 100
      ADCSlope_G3          =  205   ; Measured ADCValue/V ratio with Gain Factor = 1000
      V2I_G0               =  1.0   ; mA/V
      V2I_G1               =  0.1   ; mA/V
      V2I_G2               =  0.01  ; mA/V
      V2I_G3               =  0.001 ; mA/V

[Shutter]
   FastShutterIsOpen       =  M1048
   FastShutterScanEnable   =  M1124
   FastShutterManualEnable =  M1125
   FastShutterManualOn     =  M1126
   ; TODO MD2 PATCH BY LG to run Hard Config File in 1.6 - Should have been checked-in by EMBL somewhere
   FastShutterOpenHist     =  P3000
   FastShutterHasOpened    =  P3001
   FastShutterCloseHist	   =  P3003

   ;programing the compare registers 
   OpenShutterA            =  M3021
   OpenShutterB            =  M3022
   CloseShutterA           =  M3031
   CloseShutterB           =  M3032

   OpenShutterStateWriteEnable  = M3024
   OpenShutterState             = M3025
   CloseShutterStateWriteEnable = M3034
   CloseShutterState            = M3025


; WARNING: ARC is useless since MD2 V2.0 - PMAC definition reused by Coax Cam ZOOM in DC 1-1331 release
[Arc]	
   [Arc.ArcMotor]
      Simulation           =  2           
      CoordinateSystem     =  6
      MotorNumber          =  6
      Unit                 =  mm
      UnitRatio            =  1170
      MaxSpeedCts          =    41
      Precision            =  0.1
      SmallStep            =  2
      LargeStep            = 20
      MinPosition          =  0
      MaxPosition          =  150 ; a priori course max proche de 140
      Status1Addr          =  M6
      Status2Addr          =  M96
      PositionAddr         =  M216
      MotorModeAddr			=	M36		; Motor mode for IsHardwareBusy and IsAMotorFaulty flags processing
      HomeCaptureAddr      =  

      [Arc.ArcMotor.Program]
         Simulation       =  1             
         CoordinateSystem  =  6
         ProgNumber        =  6
         PrgFlagAddress    =  M406
         PrgRetValAddress  =  
         PrgParamAddress   =  

[CoaxZoom]
   [CoaxZoom.ZoomMotor]
      Simulation           =  0 ; TRACK 187 tested OK if = 1 or 2 (Hot and Cold Start and Phases operation ad Hardware Status Feedback )TRACK 187          
      CoordinateSystem     =  4
      MotorNumber          =  6 ;
      Unit                 =  cts
      UnitRatio            =  1  ; laisser 1 quelque soit le vrai ratio pulse/tour
      MaxSpeedCts          =  10 ; 200 with ST Motor
      Precision            =    100
      SmallStep            =   3700 ; -3700 for Limit- Capture
      LargeStep            =  20000 ; -20000 for Limit- Capture
      MinPosition          = 0; -35000 0 for Limit- Capture
      MaxPosition          = 37000; 0 for Limit- Capture
      Backlash             = 0 ; With new DC Burshless motor
      Status1Addr          =  M6
      Status2Addr          =  M96
      PositionAddr         =  M216
      MotorModeAddr			=	M36		; Motor mode for IsHardwareBusy and IsAMotorFaulty flags processing
      HomeCaptureAddr      =  
      NeutralPosition      = 500   ; KB 130327 NeutralPosition missing from original

      [CoaxZoom.ZoomMotor.Program]
         Simulation       =  0             
         CoordinateSystem  =  4
         ProgNumber        =  6
         PrgFlagAddress    =  M406
         PrgRetValAddress  =  
         PrgParamAddress   =  

[PMAC_GATHERING]
   ScanBaseAddr            =  M4000
   ScanPointerAddr         =  M4001

   [PMAC_GATHERING.SourceSelectMasks]
      PositionMotor1       =  &H1      ; (I5001)
      ;PositionMotor7      =  &H40     ; (I5007) ; unused
      ;PositionMotor8      =  &H80     ; (I5008) ; unused
      ;PositionMotor9      =  &H100    ; (I5009) ; unused
      ;PositionMotor10     =  &H200    ; (I5010) ; unused
      AnalogInput1         =  &H10000  ; (I5017)
      AnalogInput2         =  &H20000  ; (I5018)
      GateOutput           =  &H80000  ; (I5020)
      PHIAxisFollowingError = &H100000 ; (I5021)

   ;on collecte parfois d'autres infos aux adresses des sources a collecter
   ;le masque permet de garder uniquement la partie significative
   [PMAC_GATHERING.DataMasks]
      PositionMotor1       =  ; pas de masque : 48 bits significatifs
      PositionMotor10      =  ; pas de masque : 48 bits significatifs
      PositionMotor11      =  ; pas de masque : 48 bits significatifs
      PositionMotor12      =  ; pas de masque : 48 bits significatifs
      PositionMotor13      =  ; pas de masque : 48 bits significatifs
      AnalogInput          =  &HFFF000     ; NOT FOR REVISION D <- &H3FF800 ; pour tous les ADC
      ;GateOutput          =  &H4000       ;  sur le bit 14 <=> entrée ENCC2
      GateOutput           =  &H100        ;  sur le bit  8 <=> entrée 11C
      ;GateOutput          =  &H200        ;  sur le bit  9     Pour Test
      PHIAxisFollowingError = ; pas de masque : 48 bits significatifs

   [PMAC_GATHERING.GateProgram]
	  Simulation			= 0		; TRACK 187 Needs to set to 1 when PhiMotor is simulated
      CoordinateSystem     =  1
      ProgNumber           =  31
      PrgFlagAddress       =  M431
      PrgRetValAddress     =  
      PrgParamAddress      =  P169
      PrgNumberOfParam     =  12
      PrgTimeOut           =  30 ; in addition to normal DC time computed with parameters

   [PMAC_GATHERING.ScanProgram]
      CoordinateSystem     =  5
      ProgNumber           =  34
      PrgFlagAddress       =  M434
      PrgRetValAddress     =  
      PrgParamAddress      =  P169
      PrgNumberOfParam     =  5
      PrgTimeOut           =  120

[SampleChangerInterface]
   ; pcsc-bm14 link OK with bm14md2 host (basic test: pin length setting MD2 -> SC)
   ; 2 different PC hosts -> SCRemotingInterfaceURL  =  tcp://pcsc-bm14:8005/SampleChanger_DeviceInterface
   ; Merged on same PC - Test OK with TANGO 1.5.3
   SCRemotingInterfaceURL  =  tcp://localhost:8005/SampleChanger_DeviceInterface  ;tcp://pcsc-bm14:8005/SampleChanger_DeviceInterface
   
   SCEnabled               =  P200
   SCLoadingStateRequest   =  M1020
   SCUnloadingStateRequest =  M1023
   SCMoveCryoBackRequest   =  M1021
   SCSampleMagnetControl   =  M1022
   SCTransferStateIsOn     =  M1140
   SCSafetySwitchChain     =  ; Not defined
   SCSampleIsDetected      =  ; Not implemented
   SCArmIsParked	   =  ; Simulated - M1027

[ExternalIO]
   FrequencyInput          =  &HB4

[FluoDetector] ; Empty String to have them Simulated 
   FluoDetectorFront       =  M1104 ; Bit = 0 to move Back fluo detector
   FluoDetectorIsFront     =  ;M1007 ; Not used !
   FluoDetectorIsBack      =  M1008  ; M1108  = 1^M1008 in PLC1 when IN8 FluoDetectorIsBack is inverted 

[JAICamera]
   Simulation  =  0
   COMPort     =  1


[LaserUV] ; Empty String to have them Simulated 
   Simulation        = 1
   MirrorFront		 = M1109
   MirrorIsBack      = M1032
   ShutterOpen       = M1111
   ReqSynchroImage   = M1107
