\hypertarget{pgpmac_8h}{\section{pgpmac.\-h File Reference}
\label{pgpmac_8h}\index{pgpmac.\-h@{pgpmac.\-h}}
}


Headers for the entire pgpmac project.  


{\ttfamily \#include $<$stdio.\-h$>$}\\*
{\ttfamily \#include $<$stdlib.\-h$>$}\\*
{\ttfamily \#include $<$unistd.\-h$>$}\\*
{\ttfamily \#include $<$sys/types.\-h$>$}\\*
{\ttfamily \#include $<$sys/socket.\-h$>$}\\*
{\ttfamily \#include $<$netdb.\-h$>$}\\*
{\ttfamily \#include $<$string.\-h$>$}\\*
{\ttfamily \#include $<$netinet/in.\-h$>$}\\*
{\ttfamily \#include $<$errno.\-h$>$}\\*
{\ttfamily \#include $<$poll.\-h$>$}\\*
{\ttfamily \#include $<$libpq-\/fe.\-h$>$}\\*
{\ttfamily \#include $<$ncurses.\-h$>$}\\*
{\ttfamily \#include $<$math.\-h$>$}\\*
{\ttfamily \#include $<$pthread.\-h$>$}\\*
{\ttfamily \#include $<$signal.\-h$>$}\\*
{\ttfamily \#include $<$sys/signalfd.\-h$>$}\\*
{\ttfamily \#include $<$sys/time.\-h$>$}\\*
{\ttfamily \#include $<$time.\-h$>$}\\*
{\ttfamily \#include $<$getopt.\-h$>$}\\*
{\ttfamily \#include $<$regex.\-h$>$}\\*
{\ttfamily \#include $<$hiredis/hiredis.\-h$>$}\\*
{\ttfamily \#include $<$hiredis/async.\-h$>$}\\*
{\ttfamily \#include $<$search.\-h$>$}\\*
\subsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structlsredis__obj__struct}{lsredis\-\_\-obj\-\_\-struct}
\begin{DoxyCompactList}\small\item\em Redis Object Basic object whose value is sychronized with our redis db. \end{DoxyCompactList}\item 
struct \hyperlink{structtagEthernetCmd}{tag\-Ethernet\-Cmd}
\begin{DoxyCompactList}\small\item\em P\-M\-A\-C ethernet packet definition. \end{DoxyCompactList}\item 
struct \hyperlink{structlspmac__cmd__queue__struct}{lspmac\-\_\-cmd\-\_\-queue\-\_\-struct}
\begin{DoxyCompactList}\small\item\em P\-M\-A\-C command queue item. \end{DoxyCompactList}\item 
struct \hyperlink{structlspmac__motor__struct}{lspmac\-\_\-motor\-\_\-struct}
\begin{DoxyCompactList}\small\item\em Motor information. \end{DoxyCompactList}\item 
struct \hyperlink{structlspmac__bi__struct}{lspmac\-\_\-bi\-\_\-struct}
\begin{DoxyCompactList}\small\item\em Storage for binary inputs. \end{DoxyCompactList}\item 
struct \hyperlink{structlspg__getcenter__struct}{lspg\-\_\-getcenter\-\_\-struct}
\begin{DoxyCompactList}\small\item\em Storage for getcenter query Used for the md2 R\-O\-T\-A\-T\-E command that generates the centering movies. \end{DoxyCompactList}\item 
struct \hyperlink{structlspg__nextshot__struct}{lspg\-\_\-nextshot\-\_\-struct}
\begin{DoxyCompactList}\small\item\em Storage definition for nextshot query. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{pgpmac_8h_a369266c24eacffb87046522897a570d5}{\-\_\-\-G\-N\-U\-\_\-\-S\-O\-U\-R\-C\-E}
\item 
\#define \hyperlink{pgpmac_8h_a3bae94e8e4e4347dd5f87b6bda058de6}{L\-S\-\_\-\-D\-I\-S\-P\-L\-A\-Y\-\_\-\-W\-I\-N\-D\-O\-W\-\_\-\-H\-E\-I\-G\-H\-T}~8
\begin{DoxyCompactList}\small\item\em Number of status box rows. \end{DoxyCompactList}\item 
\#define \hyperlink{pgpmac_8h_a1f96754f00a1f82414cebc66f75ded78}{L\-S\-\_\-\-D\-I\-S\-P\-L\-A\-Y\-\_\-\-W\-I\-N\-D\-O\-W\-\_\-\-W\-I\-D\-T\-H}~24
\begin{DoxyCompactList}\small\item\em Number of status box columns. \end{DoxyCompactList}\item 
\#define \hyperlink{pgpmac_8h_a3a8ef1b4b5994d6dd12bf74454ea891b}{L\-S\-\_\-\-P\-G\-\_\-\-Q\-U\-E\-R\-Y\-\_\-\-S\-T\-R\-I\-N\-G\-\_\-\-L\-E\-N\-G\-T\-H}~1024
\begin{DoxyCompactList}\small\item\em Fixed length postgresql query strings. Queries should all be function calls so this is not as weird as one might think. \end{DoxyCompactList}\item 
\#define \hyperlink{pgpmac_8h_ab61d790b5572f116e091babfda53627b}{L\-S\-E\-V\-E\-N\-T\-S\-\_\-\-E\-V\-E\-N\-T\-\_\-\-L\-E\-N\-G\-T\-H}~32
\begin{DoxyCompactList}\small\item\em Fixed length for event names\-: simplifies string handling. \end{DoxyCompactList}\item 
\#define \hyperlink{pgpmac_8h_a30f0f377b0f0695284145d420ea51846}{M\-D2\-C\-M\-D\-S\-\_\-\-C\-M\-D\-\_\-\-L\-E\-N\-G\-T\-H}~32
\end{DoxyCompactItemize}
\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef struct \hyperlink{structlsredis__obj__struct}{lsredis\-\_\-obj\-\_\-struct} \hyperlink{pgpmac_8h_ad449de06d02791adf2498d2a1e1f909c}{lsredis\-\_\-obj\-\_\-t}
\begin{DoxyCompactList}\small\item\em Redis Object Basic object whose value is sychronized with our redis db. \end{DoxyCompactList}\item 
typedef struct \hyperlink{structtagEthernetCmd}{tag\-Ethernet\-Cmd} \hyperlink{pgpmac_8h_a2d163436571135a457f4a4e2fbd09633}{pmac\-\_\-cmd\-\_\-t}
\begin{DoxyCompactList}\small\item\em P\-M\-A\-C ethernet packet definition. \end{DoxyCompactList}\item 
typedef struct \\*
\hyperlink{structlspmac__cmd__queue__struct}{lspmac\-\_\-cmd\-\_\-queue\-\_\-struct} \hyperlink{pgpmac_8h_a99c275e32ad897dca34d196b91f038cb}{pmac\-\_\-cmd\-\_\-queue\-\_\-t}
\begin{DoxyCompactList}\small\item\em P\-M\-A\-C command queue item. \end{DoxyCompactList}\item 
typedef struct \hyperlink{structlspmac__motor__struct}{lspmac\-\_\-motor\-\_\-struct} \hyperlink{pgpmac_8h_aa5067fcbaabc5bbfdc52492495518c96}{lspmac\-\_\-motor\-\_\-t}
\begin{DoxyCompactList}\small\item\em Motor information. \end{DoxyCompactList}\item 
typedef struct \hyperlink{structlspmac__bi__struct}{lspmac\-\_\-bi\-\_\-struct} \hyperlink{pgpmac_8h_ac48984832ef73cf145e5f08bc65bd3a0}{lspmac\-\_\-bi\-\_\-t}
\begin{DoxyCompactList}\small\item\em Storage for binary inputs. \end{DoxyCompactList}\item 
typedef struct \\*
\hyperlink{structlspg__getcenter__struct}{lspg\-\_\-getcenter\-\_\-struct} \hyperlink{pgpmac_8h_a48b627e412dd038c1f17cdb0501eec33}{lspg\-\_\-getcenter\-\_\-t}
\begin{DoxyCompactList}\small\item\em Storage for getcenter query Used for the md2 R\-O\-T\-A\-T\-E command that generates the centering movies. \end{DoxyCompactList}\item 
typedef struct \hyperlink{structlspg__nextshot__struct}{lspg\-\_\-nextshot\-\_\-struct} \hyperlink{pgpmac_8h_a17ea2bf07a0b3b892baa00bd392607b3}{lspg\-\_\-nextshot\-\_\-t}
\begin{DoxyCompactList}\small\item\em Storage definition for nextshot query. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
double \hyperlink{pgpmac_8h_a6a1b639686b771c1213b6e23716a7898}{lspmac\-\_\-get\-Position} (\hyperlink{pgpmac_8h_aa5067fcbaabc5bbfdc52492495518c96}{lspmac\-\_\-motor\-\_\-t} $\ast$)
\begin{DoxyCompactList}\small\item\em get the motor position (with locking) \end{DoxyCompactList}\item 
void \hyperlink{pgpmac_8h_a76b11c62b122ee0fd8399435d4260681}{Pmac\-Sock\-Sendline} (char $\ast$s)
\item 
void \hyperlink{pgpmac_8h_a7762ca7b97b44b979e23ce88ca3b4249}{pgpmac\-\_\-printf} (char $\ast$fmt,...)
\begin{DoxyCompactList}\small\item\em Terminal output routine ala printf. \end{DoxyCompactList}\item 
char $\ast$$\ast$ \hyperlink{pgpmac_8h_a4ee000bfeef9380d479464a9500af311}{lspg\-\_\-array2ptrs} (char $\ast$)
\begin{DoxyCompactList}\small\item\em returns a null terminated list of strings parsed from postgresql array \end{DoxyCompactList}\item 
void \hyperlink{pgpmac_8h_a8a77972df14166e05c94ed0792baa09b}{lspg\-\_\-init} ()
\begin{DoxyCompactList}\small\item\em Initiallize the lspg module. \end{DoxyCompactList}\item 
void \hyperlink{pgpmac_8h_a1adfdb5ca9fdb5060849d726bf540117}{lspg\-\_\-run} ()
\begin{DoxyCompactList}\small\item\em Start 'er runnin'. \end{DoxyCompactList}\item 
void \hyperlink{pgpmac_8h_a4253474d4dd305aec0afdd5552b3ddd5}{lspg\-\_\-seq\-\_\-run\-\_\-prep\-\_\-all} (long long skey, double \hyperlink{pgpmac_8h_a0be79ccb7ebf3a665248fd856112b9fd}{kappa}, double \hyperlink{pgpmac_8h_ac8070dc568ad974a3db42b51eca828cc}{phi}, double cx, double cy, double ax, double ay, double az)
\begin{DoxyCompactList}\small\item\em Convinence function to call seq run prep. \end{DoxyCompactList}\item 
void \hyperlink{pgpmac_8h_a95e3fd7c1685d7e6ab6d0a295ab42f78}{lspg\-\_\-zoom\-\_\-lut\-\_\-call} ()
\item 
void \hyperlink{pgpmac_8h_ae3e30b0ba9b5d5a291fa29b77ba920d8}{lspmac\-\_\-init} (int, int)
\begin{DoxyCompactList}\small\item\em Initialize this module. \end{DoxyCompactList}\item 
void \hyperlink{pgpmac_8h_a3a7fb93fb3fb9c4454613f30bfb0b1ee}{lspmac\-\_\-run} ()
\begin{DoxyCompactList}\small\item\em find a postion for a given preset name \end{DoxyCompactList}\item 
void \hyperlink{pgpmac_8h_a6809c317931c4af226e0a0217764afae}{lspmac\-\_\-move\-\_\-or\-\_\-jog\-\_\-queue} (\hyperlink{pgpmac_8h_aa5067fcbaabc5bbfdc52492495518c96}{lspmac\-\_\-motor\-\_\-t} $\ast$, double, int)
\item 
void \hyperlink{pgpmac_8h_adeec17e53dfc490f2a954b97fe95f0a7}{lspmac\-\_\-move\-\_\-or\-\_\-jog\-\_\-preset\-\_\-queue} (\hyperlink{pgpmac_8h_aa5067fcbaabc5bbfdc52492495518c96}{lspmac\-\_\-motor\-\_\-t} $\ast$, char $\ast$, int)
\begin{DoxyCompactList}\small\item\em move using a preset value \end{DoxyCompactList}\item 
void \hyperlink{pgpmac_8h_af9edebb71a4ebca5dad3df63164e2004}{lspmac\-\_\-moveabs\-\_\-queue} (\hyperlink{pgpmac_8h_aa5067fcbaabc5bbfdc52492495518c96}{lspmac\-\_\-motor\-\_\-t} $\ast$, double)
\begin{DoxyCompactList}\small\item\em Use coordinate system motion program, if available, to move motor to requested position. \end{DoxyCompactList}\item 
void \hyperlink{pgpmac_8h_a62273d5e9fd9a14838f4126fb94a5138}{lspmac\-\_\-jogabs\-\_\-queue} (\hyperlink{pgpmac_8h_aa5067fcbaabc5bbfdc52492495518c96}{lspmac\-\_\-motor\-\_\-t} $\ast$, double)
\begin{DoxyCompactList}\small\item\em Use jog to move motor to requested position. \end{DoxyCompactList}\item 
\hyperlink{pgpmac_8h_a99c275e32ad897dca34d196b91f038cb}{pmac\-\_\-cmd\-\_\-queue\-\_\-t} $\ast$ \hyperlink{pgpmac_8h_aa30460bcac93f4ba19934ae19adad0ba}{lspmac\-\_\-\-Sock\-Sendline} (char $\ast$,...)
\begin{DoxyCompactList}\small\item\em Send a one line command. \end{DoxyCompactList}\item 
void \hyperlink{pgpmac_8h_adf63440ffbc65024fef87ea6a11ea8b0}{lsupdate\-\_\-init} ()
\item 
void \hyperlink{pgpmac_8h_a0851b1baecda6a67993efde41d77b1c1}{md2cmds\-\_\-init} ()
\begin{DoxyCompactList}\small\item\em Initialize the md2cmds module. \end{DoxyCompactList}\item 
void \hyperlink{pgpmac_8h_aa62da7d423952334d41c7d282f45233d}{md2cmds\-\_\-run} ()
\begin{DoxyCompactList}\small\item\em Start up the thread. \end{DoxyCompactList}\item 
void \hyperlink{pgpmac_8h_af219e9b2cc124f109aa4c2c2e16b5d07}{lsupdate\-\_\-run} ()
\item 
void \hyperlink{pgpmac_8h_af19a77187e7406fc87d36bd26e672e6d}{lsevents\-\_\-init} ()
\begin{DoxyCompactList}\small\item\em Initialize this module. \end{DoxyCompactList}\item 
void \hyperlink{pgpmac_8h_a4ddde538b603e3d4580ae9356bf9b89d}{lsevents\-\_\-run} ()
\begin{DoxyCompactList}\small\item\em Start up the thread and get out of the way. \end{DoxyCompactList}\item 
void \hyperlink{pgpmac_8h_a3661dfc51537c05b11f4fd184fdff07d}{lsevents\-\_\-send\-\_\-event} (char $\ast$,...)
\begin{DoxyCompactList}\small\item\em Call the callback routines for the given event. \end{DoxyCompactList}\item 
void \hyperlink{pgpmac_8h_aac89b916c1152c44042875feac35a9e4}{lsevents\-\_\-add\-\_\-listener} (char $\ast$, void($\ast$cb)(char $\ast$))
\begin{DoxyCompactList}\small\item\em Add a callback routine to listen for a specific event. \end{DoxyCompactList}\item 
void \hyperlink{pgpmac_8h_a024b08c7820bb31c3d5b8f281e07f3e8}{lsevents\-\_\-remove\-\_\-listener} (char $\ast$, void($\ast$cb)(char $\ast$))
\begin{DoxyCompactList}\small\item\em Remove a listener previously added with lsevents\-\_\-add\-\_\-listener. \end{DoxyCompactList}\item 
void \hyperlink{pgpmac_8h_a8cd37a8fb0f061456456a5d79bdd5189}{lstimer\-\_\-init} ()
\begin{DoxyCompactList}\small\item\em Initialize the timer list and pthread stuff. \end{DoxyCompactList}\item 
void \hyperlink{pgpmac_8h_a0b918acc1a4bf737cb62b5a70f8b553a}{lstimer\-\_\-run} ()
\begin{DoxyCompactList}\small\item\em Start up our thread. \end{DoxyCompactList}\item 
void \hyperlink{pgpmac_8h_af712dd2e9419026eff2762ba062eeaf1}{lstimer\-\_\-add\-\_\-timer} (char $\ast$, int, unsigned long int, unsigned long int)
\begin{DoxyCompactList}\small\item\em Create a timer. \end{DoxyCompactList}\item 
void \hyperlink{pgpmac_8h_aef0f12fda57e476a50b14acdc9f30b58}{lsredis\-\_\-init} (char $\ast$pub, char $\ast$re, char $\ast$head)
\begin{DoxyCompactList}\small\item\em Initialize this module, that is, set up the connections. \end{DoxyCompactList}\item 
void \hyperlink{pgpmac_8h_ad438e4368d86bbe15a93dcf86deaded5}{lsredis\-\_\-run} ()
\item 
\hyperlink{pgpmac_8h_ad449de06d02791adf2498d2a1e1f909c}{lsredis\-\_\-obj\-\_\-t} $\ast$ \hyperlink{pgpmac_8h_a6d9f550b9ba36acd237925164abe3ffc}{lsredis\-\_\-get\-\_\-obj} (char $\ast$,...)
\item 
char $\ast$ \hyperlink{pgpmac_8h_ac1994e56114b2315294527d76311f829}{lsredis\-\_\-getstr} (\hyperlink{pgpmac_8h_ad449de06d02791adf2498d2a1e1f909c}{lsredis\-\_\-obj\-\_\-t} $\ast$p)
\begin{DoxyCompactList}\small\item\em return a copy of the key's string value \end{DoxyCompactList}\item 
double \hyperlink{pgpmac_8h_aa8daf63b794b6b6341018feec205cb7d}{lsredis\-\_\-getd} (\hyperlink{pgpmac_8h_ad449de06d02791adf2498d2a1e1f909c}{lsredis\-\_\-obj\-\_\-t} $\ast$p)
\item 
long int \hyperlink{pgpmac_8h_a1923f998441f4f451204dfd214d52218}{lsredis\-\_\-getl} (\hyperlink{pgpmac_8h_ad449de06d02791adf2498d2a1e1f909c}{lsredis\-\_\-obj\-\_\-t} $\ast$p)
\item 
char $\ast$$\ast$ \hyperlink{pgpmac_8h_abe31d0e11c41b2235307612c963bb652}{lsredis\-\_\-get\-\_\-string\-\_\-array} (\hyperlink{pgpmac_8h_ad449de06d02791adf2498d2a1e1f909c}{lsredis\-\_\-obj\-\_\-t} $\ast$p)
\item 
int \hyperlink{pgpmac_8h_abbb4e5ece19ebd130e1be18036752a08}{lsredis\-\_\-getb} (\hyperlink{pgpmac_8h_ad449de06d02791adf2498d2a1e1f909c}{lsredis\-\_\-obj\-\_\-t} $\ast$p)
\item 
int \hyperlink{pgpmac_8h_a9fc8fd0db4c71c5eae68682b43103078}{lsredis\-\_\-cmpstr} (\hyperlink{pgpmac_8h_ad449de06d02791adf2498d2a1e1f909c}{lsredis\-\_\-obj\-\_\-t} $\ast$p, char $\ast$s)
\item 
int \hyperlink{pgpmac_8h_ac58fca47533e695c8775e0d2b9128766}{lsredis\-\_\-regexec} (const regex\-\_\-t $\ast$preg, \hyperlink{pgpmac_8h_ad449de06d02791adf2498d2a1e1f909c}{lsredis\-\_\-obj\-\_\-t} $\ast$p, size\-\_\-t nmatch, regmatch\-\_\-t $\ast$pmatch, int eflags)
\item 
int \hyperlink{pgpmac_8h_ac356cd43e46799929242dcf5214df7f6}{lsredis\-\_\-cmpnstr} (\hyperlink{pgpmac_8h_ad449de06d02791adf2498d2a1e1f909c}{lsredis\-\_\-obj\-\_\-t} $\ast$p, char $\ast$s, int n)
\item 
int \hyperlink{pgpmac_8h_a1ad60526a09ca679f39174ce5d773abe}{lsredis\-\_\-find\-\_\-preset} (char $\ast$base, char $\ast$preset\-\_\-name, double $\ast$dval)
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\hyperlink{pgpmac_8h_a48b627e412dd038c1f17cdb0501eec33}{lspg\-\_\-getcenter\-\_\-t} \hyperlink{pgpmac_8h_a7ef8a09203117578c9b2ce4719519f36}{lspg\-\_\-getcenter}
\begin{DoxyCompactList}\small\item\em the getcenter object \end{DoxyCompactList}\item 
\hyperlink{pgpmac_8h_a17ea2bf07a0b3b892baa00bd392607b3}{lspg\-\_\-nextshot\-\_\-t} \hyperlink{pgpmac_8h_ad8d8e2f578ca79189a80c1fd5b60cefd}{lspg\-\_\-nextshot}
\begin{DoxyCompactList}\small\item\em the nextshot object \end{DoxyCompactList}\item 
\hyperlink{pgpmac_8h_aa5067fcbaabc5bbfdc52492495518c96}{lspmac\-\_\-motor\-\_\-t} \hyperlink{pgpmac_8h_aebfce5f9cbc8ba7bd4e2ee4880f303e8}{lspmac\-\_\-motors} \mbox{[}$\,$\mbox{]}
\begin{DoxyCompactList}\small\item\em All our motors. \end{DoxyCompactList}\item 
\hyperlink{pgpmac_8h_aa5067fcbaabc5bbfdc52492495518c96}{lspmac\-\_\-motor\-\_\-t} $\ast$ \hyperlink{pgpmac_8h_a8237e646ce032a840637a4ef7bff49b9}{omega}
\begin{DoxyCompactList}\small\item\em M\-D2 omega axis (the air bearing) \end{DoxyCompactList}\item 
\hyperlink{pgpmac_8h_aa5067fcbaabc5bbfdc52492495518c96}{lspmac\-\_\-motor\-\_\-t} $\ast$ \hyperlink{pgpmac_8h_a6cb218bdccfe5a93471c161f15a15cab}{alignx}
\begin{DoxyCompactList}\small\item\em Alignment stage X. \end{DoxyCompactList}\item 
\hyperlink{pgpmac_8h_aa5067fcbaabc5bbfdc52492495518c96}{lspmac\-\_\-motor\-\_\-t} $\ast$ \hyperlink{pgpmac_8h_a737c246c3948e644a18d191a931e1acd}{aligny}
\begin{DoxyCompactList}\small\item\em Alignment stage Y. \end{DoxyCompactList}\item 
\hyperlink{pgpmac_8h_aa5067fcbaabc5bbfdc52492495518c96}{lspmac\-\_\-motor\-\_\-t} $\ast$ \hyperlink{pgpmac_8h_ae7642b1da0f7c7f8448104c691d40a12}{alignz}
\begin{DoxyCompactList}\small\item\em Alignment stage X. \end{DoxyCompactList}\item 
\hyperlink{pgpmac_8h_aa5067fcbaabc5bbfdc52492495518c96}{lspmac\-\_\-motor\-\_\-t} $\ast$ \hyperlink{pgpmac_8h_aa90d2363b744acbd4d45133b7a716d8f}{anal}
\begin{DoxyCompactList}\small\item\em Polaroid analyzer motor. \end{DoxyCompactList}\item 
\hyperlink{pgpmac_8h_aa5067fcbaabc5bbfdc52492495518c96}{lspmac\-\_\-motor\-\_\-t} $\ast$ \hyperlink{pgpmac_8h_ad53a42cfaa04eff0336a44c8c9986333}{zoom}
\begin{DoxyCompactList}\small\item\em Optical zoom. \end{DoxyCompactList}\item 
\hyperlink{pgpmac_8h_aa5067fcbaabc5bbfdc52492495518c96}{lspmac\-\_\-motor\-\_\-t} $\ast$ \hyperlink{pgpmac_8h_a139200ddaa9856a7ffcec0e6cbaa8f1b}{apery}
\begin{DoxyCompactList}\small\item\em Aperture Y. \end{DoxyCompactList}\item 
\hyperlink{pgpmac_8h_aa5067fcbaabc5bbfdc52492495518c96}{lspmac\-\_\-motor\-\_\-t} $\ast$ \hyperlink{pgpmac_8h_ab93bd6ee850b285ca3a95e64d15e9477}{aperz}
\begin{DoxyCompactList}\small\item\em Aperture Z. \end{DoxyCompactList}\item 
\hyperlink{pgpmac_8h_aa5067fcbaabc5bbfdc52492495518c96}{lspmac\-\_\-motor\-\_\-t} $\ast$ \hyperlink{pgpmac_8h_a51358daaea8b5236f08414877d8af6c2}{capy}
\begin{DoxyCompactList}\small\item\em Capillary Y. \end{DoxyCompactList}\item 
\hyperlink{pgpmac_8h_aa5067fcbaabc5bbfdc52492495518c96}{lspmac\-\_\-motor\-\_\-t} $\ast$ \hyperlink{pgpmac_8h_aa45f268d0af9f3d465acfab128919718}{capz}
\begin{DoxyCompactList}\small\item\em Capillary Z. \end{DoxyCompactList}\item 
\hyperlink{pgpmac_8h_aa5067fcbaabc5bbfdc52492495518c96}{lspmac\-\_\-motor\-\_\-t} $\ast$ \hyperlink{pgpmac_8h_a589431b3a79c21c251fcb97cc9126991}{scint}
\begin{DoxyCompactList}\small\item\em Scintillator Z. \end{DoxyCompactList}\item 
\hyperlink{pgpmac_8h_aa5067fcbaabc5bbfdc52492495518c96}{lspmac\-\_\-motor\-\_\-t} $\ast$ \hyperlink{pgpmac_8h_ac940d950d9efeaf3f0ae67e9bf331188}{cenx}
\begin{DoxyCompactList}\small\item\em Centering Table X. \end{DoxyCompactList}\item 
\hyperlink{pgpmac_8h_aa5067fcbaabc5bbfdc52492495518c96}{lspmac\-\_\-motor\-\_\-t} $\ast$ \hyperlink{pgpmac_8h_aaed18e738ba7bfb6c771a44f5d7ea827}{ceny}
\begin{DoxyCompactList}\small\item\em Centering Table Y. \end{DoxyCompactList}\item 
\hyperlink{pgpmac_8h_aa5067fcbaabc5bbfdc52492495518c96}{lspmac\-\_\-motor\-\_\-t} $\ast$ \hyperlink{pgpmac_8h_a0be79ccb7ebf3a665248fd856112b9fd}{kappa}
\begin{DoxyCompactList}\small\item\em Kappa. \end{DoxyCompactList}\item 
\hyperlink{pgpmac_8h_aa5067fcbaabc5bbfdc52492495518c96}{lspmac\-\_\-motor\-\_\-t} $\ast$ \hyperlink{pgpmac_8h_ac8070dc568ad974a3db42b51eca828cc}{phi}
\begin{DoxyCompactList}\small\item\em Phi (not data collection axis) \end{DoxyCompactList}\item 
\hyperlink{pgpmac_8h_aa5067fcbaabc5bbfdc52492495518c96}{lspmac\-\_\-motor\-\_\-t} $\ast$ \hyperlink{pgpmac_8h_a26dec4623af9beed912b8e7e6f99822c}{fshut}
\begin{DoxyCompactList}\small\item\em Fast shutter. \end{DoxyCompactList}\item 
\hyperlink{pgpmac_8h_aa5067fcbaabc5bbfdc52492495518c96}{lspmac\-\_\-motor\-\_\-t} $\ast$ \hyperlink{pgpmac_8h_aeb09895663eff333b7a75acb319a9fc1}{flight}
\begin{DoxyCompactList}\small\item\em Front Light D\-A\-C. \end{DoxyCompactList}\item 
\hyperlink{pgpmac_8h_aa5067fcbaabc5bbfdc52492495518c96}{lspmac\-\_\-motor\-\_\-t} $\ast$ \hyperlink{pgpmac_8h_a85d6eaa4b4a82bb3112574f458d1dc50}{blight}
\begin{DoxyCompactList}\small\item\em Back Light D\-A\-C. \end{DoxyCompactList}\item 
\hyperlink{pgpmac_8h_aa5067fcbaabc5bbfdc52492495518c96}{lspmac\-\_\-motor\-\_\-t} $\ast$ \hyperlink{pgpmac_8h_a8a3ca6fcf5e24dcc26170736843e53b2}{fscint}
\begin{DoxyCompactList}\small\item\em Scintillator Piezo D\-A\-C. \end{DoxyCompactList}\item 
\hyperlink{pgpmac_8h_aa5067fcbaabc5bbfdc52492495518c96}{lspmac\-\_\-motor\-\_\-t} $\ast$ \hyperlink{pgpmac_8h_af813a2eff0b7efa4c70633559054e84c}{blight\-\_\-ud}
\begin{DoxyCompactList}\small\item\em Back light Up/\-Down actuator. \end{DoxyCompactList}\item 
\hyperlink{pgpmac_8h_aa5067fcbaabc5bbfdc52492495518c96}{lspmac\-\_\-motor\-\_\-t} $\ast$ \hyperlink{pgpmac_8h_a6630442dc65ce8a30a24ed718b301971}{flight\-\_\-oo}
\begin{DoxyCompactList}\small\item\em Turn front light on/off. \end{DoxyCompactList}\item 
\hyperlink{pgpmac_8h_aa5067fcbaabc5bbfdc52492495518c96}{lspmac\-\_\-motor\-\_\-t} $\ast$ \hyperlink{pgpmac_8h_af55c51d52c4586b647114f95d7ac1f42}{blight\-\_\-f}
\begin{DoxyCompactList}\small\item\em Back light scale factor. \end{DoxyCompactList}\item 
\hyperlink{pgpmac_8h_aa5067fcbaabc5bbfdc52492495518c96}{lspmac\-\_\-motor\-\_\-t} $\ast$ \hyperlink{pgpmac_8h_aabf4ec595b5183c1777d029ca56134b0}{flight\-\_\-f}
\begin{DoxyCompactList}\small\item\em Front light scale factor. \end{DoxyCompactList}\item 
\hyperlink{pgpmac_8h_aa5067fcbaabc5bbfdc52492495518c96}{lspmac\-\_\-motor\-\_\-t} $\ast$ \hyperlink{pgpmac_8h_ae78d9a757d4c85419fff9c94b15e25d7}{cryo}
\begin{DoxyCompactList}\small\item\em Move the cryostream towards or away from the crystal. \end{DoxyCompactList}\item 
\hyperlink{pgpmac_8h_aa5067fcbaabc5bbfdc52492495518c96}{lspmac\-\_\-motor\-\_\-t} $\ast$ \hyperlink{pgpmac_8h_a9d9c5030d817483ca9518027c91adac4}{dryer}
\begin{DoxyCompactList}\small\item\em blow air on the scintilator to dry it off \end{DoxyCompactList}\item 
\hyperlink{pgpmac_8h_aa5067fcbaabc5bbfdc52492495518c96}{lspmac\-\_\-motor\-\_\-t} $\ast$ \hyperlink{pgpmac_8h_addb26c80065506faa1de3c1b468fe03f}{fluo}
\begin{DoxyCompactList}\small\item\em Move the fluorescence detector in/out. \end{DoxyCompactList}\item 
int \hyperlink{pgpmac_8h_a56260f012c50a591ee7f97e500f16994}{lspmac\-\_\-nmotors}
\begin{DoxyCompactList}\small\item\em The number of motors we manage. \end{DoxyCompactList}\item 
struct timespec \hyperlink{pgpmac_8h_ae6631a094accc469661805bdf80fc6d8}{omega\-\_\-zero\-\_\-time}
\begin{DoxyCompactList}\small\item\em Time we believe that omega crossed zero. \end{DoxyCompactList}\item 
W\-I\-N\-D\-O\-W $\ast$ \hyperlink{pgpmac_8h_a65daf0f4a5bc6def23a9df98ff5ca57e}{term\-\_\-output}
\begin{DoxyCompactList}\small\item\em place to print stuff out \end{DoxyCompactList}\item 
W\-I\-N\-D\-O\-W $\ast$ \hyperlink{pgpmac_8h_ab0487111dbe3c05d0bd835eb2fb9a3f7}{term\-\_\-input}
\begin{DoxyCompactList}\small\item\em place to put the cursor \end{DoxyCompactList}\item 
W\-I\-N\-D\-O\-W $\ast$ \hyperlink{pgpmac_8h_ae746a6903fb8a4ea216def88eccedc3c}{term\-\_\-status}
\begin{DoxyCompactList}\small\item\em shutter, lamp, air, etc status \end{DoxyCompactList}\item 
W\-I\-N\-D\-O\-W $\ast$ \hyperlink{pgpmac_8h_ae2d7da3afeb756716e6e4ee9cab78f8a}{term\-\_\-status2}
\begin{DoxyCompactList}\small\item\em shutter, lamp, air, etc status \end{DoxyCompactList}\item 
pthread\-\_\-mutex\-\_\-t \hyperlink{pgpmac_8h_ad128c64890c7c0d4f836d9ec6e99216a}{ncurses\-\_\-mutex}
\begin{DoxyCompactList}\small\item\em allow more than one thread access to the screen \end{DoxyCompactList}\item 
pthread\-\_\-cond\-\_\-t \hyperlink{pgpmac_8h_a08d5b18ec9478d753c46a3e28d1f2126}{md2cmds\-\_\-cond}
\begin{DoxyCompactList}\small\item\em condition to signal when it's time to run an md2 command \end{DoxyCompactList}\item 
pthread\-\_\-mutex\-\_\-t \hyperlink{pgpmac_8h_ad67304bb851dc6268b0cda2f40fc5aa8}{md2cmds\-\_\-mutex}
\begin{DoxyCompactList}\small\item\em mutex for the condition \end{DoxyCompactList}\item 
pthread\-\_\-cond\-\_\-t \hyperlink{pgpmac_8h_ab517a930528e2b7d0993e11087765b03}{md2cmds\-\_\-pg\-\_\-cond}
\item 
pthread\-\_\-mutex\-\_\-t \hyperlink{pgpmac_8h_a4d2c3ac81d4b13eb21f4ddcdda8c7308}{md2cmds\-\_\-pg\-\_\-mutex}
\item 
pthread\-\_\-mutex\-\_\-t \hyperlink{pgpmac_8h_acc1bb77b9bcbc4d970f841a41fd274b3}{pmac\-\_\-queue\-\_\-mutex}
\begin{DoxyCompactList}\small\item\em manage access to the pmac command queue \end{DoxyCompactList}\item 
pthread\-\_\-cond\-\_\-t \hyperlink{pgpmac_8h_a8a25bd9c593c6985107f90f999ce0b08}{pmac\-\_\-queue\-\_\-cond}
\begin{DoxyCompactList}\small\item\em wait for a command to be sent to P\-M\-A\-C before continuing \end{DoxyCompactList}\item 
pthread\-\_\-mutex\-\_\-t \hyperlink{pgpmac_8h_a1b78a13c654409333569815e1c109d38}{lspmac\-\_\-shutter\-\_\-mutex}
\begin{DoxyCompactList}\small\item\em Coordinates threads reading shutter status. \end{DoxyCompactList}\item 
pthread\-\_\-cond\-\_\-t \hyperlink{pgpmac_8h_afbd51c2cefcee87afe994c9e9f372241}{lspmac\-\_\-shutter\-\_\-cond}
\begin{DoxyCompactList}\small\item\em Allows waiting for the shutter status to change. \end{DoxyCompactList}\item 
int \hyperlink{pgpmac_8h_a112158e0cd50449a440ac55c7af7bea2}{lspmac\-\_\-shutter\-\_\-state}
\begin{DoxyCompactList}\small\item\em State of the shutter, used to detect changes. \end{DoxyCompactList}\item 
int \hyperlink{pgpmac_8h_a396fbf06208de3ecbe1b0df549f1cd46}{lspmac\-\_\-shutter\-\_\-has\-\_\-opened}
\begin{DoxyCompactList}\small\item\em Indicates that the shutter had opened, perhaps briefly even if the state did not change. \end{DoxyCompactList}\item 
pthread\-\_\-mutex\-\_\-t \hyperlink{pgpmac_8h_a85679cac947e199c88794f8e5a12bf5f}{lspmac\-\_\-moving\-\_\-mutex}
\begin{DoxyCompactList}\small\item\em Coordinate moving motors between threads. \end{DoxyCompactList}\item 
pthread\-\_\-cond\-\_\-t \hyperlink{pgpmac_8h_a57547d211906c981ef20257eba99f8df}{lspmac\-\_\-moving\-\_\-cond}
\begin{DoxyCompactList}\small\item\em Wait for motor(s) to finish moving condition. \end{DoxyCompactList}\item 
int \hyperlink{pgpmac_8h_a7a32c617c183166308241e270959df56}{lspmac\-\_\-moving\-\_\-flags}
\begin{DoxyCompactList}\small\item\em Flag used to implement motor moving condition. \end{DoxyCompactList}\item 
pthread\-\_\-mutex\-\_\-t \hyperlink{pgpmac_8h_a7a3e763682bd7f987d07f149e94b3bf8}{md2\-\_\-status\-\_\-mutex}
\begin{DoxyCompactList}\small\item\em Synchronize reading/writting status buffer. \end{DoxyCompactList}\item 
char \hyperlink{pgpmac_8h_a1ccf455563dc8d828558b6a230e164a6}{md2cmds\-\_\-cmd} \mbox{[}$\,$\mbox{]}
\begin{DoxyCompactList}\small\item\em our command; \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Headers for the entire pgpmac project. \begin{DoxyDate}{Date}
2012 
\end{DoxyDate}
\begin{DoxyAuthor}{Author}
Keith Brister 
\end{DoxyAuthor}
\begin{DoxyCopyright}{Copyright}
All Rights Reserved 
\end{DoxyCopyright}


Definition in file \hyperlink{pgpmac_8h_source}{pgpmac.\-h}.



\subsection{Macro Definition Documentation}
\hypertarget{pgpmac_8h_a369266c24eacffb87046522897a570d5}{\index{pgpmac.\-h@{pgpmac.\-h}!\-\_\-\-G\-N\-U\-\_\-\-S\-O\-U\-R\-C\-E@{\-\_\-\-G\-N\-U\-\_\-\-S\-O\-U\-R\-C\-E}}
\index{\-\_\-\-G\-N\-U\-\_\-\-S\-O\-U\-R\-C\-E@{\-\_\-\-G\-N\-U\-\_\-\-S\-O\-U\-R\-C\-E}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{\-\_\-\-G\-N\-U\-\_\-\-S\-O\-U\-R\-C\-E}]{\setlength{\rightskip}{0pt plus 5cm}\#define \-\_\-\-G\-N\-U\-\_\-\-S\-O\-U\-R\-C\-E}}\label{pgpmac_8h_a369266c24eacffb87046522897a570d5}


Definition at line 7 of file pgpmac.\-h.

\hypertarget{pgpmac_8h_a3bae94e8e4e4347dd5f87b6bda058de6}{\index{pgpmac.\-h@{pgpmac.\-h}!L\-S\-\_\-\-D\-I\-S\-P\-L\-A\-Y\-\_\-\-W\-I\-N\-D\-O\-W\-\_\-\-H\-E\-I\-G\-H\-T@{L\-S\-\_\-\-D\-I\-S\-P\-L\-A\-Y\-\_\-\-W\-I\-N\-D\-O\-W\-\_\-\-H\-E\-I\-G\-H\-T}}
\index{L\-S\-\_\-\-D\-I\-S\-P\-L\-A\-Y\-\_\-\-W\-I\-N\-D\-O\-W\-\_\-\-H\-E\-I\-G\-H\-T@{L\-S\-\_\-\-D\-I\-S\-P\-L\-A\-Y\-\_\-\-W\-I\-N\-D\-O\-W\-\_\-\-H\-E\-I\-G\-H\-T}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{L\-S\-\_\-\-D\-I\-S\-P\-L\-A\-Y\-\_\-\-W\-I\-N\-D\-O\-W\-\_\-\-H\-E\-I\-G\-H\-T}]{\setlength{\rightskip}{0pt plus 5cm}\#define L\-S\-\_\-\-D\-I\-S\-P\-L\-A\-Y\-\_\-\-W\-I\-N\-D\-O\-W\-\_\-\-H\-E\-I\-G\-H\-T~8}}\label{pgpmac_8h_a3bae94e8e4e4347dd5f87b6bda058de6}


Number of status box rows. 



Definition at line 56 of file pgpmac.\-h.

\hypertarget{pgpmac_8h_a1f96754f00a1f82414cebc66f75ded78}{\index{pgpmac.\-h@{pgpmac.\-h}!L\-S\-\_\-\-D\-I\-S\-P\-L\-A\-Y\-\_\-\-W\-I\-N\-D\-O\-W\-\_\-\-W\-I\-D\-T\-H@{L\-S\-\_\-\-D\-I\-S\-P\-L\-A\-Y\-\_\-\-W\-I\-N\-D\-O\-W\-\_\-\-W\-I\-D\-T\-H}}
\index{L\-S\-\_\-\-D\-I\-S\-P\-L\-A\-Y\-\_\-\-W\-I\-N\-D\-O\-W\-\_\-\-W\-I\-D\-T\-H@{L\-S\-\_\-\-D\-I\-S\-P\-L\-A\-Y\-\_\-\-W\-I\-N\-D\-O\-W\-\_\-\-W\-I\-D\-T\-H}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{L\-S\-\_\-\-D\-I\-S\-P\-L\-A\-Y\-\_\-\-W\-I\-N\-D\-O\-W\-\_\-\-W\-I\-D\-T\-H}]{\setlength{\rightskip}{0pt plus 5cm}\#define L\-S\-\_\-\-D\-I\-S\-P\-L\-A\-Y\-\_\-\-W\-I\-N\-D\-O\-W\-\_\-\-W\-I\-D\-T\-H~24}}\label{pgpmac_8h_a1f96754f00a1f82414cebc66f75ded78}


Number of status box columns. 



Definition at line 60 of file pgpmac.\-h.

\hypertarget{pgpmac_8h_a3a8ef1b4b5994d6dd12bf74454ea891b}{\index{pgpmac.\-h@{pgpmac.\-h}!L\-S\-\_\-\-P\-G\-\_\-\-Q\-U\-E\-R\-Y\-\_\-\-S\-T\-R\-I\-N\-G\-\_\-\-L\-E\-N\-G\-T\-H@{L\-S\-\_\-\-P\-G\-\_\-\-Q\-U\-E\-R\-Y\-\_\-\-S\-T\-R\-I\-N\-G\-\_\-\-L\-E\-N\-G\-T\-H}}
\index{L\-S\-\_\-\-P\-G\-\_\-\-Q\-U\-E\-R\-Y\-\_\-\-S\-T\-R\-I\-N\-G\-\_\-\-L\-E\-N\-G\-T\-H@{L\-S\-\_\-\-P\-G\-\_\-\-Q\-U\-E\-R\-Y\-\_\-\-S\-T\-R\-I\-N\-G\-\_\-\-L\-E\-N\-G\-T\-H}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{L\-S\-\_\-\-P\-G\-\_\-\-Q\-U\-E\-R\-Y\-\_\-\-S\-T\-R\-I\-N\-G\-\_\-\-L\-E\-N\-G\-T\-H}]{\setlength{\rightskip}{0pt plus 5cm}\#define L\-S\-\_\-\-P\-G\-\_\-\-Q\-U\-E\-R\-Y\-\_\-\-S\-T\-R\-I\-N\-G\-\_\-\-L\-E\-N\-G\-T\-H~1024}}\label{pgpmac_8h_a3a8ef1b4b5994d6dd12bf74454ea891b}


Fixed length postgresql query strings. Queries should all be function calls so this is not as weird as one might think. 



Definition at line 63 of file pgpmac.\-h.

\hypertarget{pgpmac_8h_ab61d790b5572f116e091babfda53627b}{\index{pgpmac.\-h@{pgpmac.\-h}!L\-S\-E\-V\-E\-N\-T\-S\-\_\-\-E\-V\-E\-N\-T\-\_\-\-L\-E\-N\-G\-T\-H@{L\-S\-E\-V\-E\-N\-T\-S\-\_\-\-E\-V\-E\-N\-T\-\_\-\-L\-E\-N\-G\-T\-H}}
\index{L\-S\-E\-V\-E\-N\-T\-S\-\_\-\-E\-V\-E\-N\-T\-\_\-\-L\-E\-N\-G\-T\-H@{L\-S\-E\-V\-E\-N\-T\-S\-\_\-\-E\-V\-E\-N\-T\-\_\-\-L\-E\-N\-G\-T\-H}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{L\-S\-E\-V\-E\-N\-T\-S\-\_\-\-E\-V\-E\-N\-T\-\_\-\-L\-E\-N\-G\-T\-H}]{\setlength{\rightskip}{0pt plus 5cm}\#define L\-S\-E\-V\-E\-N\-T\-S\-\_\-\-E\-V\-E\-N\-T\-\_\-\-L\-E\-N\-G\-T\-H~32}}\label{pgpmac_8h_ab61d790b5572f116e091babfda53627b}


Fixed length for event names\-: simplifies string handling. 



Definition at line 66 of file pgpmac.\-h.

\hypertarget{pgpmac_8h_a30f0f377b0f0695284145d420ea51846}{\index{pgpmac.\-h@{pgpmac.\-h}!M\-D2\-C\-M\-D\-S\-\_\-\-C\-M\-D\-\_\-\-L\-E\-N\-G\-T\-H@{M\-D2\-C\-M\-D\-S\-\_\-\-C\-M\-D\-\_\-\-L\-E\-N\-G\-T\-H}}
\index{M\-D2\-C\-M\-D\-S\-\_\-\-C\-M\-D\-\_\-\-L\-E\-N\-G\-T\-H@{M\-D2\-C\-M\-D\-S\-\_\-\-C\-M\-D\-\_\-\-L\-E\-N\-G\-T\-H}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{M\-D2\-C\-M\-D\-S\-\_\-\-C\-M\-D\-\_\-\-L\-E\-N\-G\-T\-H}]{\setlength{\rightskip}{0pt plus 5cm}\#define M\-D2\-C\-M\-D\-S\-\_\-\-C\-M\-D\-\_\-\-L\-E\-N\-G\-T\-H~32}}\label{pgpmac_8h_a30f0f377b0f0695284145d420ea51846}


Definition at line 388 of file pgpmac.\-h.



\subsection{Typedef Documentation}
\hypertarget{pgpmac_8h_a48b627e412dd038c1f17cdb0501eec33}{\index{pgpmac.\-h@{pgpmac.\-h}!lspg\-\_\-getcenter\-\_\-t@{lspg\-\_\-getcenter\-\_\-t}}
\index{lspg\-\_\-getcenter\-\_\-t@{lspg\-\_\-getcenter\-\_\-t}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lspg\-\_\-getcenter\-\_\-t}]{\setlength{\rightskip}{0pt plus 5cm}typedef struct {\bf lspg\-\_\-getcenter\-\_\-struct}  {\bf lspg\-\_\-getcenter\-\_\-t}}}\label{pgpmac_8h_a48b627e412dd038c1f17cdb0501eec33}


Storage for getcenter query Used for the md2 R\-O\-T\-A\-T\-E command that generates the centering movies. 

\hypertarget{pgpmac_8h_a17ea2bf07a0b3b892baa00bd392607b3}{\index{pgpmac.\-h@{pgpmac.\-h}!lspg\-\_\-nextshot\-\_\-t@{lspg\-\_\-nextshot\-\_\-t}}
\index{lspg\-\_\-nextshot\-\_\-t@{lspg\-\_\-nextshot\-\_\-t}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lspg\-\_\-nextshot\-\_\-t}]{\setlength{\rightskip}{0pt plus 5cm}typedef struct {\bf lspg\-\_\-nextshot\-\_\-struct}  {\bf lspg\-\_\-nextshot\-\_\-t}}}\label{pgpmac_8h_a17ea2bf07a0b3b892baa00bd392607b3}


Storage definition for nextshot query. 

The next shot query returns all the information needed to collect the next data frame. Since S\-Q\-L allows for null fields independently from blank strings a separate integer is used as a flag for this case. This adds to the program complexity but allows for some important cases. Suck it up.\-definition of the next image to be taken (and the one after that, too!) \hypertarget{pgpmac_8h_ac48984832ef73cf145e5f08bc65bd3a0}{\index{pgpmac.\-h@{pgpmac.\-h}!lspmac\-\_\-bi\-\_\-t@{lspmac\-\_\-bi\-\_\-t}}
\index{lspmac\-\_\-bi\-\_\-t@{lspmac\-\_\-bi\-\_\-t}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lspmac\-\_\-bi\-\_\-t}]{\setlength{\rightskip}{0pt plus 5cm}typedef struct {\bf lspmac\-\_\-bi\-\_\-struct}  {\bf lspmac\-\_\-bi\-\_\-t}}}\label{pgpmac_8h_ac48984832ef73cf145e5f08bc65bd3a0}


Storage for binary inputs. 

\hypertarget{pgpmac_8h_aa5067fcbaabc5bbfdc52492495518c96}{\index{pgpmac.\-h@{pgpmac.\-h}!lspmac\-\_\-motor\-\_\-t@{lspmac\-\_\-motor\-\_\-t}}
\index{lspmac\-\_\-motor\-\_\-t@{lspmac\-\_\-motor\-\_\-t}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lspmac\-\_\-motor\-\_\-t}]{\setlength{\rightskip}{0pt plus 5cm}typedef struct {\bf lspmac\-\_\-motor\-\_\-struct}  {\bf lspmac\-\_\-motor\-\_\-t}}}\label{pgpmac_8h_aa5067fcbaabc5bbfdc52492495518c96}


Motor information. 

A catchall for motors and motor like objects. Not all members are used by all objects. \hypertarget{pgpmac_8h_ad449de06d02791adf2498d2a1e1f909c}{\index{pgpmac.\-h@{pgpmac.\-h}!lsredis\-\_\-obj\-\_\-t@{lsredis\-\_\-obj\-\_\-t}}
\index{lsredis\-\_\-obj\-\_\-t@{lsredis\-\_\-obj\-\_\-t}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lsredis\-\_\-obj\-\_\-t}]{\setlength{\rightskip}{0pt plus 5cm}typedef struct {\bf lsredis\-\_\-obj\-\_\-struct}  {\bf lsredis\-\_\-obj\-\_\-t}}}\label{pgpmac_8h_ad449de06d02791adf2498d2a1e1f909c}


Redis Object Basic object whose value is sychronized with our redis db. 

\hypertarget{pgpmac_8h_a99c275e32ad897dca34d196b91f038cb}{\index{pgpmac.\-h@{pgpmac.\-h}!pmac\-\_\-cmd\-\_\-queue\-\_\-t@{pmac\-\_\-cmd\-\_\-queue\-\_\-t}}
\index{pmac\-\_\-cmd\-\_\-queue\-\_\-t@{pmac\-\_\-cmd\-\_\-queue\-\_\-t}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{pmac\-\_\-cmd\-\_\-queue\-\_\-t}]{\setlength{\rightskip}{0pt plus 5cm}typedef struct {\bf lspmac\-\_\-cmd\-\_\-queue\-\_\-struct}  {\bf pmac\-\_\-cmd\-\_\-queue\-\_\-t}}}\label{pgpmac_8h_a99c275e32ad897dca34d196b91f038cb}


P\-M\-A\-C command queue item. 

Command queue items are fixed length to simplify memory management. \hypertarget{pgpmac_8h_a2d163436571135a457f4a4e2fbd09633}{\index{pgpmac.\-h@{pgpmac.\-h}!pmac\-\_\-cmd\-\_\-t@{pmac\-\_\-cmd\-\_\-t}}
\index{pmac\-\_\-cmd\-\_\-t@{pmac\-\_\-cmd\-\_\-t}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{pmac\-\_\-cmd\-\_\-t}]{\setlength{\rightskip}{0pt plus 5cm}typedef struct {\bf tag\-Ethernet\-Cmd}  {\bf pmac\-\_\-cmd\-\_\-t}}}\label{pgpmac_8h_a2d163436571135a457f4a4e2fbd09633}


P\-M\-A\-C ethernet packet definition. 

Taken directly from the Delta Tau documentation. 

\subsection{Function Documentation}
\hypertarget{pgpmac_8h_aac89b916c1152c44042875feac35a9e4}{\index{pgpmac.\-h@{pgpmac.\-h}!lsevents\-\_\-add\-\_\-listener@{lsevents\-\_\-add\-\_\-listener}}
\index{lsevents\-\_\-add\-\_\-listener@{lsevents\-\_\-add\-\_\-listener}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lsevents\-\_\-add\-\_\-listener}]{\setlength{\rightskip}{0pt plus 5cm}void lsevents\-\_\-add\-\_\-listener (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{event, }
\item[{void($\ast$)(char $\ast$)}]{cb}
\end{DoxyParamCaption}
)}}\label{pgpmac_8h_aac89b916c1152c44042875feac35a9e4}


Add a callback routine to listen for a specific event. 


\begin{DoxyParams}{Parameters}
{\em event} & the name of the event to listen for \\
\hline
{\em cb} & the routine to call \\
\hline
\end{DoxyParams}


Definition at line 78 of file lsevents.\-c.


\begin{DoxyCode}
                                                             \{
  \hyperlink{structlsevents__listener__struct}{lsevents\_listener\_t} *\textcolor{keyword}{new};
  \textcolor{keywordtype}{int} err;
  \textcolor{keywordtype}{char} *errbuf;
  \textcolor{keywordtype}{int} nerrbuf;



  \textcolor{keyword}{new} = calloc( 1, \textcolor{keyword}{sizeof}( \hyperlink{structlsevents__listener__struct}{lsevents\_listener\_t}));
  \textcolor{keywordflow}{if}( \textcolor{keyword}{new} == NULL) \{
    \hyperlink{lslogging_8c_a0e756b36671055ef02a8f04d2ba8a93b}{lslogging\_log\_message}( \textcolor{stringliteral}{"lsevents\_add\_listener: out of
       memory"});
    exit( -1);
  \}

  err = regcomp( &new->re, event, REG\_EXTENDED | REG\_NOSUB);
  \textcolor{keywordflow}{if}( err != 0) \{
    nerrbuf = regerror( err, &new->re, NULL, 0);
    errbuf = calloc( nerrbuf, \textcolor{keyword}{sizeof}( \textcolor{keywordtype}{char}));
    \textcolor{keywordflow}{if}( errbuf == NULL) \{
      \hyperlink{lslogging_8c_a0e756b36671055ef02a8f04d2ba8a93b}{lslogging\_log\_message}( \textcolor{stringliteral}{"lsevents\_add\_listener: out
       of memory (re)"});
      exit( -1);
    \}
    regerror( err, &new->re, errbuf, nerrbuf);
    \hyperlink{lslogging_8c_a0e756b36671055ef02a8f04d2ba8a93b}{lslogging\_log\_message}( \textcolor{stringliteral}{"lsevents\_add\_listener: %s"}, 
      errbuf);
    free( errbuf);
    free( \textcolor{keyword}{new});
    \textcolor{keywordflow}{return};
  \}

  \textcolor{keyword}{new}->raw\_regexp = strdup( event);
  \textcolor{keyword}{new}->cb   = cb;

  pthread\_mutex\_lock( &\hyperlink{lsevents_8c_a70bba59930a1c7d7d181aa03cdfb6c00}{lsevents\_listener\_mutex});
  \textcolor{keyword}{new}->next = \hyperlink{lsevents_8c_a300dc3edfa8546d75e9f8bab8fa06c5c}{lsevents\_listeners\_p};
  \hyperlink{lsevents_8c_a300dc3edfa8546d75e9f8bab8fa06c5c}{lsevents\_listeners\_p} = \textcolor{keyword}{new};
  pthread\_mutex\_unlock( &\hyperlink{lsevents_8c_a70bba59930a1c7d7d181aa03cdfb6c00}{lsevents\_listener\_mutex});

  \hyperlink{lslogging_8c_a0e756b36671055ef02a8f04d2ba8a93b}{lslogging\_log\_message}( \textcolor{stringliteral}{"lsevents\_add\_listener: added
       listener for event %s"}, event);

\}
\end{DoxyCode}
\hypertarget{pgpmac_8h_af19a77187e7406fc87d36bd26e672e6d}{\index{pgpmac.\-h@{pgpmac.\-h}!lsevents\-\_\-init@{lsevents\-\_\-init}}
\index{lsevents\-\_\-init@{lsevents\-\_\-init}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lsevents\-\_\-init}]{\setlength{\rightskip}{0pt plus 5cm}void lsevents\-\_\-init (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{pgpmac_8h_af19a77187e7406fc87d36bd26e672e6d}


Initialize this module. 



Definition at line 207 of file lsevents.\-c.


\begin{DoxyCode}
                     \{
  pthread\_mutex\_init( &\hyperlink{lsevents_8c_ab46f4ebda5e926a213faedac1a545ec1}{lsevents\_queue\_mutex}, NULL);
  pthread\_cond\_init(  &\hyperlink{lsevents_8c_a8079d9fb8c35db3ca5f83be5aeb2a747}{lsevents\_queue\_cond}, NULL);
  pthread\_mutex\_init( &\hyperlink{lsevents_8c_a70bba59930a1c7d7d181aa03cdfb6c00}{lsevents\_listener\_mutex}, NULL);
\}
\end{DoxyCode}
\hypertarget{pgpmac_8h_a024b08c7820bb31c3d5b8f281e07f3e8}{\index{pgpmac.\-h@{pgpmac.\-h}!lsevents\-\_\-remove\-\_\-listener@{lsevents\-\_\-remove\-\_\-listener}}
\index{lsevents\-\_\-remove\-\_\-listener@{lsevents\-\_\-remove\-\_\-listener}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lsevents\-\_\-remove\-\_\-listener}]{\setlength{\rightskip}{0pt plus 5cm}void lsevents\-\_\-remove\-\_\-listener (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{event, }
\item[{void($\ast$)(char $\ast$)}]{cb}
\end{DoxyParamCaption}
)}}\label{pgpmac_8h_a024b08c7820bb31c3d5b8f281e07f3e8}


Remove a listener previously added with lsevents\-\_\-add\-\_\-listener. 


\begin{DoxyParams}{Parameters}
{\em event} & The name of the event \\
\hline
{\em cb} & The callback routine to remove \\
\hline
\end{DoxyParams}


Definition at line 123 of file lsevents.\-c.


\begin{DoxyCode}
                                                                \{
  
  \hyperlink{structlsevents__listener__struct}{lsevents\_listener\_t} *last, *current;

  \textcolor{comment}{//}
  \textcolor{comment}{// Find the listener to remove}
  \textcolor{comment}{// and unlink it from the list}
  \textcolor{comment}{//}
  pthread\_mutex\_lock( &\hyperlink{lsevents_8c_a70bba59930a1c7d7d181aa03cdfb6c00}{lsevents\_listener\_mutex});
  last = NULL;
  \textcolor{keywordflow}{for}( current = \hyperlink{lsevents_8c_a300dc3edfa8546d75e9f8bab8fa06c5c}{lsevents\_listeners\_p}; current != NULL; 
      current = current->\hyperlink{structlsevents__listener__struct_a8aed9196b0deab84e018b96c0cc59305}{next}) \{
    \textcolor{keywordflow}{if}( strcmp( last->\hyperlink{structlsevents__listener__struct_afffe7a6889fda47a3a7a91beefed9168}{raw\_regexp}, event) == 0 && last->\hyperlink{structlsevents__listener__struct_a005906c1c9f0647e6ed1fb4592d8c5d0}{cb} == cb) \{
      \textcolor{keywordflow}{if}( last == NULL) \{
        \hyperlink{lsevents_8c_a300dc3edfa8546d75e9f8bab8fa06c5c}{lsevents\_listeners\_p} = current->\hyperlink{structlsevents__listener__struct_a8aed9196b0deab84e018b96c0cc59305}{next};
      \} \textcolor{keywordflow}{else} \{
        last->\hyperlink{structlsevents__listener__struct_a8aed9196b0deab84e018b96c0cc59305}{next} = current->\hyperlink{structlsevents__listener__struct_a8aed9196b0deab84e018b96c0cc59305}{next};
      \}
      \textcolor{keywordflow}{break};
    \}
  \}
  pthread\_mutex\_unlock( &\hyperlink{lsevents_8c_a70bba59930a1c7d7d181aa03cdfb6c00}{lsevents\_listener\_mutex});

  \textcolor{comment}{//}
  \textcolor{comment}{// Now remove it}
  \textcolor{comment}{//}
  \textcolor{keywordflow}{if}( current != NULL) \{
    \textcolor{keywordflow}{if}( current->\hyperlink{structlsevents__listener__struct_afffe7a6889fda47a3a7a91beefed9168}{raw\_regexp} != NULL)
      free( current->\hyperlink{structlsevents__listener__struct_afffe7a6889fda47a3a7a91beefed9168}{raw\_regexp});
    free(current);
  \}
\}
\end{DoxyCode}
\hypertarget{pgpmac_8h_a4ddde538b603e3d4580ae9356bf9b89d}{\index{pgpmac.\-h@{pgpmac.\-h}!lsevents\-\_\-run@{lsevents\-\_\-run}}
\index{lsevents\-\_\-run@{lsevents\-\_\-run}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lsevents\-\_\-run}]{\setlength{\rightskip}{0pt plus 5cm}void lsevents\-\_\-run (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{pgpmac_8h_a4ddde538b603e3d4580ae9356bf9b89d}


Start up the thread and get out of the way. 



Definition at line 215 of file lsevents.\-c.


\begin{DoxyCode}
                    \{
  pthread\_create( &\hyperlink{lsevents_8c_a314640d7c3cb4fa90823ab2418fbac9b}{lsevents\_thread}, NULL, \hyperlink{lsevents_8c_a48e8f9dee00710bbe293b4bbded37a39}{lsevents\_worker}
      , NULL);
\}
\end{DoxyCode}
\hypertarget{pgpmac_8h_a3661dfc51537c05b11f4fd184fdff07d}{\index{pgpmac.\-h@{pgpmac.\-h}!lsevents\-\_\-send\-\_\-event@{lsevents\-\_\-send\-\_\-event}}
\index{lsevents\-\_\-send\-\_\-event@{lsevents\-\_\-send\-\_\-event}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lsevents\-\_\-send\-\_\-event}]{\setlength{\rightskip}{0pt plus 5cm}void lsevents\-\_\-send\-\_\-event (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{fmt, }
\item[{}]{...}
\end{DoxyParamCaption}
)}}\label{pgpmac_8h_a3661dfc51537c05b11f4fd184fdff07d}


Call the callback routines for the given event. 


\begin{DoxyParams}{Parameters}
{\em fmt} & a printf style formating string \\
\hline
{\em ...} & list of arguments specified by the format string \\
\hline
\end{DoxyParams}


Definition at line 45 of file lsevents.\-c.


\begin{DoxyCode}
                                          \{
  \textcolor{keywordtype}{char} \textcolor{keyword}{event}[\hyperlink{pgpmac_8h_ab61d790b5572f116e091babfda53627b}{LSEVENTS\_EVENT\_LENGTH}];
  \textcolor{keywordtype}{char} *sp;
  va\_list arg\_ptr;

  va\_start( arg\_ptr, fmt);
  vsnprintf( event, \textcolor{keyword}{sizeof}(event)-1, fmt, arg\_ptr);
  \textcolor{keyword}{event}[\textcolor{keyword}{sizeof}(event)-1]=0;
  va\_end( arg\_ptr);

  pthread\_mutex\_lock( &\hyperlink{lsevents_8c_ab46f4ebda5e926a213faedac1a545ec1}{lsevents\_queue\_mutex});

  \hyperlink{lslogging_8c_a0e756b36671055ef02a8f04d2ba8a93b}{lslogging\_log\_message}( \textcolor{stringliteral}{"lsevents\_send\_event: %s"}, event)
      ;


  \textcolor{comment}{// maybe wait for room on the queue}
  \textcolor{keywordflow}{while}( \hyperlink{lsevents_8c_a3bccf603d56d5b2f4a92fad341d37e2c}{lsevents\_queue\_on} + 1 == \hyperlink{lsevents_8c_a50ad47e12cc4fc2d88659230b2fd44ff}{lsevents\_queue\_off}
      )
    pthread\_cond\_wait( &\hyperlink{lsevents_8c_a8079d9fb8c35db3ca5f83be5aeb2a747}{lsevents\_queue\_cond}, &
      \hyperlink{lsevents_8c_ab46f4ebda5e926a213faedac1a545ec1}{lsevents\_queue\_mutex});
  
  sp = \hyperlink{lsevents_8c_ad1ff5e895b4016113c8414d9a5daa2f2}{lsevents\_queue}[(\hyperlink{lsevents_8c_a3bccf603d56d5b2f4a92fad341d37e2c}{lsevents\_queue\_on}++) % 
      \hyperlink{lsevents_8c_a75469307c70790f04b9b2bfcb1473a48}{LSEVENTS\_QUEUE\_LENGTH}].event;
  strncpy( sp, event, \hyperlink{pgpmac_8h_ab61d790b5572f116e091babfda53627b}{LSEVENTS\_EVENT\_LENGTH});
  sp[\hyperlink{pgpmac_8h_ab61d790b5572f116e091babfda53627b}{LSEVENTS\_EVENT\_LENGTH} - 1] = 0;

  pthread\_cond\_signal(  &\hyperlink{lsevents_8c_a8079d9fb8c35db3ca5f83be5aeb2a747}{lsevents\_queue\_cond});
  pthread\_mutex\_unlock( &\hyperlink{lsevents_8c_ab46f4ebda5e926a213faedac1a545ec1}{lsevents\_queue\_mutex});

\}
\end{DoxyCode}
\hypertarget{pgpmac_8h_a4ee000bfeef9380d479464a9500af311}{\index{pgpmac.\-h@{pgpmac.\-h}!lspg\-\_\-array2ptrs@{lspg\-\_\-array2ptrs}}
\index{lspg\-\_\-array2ptrs@{lspg\-\_\-array2ptrs}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lspg\-\_\-array2ptrs}]{\setlength{\rightskip}{0pt plus 5cm}char$\ast$$\ast$ lspg\-\_\-array2ptrs (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{}
\end{DoxyParamCaption}
)}}\label{pgpmac_8h_a4ee000bfeef9380d479464a9500af311}


returns a null terminated list of strings parsed from postgresql array 



Definition at line 165 of file lspg.\-c.


\begin{DoxyCode}
                                 \{
  \textcolor{keywordtype}{char} **rtn, *sp, *acums;
  \textcolor{keywordtype}{int} i, n, inquote, havebackslash, rtni;;
  \textcolor{keywordtype}{int} mxsz;
  
  inquote       = 0;
  havebackslash = 0;

  \textcolor{comment}{// Despense with the null input condition before we complicate the code below}
  \textcolor{keywordflow}{if}( a == NULL || a[0] == 0)
    \textcolor{keywordflow}{return} NULL;

  \textcolor{comment}{// Count the maximum number of strings}
  \textcolor{comment}{// Actual number will be less if there are quoted commas}
  \textcolor{comment}{//}
  n = 1;
  \textcolor{keywordflow}{for}( i=0; a[i]; i++) \{
    \textcolor{keywordflow}{if}( a[i] == \textcolor{charliteral}{','})
      n++;
  \}
  \textcolor{comment}{//}
  \textcolor{comment}{// The maximum size of any string is the length of a (+1)}
  \textcolor{comment}{//}
  mxsz = strlen(a) + 1;

  \textcolor{comment}{// This is the accumulation string to make up the array elements}
  acums = (\textcolor{keywordtype}{char} *)calloc( mxsz, \textcolor{keyword}{sizeof}( \textcolor{keywordtype}{char}));
  \textcolor{keywordflow}{if}( acums == NULL) \{
    \textcolor{comment}{// TODO: print or otherwise log this condition}
    \textcolor{comment}{// out of memory}
    exit( 1);
  \}
  
  \textcolor{comment}{//}
  \textcolor{comment}{// allocate storage for the pointer array and the null terminator}
  \textcolor{comment}{//}
  rtn = (\textcolor{keywordtype}{char} **)calloc( n+1, \textcolor{keyword}{sizeof}( \textcolor{keywordtype}{char} *));
  \textcolor{keywordflow}{if}( rtn == NULL) \{
    \textcolor{comment}{// TODO: print or otherwise log this condition}
    \textcolor{comment}{// out of memory}
    exit( 1);
  \}
  rtni = 0;
  
  \textcolor{comment}{// Go through and create the individual strings}
  sp = acums;
  *sp = 0;
  \textcolor{keywordflow}{if}( a[0] != \textcolor{charliteral}{'\{'}) \{
    \textcolor{comment}{// oh no!  This isn't an array after all!}
    \textcolor{comment}{// Zounds!}
    \textcolor{keywordflow}{return} NULL;
  \}
  inquote = 0;
  havebackslash = 0;
  \textcolor{keywordflow}{for}( i=1; a[i] != 0; i++) \{
    \textcolor{keywordflow}{switch}( a[i]) \{
    \textcolor{keywordflow}{case} \textcolor{charliteral}{'"'}:
      \textcolor{keywordflow}{if}( havebackslash) \{
        \textcolor{comment}{// a quoted quote.  Cool}
        \textcolor{comment}{//}
        *(sp++) = a[i];
        *sp = 0;
        havebackslash = 0;
      \} \textcolor{keywordflow}{else} \{
        \textcolor{comment}{// Toggle the flag}
        inquote = 1 - inquote;
      \}
      \textcolor{keywordflow}{break};

    \textcolor{keywordflow}{case} \textcolor{charliteral}{'\(\backslash\)\(\backslash\)'}:
      \textcolor{keywordflow}{if}( havebackslash) \{
        *(sp++) = a[i];
        *sp = 0;
        havebackslash = 0;
      \} \textcolor{keywordflow}{else} \{
        havebackslash = 1;
      \}
      \textcolor{keywordflow}{break};

    \textcolor{keywordflow}{case} \textcolor{charliteral}{','}:
      \textcolor{keywordflow}{if}( inquote || havebackslash) \{
        *(sp++) = a[i];
        *sp = 0;
        havebackslash = 0;
      \} \textcolor{keywordflow}{else} \{
        rtn[rtni++] = strdup( acums);
        sp = acums;
      \}
      \textcolor{keywordflow}{break};
      
    \textcolor{keywordflow}{case} \textcolor{charliteral}{'\}'}:
      \textcolor{keywordflow}{if}( inquote || havebackslash) \{
        *(sp++) = a[i];
        *sp = 0;
        havebackslash = 0;
      \} \textcolor{keywordflow}{else} \{
        rtn[rtni++] = strdup( acums);
        rtn[rtni]   = NULL;
        \textcolor{keywordflow}{return}( rtn);
      \}
      \textcolor{keywordflow}{break};

    \textcolor{keywordflow}{default}:
      *(sp++) = a[i];
      *sp = 0;
      havebackslash = 0;
    \}
  \}
  \textcolor{comment}{//}
  \textcolor{comment}{// Getting here means the final '\}' was missing}
  \textcolor{comment}{// Probably we should throw an error or log it or something.}
  \textcolor{comment}{//}
  rtn[rtni++] = strdup( acums);
  rtn[rtni]   = NULL;
  \textcolor{keywordflow}{return}( rtn);
\}
\end{DoxyCode}
\hypertarget{pgpmac_8h_a8a77972df14166e05c94ed0792baa09b}{\index{pgpmac.\-h@{pgpmac.\-h}!lspg\-\_\-init@{lspg\-\_\-init}}
\index{lspg\-\_\-init@{lspg\-\_\-init}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lspg\-\_\-init}]{\setlength{\rightskip}{0pt plus 5cm}void lspg\-\_\-init (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{pgpmac_8h_a8a77972df14166e05c94ed0792baa09b}


Initiallize the lspg module. 



Definition at line 1615 of file lspg.\-c.


\begin{DoxyCode}
                 \{
  pthread\_mutex\_init( &\hyperlink{lspg_8c_aed46a94106c583796e3a8ca0e89aa8e4}{lspg\_queue\_mutex}, NULL);
  pthread\_cond\_init( &\hyperlink{lspg_8c_a61a308b6a37afd645beb422653b95baa}{lspg\_queue\_cond}, NULL);
  \hyperlink{lspg_8c_aff91db7d60e6c832684c023813e36dbf}{lspg\_nextshot\_init}();
  \hyperlink{lspg_8c_ad31db17587a02302ac4e40fb7d260b1b}{lspg\_getcenter\_init}();
  \hyperlink{lspg_8c_a3517f8fbed91c998f6036284f9bd0c48}{lspg\_wait\_for\_detector\_init}();
  \hyperlink{lspg_8c_a39bb94f8e0d47702b2b920a3dee61ebc}{lspg\_lock\_diffractometer\_init}();
  \hyperlink{lspg_8c_a0e9bbf847dadfe0d10830d67824d9be8}{lspg\_lock\_detector\_init}();
\}
\end{DoxyCode}
\hypertarget{pgpmac_8h_a1adfdb5ca9fdb5060849d726bf540117}{\index{pgpmac.\-h@{pgpmac.\-h}!lspg\-\_\-run@{lspg\-\_\-run}}
\index{lspg\-\_\-run@{lspg\-\_\-run}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lspg\-\_\-run}]{\setlength{\rightskip}{0pt plus 5cm}void lspg\-\_\-run (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{pgpmac_8h_a1adfdb5ca9fdb5060849d726bf540117}


Start 'er runnin'. 



Definition at line 1627 of file lspg.\-c.


\begin{DoxyCode}
                \{
  pthread\_create( &\hyperlink{lspg_8c_a04eb0cda0d5e5afeae7c393b51689765}{lspg\_thread}, NULL, \hyperlink{lspg_8c_aaf4fadd2943fa3a2ecb5d840e84d68fa}{lspg\_worker}, NULL);
\}
\end{DoxyCode}
\hypertarget{pgpmac_8h_a4253474d4dd305aec0afdd5552b3ddd5}{\index{pgpmac.\-h@{pgpmac.\-h}!lspg\-\_\-seq\-\_\-run\-\_\-prep\-\_\-all@{lspg\-\_\-seq\-\_\-run\-\_\-prep\-\_\-all}}
\index{lspg\-\_\-seq\-\_\-run\-\_\-prep\-\_\-all@{lspg\-\_\-seq\-\_\-run\-\_\-prep\-\_\-all}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lspg\-\_\-seq\-\_\-run\-\_\-prep\-\_\-all}]{\setlength{\rightskip}{0pt plus 5cm}void lspg\-\_\-seq\-\_\-run\-\_\-prep\-\_\-all (
\begin{DoxyParamCaption}
\item[{long long}]{skey, }
\item[{double}]{kappa, }
\item[{double}]{phi, }
\item[{double}]{cx, }
\item[{double}]{cy, }
\item[{double}]{ax, }
\item[{double}]{ay, }
\item[{double}]{az}
\end{DoxyParamCaption}
)}}\label{pgpmac_8h_a4253474d4dd305aec0afdd5552b3ddd5}


Convinence function to call seq run prep. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em skey} & px.\-shots key for this image \\
\hline
\mbox{\tt in}  & {\em kappa} & current kappa postion \\
\hline
\mbox{\tt in}  & {\em phi} & current phi postition \\
\hline
\mbox{\tt in}  & {\em cx} & current center table x \\
\hline
\mbox{\tt in}  & {\em cy} & current center table y \\
\hline
\mbox{\tt in}  & {\em ax} & current alignment table x \\
\hline
\mbox{\tt in}  & {\em ay} & current alignment table y \\
\hline
\mbox{\tt in}  & {\em az} & current alignment table z \\
\hline
\end{DoxyParams}


Definition at line 952 of file lspg.\-c.


\begin{DoxyCode}
                             \{
  \hyperlink{lspg_8c_af7d6efd861b152a371442791deb42bd3}{lspg\_seq\_run\_prep\_call}( skey, \hyperlink{lspmac_8c_a0be79ccb7ebf3a665248fd856112b9fd}{kappa}, \hyperlink{lspmac_8c_ac8070dc568ad974a3db42b51eca828cc}{phi}, cx, 
      cy, ax, ay, az);
  \hyperlink{lspg_8c_ac0b01f501322432a8fa37f31898c3499}{lspg\_seq\_run\_prep\_wait}();
  \hyperlink{lspg_8c_a472b09ddf716c80207f97e2bb5d37d66}{lspg\_seq\_run\_prep\_done}();
\}
\end{DoxyCode}
\hypertarget{pgpmac_8h_a95e3fd7c1685d7e6ab6d0a295ab42f78}{\index{pgpmac.\-h@{pgpmac.\-h}!lspg\-\_\-zoom\-\_\-lut\-\_\-call@{lspg\-\_\-zoom\-\_\-lut\-\_\-call}}
\index{lspg\-\_\-zoom\-\_\-lut\-\_\-call@{lspg\-\_\-zoom\-\_\-lut\-\_\-call}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lspg\-\_\-zoom\-\_\-lut\-\_\-call}]{\setlength{\rightskip}{0pt plus 5cm}void lspg\-\_\-zoom\-\_\-lut\-\_\-call (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{pgpmac_8h_a95e3fd7c1685d7e6ab6d0a295ab42f78}
\hypertarget{pgpmac_8h_a6a1b639686b771c1213b6e23716a7898}{\index{pgpmac.\-h@{pgpmac.\-h}!lspmac\-\_\-get\-Position@{lspmac\-\_\-get\-Position}}
\index{lspmac\-\_\-get\-Position@{lspmac\-\_\-get\-Position}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lspmac\-\_\-get\-Position}]{\setlength{\rightskip}{0pt plus 5cm}double lspmac\-\_\-get\-Position (
\begin{DoxyParamCaption}
\item[{{\bf lspmac\-\_\-motor\-\_\-t} $\ast$}]{mp}
\end{DoxyParamCaption}
)}}\label{pgpmac_8h_a6a1b639686b771c1213b6e23716a7898}


get the motor position (with locking) 


\begin{DoxyParams}{Parameters}
{\em mp} & the motor object \\
\hline
\end{DoxyParams}


Definition at line 1236 of file lspmac.\-c.


\begin{DoxyCode}
                                               \{
  \textcolor{keywordtype}{double} rtn;
  pthread\_mutex\_lock( &(mp->\hyperlink{structlspmac__motor__struct_a188c5b1e991750ce2ffd53e0192e0907}{mutex}));
  rtn = mp->\hyperlink{structlspmac__motor__struct_af8ffb3aed907d8664b65b37601954411}{position};
  pthread\_mutex\_unlock( &(mp->\hyperlink{structlspmac__motor__struct_a188c5b1e991750ce2ffd53e0192e0907}{mutex}));
  \textcolor{keywordflow}{return} rtn;
\}
\end{DoxyCode}
\hypertarget{pgpmac_8h_ae3e30b0ba9b5d5a291fa29b77ba920d8}{\index{pgpmac.\-h@{pgpmac.\-h}!lspmac\-\_\-init@{lspmac\-\_\-init}}
\index{lspmac\-\_\-init@{lspmac\-\_\-init}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lspmac\-\_\-init}]{\setlength{\rightskip}{0pt plus 5cm}void lspmac\-\_\-init (
\begin{DoxyParamCaption}
\item[{int}]{, }
\item[{int}]{}
\end{DoxyParamCaption}
)}}\label{pgpmac_8h_ae3e30b0ba9b5d5a291fa29b77ba920d8}


Initialize this module. 



Definition at line 2528 of file lspmac.\-c.


\begin{DoxyCode}
                   \{
  \hyperlink{structmd2StatusStruct}{md2\_status\_t} *p;

  \textcolor{comment}{// Set our global harvest flags}
  \hyperlink{lspmac_8c_a07b7b8254772075e6a4ced500b589c36}{getivars} = ivarsflag;
  \hyperlink{lspmac_8c_a50e9c0a06654fd81b3446a6e54ff12c3}{getmvars} = mvarsflag;

  \textcolor{comment}{// All important status mutex}
  pthread\_mutex\_init( &\hyperlink{lspmac_8c_a7a3e763682bd7f987d07f149e94b3bf8}{md2\_status\_mutex}, NULL);

  \textcolor{comment}{//}
  \textcolor{comment}{// Get the MD2 initialization strings}
  \textcolor{comment}{//}
  \hyperlink{lspmac_8c_a45e8803dd459ea079a96fcbfb4709885}{lspmac\_md2\_init} = \hyperlink{lsredis_8c_ad3bb3ebbae1ffbd03e062ecdd663cc6a}{lsredis\_get\_obj}( \textcolor{stringliteral}{"
      md2\_pmac.init"});

  \textcolor{comment}{//}
  \textcolor{comment}{// Initialize the motor objects}
  \textcolor{comment}{//}

  p = &\hyperlink{lspmac_8c_ad5bce7451d48127bace5af445d03b492}{md2\_status};

  \hyperlink{lspmac_8c_a8237e646ce032a840637a4ef7bff49b9}{omega}  = \hyperlink{lspmac_8c_a95c0a2d36e4e2a0f170fcf3583e7c422}{lspmac\_motor\_init}( &(\hyperlink{lspmac_8c_a894c709ddd0652583d6db22e86282503}{lspmac\_motors}
      [ 0]), 0, 0, &p->\hyperlink{structmd2StatusStruct_a6ce303bec89082cae1e9b1fddf6b6c10}{omega\_act\_pos},     &p->\hyperlink{structmd2StatusStruct_af6cf3cd65b9ef205685a0d970f168907}{omega\_status\_1}
      ,     &p->\hyperlink{structmd2StatusStruct_a8577c9df7b663b548b2759ac3db721cd}{omega\_status\_2},     \textcolor{stringliteral}{"Omega   #1 &1 A"}, \textcolor{stringliteral}{"omega"},       
      \hyperlink{lspmac_8c_aa4ea5a4c387ef167702c58eaddcb4151}{lspmac\_moveabs\_queue});
  \hyperlink{lspmac_8c_a6cb218bdccfe5a93471c161f15a15cab}{alignx} = \hyperlink{lspmac_8c_a95c0a2d36e4e2a0f170fcf3583e7c422}{lspmac\_motor\_init}( &(\hyperlink{lspmac_8c_a894c709ddd0652583d6db22e86282503}{lspmac\_motors}
      [ 1]), 0, 1, &p->\hyperlink{structmd2StatusStruct_a9653a75bc0b66c5f86d8b0206dc39b4f}{alignx\_act\_pos},    &p->\hyperlink{structmd2StatusStruct_a56accf8cb00c59bff87ed75df7dafbbe}{alignx\_status\_1}
      ,    &p->\hyperlink{structmd2StatusStruct_a2feb35ceab8129fd2cc34d1104af8b8f}{alignx\_status\_2},    \textcolor{stringliteral}{"Align X #2 &3 X"}, \textcolor{stringliteral}{"align.x"},     
      \hyperlink{lspmac_8c_aa4ea5a4c387ef167702c58eaddcb4151}{lspmac\_moveabs\_queue});
  \hyperlink{lspmac_8c_a737c246c3948e644a18d191a931e1acd}{aligny} = \hyperlink{lspmac_8c_a95c0a2d36e4e2a0f170fcf3583e7c422}{lspmac\_motor\_init}( &(\hyperlink{lspmac_8c_a894c709ddd0652583d6db22e86282503}{lspmac\_motors}
      [ 2]), 0, 2, &p->\hyperlink{structmd2StatusStruct_a0d40a01d2aa93c443526e826440f77fc}{aligny\_act\_pos},    &p->\hyperlink{structmd2StatusStruct_a2f2a11fe2fc7a446323def2be465185a}{aligny\_status\_1}
      ,    &p->\hyperlink{structmd2StatusStruct_a1f98d8b9831e32d77129f9b0f1d7d255}{aligny\_status\_2},    \textcolor{stringliteral}{"Align Y #3 &3 Y"}, \textcolor{stringliteral}{"align.y"},     
      \hyperlink{lspmac_8c_aa4ea5a4c387ef167702c58eaddcb4151}{lspmac\_moveabs\_queue});
  \hyperlink{lspmac_8c_ae7642b1da0f7c7f8448104c691d40a12}{alignz} = \hyperlink{lspmac_8c_a95c0a2d36e4e2a0f170fcf3583e7c422}{lspmac\_motor\_init}( &(\hyperlink{lspmac_8c_a894c709ddd0652583d6db22e86282503}{lspmac\_motors}
      [ 3]), 0, 3, &p->\hyperlink{structmd2StatusStruct_a480f892fe91b05b2980fb00064807e2b}{alignz\_act\_pos},    &p->\hyperlink{structmd2StatusStruct_aadbfac5709de57e449a37e2937d6ade7}{alignz\_status\_1}
      ,    &p->\hyperlink{structmd2StatusStruct_ac378da16eeaab2bc47f3f8f88f7411ed}{alignz\_status\_2},    \textcolor{stringliteral}{"Align Z #4 &3 Z"}, \textcolor{stringliteral}{"align.z"},     
      \hyperlink{lspmac_8c_aa4ea5a4c387ef167702c58eaddcb4151}{lspmac\_moveabs\_queue});
  \hyperlink{lspmac_8c_aa90d2363b744acbd4d45133b7a716d8f}{anal}   = \hyperlink{lspmac_8c_a95c0a2d36e4e2a0f170fcf3583e7c422}{lspmac\_motor\_init}( &(\hyperlink{lspmac_8c_a894c709ddd0652583d6db22e86282503}{lspmac\_motors}
      [ 4]), 0, 4, &p->\hyperlink{structmd2StatusStruct_a49d1151b0e819646587be0ca9c9d612a}{analyzer\_act\_pos},  &p->\hyperlink{structmd2StatusStruct_ab876b484f55bcce576fcd89dcc3f7267}{analyzer\_status\_1}
      ,  &p->\hyperlink{structmd2StatusStruct_a4f88bb778e4e18f1fbf7672ac11e7433}{analyzer\_status\_2},  \textcolor{stringliteral}{"Anal    #5"},      \textcolor{stringliteral}{"lightPolar"},  
      \hyperlink{lspmac_8c_aa4ea5a4c387ef167702c58eaddcb4151}{lspmac\_moveabs\_queue});
  \hyperlink{lspmac_8c_ad53a42cfaa04eff0336a44c8c9986333}{zoom}   = \hyperlink{lspmac_8c_a95c0a2d36e4e2a0f170fcf3583e7c422}{lspmac\_motor\_init}( &(\hyperlink{lspmac_8c_a894c709ddd0652583d6db22e86282503}{lspmac\_motors}
      [ 5]), 1, 0, &p->\hyperlink{structmd2StatusStruct_a920b80e9f5f08aedac3ad541d5ffc8ae}{zoom\_act\_pos},      &p->\hyperlink{structmd2StatusStruct_af28e978b761dc07eefed3971547cfd4d}{zoom\_status\_1}, 
           &p->\hyperlink{structmd2StatusStruct_a34e4200315a083deb8a970e21bbbe277}{zoom\_status\_2},      \textcolor{stringliteral}{"Zoom    #6 &4 Z"}, \textcolor{stringliteral}{"cam.zoom"},    
      \hyperlink{lspmac_8c_ad6ae1e37afd118f24ab1c6878da53878}{lspmac\_movezoom\_queue});
  \hyperlink{lspmac_8c_a139200ddaa9856a7ffcec0e6cbaa8f1b}{apery}  = \hyperlink{lspmac_8c_a95c0a2d36e4e2a0f170fcf3583e7c422}{lspmac\_motor\_init}( &(\hyperlink{lspmac_8c_a894c709ddd0652583d6db22e86282503}{lspmac\_motors}
      [ 6]), 1, 1, &p->\hyperlink{structmd2StatusStruct_a2a434d2b57dbb669de0765486a1516ff}{aperturey\_act\_pos}, &p->\hyperlink{structmd2StatusStruct_a2ef953eaddf7058bf4276585e6ff066b}{aperturey\_status\_1}
      , &p->\hyperlink{structmd2StatusStruct_a0a7738f13a0fa80626cafc2299b104b4}{aperturey\_status\_2}, \textcolor{stringliteral}{"Aper Y  #7 &5 Y"}, \textcolor{stringliteral}{"appy"},        
      \hyperlink{lspmac_8c_aa4ea5a4c387ef167702c58eaddcb4151}{lspmac\_moveabs\_queue});
  \hyperlink{lspmac_8c_ab93bd6ee850b285ca3a95e64d15e9477}{aperz}  = \hyperlink{lspmac_8c_a95c0a2d36e4e2a0f170fcf3583e7c422}{lspmac\_motor\_init}( &(\hyperlink{lspmac_8c_a894c709ddd0652583d6db22e86282503}{lspmac\_motors}
      [ 7]), 1, 2, &p->\hyperlink{structmd2StatusStruct_a62d584ce23cfd9aa626d3c03649b455c}{aperturez\_act\_pos}, &p->\hyperlink{structmd2StatusStruct_a27880dd795e1ba4fea4870c64ee3aa84}{aperturez\_status\_1}
      , &p->\hyperlink{structmd2StatusStruct_ae407a99e428d9f4a7444a02c8bc3414e}{aperturez\_status\_2}, \textcolor{stringliteral}{"Aper Z  #8 &5 Z"}, \textcolor{stringliteral}{"appz"},        
      \hyperlink{lspmac_8c_aa4ea5a4c387ef167702c58eaddcb4151}{lspmac\_moveabs\_queue});
  \hyperlink{lspmac_8c_a51358daaea8b5236f08414877d8af6c2}{capy}   = \hyperlink{lspmac_8c_a95c0a2d36e4e2a0f170fcf3583e7c422}{lspmac\_motor\_init}( &(\hyperlink{lspmac_8c_a894c709ddd0652583d6db22e86282503}{lspmac\_motors}
      [ 8]), 1, 3, &p->\hyperlink{structmd2StatusStruct_ae25122a6db146501b51609b9cb59b044}{capy\_act\_pos},      &p->\hyperlink{structmd2StatusStruct_a7f4e945e80b1980b9e69366a69ad79cc}{capy\_status\_1}, 
           &p->\hyperlink{structmd2StatusStruct_a5d7c10d9a16ebcc53ac4a0770ab2ef62}{capy\_status\_2},      \textcolor{stringliteral}{"Cap Y   #9 &5 U"}, \textcolor{stringliteral}{"capy"},        
      \hyperlink{lspmac_8c_aa4ea5a4c387ef167702c58eaddcb4151}{lspmac\_moveabs\_queue});
  \hyperlink{lspmac_8c_aa45f268d0af9f3d465acfab128919718}{capz}   = \hyperlink{lspmac_8c_a95c0a2d36e4e2a0f170fcf3583e7c422}{lspmac\_motor\_init}( &(\hyperlink{lspmac_8c_a894c709ddd0652583d6db22e86282503}{lspmac\_motors}
      [ 9]), 1, 4, &p->\hyperlink{structmd2StatusStruct_a257c04efac3a33d5d34b21d64c6f1266}{capz\_act\_pos},      &p->\hyperlink{structmd2StatusStruct_a719db4477f35331eaa8b7b44150e88a2}{capz\_status\_1}, 
           &p->\hyperlink{structmd2StatusStruct_a3abb998bb89433aed16121d0dae6275a}{capz\_status\_2},      \textcolor{stringliteral}{"Cap Z  #10 &5 V"}, \textcolor{stringliteral}{"capz"},        
      \hyperlink{lspmac_8c_aa4ea5a4c387ef167702c58eaddcb4151}{lspmac\_moveabs\_queue});
  \hyperlink{lspmac_8c_a589431b3a79c21c251fcb97cc9126991}{scint}  = \hyperlink{lspmac_8c_a95c0a2d36e4e2a0f170fcf3583e7c422}{lspmac\_motor\_init}( &(\hyperlink{lspmac_8c_a894c709ddd0652583d6db22e86282503}{lspmac\_motors}
      [10]), 2, 0, &p->\hyperlink{structmd2StatusStruct_a1c146fc792c4285eed5b2c446c214f98}{scint\_act\_pos},     &p->\hyperlink{structmd2StatusStruct_a1723870357f428ac5c2758a2c9a475c7}{scint\_status\_1}
      ,     &p->\hyperlink{structmd2StatusStruct_a4e5bc72e2f4007370f1c29ea272c952f}{scint\_status\_2},     \textcolor{stringliteral}{"Scin Z #11 &5 W"}, \textcolor{stringliteral}{"scint"},       
      \hyperlink{lspmac_8c_aa4ea5a4c387ef167702c58eaddcb4151}{lspmac\_moveabs\_queue});
  \hyperlink{lspmac_8c_ac940d950d9efeaf3f0ae67e9bf331188}{cenx}   = \hyperlink{lspmac_8c_a95c0a2d36e4e2a0f170fcf3583e7c422}{lspmac\_motor\_init}( &(\hyperlink{lspmac_8c_a894c709ddd0652583d6db22e86282503}{lspmac\_motors}
      [11]), 2, 1, &p->\hyperlink{structmd2StatusStruct_ae7924b6e91e1de82f6f7910cb3a9c9bd}{centerx\_act\_pos},   &p->\hyperlink{structmd2StatusStruct_aa619cdbd7a563408c6b825ddc4f74ebb}{centerx\_status\_1}
      ,   &p->\hyperlink{structmd2StatusStruct_ae4fad6debe138ed7815d463e83f8d0f6}{centerx\_status\_2},   \textcolor{stringliteral}{"Cen X  #17 &2 X"}, \textcolor{stringliteral}{"centering.x"}, 
      \hyperlink{lspmac_8c_aa4ea5a4c387ef167702c58eaddcb4151}{lspmac\_moveabs\_queue});
  \hyperlink{lspmac_8c_aaed18e738ba7bfb6c771a44f5d7ea827}{ceny}   = \hyperlink{lspmac_8c_a95c0a2d36e4e2a0f170fcf3583e7c422}{lspmac\_motor\_init}( &(\hyperlink{lspmac_8c_a894c709ddd0652583d6db22e86282503}{lspmac\_motors}
      [12]), 2, 2, &p->\hyperlink{structmd2StatusStruct_a6be71a92a599d490ca808af8c7e7faa0}{centery\_act\_pos},   &p->\hyperlink{structmd2StatusStruct_a57f65ebe28ef88f1c632d9f35d9167eb}{centery\_status\_1}
      ,   &p->\hyperlink{structmd2StatusStruct_aa242098c185cce8f852cd6e081ef0b1d}{centery\_status\_2},   \textcolor{stringliteral}{"Cen Y  #18 &2 Y"}, \textcolor{stringliteral}{"centering.y"}, 
      \hyperlink{lspmac_8c_aa4ea5a4c387ef167702c58eaddcb4151}{lspmac\_moveabs\_queue});
  \hyperlink{lspmac_8c_a0be79ccb7ebf3a665248fd856112b9fd}{kappa}  = \hyperlink{lspmac_8c_a95c0a2d36e4e2a0f170fcf3583e7c422}{lspmac\_motor\_init}( &(\hyperlink{lspmac_8c_a894c709ddd0652583d6db22e86282503}{lspmac\_motors}
      [13]), 2, 3, &p->\hyperlink{structmd2StatusStruct_ac384fb7073387dd5dcb2e85a00ec8a77}{kappa\_act\_pos},     &p->\hyperlink{structmd2StatusStruct_ab152694bc32d37c1d180f55e8d282020}{kappa\_status\_1}
      ,     &p->\hyperlink{structmd2StatusStruct_af6891f5f8dcfc62668f64c583042c6bc}{kappa\_status\_2},     \textcolor{stringliteral}{"Kappa  #19 &7 X"}, \textcolor{stringliteral}{"kappa"},       
      \hyperlink{lspmac_8c_aa4ea5a4c387ef167702c58eaddcb4151}{lspmac\_moveabs\_queue});
  \hyperlink{lspmac_8c_ac8070dc568ad974a3db42b51eca828cc}{phi}    = \hyperlink{lspmac_8c_a95c0a2d36e4e2a0f170fcf3583e7c422}{lspmac\_motor\_init}( &(\hyperlink{lspmac_8c_a894c709ddd0652583d6db22e86282503}{lspmac\_motors}[
      14]), 2, 4, &p->\hyperlink{structmd2StatusStruct_a4de22995a72ff6e72a1a9ccab6d00620}{phi\_act\_pos},       &p->\hyperlink{structmd2StatusStruct_ad8b8fd90ffff43016e2adaab5ccbfa02}{phi\_status\_1},     
        &p->\hyperlink{structmd2StatusStruct_a0e6cea4c32cb34e602b9ac3d21259219}{phi\_status\_2},       \textcolor{stringliteral}{"Phi    #20 &7 Y"}, \textcolor{stringliteral}{"phi"},         
      \hyperlink{lspmac_8c_aa4ea5a4c387ef167702c58eaddcb4151}{lspmac\_moveabs\_queue});

  \hyperlink{lspmac_8c_a26dec4623af9beed912b8e7e6f99822c}{fshut}  = \hyperlink{lspmac_8c_a40aa4aeb5c799a6a3a089137da4fd6a8}{lspmac\_fshut\_init}( &(\hyperlink{lspmac_8c_a894c709ddd0652583d6db22e86282503}{lspmac\_motors}
      [15]));
  \hyperlink{lspmac_8c_aeb09895663eff333b7a75acb319a9fc1}{flight} = \hyperlink{lspmac_8c_a676f13681af304b58475f8ba45f86f28}{lspmac\_dac\_init}( &(\hyperlink{lspmac_8c_a894c709ddd0652583d6db22e86282503}{lspmac\_motors}[1
      6]), &p->\hyperlink{structmd2StatusStruct_a3be73c48b09190241a2bcb801af5b97c}{front\_dac},   \textcolor{stringliteral}{"M1200"}, \textcolor{stringliteral}{"frontLight.intensity"}, 
      \hyperlink{lspmac_8c_a7d601716497857c2b5c072c1aed37b71}{lspmac\_movedac\_queue});
  \hyperlink{lspmac_8c_a85d6eaa4b4a82bb3112574f458d1dc50}{blight} = \hyperlink{lspmac_8c_a676f13681af304b58475f8ba45f86f28}{lspmac\_dac\_init}( &(\hyperlink{lspmac_8c_a894c709ddd0652583d6db22e86282503}{lspmac\_motors}[1
      7]), &p->\hyperlink{structmd2StatusStruct_a33ce490348c8de255cf49b96469d3d4e}{back\_dac},    \textcolor{stringliteral}{"M1201"}, \textcolor{stringliteral}{"backLight.intensity"},  
      \hyperlink{lspmac_8c_a7d601716497857c2b5c072c1aed37b71}{lspmac\_movedac\_queue});
  \hyperlink{lspmac_8c_a8a3ca6fcf5e24dcc26170736843e53b2}{fscint} = \hyperlink{lspmac_8c_a676f13681af304b58475f8ba45f86f28}{lspmac\_dac\_init}( &(\hyperlink{lspmac_8c_a894c709ddd0652583d6db22e86282503}{lspmac\_motors}[1
      8]), &p->\hyperlink{structmd2StatusStruct_a031be48adfa016c637d6eae49054c435}{scint\_piezo}, \textcolor{stringliteral}{"M1203"}, \textcolor{stringliteral}{"scint.focus"},          
      \hyperlink{lspmac_8c_a7d601716497857c2b5c072c1aed37b71}{lspmac\_movedac\_queue});

  \hyperlink{lspmac_8c_af813a2eff0b7efa4c70633559054e84c}{blight\_ud} = \hyperlink{lspmac_8c_aeaa263af25d139f249d8b825a058d0ce}{lspmac\_bo\_init}( &(\hyperlink{lspmac_8c_a894c709ddd0652583d6db22e86282503}{lspmac\_motors}
      [19]), \textcolor{stringliteral}{"backLight"},  \textcolor{stringliteral}{"M1101=%d"}, &(\hyperlink{lspmac_8c_ad5bce7451d48127bace5af445d03b492}{md2\_status}.\hyperlink{structmd2StatusStruct_ab09c1342dc12052b8f5b35f78ef95000}{acc11c\_5}), 0x02)
      ;
  \hyperlink{lspmac_8c_ae78d9a757d4c85419fff9c94b15e25d7}{cryo}      = \hyperlink{lspmac_8c_aeaa263af25d139f249d8b825a058d0ce}{lspmac\_bo\_init}( &(\hyperlink{lspmac_8c_a894c709ddd0652583d6db22e86282503}{lspmac\_motors}[20
      ]), \textcolor{stringliteral}{"cryo"},       \textcolor{stringliteral}{"M1102=%d"}, &(\hyperlink{lspmac_8c_ad5bce7451d48127bace5af445d03b492}{md2\_status}.\hyperlink{structmd2StatusStruct_ab09c1342dc12052b8f5b35f78ef95000}{acc11c\_5}), 0x04);
  \hyperlink{lspmac_8c_a9d9c5030d817483ca9518027c91adac4}{dryer}     = \hyperlink{lspmac_8c_aeaa263af25d139f249d8b825a058d0ce}{lspmac\_bo\_init}( &(\hyperlink{lspmac_8c_a894c709ddd0652583d6db22e86282503}{lspmac\_motors}[2
      1]), \textcolor{stringliteral}{"dryer"},      \textcolor{stringliteral}{"M1103=%d"}, &(\hyperlink{lspmac_8c_ad5bce7451d48127bace5af445d03b492}{md2\_status}.\hyperlink{structmd2StatusStruct_ab09c1342dc12052b8f5b35f78ef95000}{acc11c\_5}), 0x08);
  \hyperlink{lspmac_8c_addb26c80065506faa1de3c1b468fe03f}{fluo}      = \hyperlink{lspmac_8c_aeaa263af25d139f249d8b825a058d0ce}{lspmac\_bo\_init}( &(\hyperlink{lspmac_8c_a894c709ddd0652583d6db22e86282503}{lspmac\_motors}[22
      ]), \textcolor{stringliteral}{"fluo"},       \textcolor{stringliteral}{"M1008=%d"}, &(\hyperlink{lspmac_8c_ad5bce7451d48127bace5af445d03b492}{md2\_status}.\hyperlink{structmd2StatusStruct_ad186f06cb4670b00b8af8264d1da66a4}{acc11c\_2}), 0x01);
  \hyperlink{lspmac_8c_a6630442dc65ce8a30a24ed718b301971}{flight\_oo} = \hyperlink{lspmac_8c_a25e8b92da927708fab6ac41feee6f502}{lspmac\_soft\_motor\_init}( &(
      \hyperlink{lspmac_8c_a894c709ddd0652583d6db22e86282503}{lspmac\_motors}[23]), \textcolor{stringliteral}{"frontLight"},        
      \hyperlink{lspmac_8c_a1c529ad597a2ff5cb06a199a04ca9a8c}{lspmac\_moveabs\_frontlight\_oo\_queue});
  \hyperlink{lspmac_8c_af55c51d52c4586b647114f95d7ac1f42}{blight\_f}  = \hyperlink{lspmac_8c_a25e8b92da927708fab6ac41feee6f502}{lspmac\_soft\_motor\_init}( &(
      \hyperlink{lspmac_8c_a894c709ddd0652583d6db22e86282503}{lspmac\_motors}[24]), \textcolor{stringliteral}{"backLight.factor"},  
      \hyperlink{lspmac_8c_ae8f8f355aefad437e4364469024e2e07}{lspmac\_moveabs\_blight\_factor\_queue});
  \hyperlink{lspmac_8c_aabf4ec595b5183c1777d029ca56134b0}{flight\_f}  = \hyperlink{lspmac_8c_a25e8b92da927708fab6ac41feee6f502}{lspmac\_soft\_motor\_init}( &(
      \hyperlink{lspmac_8c_a894c709ddd0652583d6db22e86282503}{lspmac\_motors}[25]), \textcolor{stringliteral}{"frontLight.factor"}, 
      \hyperlink{lspmac_8c_a64c4eff486a01a8e170a65c0d68777aa}{lspmac\_moveabs\_flight\_factor\_queue});

  \hyperlink{lspmac_8c_a28df32fd6be9160603aa1bb74a823574}{cryo\_switch} = \hyperlink{lspmac_8c_ac27a61fa5aca398b0db588674e7f6dc7}{lspmac\_bi\_init}( &(\hyperlink{lspmac_8c_a42239df328ad8eab87f82dc00f0619e7}{lspmac\_bis}
      [0]), &(\hyperlink{lspmac_8c_ad5bce7451d48127bace5af445d03b492}{md2\_status}.\hyperlink{structmd2StatusStruct_a69fc2e30a5de0a11c992d133e7a761cd}{acc11c\_1}), 0x04, \textcolor{stringliteral}{"CryoSwitchChanged"}, \textcolor{stringliteral}{"
      CryoSwitchChanged"});

  \textcolor{comment}{//}
  \textcolor{comment}{// Initialize several commands that get called, perhaps, alot}
  \textcolor{comment}{//}
  \hyperlink{lspmac_8c_a6fcbbe47fe9912533962601f5befdb29}{rr\_cmd}.\hyperlink{structtagEthernetCmd_a6a155eb3ae546dd29369c4a33ddb3310}{RequestType} = \hyperlink{lspmac_8c_a5485d08fdc80533b5cebadff63696ed2}{VR\_UPLOAD};
  \hyperlink{lspmac_8c_a6fcbbe47fe9912533962601f5befdb29}{rr\_cmd}.\hyperlink{structtagEthernetCmd_a0dc566e7edbb226f1a4ea443d93d56e2}{Request}     = \hyperlink{lspmac_8c_aad3c7b4a9403e56c09eceadcf21252c0}{VR\_PMAC\_READREADY};
  \hyperlink{lspmac_8c_a6fcbbe47fe9912533962601f5befdb29}{rr\_cmd}.\hyperlink{structtagEthernetCmd_aec0ee9a5f6c7e3bc6e4bd98f1bd52783}{wValue}      = 0;
  \hyperlink{lspmac_8c_a6fcbbe47fe9912533962601f5befdb29}{rr\_cmd}.\hyperlink{structtagEthernetCmd_a92f5a374e87d4f496b64b4888850d6e6}{wIndex}      = 0;
  \hyperlink{lspmac_8c_a6fcbbe47fe9912533962601f5befdb29}{rr\_cmd}.\hyperlink{structtagEthernetCmd_af5df25ff13ca30fa33719d0df1ab7e97}{wLength}     = htons(2);
  memset( \hyperlink{lspmac_8c_a6fcbbe47fe9912533962601f5befdb29}{rr\_cmd}.\hyperlink{structtagEthernetCmd_a872dab798127d6f589974a79c5d0aef1}{bData}, 0, \textcolor{keyword}{sizeof}(\hyperlink{lspmac_8c_a6fcbbe47fe9912533962601f5befdb29}{rr\_cmd}.\hyperlink{structtagEthernetCmd_a872dab798127d6f589974a79c5d0aef1}{bData}));

  \hyperlink{lspmac_8c_ae7b21213b9c78b6745213409f1ef7320}{gb\_cmd}.\hyperlink{structtagEthernetCmd_a6a155eb3ae546dd29369c4a33ddb3310}{RequestType} = \hyperlink{lspmac_8c_a5485d08fdc80533b5cebadff63696ed2}{VR\_UPLOAD};
  \hyperlink{lspmac_8c_ae7b21213b9c78b6745213409f1ef7320}{gb\_cmd}.\hyperlink{structtagEthernetCmd_a0dc566e7edbb226f1a4ea443d93d56e2}{Request}     = \hyperlink{lspmac_8c_a50e444b5ceb6d62a1be43c88c55c549c}{VR\_PMAC\_GETBUFFER};
  \hyperlink{lspmac_8c_ae7b21213b9c78b6745213409f1ef7320}{gb\_cmd}.\hyperlink{structtagEthernetCmd_aec0ee9a5f6c7e3bc6e4bd98f1bd52783}{wValue}      = 0;
  \hyperlink{lspmac_8c_ae7b21213b9c78b6745213409f1ef7320}{gb\_cmd}.\hyperlink{structtagEthernetCmd_a92f5a374e87d4f496b64b4888850d6e6}{wIndex}      = 0;
  \hyperlink{lspmac_8c_ae7b21213b9c78b6745213409f1ef7320}{gb\_cmd}.\hyperlink{structtagEthernetCmd_af5df25ff13ca30fa33719d0df1ab7e97}{wLength}     = htons(1400);
  memset( \hyperlink{lspmac_8c_ae7b21213b9c78b6745213409f1ef7320}{gb\_cmd}.\hyperlink{structtagEthernetCmd_a872dab798127d6f589974a79c5d0aef1}{bData}, 0, \textcolor{keyword}{sizeof}(\hyperlink{lspmac_8c_ae7b21213b9c78b6745213409f1ef7320}{gb\_cmd}.\hyperlink{structtagEthernetCmd_a872dab798127d6f589974a79c5d0aef1}{bData}));

  \hyperlink{lspmac_8c_a8908812f4ff25c196679e00d330edd81}{cr\_cmd}.\hyperlink{structtagEthernetCmd_a6a155eb3ae546dd29369c4a33ddb3310}{RequestType} = \hyperlink{lspmac_8c_a5485d08fdc80533b5cebadff63696ed2}{VR\_UPLOAD};
  \hyperlink{lspmac_8c_a8908812f4ff25c196679e00d330edd81}{cr\_cmd}.\hyperlink{structtagEthernetCmd_a0dc566e7edbb226f1a4ea443d93d56e2}{Request}     = \hyperlink{lspmac_8c_a8f4ce4666a23a3fb153d680bd1cb6556}{VR\_CTRL\_RESPONSE};
  \hyperlink{lspmac_8c_a8908812f4ff25c196679e00d330edd81}{cr\_cmd}.\hyperlink{structtagEthernetCmd_aec0ee9a5f6c7e3bc6e4bd98f1bd52783}{wValue}      = 0;
  \hyperlink{lspmac_8c_a8908812f4ff25c196679e00d330edd81}{cr\_cmd}.\hyperlink{structtagEthernetCmd_a92f5a374e87d4f496b64b4888850d6e6}{wIndex}      = 0;
  \hyperlink{lspmac_8c_a8908812f4ff25c196679e00d330edd81}{cr\_cmd}.\hyperlink{structtagEthernetCmd_af5df25ff13ca30fa33719d0df1ab7e97}{wLength}     = htons(1400);
  memset( \hyperlink{lspmac_8c_a8908812f4ff25c196679e00d330edd81}{cr\_cmd}.\hyperlink{structtagEthernetCmd_a872dab798127d6f589974a79c5d0aef1}{bData}, 0, \textcolor{keyword}{sizeof}(\hyperlink{lspmac_8c_a8908812f4ff25c196679e00d330edd81}{cr\_cmd}.\hyperlink{structtagEthernetCmd_a872dab798127d6f589974a79c5d0aef1}{bData}));

  \textcolor{comment}{//}
  \textcolor{comment}{// Initialize some mutexs and conditions}
  \textcolor{comment}{//}

  pthread\_mutex\_init( &\hyperlink{lspmac_8c_acc1bb77b9bcbc4d970f841a41fd274b3}{pmac\_queue\_mutex}, NULL);
  pthread\_cond\_init(  &\hyperlink{lspmac_8c_a8a25bd9c593c6985107f90f999ce0b08}{pmac\_queue\_cond}, NULL);

  \hyperlink{lspmac_8c_a112158e0cd50449a440ac55c7af7bea2}{lspmac\_shutter\_state} = 0;                         \textcolor{comment}{//
       assume the shutter is now closed: not a big deal if we are wrong}
  pthread\_mutex\_init( &\hyperlink{lspmac_8c_a1b78a13c654409333569815e1c109d38}{lspmac\_shutter\_mutex}, NULL);
  pthread\_cond\_init(  &\hyperlink{lspmac_8c_afbd51c2cefcee87afe994c9e9f372241}{lspmac\_shutter\_cond}, NULL);
  \hyperlink{lspmac_8c_adba7f5f4bbeabc4dac859221d4c684ba}{pmacfd}.fd = -1;

  pthread\_mutex\_init( &\hyperlink{lspmac_8c_a85679cac947e199c88794f8e5a12bf5f}{lspmac\_moving\_mutex}, NULL);
  pthread\_cond\_init(  &\hyperlink{lspmac_8c_a57547d211906c981ef20257eba99f8df}{lspmac\_moving\_cond}, NULL);
\}
\end{DoxyCode}
\hypertarget{pgpmac_8h_a62273d5e9fd9a14838f4126fb94a5138}{\index{pgpmac.\-h@{pgpmac.\-h}!lspmac\-\_\-jogabs\-\_\-queue@{lspmac\-\_\-jogabs\-\_\-queue}}
\index{lspmac\-\_\-jogabs\-\_\-queue@{lspmac\-\_\-jogabs\-\_\-queue}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lspmac\-\_\-jogabs\-\_\-queue}]{\setlength{\rightskip}{0pt plus 5cm}void lspmac\-\_\-jogabs\-\_\-queue (
\begin{DoxyParamCaption}
\item[{{\bf lspmac\-\_\-motor\-\_\-t} $\ast$}]{, }
\item[{double}]{}
\end{DoxyParamCaption}
)}}\label{pgpmac_8h_a62273d5e9fd9a14838f4126fb94a5138}


Use jog to move motor to requested position. 



Definition at line 2291 of file lspmac.\-c.


\begin{DoxyCode}
                            \{
  
  \hyperlink{lspmac_8c_a4ccd25a1a3a83cd7c9187975e52a9484}{lspmac\_move\_or\_jog\_abs\_queue}( mp, 
      requested\_position, 1);
\}
\end{DoxyCode}
\hypertarget{pgpmac_8h_adeec17e53dfc490f2a954b97fe95f0a7}{\index{pgpmac.\-h@{pgpmac.\-h}!lspmac\-\_\-move\-\_\-or\-\_\-jog\-\_\-preset\-\_\-queue@{lspmac\-\_\-move\-\_\-or\-\_\-jog\-\_\-preset\-\_\-queue}}
\index{lspmac\-\_\-move\-\_\-or\-\_\-jog\-\_\-preset\-\_\-queue@{lspmac\-\_\-move\-\_\-or\-\_\-jog\-\_\-preset\-\_\-queue}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lspmac\-\_\-move\-\_\-or\-\_\-jog\-\_\-preset\-\_\-queue}]{\setlength{\rightskip}{0pt plus 5cm}void lspmac\-\_\-move\-\_\-or\-\_\-jog\-\_\-preset\-\_\-queue (
\begin{DoxyParamCaption}
\item[{{\bf lspmac\-\_\-motor\-\_\-t} $\ast$}]{, }
\item[{char $\ast$}]{, }
\item[{int}]{}
\end{DoxyParamCaption}
)}}\label{pgpmac_8h_adeec17e53dfc490f2a954b97fe95f0a7}


move using a preset value 



Definition at line 2261 of file lspmac.\-c.


\begin{DoxyCode}
                                       \{
  \textcolor{keywordtype}{double} pos;
  \textcolor{keywordtype}{int} err;

  \textcolor{keywordflow}{if}( preset == NULL || *preset == 0)
    \textcolor{keywordflow}{return};

  err = \hyperlink{lsredis_8c_a1ad60526a09ca679f39174ce5d773abe}{lsredis\_find\_preset}( mp->name, preset, &pos);

  \textcolor{keywordflow}{if}( err != 0)
    \hyperlink{lspmac_8c_a4ccd25a1a3a83cd7c9187975e52a9484}{lspmac\_move\_or\_jog\_abs\_queue}( mp, pos, use\_jog)
      ;
\}
\end{DoxyCode}
\hypertarget{pgpmac_8h_a6809c317931c4af226e0a0217764afae}{\index{pgpmac.\-h@{pgpmac.\-h}!lspmac\-\_\-move\-\_\-or\-\_\-jog\-\_\-queue@{lspmac\-\_\-move\-\_\-or\-\_\-jog\-\_\-queue}}
\index{lspmac\-\_\-move\-\_\-or\-\_\-jog\-\_\-queue@{lspmac\-\_\-move\-\_\-or\-\_\-jog\-\_\-queue}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lspmac\-\_\-move\-\_\-or\-\_\-jog\-\_\-queue}]{\setlength{\rightskip}{0pt plus 5cm}void lspmac\-\_\-move\-\_\-or\-\_\-jog\-\_\-queue (
\begin{DoxyParamCaption}
\item[{{\bf lspmac\-\_\-motor\-\_\-t} $\ast$}]{, }
\item[{double}]{, }
\item[{int}]{}
\end{DoxyParamCaption}
)}}\label{pgpmac_8h_a6809c317931c4af226e0a0217764afae}
\hypertarget{pgpmac_8h_af9edebb71a4ebca5dad3df63164e2004}{\index{pgpmac.\-h@{pgpmac.\-h}!lspmac\-\_\-moveabs\-\_\-queue@{lspmac\-\_\-moveabs\-\_\-queue}}
\index{lspmac\-\_\-moveabs\-\_\-queue@{lspmac\-\_\-moveabs\-\_\-queue}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lspmac\-\_\-moveabs\-\_\-queue}]{\setlength{\rightskip}{0pt plus 5cm}void lspmac\-\_\-moveabs\-\_\-queue (
\begin{DoxyParamCaption}
\item[{{\bf lspmac\-\_\-motor\-\_\-t} $\ast$}]{, }
\item[{double}]{}
\end{DoxyParamCaption}
)}}\label{pgpmac_8h_af9edebb71a4ebca5dad3df63164e2004}


Use coordinate system motion program, if available, to move motor to requested position. 



Definition at line 2281 of file lspmac.\-c.


\begin{DoxyCode}
                            \{
  
  \hyperlink{lspmac_8c_a4ccd25a1a3a83cd7c9187975e52a9484}{lspmac\_move\_or\_jog\_abs\_queue}( mp, 
      requested\_position, 0);
\}
\end{DoxyCode}
\hypertarget{pgpmac_8h_a3a7fb93fb3fb9c4454613f30bfb0b1ee}{\index{pgpmac.\-h@{pgpmac.\-h}!lspmac\-\_\-run@{lspmac\-\_\-run}}
\index{lspmac\-\_\-run@{lspmac\-\_\-run}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lspmac\-\_\-run}]{\setlength{\rightskip}{0pt plus 5cm}void lspmac\-\_\-run (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{pgpmac_8h_a3a7fb93fb3fb9c4454613f30bfb0b1ee}


find a postion for a given preset name 


\begin{DoxyParams}{Parameters}
{\em mp} & Motor pointer \\
\hline
{\em name} & The preset to search for \\
\hline
{\em err} & set to non-\/zero on error, ignored if null\-Start up the lspmac thread \\
\hline
\end{DoxyParams}


Definition at line 2714 of file lspmac.\-c.


\begin{DoxyCode}
                  \{
  \textcolor{keywordtype}{char} **inits;
  \hyperlink{structlspmac__motor__struct}{lspmac\_motor\_t} *mp;
  \textcolor{keywordtype}{int} i;
  \textcolor{keywordtype}{int} active;

  pthread\_create( &\hyperlink{lspmac_8c_a6b7011dd7d2c2d3afadff8d3e50e7677}{pmac\_thread}, NULL, \hyperlink{lspmac_8c_abdec5883055967b1eda043670870f55f}{lspmac\_worker}, 
      NULL);

  \hyperlink{lsevents_8c_ab0617d3f0594b51d10e34bf397096654}{lsevents\_add\_listener}( \textcolor{stringliteral}{"CryoSwitchChanged"},    
      \hyperlink{lspmac_8c_afc00ddac633f8c8a3a699e3d22de2770}{lspmac\_cryoSwitchChanged\_cb});
  \hyperlink{lsevents_8c_ab0617d3f0594b51d10e34bf397096654}{lsevents\_add\_listener}( \textcolor{stringliteral}{"scint In Position"},    
      \hyperlink{lspmac_8c_a8707350625ca81a089a90f8b64ce6d28}{lspmac\_scint\_inPosition\_cb});
  \hyperlink{lsevents_8c_ab0617d3f0594b51d10e34bf397096654}{lsevents\_add\_listener}( \textcolor{stringliteral}{"scintDried"},           
      \hyperlink{lspmac_8c_a585676eb411025c7b44da958d4e98eb2}{lspmac\_scint\_dried\_cb});
  \hyperlink{lsevents_8c_ab0617d3f0594b51d10e34bf397096654}{lsevents\_add\_listener}( \textcolor{stringliteral}{"backLight 1"},             
      \hyperlink{lspmac_8c_a094f66824c57b27c9dad2ca36bd75e44}{lspmac\_backLight\_up\_cb});
  \hyperlink{lsevents_8c_ab0617d3f0594b51d10e34bf397096654}{lsevents\_add\_listener}( \textcolor{stringliteral}{"backLight 0"},             
      \hyperlink{lspmac_8c_a571cf14b82b5aae163af5aec3201cd3e}{lspmac\_backLight\_down\_cb});
  \hyperlink{lsevents_8c_ab0617d3f0594b51d10e34bf397096654}{lsevents\_add\_listener}( \textcolor{stringliteral}{"cam.zoom In Position"}, 
      \hyperlink{lspmac_8c_a55791bd8a07e5ca1dd2aeedf3c23942c}{lspmac\_light\_zoom\_cb});

  \textcolor{comment}{//}
  \textcolor{comment}{// Initialize the MD2 pmac (ie, turn on the right plcc's etc)}
  \textcolor{comment}{//}
  \textcolor{keywordflow}{for}( inits = \hyperlink{lsredis_8c_abe31d0e11c41b2235307612c963bb652}{lsredis\_get\_string\_array}(\hyperlink{lspmac_8c_a45e8803dd459ea079a96fcbfb4709885}{lspmac\_md2\_init}
      ); *inits != NULL; inits++) \{
    \hyperlink{lspmac_8c_aaa442d9bc7a3cdee39adea0724f0e18c}{lspmac\_SockSendline}( *inits);
    \textcolor{comment}{//    lslogging\_log\_message( "lspmac\_init: pmac init '%s'", *inits);}
  \}
  
  \textcolor{comment}{//}
  \textcolor{comment}{// Initialize the pmac's support for each motor}
  \textcolor{comment}{// (ie, set the various flag for when a motor is active or not)}
  \textcolor{comment}{//}
  \textcolor{keywordflow}{for}( i=0; i<\hyperlink{lspmac_8c_a56260f012c50a591ee7f97e500f16994}{lspmac\_nmotors}; i++) \{
    mp = &(\hyperlink{lspmac_8c_a894c709ddd0652583d6db22e86282503}{lspmac\_motors}[i]);
    active = \hyperlink{lsredis_8c_abbb4e5ece19ebd130e1be18036752a08}{lsredis\_getb}( mp->\hyperlink{structlspmac__motor__struct_aed4998885bcd5a2a30069637180f58e3}{active});

    \textcolor{comment}{// if there is a problem with "active" then don't do anything}
    \textcolor{comment}{// On the other hand, various combinations of yes/no true/fals 1/0 should
       work}
    \textcolor{comment}{//}
    \textcolor{keywordflow}{switch}( active) \{
    \textcolor{keywordflow}{case} 1:
      inits = \hyperlink{lsredis_8c_abe31d0e11c41b2235307612c963bb652}{lsredis\_get\_string\_array}( mp->\hyperlink{structlspmac__motor__struct_ac2a02f137e4a35db816bc728290d3558}{active\_init}
      );
      \textcolor{keywordflow}{break};

    \textcolor{keywordflow}{case} 0:
      inits = \hyperlink{lsredis_8c_abe31d0e11c41b2235307612c963bb652}{lsredis\_get\_string\_array}( mp->\hyperlink{structlspmac__motor__struct_ac2a02f137e4a35db816bc728290d3558}{active\_init}
      );
      \textcolor{keywordflow}{break};

    \textcolor{keywordflow}{default}:
      inits = NULL;
    \}

    \textcolor{keywordflow}{if}( inits != NULL) \{
      \textcolor{keywordflow}{while}( *inits != NULL) \{
        \hyperlink{lspmac_8c_aaa442d9bc7a3cdee39adea0724f0e18c}{lspmac\_SockSendline}( *inits);
        \textcolor{comment}{//      lslogging\_log\_message( "lspmac\_init: %s init '%s'", mp->name,
       *inits);}
        inits++;
      \}
    \}
  \}
\}
\end{DoxyCode}
\hypertarget{pgpmac_8h_aa30460bcac93f4ba19934ae19adad0ba}{\index{pgpmac.\-h@{pgpmac.\-h}!lspmac\-\_\-\-Sock\-Sendline@{lspmac\-\_\-\-Sock\-Sendline}}
\index{lspmac\-\_\-\-Sock\-Sendline@{lspmac\-\_\-\-Sock\-Sendline}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lspmac\-\_\-\-Sock\-Sendline}]{\setlength{\rightskip}{0pt plus 5cm}{\bf pmac\-\_\-cmd\-\_\-queue\-\_\-t}$\ast$ lspmac\-\_\-\-Sock\-Sendline (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{fmt, }
\item[{}]{...}
\end{DoxyParamCaption}
)}}\label{pgpmac_8h_aa30460bcac93f4ba19934ae19adad0ba}


Send a one line command. 

Uses printf style arguments. 
\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em fmt} & Printf style format string \\
\hline
\end{DoxyParams}


Definition at line 962 of file lspmac.\-c.


\begin{DoxyCode}
                                         \{
  va\_list arg\_ptr;
  \textcolor{keywordtype}{char} payload[1400];

  va\_start( arg\_ptr, fmt);
  vsnprintf( payload, \textcolor{keyword}{sizeof}(payload)-1, fmt, arg\_ptr);
  payload[ \textcolor{keyword}{sizeof}(payload)-1] = 0;
  va\_end( arg\_ptr);

  \hyperlink{lslogging_8c_a0e756b36671055ef02a8f04d2ba8a93b}{lslogging\_log\_message}( payload);

  \textcolor{keywordflow}{return} \hyperlink{lspmac_8c_a1e472a11df3765763c2fe92dd358bf0c}{lspmac\_send\_command}( \hyperlink{lspmac_8c_af24ecdc10723dc8fd6320fef416ae514}{VR\_DOWNLOAD}, 
      \hyperlink{lspmac_8c_a772b2ea2ad93989ae4275c79a93525ee}{VR\_PMAC\_SENDLINE}, 0, 0, strlen( payload), payload, 
      \hyperlink{lspmac_8c_ac89b615b3ecb738c902c3c090d7c1dc3}{lspmac\_GetShortReplyCB}, 0);
\}
\end{DoxyCode}
\hypertarget{pgpmac_8h_ac356cd43e46799929242dcf5214df7f6}{\index{pgpmac.\-h@{pgpmac.\-h}!lsredis\-\_\-cmpnstr@{lsredis\-\_\-cmpnstr}}
\index{lsredis\-\_\-cmpnstr@{lsredis\-\_\-cmpnstr}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lsredis\-\_\-cmpnstr}]{\setlength{\rightskip}{0pt plus 5cm}int lsredis\-\_\-cmpnstr (
\begin{DoxyParamCaption}
\item[{{\bf lsredis\-\_\-obj\-\_\-t} $\ast$}]{p, }
\item[{char $\ast$}]{s, }
\item[{int}]{n}
\end{DoxyParamCaption}
)}}\label{pgpmac_8h_ac356cd43e46799929242dcf5214df7f6}


Definition at line 117 of file lsredis.\-c.


\begin{DoxyCode}
                                                       \{
  \textcolor{keywordtype}{int} rtn;
  pthread\_mutex\_lock( &p->\hyperlink{structlsredis__obj__struct_a0da18e7d0f7d52459bbc6fbc696d5252}{mutex});
  \textcolor{keywordflow}{while}( p->\hyperlink{structlsredis__obj__struct_a338ffa4123bd06b39c8b58f5e695575e}{valid} == 0)
    pthread\_cond\_wait( &p->\hyperlink{structlsredis__obj__struct_a356f6a228bb19ac7d66fdb1c875d68be}{cond}, &p->\hyperlink{structlsredis__obj__struct_a0da18e7d0f7d52459bbc6fbc696d5252}{mutex});
  
  rtn = strncmp( p->\hyperlink{structlsredis__obj__struct_a0465c65288e8101805a6f91049164517}{value}, s, n);
  pthread\_mutex\_unlock( &p->\hyperlink{structlsredis__obj__struct_a0da18e7d0f7d52459bbc6fbc696d5252}{mutex});
  \textcolor{keywordflow}{return} rtn;
\}
\end{DoxyCode}
\hypertarget{pgpmac_8h_a9fc8fd0db4c71c5eae68682b43103078}{\index{pgpmac.\-h@{pgpmac.\-h}!lsredis\-\_\-cmpstr@{lsredis\-\_\-cmpstr}}
\index{lsredis\-\_\-cmpstr@{lsredis\-\_\-cmpstr}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lsredis\-\_\-cmpstr}]{\setlength{\rightskip}{0pt plus 5cm}int lsredis\-\_\-cmpstr (
\begin{DoxyParamCaption}
\item[{{\bf lsredis\-\_\-obj\-\_\-t} $\ast$}]{p, }
\item[{char $\ast$}]{s}
\end{DoxyParamCaption}
)}}\label{pgpmac_8h_a9fc8fd0db4c71c5eae68682b43103078}


Definition at line 106 of file lsredis.\-c.


\begin{DoxyCode}
                                               \{
  \textcolor{keywordtype}{int} rtn;
  pthread\_mutex\_lock( &p->\hyperlink{structlsredis__obj__struct_a0da18e7d0f7d52459bbc6fbc696d5252}{mutex});
  \textcolor{keywordflow}{while}( p->\hyperlink{structlsredis__obj__struct_a338ffa4123bd06b39c8b58f5e695575e}{valid} == 0)
    pthread\_cond\_wait( &p->\hyperlink{structlsredis__obj__struct_a356f6a228bb19ac7d66fdb1c875d68be}{cond}, &p->\hyperlink{structlsredis__obj__struct_a0da18e7d0f7d52459bbc6fbc696d5252}{mutex});
  
  rtn = strcmp( p->\hyperlink{structlsredis__obj__struct_a0465c65288e8101805a6f91049164517}{value}, s);
  pthread\_mutex\_unlock( &p->\hyperlink{structlsredis__obj__struct_a0da18e7d0f7d52459bbc6fbc696d5252}{mutex});
  \textcolor{keywordflow}{return} rtn;
\}
\end{DoxyCode}
\hypertarget{pgpmac_8h_a1ad60526a09ca679f39174ce5d773abe}{\index{pgpmac.\-h@{pgpmac.\-h}!lsredis\-\_\-find\-\_\-preset@{lsredis\-\_\-find\-\_\-preset}}
\index{lsredis\-\_\-find\-\_\-preset@{lsredis\-\_\-find\-\_\-preset}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lsredis\-\_\-find\-\_\-preset}]{\setlength{\rightskip}{0pt plus 5cm}int lsredis\-\_\-find\-\_\-preset (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{base, }
\item[{char $\ast$}]{preset\-\_\-name, }
\item[{double $\ast$}]{dval}
\end{DoxyParamCaption}
)}}\label{pgpmac_8h_a1ad60526a09ca679f39174ce5d773abe}


Definition at line 694 of file lsredis.\-c.


\begin{DoxyCode}
                                                                      \{
  \textcolor{keywordtype}{char} s[512];
  \textcolor{keywordtype}{int} i;
  \textcolor{keywordtype}{int} err;
  ENTRY htab\_input, *htab\_output;
  \hyperlink{structlsredis__obj__struct}{lsredis\_obj\_t} *p;

  i = 0;
  \textcolor{keywordflow}{for}( i=0; i<1024; i++) \{
    snprintf( s, \textcolor{keyword}{sizeof}( s)-1, \textcolor{stringliteral}{"%s.%s.presets.%d.name"}, \hyperlink{lsredis_8c_acdca9095c7a3288d7febe9f4c440a6e9}{lsredis\_head}
      , base, i);
    s[\textcolor{keyword}{sizeof}(s)-1] = 0;
    htab\_input.key  = s;
    htab\_input.data = NULL;
    err = hsearch\_r( htab\_input, FIND, &htab\_output, &\hyperlink{lsredis_8c_a42aec6aa74072797ec0344847b0e9e39}{lsredis\_htab})
      ;
    \textcolor{keywordflow}{if}( err == 0) \{
      \textcolor{comment}{// We've run out of names to look for: done}
      \hyperlink{lslogging_8c_a0e756b36671055ef02a8f04d2ba8a93b}{lslogging\_log\_message}( \textcolor{stringliteral}{"lsredis\_find\_preset: no
       preset for motor %s named '%s'"}, base, preset\_name);
      *dval = 0.0;
      \textcolor{keywordflow}{return} 0;
    \}

    \textcolor{comment}{// Check if we have a match}
    p = htab\_output->data;
    \textcolor{keywordflow}{if}( \hyperlink{lsredis_8c_a9fc8fd0db4c71c5eae68682b43103078}{lsredis\_cmpstr}( p, preset\_name)==0) \{
      \textcolor{comment}{// got a match, now look for the position}
      snprintf( s, \textcolor{keyword}{sizeof}( s)-1, \textcolor{stringliteral}{"%s.%s.presets.%d.position"}, \hyperlink{lsredis_8c_acdca9095c7a3288d7febe9f4c440a6e9}{lsredis\_head}
      , base, i);
      s[\textcolor{keyword}{sizeof}(s)-1] = 0;
      htab\_input.key = s;
      htab\_input.data = NULL;
      err = hsearch\_r( htab\_input, FIND, &htab\_output, &\hyperlink{lsredis_8c_a42aec6aa74072797ec0344847b0e9e39}{lsredis\_htab}
      );
      \textcolor{keywordflow}{if}( err == 0) \{
        \textcolor{comment}{// Name but not position? odd.}
        \hyperlink{lslogging_8c_a0e756b36671055ef02a8f04d2ba8a93b}{lslogging\_log\_message}( \textcolor{stringliteral}{"lsredis\_find\_preset:
       Error, motor %s preset '%s' has no position defined"}, base, preset\_name);
        *dval = 0.0;
        \textcolor{keywordflow}{return} 0;
      \}
      p = htab\_output->data;
      *dval = \hyperlink{lsredis_8c_aa8daf63b794b6b6341018feec205cb7d}{lsredis\_getd}( p);
      \textcolor{keywordflow}{return} 1;
    \}
  \}
  \textcolor{comment}{// How'd we get here?}
  \textcolor{comment}{// did someone really define that many presets?  And then looked for one
       that's not there?}
  *dval = 0;
  \textcolor{keywordflow}{return} 0;
\}
\end{DoxyCode}
\hypertarget{pgpmac_8h_a6d9f550b9ba36acd237925164abe3ffc}{\index{pgpmac.\-h@{pgpmac.\-h}!lsredis\-\_\-get\-\_\-obj@{lsredis\-\_\-get\-\_\-obj}}
\index{lsredis\-\_\-get\-\_\-obj@{lsredis\-\_\-get\-\_\-obj}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lsredis\-\_\-get\-\_\-obj}]{\setlength{\rightskip}{0pt plus 5cm}{\bf lsredis\-\_\-obj\-\_\-t}$\ast$ lsredis\-\_\-get\-\_\-obj (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{, }
\item[{}]{...}
\end{DoxyParamCaption}
)}}\label{pgpmac_8h_a6d9f550b9ba36acd237925164abe3ffc}


Definition at line 407 of file lsredis.\-c.


\begin{DoxyCode}
                                                \{
  \hyperlink{structlsredis__obj__struct}{lsredis\_obj\_t} *rtn;
  va\_list arg\_ptr;
  \textcolor{keywordtype}{char} k[512];
  \textcolor{keywordtype}{char} *kp;
  \textcolor{keywordtype}{int} nkp;

  va\_start( arg\_ptr, fmt);
  vsnprintf( k, \textcolor{keyword}{sizeof}(k)-1, fmt, arg\_ptr);
  k[\textcolor{keyword}{sizeof}(k)-1] = 0;
  va\_end( arg\_ptr);

  nkp = strlen(k) + strlen( \hyperlink{lsredis_8c_acdca9095c7a3288d7febe9f4c440a6e9}{lsredis\_head}) + 16;             \textcolor{comment}{// 16
       is overkill. I know. Get over it.}
  kp = calloc( nkp, \textcolor{keyword}{sizeof}( \textcolor{keywordtype}{char}));
  \textcolor{keywordflow}{if}( kp == NULL) \{
    \hyperlink{lslogging_8c_a0e756b36671055ef02a8f04d2ba8a93b}{lslogging\_log\_message}( \textcolor{stringliteral}{"lsredis\_get\_obj: Out of memory
      "});
    exit( -1);
  \}
  
  snprintf( kp, nkp-1, \textcolor{stringliteral}{"%s.%s"}, \hyperlink{lsredis_8c_acdca9095c7a3288d7febe9f4c440a6e9}{lsredis\_head}, k);
  kp[nkp-1] = 0;
  rtn = \hyperlink{lsredis_8c_ac3fb8589e280bfa18ecbca6619fea637}{\_lsredis\_get\_obj}( kp);
  free( kp);
  \textcolor{keywordflow}{return} rtn;
\}
\end{DoxyCode}
\hypertarget{pgpmac_8h_abe31d0e11c41b2235307612c963bb652}{\index{pgpmac.\-h@{pgpmac.\-h}!lsredis\-\_\-get\-\_\-string\-\_\-array@{lsredis\-\_\-get\-\_\-string\-\_\-array}}
\index{lsredis\-\_\-get\-\_\-string\-\_\-array@{lsredis\-\_\-get\-\_\-string\-\_\-array}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lsredis\-\_\-get\-\_\-string\-\_\-array}]{\setlength{\rightskip}{0pt plus 5cm}char$\ast$$\ast$ lsredis\-\_\-get\-\_\-string\-\_\-array (
\begin{DoxyParamCaption}
\item[{{\bf lsredis\-\_\-obj\-\_\-t} $\ast$}]{p}
\end{DoxyParamCaption}
)}}\label{pgpmac_8h_abe31d0e11c41b2235307612c963bb652}


Definition at line 236 of file lsredis.\-c.


\begin{DoxyCode}
                                                   \{
  \textcolor{keywordtype}{char} **rtn;

  pthread\_mutex\_lock( &p->\hyperlink{structlsredis__obj__struct_a0da18e7d0f7d52459bbc6fbc696d5252}{mutex});
  \textcolor{keywordflow}{while}( p->\hyperlink{structlsredis__obj__struct_a338ffa4123bd06b39c8b58f5e695575e}{valid} == 0)
    pthread\_cond\_wait( &p->\hyperlink{structlsredis__obj__struct_a356f6a228bb19ac7d66fdb1c875d68be}{cond}, &p->\hyperlink{structlsredis__obj__struct_a0da18e7d0f7d52459bbc6fbc696d5252}{mutex});

  rtn = p->\hyperlink{structlsredis__obj__struct_ac065eeede0e08f25bcfedd45022fe593}{avalue};
  pthread\_mutex\_unlock( &p->\hyperlink{structlsredis__obj__struct_a0da18e7d0f7d52459bbc6fbc696d5252}{mutex});
  
  \textcolor{keywordflow}{return} rtn;
\}
\end{DoxyCode}
\hypertarget{pgpmac_8h_abbb4e5ece19ebd130e1be18036752a08}{\index{pgpmac.\-h@{pgpmac.\-h}!lsredis\-\_\-getb@{lsredis\-\_\-getb}}
\index{lsredis\-\_\-getb@{lsredis\-\_\-getb}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lsredis\-\_\-getb}]{\setlength{\rightskip}{0pt plus 5cm}int lsredis\-\_\-getb (
\begin{DoxyParamCaption}
\item[{{\bf lsredis\-\_\-obj\-\_\-t} $\ast$}]{p}
\end{DoxyParamCaption}
)}}\label{pgpmac_8h_abbb4e5ece19ebd130e1be18036752a08}


Definition at line 249 of file lsredis.\-c.


\begin{DoxyCode}
                                    \{
  \textcolor{keywordtype}{int} rtn;

  pthread\_mutex\_lock( &p->\hyperlink{structlsredis__obj__struct_a0da18e7d0f7d52459bbc6fbc696d5252}{mutex});
  \textcolor{keywordflow}{while}( p->\hyperlink{structlsredis__obj__struct_a338ffa4123bd06b39c8b58f5e695575e}{valid} == 0)
    pthread\_cond\_wait( &p->\hyperlink{structlsredis__obj__struct_a356f6a228bb19ac7d66fdb1c875d68be}{cond}, &p->\hyperlink{structlsredis__obj__struct_a0da18e7d0f7d52459bbc6fbc696d5252}{mutex});

  rtn = p->\hyperlink{structlsredis__obj__struct_ac3df3eaa275c1e8e333024c1fa8353af}{bvalue};
  pthread\_mutex\_unlock( &p->\hyperlink{structlsredis__obj__struct_a0da18e7d0f7d52459bbc6fbc696d5252}{mutex});
  
  \textcolor{keywordflow}{return} rtn;
\}  
\end{DoxyCode}
\hypertarget{pgpmac_8h_aa8daf63b794b6b6341018feec205cb7d}{\index{pgpmac.\-h@{pgpmac.\-h}!lsredis\-\_\-getd@{lsredis\-\_\-getd}}
\index{lsredis\-\_\-getd@{lsredis\-\_\-getd}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lsredis\-\_\-getd}]{\setlength{\rightskip}{0pt plus 5cm}double lsredis\-\_\-getd (
\begin{DoxyParamCaption}
\item[{{\bf lsredis\-\_\-obj\-\_\-t} $\ast$}]{p}
\end{DoxyParamCaption}
)}}\label{pgpmac_8h_aa8daf63b794b6b6341018feec205cb7d}


Definition at line 210 of file lsredis.\-c.


\begin{DoxyCode}
                                       \{
  \textcolor{keywordtype}{double} rtn;

  pthread\_mutex\_lock( &p->\hyperlink{structlsredis__obj__struct_a0da18e7d0f7d52459bbc6fbc696d5252}{mutex});
  \textcolor{keywordflow}{while}( p->\hyperlink{structlsredis__obj__struct_a338ffa4123bd06b39c8b58f5e695575e}{valid} == 0)
    pthread\_cond\_wait( &p->\hyperlink{structlsredis__obj__struct_a356f6a228bb19ac7d66fdb1c875d68be}{cond}, &p->\hyperlink{structlsredis__obj__struct_a0da18e7d0f7d52459bbc6fbc696d5252}{mutex});

  rtn = p->\hyperlink{structlsredis__obj__struct_ab60d0a71cabad6b921b6edb5a8f68996}{dvalue};
  pthread\_mutex\_unlock( &p->\hyperlink{structlsredis__obj__struct_a0da18e7d0f7d52459bbc6fbc696d5252}{mutex});
  
  \textcolor{keywordflow}{return} rtn;
\}
\end{DoxyCode}
\hypertarget{pgpmac_8h_a1923f998441f4f451204dfd214d52218}{\index{pgpmac.\-h@{pgpmac.\-h}!lsredis\-\_\-getl@{lsredis\-\_\-getl}}
\index{lsredis\-\_\-getl@{lsredis\-\_\-getl}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lsredis\-\_\-getl}]{\setlength{\rightskip}{0pt plus 5cm}long int lsredis\-\_\-getl (
\begin{DoxyParamCaption}
\item[{{\bf lsredis\-\_\-obj\-\_\-t} $\ast$}]{p}
\end{DoxyParamCaption}
)}}\label{pgpmac_8h_a1923f998441f4f451204dfd214d52218}


Definition at line 223 of file lsredis.\-c.


\begin{DoxyCode}
                                         \{
  \textcolor{keywordtype}{long} \textcolor{keywordtype}{int} rtn;

  pthread\_mutex\_lock( &p->\hyperlink{structlsredis__obj__struct_a0da18e7d0f7d52459bbc6fbc696d5252}{mutex});
  \textcolor{keywordflow}{while}( p->\hyperlink{structlsredis__obj__struct_a338ffa4123bd06b39c8b58f5e695575e}{valid} == 0)
    pthread\_cond\_wait( &p->\hyperlink{structlsredis__obj__struct_a356f6a228bb19ac7d66fdb1c875d68be}{cond}, &p->\hyperlink{structlsredis__obj__struct_a0da18e7d0f7d52459bbc6fbc696d5252}{mutex});

  rtn = p->\hyperlink{structlsredis__obj__struct_a26211a0ab3fc02e7776e24dbc1f1256c}{lvalue};
  pthread\_mutex\_unlock( &p->\hyperlink{structlsredis__obj__struct_a0da18e7d0f7d52459bbc6fbc696d5252}{mutex});
  
  \textcolor{keywordflow}{return} rtn;
\}  
\end{DoxyCode}
\hypertarget{pgpmac_8h_ac1994e56114b2315294527d76311f829}{\index{pgpmac.\-h@{pgpmac.\-h}!lsredis\-\_\-getstr@{lsredis\-\_\-getstr}}
\index{lsredis\-\_\-getstr@{lsredis\-\_\-getstr}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lsredis\-\_\-getstr}]{\setlength{\rightskip}{0pt plus 5cm}char$\ast$ lsredis\-\_\-getstr (
\begin{DoxyParamCaption}
\item[{{\bf lsredis\-\_\-obj\-\_\-t} $\ast$}]{p}
\end{DoxyParamCaption}
)}}\label{pgpmac_8h_ac1994e56114b2315294527d76311f829}


return a copy of the key's string value 



Definition at line 141 of file lsredis.\-c.


\begin{DoxyCode}
                                        \{
  \textcolor{keywordtype}{char} *rtn;

  \textcolor{comment}{//}
  \textcolor{comment}{// Have to use strdup since we cannot guarantee that p->value won't be freed
       while the caller is still using it}
  \textcolor{comment}{//}
  pthread\_mutex\_lock( &p->\hyperlink{structlsredis__obj__struct_a0da18e7d0f7d52459bbc6fbc696d5252}{mutex});
  \textcolor{keywordflow}{while}( p->\hyperlink{structlsredis__obj__struct_a338ffa4123bd06b39c8b58f5e695575e}{valid} == 0)
    pthread\_cond\_wait( &p->\hyperlink{structlsredis__obj__struct_a356f6a228bb19ac7d66fdb1c875d68be}{cond}, &p->\hyperlink{structlsredis__obj__struct_a0da18e7d0f7d52459bbc6fbc696d5252}{mutex});

  rtn = strdup(p->\hyperlink{structlsredis__obj__struct_a0465c65288e8101805a6f91049164517}{value});
  pthread\_mutex\_unlock( &p->\hyperlink{structlsredis__obj__struct_a0da18e7d0f7d52459bbc6fbc696d5252}{mutex});
  \textcolor{keywordflow}{return} rtn;
\}
\end{DoxyCode}
\hypertarget{pgpmac_8h_aef0f12fda57e476a50b14acdc9f30b58}{\index{pgpmac.\-h@{pgpmac.\-h}!lsredis\-\_\-init@{lsredis\-\_\-init}}
\index{lsredis\-\_\-init@{lsredis\-\_\-init}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lsredis\-\_\-init}]{\setlength{\rightskip}{0pt plus 5cm}void lsredis\-\_\-init (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{pub, }
\item[{char $\ast$}]{re, }
\item[{char $\ast$}]{head}
\end{DoxyParamCaption}
)}}\label{pgpmac_8h_aef0f12fda57e476a50b14acdc9f30b58}


Initialize this module, that is, set up the connections. 


\begin{DoxyParams}{Parameters}
{\em pub} & Publish under this (unique) name \\
\hline
{\em re} & Regular expression to select keys we want to mirror \\
\hline
{\em head} & Prepend this (+ a dot) to the beginning of requested objects \\
\hline
\end{DoxyParams}


Definition at line 775 of file lsredis.\-c.


\begin{DoxyCode}
                                                    \{

  \textcolor{keywordtype}{int} err;

  err = hcreate\_r( 8192, &\hyperlink{lsredis_8c_a42aec6aa74072797ec0344847b0e9e39}{lsredis\_htab});
  \textcolor{keywordflow}{if}( err == 0) \{
    \hyperlink{lslogging_8c_a0e756b36671055ef02a8f04d2ba8a93b}{lslogging\_log\_message}( \textcolor{stringliteral}{"lsredis\_init: Cannot create
       hash table.  Really bad things are going to happen.  hcreate\_r returnd %d"}, err);
  \}



  \hyperlink{lsredis_8c_acdca9095c7a3288d7febe9f4c440a6e9}{lsredis\_head} = strdup( head);
  \hyperlink{lsredis_8c_a0c81dce2e75584eeb14ab7d9dd86c72e}{lsredis\_publisher} = strdup( pub);

  pthread\_mutex\_init( &\hyperlink{lsredis_8c_ab3ace99b8775e2366da0cfe053b68607}{lsredis\_objs\_mutex}, NULL);
  pthread\_mutex\_init( &\hyperlink{lsredis_8c_a4a3806596ef0d2baac37257033008ff2}{lsredis\_ro\_mutex}, NULL);
  pthread\_mutex\_init( &\hyperlink{lsredis_8c_ad650f89eb0d4fe24a32ea352ac404b27}{lsredis\_wr\_mutex}, NULL);

  \hyperlink{lsredis_8c_a4d65536cb1094fb5deda0a852b181232}{subac} = redisAsyncConnect(\textcolor{stringliteral}{"127.0.0.1"}, 6379);
  \textcolor{keywordflow}{if}( \hyperlink{lsredis_8c_a4d65536cb1094fb5deda0a852b181232}{subac}->err) \{
    \hyperlink{lslogging_8c_a0e756b36671055ef02a8f04d2ba8a93b}{lslogging\_log\_message}( \textcolor{stringliteral}{"Error: %s"}, \hyperlink{lsredis_8c_a4d65536cb1094fb5deda0a852b181232}{subac}->errstr
      );
  \}

  \hyperlink{lsredis_8c_a0cd3bdc79d035eb1595371c845d14367}{subfd}.fd           = \hyperlink{lsredis_8c_a4d65536cb1094fb5deda0a852b181232}{subac}->c.fd;
  \hyperlink{lsredis_8c_a0cd3bdc79d035eb1595371c845d14367}{subfd}.events       = 0;
  \hyperlink{lsredis_8c_a4d65536cb1094fb5deda0a852b181232}{subac}->ev.data     = &\hyperlink{lsredis_8c_a0cd3bdc79d035eb1595371c845d14367}{subfd};
  \hyperlink{lsredis_8c_a4d65536cb1094fb5deda0a852b181232}{subac}->ev.addRead  = \hyperlink{lsredis_8c_adee3bccecc86dd531ac5f89491632439}{lsredis\_addRead};
  \hyperlink{lsredis_8c_a4d65536cb1094fb5deda0a852b181232}{subac}->ev.delRead  = \hyperlink{lsredis_8c_a2e1f2258b3cc864ce3eef4eda556e2a6}{lsredis\_delRead};
  \hyperlink{lsredis_8c_a4d65536cb1094fb5deda0a852b181232}{subac}->ev.addWrite = \hyperlink{lsredis_8c_a3cb6eda5c8ae80019e7a1c078940e9e9}{lsredis\_addWrite};
  \hyperlink{lsredis_8c_a4d65536cb1094fb5deda0a852b181232}{subac}->ev.delWrite = \hyperlink{lsredis_8c_a04f0119cfa1156dc34d35b237358822a}{lsredis\_delWrite};
  \hyperlink{lsredis_8c_a4d65536cb1094fb5deda0a852b181232}{subac}->ev.cleanup  = \hyperlink{lsredis_8c_a45f946a5262c23b362be17c2cb0310c2}{lsredis\_cleanup};

  \hyperlink{lsredis_8c_afc92245910ec04f9a341c092def45564}{roac} = redisAsyncConnect(\textcolor{stringliteral}{"127.0.0.1"}, 6379);
  \textcolor{keywordflow}{if}( \hyperlink{lsredis_8c_afc92245910ec04f9a341c092def45564}{roac}->err) \{
    \hyperlink{lslogging_8c_a0e756b36671055ef02a8f04d2ba8a93b}{lslogging\_log\_message}( \textcolor{stringliteral}{"Error: %s"}, \hyperlink{lsredis_8c_afc92245910ec04f9a341c092def45564}{roac}->errstr);
  \}

  \hyperlink{lsredis_8c_add819e43a356d0575ec64c346c6fed57}{rofd}.fd           = \hyperlink{lsredis_8c_afc92245910ec04f9a341c092def45564}{roac}->c.fd;
  \hyperlink{lsredis_8c_add819e43a356d0575ec64c346c6fed57}{rofd}.events       = 0;
  \hyperlink{lsredis_8c_afc92245910ec04f9a341c092def45564}{roac}->ev.data     = &\hyperlink{lsredis_8c_add819e43a356d0575ec64c346c6fed57}{rofd};
  \hyperlink{lsredis_8c_afc92245910ec04f9a341c092def45564}{roac}->ev.addRead  = \hyperlink{lsredis_8c_adee3bccecc86dd531ac5f89491632439}{lsredis\_addRead};
  \hyperlink{lsredis_8c_afc92245910ec04f9a341c092def45564}{roac}->ev.delRead  = \hyperlink{lsredis_8c_a2e1f2258b3cc864ce3eef4eda556e2a6}{lsredis\_delRead};
  \hyperlink{lsredis_8c_afc92245910ec04f9a341c092def45564}{roac}->ev.addWrite = \hyperlink{lsredis_8c_a3cb6eda5c8ae80019e7a1c078940e9e9}{lsredis\_addWrite};
  \hyperlink{lsredis_8c_afc92245910ec04f9a341c092def45564}{roac}->ev.delWrite = \hyperlink{lsredis_8c_a04f0119cfa1156dc34d35b237358822a}{lsredis\_delWrite};
  \hyperlink{lsredis_8c_afc92245910ec04f9a341c092def45564}{roac}->ev.cleanup  = \hyperlink{lsredis_8c_a45f946a5262c23b362be17c2cb0310c2}{lsredis\_cleanup};

  \hyperlink{lsredis_8c_a7ea13129ad9e41a0ed2fc19fa75ffb0d}{wrac} = redisAsyncConnect(\textcolor{stringliteral}{"10.1.0.3"}, 6379);
  \textcolor{keywordflow}{if}( \hyperlink{lsredis_8c_a7ea13129ad9e41a0ed2fc19fa75ffb0d}{wrac}->err) \{
    \hyperlink{lslogging_8c_a0e756b36671055ef02a8f04d2ba8a93b}{lslogging\_log\_message}( \textcolor{stringliteral}{"Error: %s"}, \hyperlink{lsredis_8c_a7ea13129ad9e41a0ed2fc19fa75ffb0d}{wrac}->errstr);
  \}

  \hyperlink{lsredis_8c_a13acbee14dbe8cdb98e238abb921d048}{wrfd}.fd           = \hyperlink{lsredis_8c_a7ea13129ad9e41a0ed2fc19fa75ffb0d}{wrac}->c.fd;
  \hyperlink{lsredis_8c_a13acbee14dbe8cdb98e238abb921d048}{wrfd}.events       = 0;
  \hyperlink{lsredis_8c_a7ea13129ad9e41a0ed2fc19fa75ffb0d}{wrac}->ev.data     = &\hyperlink{lsredis_8c_a13acbee14dbe8cdb98e238abb921d048}{wrfd};
  \hyperlink{lsredis_8c_a7ea13129ad9e41a0ed2fc19fa75ffb0d}{wrac}->ev.addRead  = \hyperlink{lsredis_8c_adee3bccecc86dd531ac5f89491632439}{lsredis\_addRead};
  \hyperlink{lsredis_8c_a7ea13129ad9e41a0ed2fc19fa75ffb0d}{wrac}->ev.delRead  = \hyperlink{lsredis_8c_a2e1f2258b3cc864ce3eef4eda556e2a6}{lsredis\_delRead};
  \hyperlink{lsredis_8c_a7ea13129ad9e41a0ed2fc19fa75ffb0d}{wrac}->ev.addWrite = \hyperlink{lsredis_8c_a3cb6eda5c8ae80019e7a1c078940e9e9}{lsredis\_addWrite};
  \hyperlink{lsredis_8c_a7ea13129ad9e41a0ed2fc19fa75ffb0d}{wrac}->ev.delWrite = \hyperlink{lsredis_8c_a04f0119cfa1156dc34d35b237358822a}{lsredis\_delWrite};
  \hyperlink{lsredis_8c_a7ea13129ad9e41a0ed2fc19fa75ffb0d}{wrac}->ev.cleanup  = \hyperlink{lsredis_8c_a45f946a5262c23b362be17c2cb0310c2}{lsredis\_cleanup};

  \hyperlink{lsredis_8c_a07dc95184cac704740bfe16fe4c6a4f0}{lsredis\_select}( re);
\}
\end{DoxyCode}
\hypertarget{pgpmac_8h_ac58fca47533e695c8775e0d2b9128766}{\index{pgpmac.\-h@{pgpmac.\-h}!lsredis\-\_\-regexec@{lsredis\-\_\-regexec}}
\index{lsredis\-\_\-regexec@{lsredis\-\_\-regexec}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lsredis\-\_\-regexec}]{\setlength{\rightskip}{0pt plus 5cm}int lsredis\-\_\-regexec (
\begin{DoxyParamCaption}
\item[{const regex\-\_\-t $\ast$}]{preg, }
\item[{{\bf lsredis\-\_\-obj\-\_\-t} $\ast$}]{p, }
\item[{size\-\_\-t}]{nmatch, }
\item[{regmatch\-\_\-t $\ast$}]{pmatch, }
\item[{int}]{eflags}
\end{DoxyParamCaption}
)}}\label{pgpmac_8h_ac58fca47533e695c8775e0d2b9128766}


Definition at line 128 of file lsredis.\-c.


\begin{DoxyCode}
                                                                               
                                  \{
  \textcolor{keywordtype}{int} rtn;

  pthread\_mutex\_lock( &p->\hyperlink{structlsredis__obj__struct_a0da18e7d0f7d52459bbc6fbc696d5252}{mutex});
  \textcolor{keywordflow}{while}( p->\hyperlink{structlsredis__obj__struct_a338ffa4123bd06b39c8b58f5e695575e}{valid} == 0) 
    pthread\_cond\_wait( &p->\hyperlink{structlsredis__obj__struct_a356f6a228bb19ac7d66fdb1c875d68be}{cond}, &p->\hyperlink{structlsredis__obj__struct_a0da18e7d0f7d52459bbc6fbc696d5252}{mutex});

  rtn = regexec( preg, p->\hyperlink{structlsredis__obj__struct_a0465c65288e8101805a6f91049164517}{value}, nmatch, pmatch, eflags);

  pthread\_mutex\_unlock( &p->\hyperlink{structlsredis__obj__struct_a0da18e7d0f7d52459bbc6fbc696d5252}{mutex});
\}
\end{DoxyCode}
\hypertarget{pgpmac_8h_ad438e4368d86bbe15a93dcf86deaded5}{\index{pgpmac.\-h@{pgpmac.\-h}!lsredis\-\_\-run@{lsredis\-\_\-run}}
\index{lsredis\-\_\-run@{lsredis\-\_\-run}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lsredis\-\_\-run}]{\setlength{\rightskip}{0pt plus 5cm}void lsredis\-\_\-run (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{pgpmac_8h_ad438e4368d86bbe15a93dcf86deaded5}


Definition at line 916 of file lsredis.\-c.


\begin{DoxyCode}
                   \{
  pthread\_create( &\hyperlink{lsredis_8c_a79c33eb11ad6819247930ade3a25671f}{lsredis\_thread}, NULL, \hyperlink{lsredis_8c_ade7b1ddfdc88c6964a4c90513e360f75}{lsredis\_worker}
      , NULL);
\}
\end{DoxyCode}
\hypertarget{pgpmac_8h_af712dd2e9419026eff2762ba062eeaf1}{\index{pgpmac.\-h@{pgpmac.\-h}!lstimer\-\_\-add\-\_\-timer@{lstimer\-\_\-add\-\_\-timer}}
\index{lstimer\-\_\-add\-\_\-timer@{lstimer\-\_\-add\-\_\-timer}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lstimer\-\_\-add\-\_\-timer}]{\setlength{\rightskip}{0pt plus 5cm}void lstimer\-\_\-add\-\_\-timer (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{event, }
\item[{int}]{shots, }
\item[{unsigned long int}]{secs, }
\item[{unsigned long int}]{nsecs}
\end{DoxyParamCaption}
)}}\label{pgpmac_8h_af712dd2e9419026eff2762ba062eeaf1}


Create a timer. 


\begin{DoxyParams}{Parameters}
{\em event} & Name of the event to send when the timer goes off \\
\hline
{\em shots} & Number of times to run. 0 means never, -\/1 means forever \\
\hline
{\em secs} & Number of seconds to wait \\
\hline
{\em nsecs} & Number of nano-\/seconds to run in addition to secs \\
\hline
\end{DoxyParams}


Definition at line 50 of file lstimer.\-c.


\begin{DoxyCode}
                                                                               
                        \{
  \textcolor{keywordtype}{int} i;
  \textcolor{keyword}{struct }timespec \hyperlink{kvredis_8c_ad40ac52086f6b774928af45b09d54c6e}{now};


  \textcolor{comment}{// Time we were called.  Delay is based on call time, not queued time}
  \textcolor{comment}{//}
  clock\_gettime( CLOCK\_REALTIME, &\hyperlink{kvredis_8c_ad40ac52086f6b774928af45b09d54c6e}{now});
  

  pthread\_mutex\_lock( &\hyperlink{lstimer_8c_a170993cbed9b9ec8bc64b6642a3ed581}{lstimer\_mutex});

  \textcolor{keywordflow}{for}( i=0; i<\hyperlink{lstimer_8c_af020a0f708e86162a32d2ca6373c96bb}{LSTIMER\_LIST\_LENGTH}; i++) \{
    \textcolor{keywordflow}{if}( \hyperlink{lstimer_8c_a35b456765fe2c955cef445768d12ca6c}{lstimer\_list}[i].shots == 0)
      \textcolor{keywordflow}{break};
  \}

  \textcolor{keywordflow}{if}( i == LSTIMER\_LIST\_LENGTH) \{
    pthread\_mutex\_unlock( &\hyperlink{lstimer_8c_a170993cbed9b9ec8bc64b6642a3ed581}{lstimer\_mutex});
    
    \hyperlink{lslogging_8c_a0e756b36671055ef02a8f04d2ba8a93b}{lslogging\_log\_message}( \textcolor{stringliteral}{"lstimer\_add\_timer: out of
       timers for event: %s, shots: %d,  secs: %u, nsecs: %u"},
                          event, shots, secs, nsecs);
    \textcolor{keywordflow}{return};
  \}

  strncpy( \hyperlink{lstimer_8c_a35b456765fe2c955cef445768d12ca6c}{lstimer\_list}[i].event, event, \hyperlink{pgpmac_8h_ab61d790b5572f116e091babfda53627b}{LSEVENTS\_EVENT\_LENGTH}
       - 1);
  \hyperlink{lstimer_8c_a35b456765fe2c955cef445768d12ca6c}{lstimer\_list}[i].\hyperlink{structlstimer__list__struct_a54d564e392315b2730278bb925803184}{event}[\hyperlink{pgpmac_8h_ab61d790b5572f116e091babfda53627b}{LSEVENTS\_EVENT\_LENGTH}
       - 1] = 0;
  \hyperlink{lstimer_8c_a35b456765fe2c955cef445768d12ca6c}{lstimer\_list}[i].\hyperlink{structlstimer__list__struct_ac7ab4cd1f3065156f95b49e66bf05283}{shots}        = shots;
  \hyperlink{lstimer_8c_a35b456765fe2c955cef445768d12ca6c}{lstimer\_list}[i].\hyperlink{structlstimer__list__struct_a237da48d81b7e039c54901296aeee18e}{delay\_secs}   = secs;
  \hyperlink{lstimer_8c_a35b456765fe2c955cef445768d12ca6c}{lstimer\_list}[i].\hyperlink{structlstimer__list__struct_acb0c6a1600c4168e5dfb2d477a685b29}{delay\_nsecs}  = nsecs;

  \hyperlink{lstimer_8c_a35b456765fe2c955cef445768d12ca6c}{lstimer\_list}[i].\hyperlink{structlstimer__list__struct_af0dcaad37472462c9f27d54ed0ceb75d}{next\_secs}    = secs + \hyperlink{kvredis_8c_ad40ac52086f6b774928af45b09d54c6e}{now}.tv\_sec + (
      \hyperlink{kvredis_8c_ad40ac52086f6b774928af45b09d54c6e}{now}.tv\_nsec + nsecs) / 1000000000;
  \hyperlink{lstimer_8c_a35b456765fe2c955cef445768d12ca6c}{lstimer\_list}[i].\hyperlink{structlstimer__list__struct_ab115115d5be7933f98a094b46b6583bb}{next\_nsecs}   = (\hyperlink{kvredis_8c_ad40ac52086f6b774928af45b09d54c6e}{now}.tv\_nsec + nsecs)
       % 1000000000;
  \hyperlink{lstimer_8c_a35b456765fe2c955cef445768d12ca6c}{lstimer\_list}[i].\hyperlink{structlstimer__list__struct_ab0ac2907735701cb24ec9af95a1cc787}{last\_secs}    = 0;
  \hyperlink{lstimer_8c_a35b456765fe2c955cef445768d12ca6c}{lstimer\_list}[i].\hyperlink{structlstimer__list__struct_a19acf5aa7f57aa7ce60537c3d3d6a6af}{last\_nsecs}   = 0;
  
  \hyperlink{lstimer_8c_a35b456765fe2c955cef445768d12ca6c}{lstimer\_list}[i].\hyperlink{structlstimer__list__struct_aa56c5b8ce7fa0ae93132cb9908195836}{ncalls}       = 0;
  \hyperlink{lstimer_8c_a35b456765fe2c955cef445768d12ca6c}{lstimer\_list}[i].\hyperlink{structlstimer__list__struct_a1222c76d49b149725467aa698abb7fb1}{init\_secs}    = \hyperlink{kvredis_8c_ad40ac52086f6b774928af45b09d54c6e}{now}.tv\_sec;
  \hyperlink{lstimer_8c_a35b456765fe2c955cef445768d12ca6c}{lstimer\_list}[i].\hyperlink{structlstimer__list__struct_ad5bb7fa7d669b7ebbe34d8ed2bdb257a}{init\_nsecs}   = \hyperlink{kvredis_8c_ad40ac52086f6b774928af45b09d54c6e}{now}.tv\_nsec;

  \textcolor{keywordflow}{if}( shots != 0) \{
    \hyperlink{lstimer_8c_a1a47dadbec1776920ab83409234c1833}{lstimer\_active\_timers}++;
    \hyperlink{lstimer_8c_a5a3c6ef3507448d284d91958878d3f75}{new\_timer}++;
  \}

  pthread\_cond\_signal(  &\hyperlink{lstimer_8c_a96b7516e4a15c4b879de82a569cd5f0a}{lstimer\_cond});
  pthread\_mutex\_unlock( &\hyperlink{lstimer_8c_a170993cbed9b9ec8bc64b6642a3ed581}{lstimer\_mutex});
\}
\end{DoxyCode}
\hypertarget{pgpmac_8h_a8cd37a8fb0f061456456a5d79bdd5189}{\index{pgpmac.\-h@{pgpmac.\-h}!lstimer\-\_\-init@{lstimer\-\_\-init}}
\index{lstimer\-\_\-init@{lstimer\-\_\-init}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lstimer\-\_\-init}]{\setlength{\rightskip}{0pt plus 5cm}void lstimer\-\_\-init (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{pgpmac_8h_a8cd37a8fb0f061456456a5d79bdd5189}


Initialize the timer list and pthread stuff. 



Definition at line 262 of file lstimer.\-c.


\begin{DoxyCode}
                    \{
  \textcolor{keywordtype}{int} i;

  \textcolor{keywordflow}{for}( i=0; i<\hyperlink{lstimer_8c_af020a0f708e86162a32d2ca6373c96bb}{LSTIMER\_LIST\_LENGTH}; i++) \{
    \hyperlink{lstimer_8c_a35b456765fe2c955cef445768d12ca6c}{lstimer\_list}[i].\hyperlink{structlstimer__list__struct_ac7ab4cd1f3065156f95b49e66bf05283}{shots} = 0;
  \}


  pthread\_mutex\_init( &\hyperlink{lstimer_8c_a170993cbed9b9ec8bc64b6642a3ed581}{lstimer\_mutex}, NULL);
  pthread\_cond\_init(  &\hyperlink{lstimer_8c_a96b7516e4a15c4b879de82a569cd5f0a}{lstimer\_cond}, NULL);
\}
\end{DoxyCode}
\hypertarget{pgpmac_8h_a0b918acc1a4bf737cb62b5a70f8b553a}{\index{pgpmac.\-h@{pgpmac.\-h}!lstimer\-\_\-run@{lstimer\-\_\-run}}
\index{lstimer\-\_\-run@{lstimer\-\_\-run}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lstimer\-\_\-run}]{\setlength{\rightskip}{0pt plus 5cm}void lstimer\-\_\-run (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{pgpmac_8h_a0b918acc1a4bf737cb62b5a70f8b553a}


Start up our thread. 



Definition at line 276 of file lstimer.\-c.


\begin{DoxyCode}
                   \{
  pthread\_create( &\hyperlink{lstimer_8c_a76660e8720b08f4adee2be9f44b5f419}{lstimer\_thread}, NULL, \hyperlink{lstimer_8c_ab8b409bb2a7ff78da22d988cfb3b537a}{lstimer\_worker}
      , NULL);
\}
\end{DoxyCode}
\hypertarget{pgpmac_8h_adf63440ffbc65024fef87ea6a11ea8b0}{\index{pgpmac.\-h@{pgpmac.\-h}!lsupdate\-\_\-init@{lsupdate\-\_\-init}}
\index{lsupdate\-\_\-init@{lsupdate\-\_\-init}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lsupdate\-\_\-init}]{\setlength{\rightskip}{0pt plus 5cm}void lsupdate\-\_\-init (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{pgpmac_8h_adf63440ffbc65024fef87ea6a11ea8b0}
\hypertarget{pgpmac_8h_af219e9b2cc124f109aa4c2c2e16b5d07}{\index{pgpmac.\-h@{pgpmac.\-h}!lsupdate\-\_\-run@{lsupdate\-\_\-run}}
\index{lsupdate\-\_\-run@{lsupdate\-\_\-run}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lsupdate\-\_\-run}]{\setlength{\rightskip}{0pt plus 5cm}void lsupdate\-\_\-run (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{pgpmac_8h_af219e9b2cc124f109aa4c2c2e16b5d07}
\hypertarget{pgpmac_8h_a0851b1baecda6a67993efde41d77b1c1}{\index{pgpmac.\-h@{pgpmac.\-h}!md2cmds\-\_\-init@{md2cmds\-\_\-init}}
\index{md2cmds\-\_\-init@{md2cmds\-\_\-init}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{md2cmds\-\_\-init}]{\setlength{\rightskip}{0pt plus 5cm}void md2cmds\-\_\-init (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{pgpmac_8h_a0851b1baecda6a67993efde41d77b1c1}


Initialize the md2cmds module. 



Definition at line 780 of file md2cmds.\-c.


\begin{DoxyCode}
                    \{
  memset( \hyperlink{md2cmds_8c_a5f0fe1e2dfa92cf345b8c29134ab1ede}{md2cmds\_cmd}, 0, \textcolor{keyword}{sizeof}( \hyperlink{md2cmds_8c_a5f0fe1e2dfa92cf345b8c29134ab1ede}{md2cmds\_cmd}));

  pthread\_mutex\_init( &\hyperlink{md2cmds_8c_ad67304bb851dc6268b0cda2f40fc5aa8}{md2cmds\_mutex}, NULL);
  pthread\_cond\_init( &\hyperlink{md2cmds_8c_a08d5b18ec9478d753c46a3e28d1f2126}{md2cmds\_cond}, NULL);

  pthread\_mutex\_init( &\hyperlink{md2cmds_8c_a4ea6e6bf63aefcd49f87c3921029451d}{md2cmds\_moving\_mutex}, NULL);
  pthread\_cond\_init(  &\hyperlink{md2cmds_8c_adeebdb8f552bff14bd666c187505ee9e}{md2cmds\_moving\_cond}, NULL);


\}
\end{DoxyCode}
\hypertarget{pgpmac_8h_aa62da7d423952334d41c7d282f45233d}{\index{pgpmac.\-h@{pgpmac.\-h}!md2cmds\-\_\-run@{md2cmds\-\_\-run}}
\index{md2cmds\-\_\-run@{md2cmds\-\_\-run}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{md2cmds\-\_\-run}]{\setlength{\rightskip}{0pt plus 5cm}void md2cmds\-\_\-run (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{pgpmac_8h_aa62da7d423952334d41c7d282f45233d}


Start up the thread. 



Definition at line 794 of file md2cmds.\-c.


\begin{DoxyCode}
                   \{
  pthread\_create( &\hyperlink{md2cmds_8c_aa230921945149692de98fff15c01962f}{md2cmds\_thread}, NULL,            \hyperlink{md2cmds_8c_ae967e769d23555a631f615e630f25b00}{
      md2cmds\_worker}, NULL);
  \hyperlink{lsevents_8c_ab0617d3f0594b51d10e34bf397096654}{lsevents\_add\_listener}( \textcolor{stringliteral}{"omega crossed zero"},      
      \hyperlink{md2cmds_8c_aa43887b7c9799bc88d51df13745d0e5c}{md2cmds\_rotate\_cb});
  \hyperlink{lsevents_8c_ab0617d3f0594b51d10e34bf397096654}{lsevents\_add\_listener}( \textcolor{stringliteral}{"omega In Position"},       
      \hyperlink{md2cmds_8c_a136f278c9f5a2742b2e9b4987b063faa}{md2cmds\_maybe\_rotate\_done\_cb});
  \hyperlink{lsevents_8c_ab0617d3f0594b51d10e34bf397096654}{lsevents\_add\_listener}( \textcolor{stringliteral}{"align.x In Position"},     
      \hyperlink{md2cmds_8c_a3970ef1a233dabcc5c1408e9d3865f13}{md2cmds\_maybe\_done\_moving\_cb});
  \hyperlink{lsevents_8c_ab0617d3f0594b51d10e34bf397096654}{lsevents\_add\_listener}( \textcolor{stringliteral}{"align.y In Position"},     
      \hyperlink{md2cmds_8c_a3970ef1a233dabcc5c1408e9d3865f13}{md2cmds\_maybe\_done\_moving\_cb});
  \hyperlink{lsevents_8c_ab0617d3f0594b51d10e34bf397096654}{lsevents\_add\_listener}( \textcolor{stringliteral}{"align.z In Position"},     
      \hyperlink{md2cmds_8c_a3970ef1a233dabcc5c1408e9d3865f13}{md2cmds\_maybe\_done\_moving\_cb});
  \hyperlink{lsevents_8c_ab0617d3f0594b51d10e34bf397096654}{lsevents\_add\_listener}( \textcolor{stringliteral}{"centering.x In Position"}, 
      \hyperlink{md2cmds_8c_a3970ef1a233dabcc5c1408e9d3865f13}{md2cmds\_maybe\_done\_moving\_cb});
  \hyperlink{lsevents_8c_ab0617d3f0594b51d10e34bf397096654}{lsevents\_add\_listener}( \textcolor{stringliteral}{"centering.y In Position"}, 
      \hyperlink{md2cmds_8c_a3970ef1a233dabcc5c1408e9d3865f13}{md2cmds\_maybe\_done\_moving\_cb});
  \hyperlink{lsevents_8c_ab0617d3f0594b51d10e34bf397096654}{lsevents\_add\_listener}( \textcolor{stringliteral}{"align.x Moving"},          
      \hyperlink{md2cmds_8c_a3970ef1a233dabcc5c1408e9d3865f13}{md2cmds\_maybe\_done\_moving\_cb});
  \hyperlink{lsevents_8c_ab0617d3f0594b51d10e34bf397096654}{lsevents\_add\_listener}( \textcolor{stringliteral}{"align.y Moving"},          
      \hyperlink{md2cmds_8c_a3970ef1a233dabcc5c1408e9d3865f13}{md2cmds\_maybe\_done\_moving\_cb});
  \hyperlink{lsevents_8c_ab0617d3f0594b51d10e34bf397096654}{lsevents\_add\_listener}( \textcolor{stringliteral}{"align.z Moving"},          
      \hyperlink{md2cmds_8c_a3970ef1a233dabcc5c1408e9d3865f13}{md2cmds\_maybe\_done\_moving\_cb});
  \hyperlink{lsevents_8c_ab0617d3f0594b51d10e34bf397096654}{lsevents\_add\_listener}( \textcolor{stringliteral}{"centering.x Moving"},      
      \hyperlink{md2cmds_8c_a3970ef1a233dabcc5c1408e9d3865f13}{md2cmds\_maybe\_done\_moving\_cb});
  \hyperlink{lsevents_8c_ab0617d3f0594b51d10e34bf397096654}{lsevents\_add\_listener}( \textcolor{stringliteral}{"centering.y Moving"},      
      \hyperlink{md2cmds_8c_a3970ef1a233dabcc5c1408e9d3865f13}{md2cmds\_maybe\_done\_moving\_cb});
  \hyperlink{lsevents_8c_ab0617d3f0594b51d10e34bf397096654}{lsevents\_add\_listener}( \textcolor{stringliteral}{"cam.zoom In Position"},    
      \hyperlink{md2cmds_8c_a4eb608d012f8a471671e10fb19b366d6}{md2cmds\_set\_scale\_cb});
\}
\end{DoxyCode}
\hypertarget{pgpmac_8h_a7762ca7b97b44b979e23ce88ca3b4249}{\index{pgpmac.\-h@{pgpmac.\-h}!pgpmac\-\_\-printf@{pgpmac\-\_\-printf}}
\index{pgpmac\-\_\-printf@{pgpmac\-\_\-printf}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{pgpmac\-\_\-printf}]{\setlength{\rightskip}{0pt plus 5cm}void pgpmac\-\_\-printf (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{fmt, }
\item[{}]{...}
\end{DoxyParamCaption}
)}}\label{pgpmac_8h_a7762ca7b97b44b979e23ce88ca3b4249}


Terminal output routine ala printf. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em fmt} & Printf style formating string \\
\hline
\end{DoxyParams}


Definition at line 326 of file pgpmac.\-c.


\begin{DoxyCode}
                     \{
  va\_list arg\_ptr;

  pthread\_mutex\_lock( &\hyperlink{pgpmac_8c_ad128c64890c7c0d4f836d9ec6e99216a}{ncurses\_mutex});

  va\_start( arg\_ptr, fmt);
  vwprintw( \hyperlink{pgpmac_8c_a65daf0f4a5bc6def23a9df98ff5ca57e}{term\_output}, fmt, arg\_ptr);
  va\_end( arg\_ptr);

  wnoutrefresh( \hyperlink{pgpmac_8c_a65daf0f4a5bc6def23a9df98ff5ca57e}{term\_output});
  wnoutrefresh( \hyperlink{pgpmac_8c_ab0487111dbe3c05d0bd835eb2fb9a3f7}{term\_input});
  doupdate();

  pthread\_mutex\_unlock( &\hyperlink{pgpmac_8c_ad128c64890c7c0d4f836d9ec6e99216a}{ncurses\_mutex});

\}
\end{DoxyCode}
\hypertarget{pgpmac_8h_a76b11c62b122ee0fd8399435d4260681}{\index{pgpmac.\-h@{pgpmac.\-h}!Pmac\-Sock\-Sendline@{Pmac\-Sock\-Sendline}}
\index{Pmac\-Sock\-Sendline@{Pmac\-Sock\-Sendline}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{Pmac\-Sock\-Sendline}]{\setlength{\rightskip}{0pt plus 5cm}void Pmac\-Sock\-Sendline (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{s}
\end{DoxyParamCaption}
)}}\label{pgpmac_8h_a76b11c62b122ee0fd8399435d4260681}


\subsection{Variable Documentation}
\hypertarget{pgpmac_8h_a6cb218bdccfe5a93471c161f15a15cab}{\index{pgpmac.\-h@{pgpmac.\-h}!alignx@{alignx}}
\index{alignx@{alignx}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{alignx}]{\setlength{\rightskip}{0pt plus 5cm}{\bf lspmac\-\_\-motor\-\_\-t}$\ast$ alignx}}\label{pgpmac_8h_a6cb218bdccfe5a93471c161f15a15cab}


Alignment stage X. 



Definition at line 83 of file lspmac.\-c.

\hypertarget{pgpmac_8h_a737c246c3948e644a18d191a931e1acd}{\index{pgpmac.\-h@{pgpmac.\-h}!aligny@{aligny}}
\index{aligny@{aligny}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{aligny}]{\setlength{\rightskip}{0pt plus 5cm}{\bf lspmac\-\_\-motor\-\_\-t}$\ast$ aligny}}\label{pgpmac_8h_a737c246c3948e644a18d191a931e1acd}


Alignment stage Y. 



Definition at line 84 of file lspmac.\-c.

\hypertarget{pgpmac_8h_ae7642b1da0f7c7f8448104c691d40a12}{\index{pgpmac.\-h@{pgpmac.\-h}!alignz@{alignz}}
\index{alignz@{alignz}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{alignz}]{\setlength{\rightskip}{0pt plus 5cm}{\bf lspmac\-\_\-motor\-\_\-t}$\ast$ alignz}}\label{pgpmac_8h_ae7642b1da0f7c7f8448104c691d40a12}


Alignment stage X. 



Definition at line 85 of file lspmac.\-c.

\hypertarget{pgpmac_8h_aa90d2363b744acbd4d45133b7a716d8f}{\index{pgpmac.\-h@{pgpmac.\-h}!anal@{anal}}
\index{anal@{anal}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{anal}]{\setlength{\rightskip}{0pt plus 5cm}{\bf lspmac\-\_\-motor\-\_\-t}$\ast$ anal}}\label{pgpmac_8h_aa90d2363b744acbd4d45133b7a716d8f}


Polaroid analyzer motor. 



Definition at line 86 of file lspmac.\-c.

\hypertarget{pgpmac_8h_a139200ddaa9856a7ffcec0e6cbaa8f1b}{\index{pgpmac.\-h@{pgpmac.\-h}!apery@{apery}}
\index{apery@{apery}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{apery}]{\setlength{\rightskip}{0pt plus 5cm}{\bf lspmac\-\_\-motor\-\_\-t}$\ast$ apery}}\label{pgpmac_8h_a139200ddaa9856a7ffcec0e6cbaa8f1b}


Aperture Y. 



Definition at line 88 of file lspmac.\-c.

\hypertarget{pgpmac_8h_ab93bd6ee850b285ca3a95e64d15e9477}{\index{pgpmac.\-h@{pgpmac.\-h}!aperz@{aperz}}
\index{aperz@{aperz}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{aperz}]{\setlength{\rightskip}{0pt plus 5cm}{\bf lspmac\-\_\-motor\-\_\-t}$\ast$ aperz}}\label{pgpmac_8h_ab93bd6ee850b285ca3a95e64d15e9477}


Aperture Z. 



Definition at line 89 of file lspmac.\-c.

\hypertarget{pgpmac_8h_a85d6eaa4b4a82bb3112574f458d1dc50}{\index{pgpmac.\-h@{pgpmac.\-h}!blight@{blight}}
\index{blight@{blight}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{blight}]{\setlength{\rightskip}{0pt plus 5cm}{\bf lspmac\-\_\-motor\-\_\-t}$\ast$ blight}}\label{pgpmac_8h_a85d6eaa4b4a82bb3112574f458d1dc50}


Back Light D\-A\-C. 



Definition at line 100 of file lspmac.\-c.

\hypertarget{pgpmac_8h_af55c51d52c4586b647114f95d7ac1f42}{\index{pgpmac.\-h@{pgpmac.\-h}!blight\-\_\-f@{blight\-\_\-f}}
\index{blight\-\_\-f@{blight\-\_\-f}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{blight\-\_\-f}]{\setlength{\rightskip}{0pt plus 5cm}{\bf lspmac\-\_\-motor\-\_\-t}$\ast$ blight\-\_\-f}}\label{pgpmac_8h_af55c51d52c4586b647114f95d7ac1f42}


Back light scale factor. 



Definition at line 105 of file lspmac.\-c.

\hypertarget{pgpmac_8h_af813a2eff0b7efa4c70633559054e84c}{\index{pgpmac.\-h@{pgpmac.\-h}!blight\-\_\-ud@{blight\-\_\-ud}}
\index{blight\-\_\-ud@{blight\-\_\-ud}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{blight\-\_\-ud}]{\setlength{\rightskip}{0pt plus 5cm}{\bf lspmac\-\_\-motor\-\_\-t}$\ast$ blight\-\_\-ud}}\label{pgpmac_8h_af813a2eff0b7efa4c70633559054e84c}


Back light Up/\-Down actuator. 



Definition at line 103 of file lspmac.\-c.

\hypertarget{pgpmac_8h_a51358daaea8b5236f08414877d8af6c2}{\index{pgpmac.\-h@{pgpmac.\-h}!capy@{capy}}
\index{capy@{capy}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{capy}]{\setlength{\rightskip}{0pt plus 5cm}{\bf lspmac\-\_\-motor\-\_\-t}$\ast$ capy}}\label{pgpmac_8h_a51358daaea8b5236f08414877d8af6c2}


Capillary Y. 



Definition at line 90 of file lspmac.\-c.

\hypertarget{pgpmac_8h_aa45f268d0af9f3d465acfab128919718}{\index{pgpmac.\-h@{pgpmac.\-h}!capz@{capz}}
\index{capz@{capz}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{capz}]{\setlength{\rightskip}{0pt plus 5cm}{\bf lspmac\-\_\-motor\-\_\-t}$\ast$ capz}}\label{pgpmac_8h_aa45f268d0af9f3d465acfab128919718}


Capillary Z. 



Definition at line 91 of file lspmac.\-c.

\hypertarget{pgpmac_8h_ac940d950d9efeaf3f0ae67e9bf331188}{\index{pgpmac.\-h@{pgpmac.\-h}!cenx@{cenx}}
\index{cenx@{cenx}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{cenx}]{\setlength{\rightskip}{0pt plus 5cm}{\bf lspmac\-\_\-motor\-\_\-t}$\ast$ cenx}}\label{pgpmac_8h_ac940d950d9efeaf3f0ae67e9bf331188}


Centering Table X. 



Definition at line 93 of file lspmac.\-c.

\hypertarget{pgpmac_8h_aaed18e738ba7bfb6c771a44f5d7ea827}{\index{pgpmac.\-h@{pgpmac.\-h}!ceny@{ceny}}
\index{ceny@{ceny}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{ceny}]{\setlength{\rightskip}{0pt plus 5cm}{\bf lspmac\-\_\-motor\-\_\-t}$\ast$ ceny}}\label{pgpmac_8h_aaed18e738ba7bfb6c771a44f5d7ea827}


Centering Table Y. 



Definition at line 94 of file lspmac.\-c.

\hypertarget{pgpmac_8h_ae78d9a757d4c85419fff9c94b15e25d7}{\index{pgpmac.\-h@{pgpmac.\-h}!cryo@{cryo}}
\index{cryo@{cryo}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{cryo}]{\setlength{\rightskip}{0pt plus 5cm}{\bf lspmac\-\_\-motor\-\_\-t}$\ast$ cryo}}\label{pgpmac_8h_ae78d9a757d4c85419fff9c94b15e25d7}


Move the cryostream towards or away from the crystal. 



Definition at line 107 of file lspmac.\-c.

\hypertarget{pgpmac_8h_a9d9c5030d817483ca9518027c91adac4}{\index{pgpmac.\-h@{pgpmac.\-h}!dryer@{dryer}}
\index{dryer@{dryer}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{dryer}]{\setlength{\rightskip}{0pt plus 5cm}{\bf lspmac\-\_\-motor\-\_\-t}$\ast$ dryer}}\label{pgpmac_8h_a9d9c5030d817483ca9518027c91adac4}


blow air on the scintilator to dry it off 



Definition at line 108 of file lspmac.\-c.

\hypertarget{pgpmac_8h_aeb09895663eff333b7a75acb319a9fc1}{\index{pgpmac.\-h@{pgpmac.\-h}!flight@{flight}}
\index{flight@{flight}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{flight}]{\setlength{\rightskip}{0pt plus 5cm}{\bf lspmac\-\_\-motor\-\_\-t}$\ast$ flight}}\label{pgpmac_8h_aeb09895663eff333b7a75acb319a9fc1}


Front Light D\-A\-C. 



Definition at line 99 of file lspmac.\-c.

\hypertarget{pgpmac_8h_aabf4ec595b5183c1777d029ca56134b0}{\index{pgpmac.\-h@{pgpmac.\-h}!flight\-\_\-f@{flight\-\_\-f}}
\index{flight\-\_\-f@{flight\-\_\-f}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{flight\-\_\-f}]{\setlength{\rightskip}{0pt plus 5cm}{\bf lspmac\-\_\-motor\-\_\-t}$\ast$ flight\-\_\-f}}\label{pgpmac_8h_aabf4ec595b5183c1777d029ca56134b0}


Front light scale factor. 



Definition at line 106 of file lspmac.\-c.

\hypertarget{pgpmac_8h_a6630442dc65ce8a30a24ed718b301971}{\index{pgpmac.\-h@{pgpmac.\-h}!flight\-\_\-oo@{flight\-\_\-oo}}
\index{flight\-\_\-oo@{flight\-\_\-oo}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{flight\-\_\-oo}]{\setlength{\rightskip}{0pt plus 5cm}{\bf lspmac\-\_\-motor\-\_\-t}$\ast$ flight\-\_\-oo}}\label{pgpmac_8h_a6630442dc65ce8a30a24ed718b301971}


Turn front light on/off. 



Definition at line 104 of file lspmac.\-c.

\hypertarget{pgpmac_8h_addb26c80065506faa1de3c1b468fe03f}{\index{pgpmac.\-h@{pgpmac.\-h}!fluo@{fluo}}
\index{fluo@{fluo}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{fluo}]{\setlength{\rightskip}{0pt plus 5cm}{\bf lspmac\-\_\-motor\-\_\-t}$\ast$ fluo}}\label{pgpmac_8h_addb26c80065506faa1de3c1b468fe03f}


Move the fluorescence detector in/out. 



Definition at line 109 of file lspmac.\-c.

\hypertarget{pgpmac_8h_a8a3ca6fcf5e24dcc26170736843e53b2}{\index{pgpmac.\-h@{pgpmac.\-h}!fscint@{fscint}}
\index{fscint@{fscint}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{fscint}]{\setlength{\rightskip}{0pt plus 5cm}{\bf lspmac\-\_\-motor\-\_\-t}$\ast$ fscint}}\label{pgpmac_8h_a8a3ca6fcf5e24dcc26170736843e53b2}


Scintillator Piezo D\-A\-C. 



Definition at line 101 of file lspmac.\-c.

\hypertarget{pgpmac_8h_a26dec4623af9beed912b8e7e6f99822c}{\index{pgpmac.\-h@{pgpmac.\-h}!fshut@{fshut}}
\index{fshut@{fshut}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{fshut}]{\setlength{\rightskip}{0pt plus 5cm}{\bf lspmac\-\_\-motor\-\_\-t}$\ast$ fshut}}\label{pgpmac_8h_a26dec4623af9beed912b8e7e6f99822c}


Fast shutter. 



Definition at line 98 of file lspmac.\-c.

\hypertarget{pgpmac_8h_a0be79ccb7ebf3a665248fd856112b9fd}{\index{pgpmac.\-h@{pgpmac.\-h}!kappa@{kappa}}
\index{kappa@{kappa}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{kappa}]{\setlength{\rightskip}{0pt plus 5cm}{\bf lspmac\-\_\-motor\-\_\-t}$\ast$ kappa}}\label{pgpmac_8h_a0be79ccb7ebf3a665248fd856112b9fd}


Kappa. 



Definition at line 95 of file lspmac.\-c.

\hypertarget{pgpmac_8h_a7ef8a09203117578c9b2ce4719519f36}{\index{pgpmac.\-h@{pgpmac.\-h}!lspg\-\_\-getcenter@{lspg\-\_\-getcenter}}
\index{lspg\-\_\-getcenter@{lspg\-\_\-getcenter}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lspg\-\_\-getcenter}]{\setlength{\rightskip}{0pt plus 5cm}{\bf lspg\-\_\-getcenter\-\_\-t} lspg\-\_\-getcenter}}\label{pgpmac_8h_a7ef8a09203117578c9b2ce4719519f36}


the getcenter object 



Definition at line 73 of file lspg.\-c.

\hypertarget{pgpmac_8h_ad8d8e2f578ca79189a80c1fd5b60cefd}{\index{pgpmac.\-h@{pgpmac.\-h}!lspg\-\_\-nextshot@{lspg\-\_\-nextshot}}
\index{lspg\-\_\-nextshot@{lspg\-\_\-nextshot}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lspg\-\_\-nextshot}]{\setlength{\rightskip}{0pt plus 5cm}{\bf lspg\-\_\-nextshot\-\_\-t} lspg\-\_\-nextshot}}\label{pgpmac_8h_ad8d8e2f578ca79189a80c1fd5b60cefd}


the nextshot object 



Definition at line 72 of file lspg.\-c.

\hypertarget{pgpmac_8h_aebfce5f9cbc8ba7bd4e2ee4880f303e8}{\index{pgpmac.\-h@{pgpmac.\-h}!lspmac\-\_\-motors@{lspmac\-\_\-motors}}
\index{lspmac\-\_\-motors@{lspmac\-\_\-motors}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lspmac\-\_\-motors}]{\setlength{\rightskip}{0pt plus 5cm}{\bf lspmac\-\_\-motor\-\_\-t} lspmac\-\_\-motors\mbox{[}$\,$\mbox{]}}}\label{pgpmac_8h_aebfce5f9cbc8ba7bd4e2ee4880f303e8}


All our motors. 



Definition at line 80 of file lspmac.\-c.

\hypertarget{pgpmac_8h_a57547d211906c981ef20257eba99f8df}{\index{pgpmac.\-h@{pgpmac.\-h}!lspmac\-\_\-moving\-\_\-cond@{lspmac\-\_\-moving\-\_\-cond}}
\index{lspmac\-\_\-moving\-\_\-cond@{lspmac\-\_\-moving\-\_\-cond}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lspmac\-\_\-moving\-\_\-cond}]{\setlength{\rightskip}{0pt plus 5cm}pthread\-\_\-cond\-\_\-t lspmac\-\_\-moving\-\_\-cond}}\label{pgpmac_8h_a57547d211906c981ef20257eba99f8df}


Wait for motor(s) to finish moving condition. 



Definition at line 60 of file lspmac.\-c.

\hypertarget{pgpmac_8h_a7a32c617c183166308241e270959df56}{\index{pgpmac.\-h@{pgpmac.\-h}!lspmac\-\_\-moving\-\_\-flags@{lspmac\-\_\-moving\-\_\-flags}}
\index{lspmac\-\_\-moving\-\_\-flags@{lspmac\-\_\-moving\-\_\-flags}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lspmac\-\_\-moving\-\_\-flags}]{\setlength{\rightskip}{0pt plus 5cm}int lspmac\-\_\-moving\-\_\-flags}}\label{pgpmac_8h_a7a32c617c183166308241e270959df56}


Flag used to implement motor moving condition. 



Definition at line 61 of file lspmac.\-c.

\hypertarget{pgpmac_8h_a85679cac947e199c88794f8e5a12bf5f}{\index{pgpmac.\-h@{pgpmac.\-h}!lspmac\-\_\-moving\-\_\-mutex@{lspmac\-\_\-moving\-\_\-mutex}}
\index{lspmac\-\_\-moving\-\_\-mutex@{lspmac\-\_\-moving\-\_\-mutex}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lspmac\-\_\-moving\-\_\-mutex}]{\setlength{\rightskip}{0pt plus 5cm}pthread\-\_\-mutex\-\_\-t lspmac\-\_\-moving\-\_\-mutex}}\label{pgpmac_8h_a85679cac947e199c88794f8e5a12bf5f}


Coordinate moving motors between threads. 



Definition at line 59 of file lspmac.\-c.

\hypertarget{pgpmac_8h_a56260f012c50a591ee7f97e500f16994}{\index{pgpmac.\-h@{pgpmac.\-h}!lspmac\-\_\-nmotors@{lspmac\-\_\-nmotors}}
\index{lspmac\-\_\-nmotors@{lspmac\-\_\-nmotors}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lspmac\-\_\-nmotors}]{\setlength{\rightskip}{0pt plus 5cm}int lspmac\-\_\-nmotors}}\label{pgpmac_8h_a56260f012c50a591ee7f97e500f16994}


The number of motors we manage. 



Definition at line 81 of file lspmac.\-c.

\hypertarget{pgpmac_8h_afbd51c2cefcee87afe994c9e9f372241}{\index{pgpmac.\-h@{pgpmac.\-h}!lspmac\-\_\-shutter\-\_\-cond@{lspmac\-\_\-shutter\-\_\-cond}}
\index{lspmac\-\_\-shutter\-\_\-cond@{lspmac\-\_\-shutter\-\_\-cond}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lspmac\-\_\-shutter\-\_\-cond}]{\setlength{\rightskip}{0pt plus 5cm}pthread\-\_\-cond\-\_\-t lspmac\-\_\-shutter\-\_\-cond}}\label{pgpmac_8h_afbd51c2cefcee87afe994c9e9f372241}


Allows waiting for the shutter status to change. 



Definition at line 58 of file lspmac.\-c.

\hypertarget{pgpmac_8h_a396fbf06208de3ecbe1b0df549f1cd46}{\index{pgpmac.\-h@{pgpmac.\-h}!lspmac\-\_\-shutter\-\_\-has\-\_\-opened@{lspmac\-\_\-shutter\-\_\-has\-\_\-opened}}
\index{lspmac\-\_\-shutter\-\_\-has\-\_\-opened@{lspmac\-\_\-shutter\-\_\-has\-\_\-opened}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lspmac\-\_\-shutter\-\_\-has\-\_\-opened}]{\setlength{\rightskip}{0pt plus 5cm}int lspmac\-\_\-shutter\-\_\-has\-\_\-opened}}\label{pgpmac_8h_a396fbf06208de3ecbe1b0df549f1cd46}


Indicates that the shutter had opened, perhaps briefly even if the state did not change. 



Definition at line 56 of file lspmac.\-c.

\hypertarget{pgpmac_8h_a1b78a13c654409333569815e1c109d38}{\index{pgpmac.\-h@{pgpmac.\-h}!lspmac\-\_\-shutter\-\_\-mutex@{lspmac\-\_\-shutter\-\_\-mutex}}
\index{lspmac\-\_\-shutter\-\_\-mutex@{lspmac\-\_\-shutter\-\_\-mutex}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lspmac\-\_\-shutter\-\_\-mutex}]{\setlength{\rightskip}{0pt plus 5cm}pthread\-\_\-mutex\-\_\-t lspmac\-\_\-shutter\-\_\-mutex}}\label{pgpmac_8h_a1b78a13c654409333569815e1c109d38}


Coordinates threads reading shutter status. 



Definition at line 57 of file lspmac.\-c.

\hypertarget{pgpmac_8h_a112158e0cd50449a440ac55c7af7bea2}{\index{pgpmac.\-h@{pgpmac.\-h}!lspmac\-\_\-shutter\-\_\-state@{lspmac\-\_\-shutter\-\_\-state}}
\index{lspmac\-\_\-shutter\-\_\-state@{lspmac\-\_\-shutter\-\_\-state}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lspmac\-\_\-shutter\-\_\-state}]{\setlength{\rightskip}{0pt plus 5cm}int lspmac\-\_\-shutter\-\_\-state}}\label{pgpmac_8h_a112158e0cd50449a440ac55c7af7bea2}


State of the shutter, used to detect changes. 



Definition at line 55 of file lspmac.\-c.

\hypertarget{pgpmac_8h_a7a3e763682bd7f987d07f149e94b3bf8}{\index{pgpmac.\-h@{pgpmac.\-h}!md2\-\_\-status\-\_\-mutex@{md2\-\_\-status\-\_\-mutex}}
\index{md2\-\_\-status\-\_\-mutex@{md2\-\_\-status\-\_\-mutex}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{md2\-\_\-status\-\_\-mutex}]{\setlength{\rightskip}{0pt plus 5cm}pthread\-\_\-mutex\-\_\-t md2\-\_\-status\-\_\-mutex}}\label{pgpmac_8h_a7a3e763682bd7f987d07f149e94b3bf8}


Synchronize reading/writting status buffer. 



Definition at line 298 of file lspmac.\-c.

\hypertarget{pgpmac_8h_a1ccf455563dc8d828558b6a230e164a6}{\index{pgpmac.\-h@{pgpmac.\-h}!md2cmds\-\_\-cmd@{md2cmds\-\_\-cmd}}
\index{md2cmds\-\_\-cmd@{md2cmds\-\_\-cmd}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{md2cmds\-\_\-cmd}]{\setlength{\rightskip}{0pt plus 5cm}char md2cmds\-\_\-cmd\mbox{[}$\,$\mbox{]}}}\label{pgpmac_8h_a1ccf455563dc8d828558b6a230e164a6}


our command; 



Definition at line 19 of file md2cmds.\-c.

\hypertarget{pgpmac_8h_a08d5b18ec9478d753c46a3e28d1f2126}{\index{pgpmac.\-h@{pgpmac.\-h}!md2cmds\-\_\-cond@{md2cmds\-\_\-cond}}
\index{md2cmds\-\_\-cond@{md2cmds\-\_\-cond}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{md2cmds\-\_\-cond}]{\setlength{\rightskip}{0pt plus 5cm}pthread\-\_\-cond\-\_\-t md2cmds\-\_\-cond}}\label{pgpmac_8h_a08d5b18ec9478d753c46a3e28d1f2126}


condition to signal when it's time to run an md2 command 



Definition at line 10 of file md2cmds.\-c.

\hypertarget{pgpmac_8h_ad67304bb851dc6268b0cda2f40fc5aa8}{\index{pgpmac.\-h@{pgpmac.\-h}!md2cmds\-\_\-mutex@{md2cmds\-\_\-mutex}}
\index{md2cmds\-\_\-mutex@{md2cmds\-\_\-mutex}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{md2cmds\-\_\-mutex}]{\setlength{\rightskip}{0pt plus 5cm}pthread\-\_\-mutex\-\_\-t md2cmds\-\_\-mutex}}\label{pgpmac_8h_ad67304bb851dc6268b0cda2f40fc5aa8}


mutex for the condition 



Definition at line 11 of file md2cmds.\-c.

\hypertarget{pgpmac_8h_ab517a930528e2b7d0993e11087765b03}{\index{pgpmac.\-h@{pgpmac.\-h}!md2cmds\-\_\-pg\-\_\-cond@{md2cmds\-\_\-pg\-\_\-cond}}
\index{md2cmds\-\_\-pg\-\_\-cond@{md2cmds\-\_\-pg\-\_\-cond}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{md2cmds\-\_\-pg\-\_\-cond}]{\setlength{\rightskip}{0pt plus 5cm}pthread\-\_\-cond\-\_\-t md2cmds\-\_\-pg\-\_\-cond}}\label{pgpmac_8h_ab517a930528e2b7d0993e11087765b03}
\hypertarget{pgpmac_8h_a4d2c3ac81d4b13eb21f4ddcdda8c7308}{\index{pgpmac.\-h@{pgpmac.\-h}!md2cmds\-\_\-pg\-\_\-mutex@{md2cmds\-\_\-pg\-\_\-mutex}}
\index{md2cmds\-\_\-pg\-\_\-mutex@{md2cmds\-\_\-pg\-\_\-mutex}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{md2cmds\-\_\-pg\-\_\-mutex}]{\setlength{\rightskip}{0pt plus 5cm}pthread\-\_\-mutex\-\_\-t md2cmds\-\_\-pg\-\_\-mutex}}\label{pgpmac_8h_a4d2c3ac81d4b13eb21f4ddcdda8c7308}
\hypertarget{pgpmac_8h_ad128c64890c7c0d4f836d9ec6e99216a}{\index{pgpmac.\-h@{pgpmac.\-h}!ncurses\-\_\-mutex@{ncurses\-\_\-mutex}}
\index{ncurses\-\_\-mutex@{ncurses\-\_\-mutex}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{ncurses\-\_\-mutex}]{\setlength{\rightskip}{0pt plus 5cm}pthread\-\_\-mutex\-\_\-t ncurses\-\_\-mutex}}\label{pgpmac_8h_ad128c64890c7c0d4f836d9ec6e99216a}


allow more than one thread access to the screen 



Definition at line 242 of file pgpmac.\-c.

\hypertarget{pgpmac_8h_a8237e646ce032a840637a4ef7bff49b9}{\index{pgpmac.\-h@{pgpmac.\-h}!omega@{omega}}
\index{omega@{omega}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{omega}]{\setlength{\rightskip}{0pt plus 5cm}{\bf lspmac\-\_\-motor\-\_\-t}$\ast$ omega}}\label{pgpmac_8h_a8237e646ce032a840637a4ef7bff49b9}


M\-D2 omega axis (the air bearing) 



Definition at line 82 of file lspmac.\-c.

\hypertarget{pgpmac_8h_ae6631a094accc469661805bdf80fc6d8}{\index{pgpmac.\-h@{pgpmac.\-h}!omega\-\_\-zero\-\_\-time@{omega\-\_\-zero\-\_\-time}}
\index{omega\-\_\-zero\-\_\-time@{omega\-\_\-zero\-\_\-time}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{omega\-\_\-zero\-\_\-time}]{\setlength{\rightskip}{0pt plus 5cm}struct timespec omega\-\_\-zero\-\_\-time}}\label{pgpmac_8h_ae6631a094accc469661805bdf80fc6d8}


Time we believe that omega crossed zero. 



Definition at line 65 of file lspmac.\-c.

\hypertarget{pgpmac_8h_ac8070dc568ad974a3db42b51eca828cc}{\index{pgpmac.\-h@{pgpmac.\-h}!phi@{phi}}
\index{phi@{phi}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{phi}]{\setlength{\rightskip}{0pt plus 5cm}{\bf lspmac\-\_\-motor\-\_\-t}$\ast$ phi}}\label{pgpmac_8h_ac8070dc568ad974a3db42b51eca828cc}


Phi (not data collection axis) 



Definition at line 96 of file lspmac.\-c.

\hypertarget{pgpmac_8h_a8a25bd9c593c6985107f90f999ce0b08}{\index{pgpmac.\-h@{pgpmac.\-h}!pmac\-\_\-queue\-\_\-cond@{pmac\-\_\-queue\-\_\-cond}}
\index{pmac\-\_\-queue\-\_\-cond@{pmac\-\_\-queue\-\_\-cond}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{pmac\-\_\-queue\-\_\-cond}]{\setlength{\rightskip}{0pt plus 5cm}pthread\-\_\-cond\-\_\-t pmac\-\_\-queue\-\_\-cond}}\label{pgpmac_8h_a8a25bd9c593c6985107f90f999ce0b08}


wait for a command to be sent to P\-M\-A\-C before continuing 



Definition at line 71 of file lspmac.\-c.

\hypertarget{pgpmac_8h_acc1bb77b9bcbc4d970f841a41fd274b3}{\index{pgpmac.\-h@{pgpmac.\-h}!pmac\-\_\-queue\-\_\-mutex@{pmac\-\_\-queue\-\_\-mutex}}
\index{pmac\-\_\-queue\-\_\-mutex@{pmac\-\_\-queue\-\_\-mutex}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{pmac\-\_\-queue\-\_\-mutex}]{\setlength{\rightskip}{0pt plus 5cm}pthread\-\_\-mutex\-\_\-t pmac\-\_\-queue\-\_\-mutex}}\label{pgpmac_8h_acc1bb77b9bcbc4d970f841a41fd274b3}


manage access to the pmac command queue 



Definition at line 70 of file lspmac.\-c.

\hypertarget{pgpmac_8h_a589431b3a79c21c251fcb97cc9126991}{\index{pgpmac.\-h@{pgpmac.\-h}!scint@{scint}}
\index{scint@{scint}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{scint}]{\setlength{\rightskip}{0pt plus 5cm}{\bf lspmac\-\_\-motor\-\_\-t}$\ast$ scint}}\label{pgpmac_8h_a589431b3a79c21c251fcb97cc9126991}


Scintillator Z. 



Definition at line 92 of file lspmac.\-c.

\hypertarget{pgpmac_8h_ab0487111dbe3c05d0bd835eb2fb9a3f7}{\index{pgpmac.\-h@{pgpmac.\-h}!term\-\_\-input@{term\-\_\-input}}
\index{term\-\_\-input@{term\-\_\-input}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{term\-\_\-input}]{\setlength{\rightskip}{0pt plus 5cm}W\-I\-N\-D\-O\-W$\ast$ term\-\_\-input}}\label{pgpmac_8h_ab0487111dbe3c05d0bd835eb2fb9a3f7}


place to put the cursor 



Definition at line 238 of file pgpmac.\-c.

\hypertarget{pgpmac_8h_a65daf0f4a5bc6def23a9df98ff5ca57e}{\index{pgpmac.\-h@{pgpmac.\-h}!term\-\_\-output@{term\-\_\-output}}
\index{term\-\_\-output@{term\-\_\-output}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{term\-\_\-output}]{\setlength{\rightskip}{0pt plus 5cm}W\-I\-N\-D\-O\-W$\ast$ term\-\_\-output}}\label{pgpmac_8h_a65daf0f4a5bc6def23a9df98ff5ca57e}


place to print stuff out 



Definition at line 237 of file pgpmac.\-c.

\hypertarget{pgpmac_8h_ae746a6903fb8a4ea216def88eccedc3c}{\index{pgpmac.\-h@{pgpmac.\-h}!term\-\_\-status@{term\-\_\-status}}
\index{term\-\_\-status@{term\-\_\-status}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{term\-\_\-status}]{\setlength{\rightskip}{0pt plus 5cm}W\-I\-N\-D\-O\-W$\ast$ term\-\_\-status}}\label{pgpmac_8h_ae746a6903fb8a4ea216def88eccedc3c}


shutter, lamp, air, etc status 



Definition at line 239 of file pgpmac.\-c.

\hypertarget{pgpmac_8h_ae2d7da3afeb756716e6e4ee9cab78f8a}{\index{pgpmac.\-h@{pgpmac.\-h}!term\-\_\-status2@{term\-\_\-status2}}
\index{term\-\_\-status2@{term\-\_\-status2}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{term\-\_\-status2}]{\setlength{\rightskip}{0pt plus 5cm}W\-I\-N\-D\-O\-W$\ast$ term\-\_\-status2}}\label{pgpmac_8h_ae2d7da3afeb756716e6e4ee9cab78f8a}


shutter, lamp, air, etc status 



Definition at line 240 of file pgpmac.\-c.

\hypertarget{pgpmac_8h_ad53a42cfaa04eff0336a44c8c9986333}{\index{pgpmac.\-h@{pgpmac.\-h}!zoom@{zoom}}
\index{zoom@{zoom}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{zoom}]{\setlength{\rightskip}{0pt plus 5cm}{\bf lspmac\-\_\-motor\-\_\-t}$\ast$ zoom}}\label{pgpmac_8h_ad53a42cfaa04eff0336a44c8c9986333}


Optical zoom. 



Definition at line 87 of file lspmac.\-c.

