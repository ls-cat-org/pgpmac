<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>LS-CAT PGPMAC: pgpmac.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">LS-CAT PGPMAC
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('pgpmac_8h.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">pgpmac.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Headers for the entire pgpmac project.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdint.h&gt;</code><br/>
<code>#include &lt;stdio.h&gt;</code><br/>
<code>#include &lt;stdlib.h&gt;</code><br/>
<code>#include &lt;unistd.h&gt;</code><br/>
<code>#include &lt;sys/types.h&gt;</code><br/>
<code>#include &lt;sys/socket.h&gt;</code><br/>
<code>#include &lt;netdb.h&gt;</code><br/>
<code>#include &lt;string.h&gt;</code><br/>
<code>#include &lt;netinet/in.h&gt;</code><br/>
<code>#include &lt;errno.h&gt;</code><br/>
<code>#include &lt;poll.h&gt;</code><br/>
<code>#include &lt;libpq-fe.h&gt;</code><br/>
<code>#include &lt;ncurses.h&gt;</code><br/>
<code>#include &lt;math.h&gt;</code><br/>
<code>#include &lt;pthread.h&gt;</code><br/>
<code>#include &lt;signal.h&gt;</code><br/>
<code>#include &lt;sys/signalfd.h&gt;</code><br/>
<code>#include &lt;sys/time.h&gt;</code><br/>
<code>#include &lt;time.h&gt;</code><br/>
<code>#include &lt;getopt.h&gt;</code><br/>
<code>#include &lt;regex.h&gt;</code><br/>
<code>#include &lt;hiredis/hiredis.h&gt;</code><br/>
<code>#include &lt;hiredis/async.h&gt;</code><br/>
<code>#include &lt;search.h&gt;</code><br/>
</div>
<p><a href="pgpmac_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlsredis__obj__struct.html">lsredis_obj_struct</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Redis Object Basic object whose value is sychronized with our redis db.  <a href="structlsredis__obj__struct.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structtagEthernetCmd.html">tagEthernetCmd</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">PMAC ethernet packet definition.  <a href="structtagEthernetCmd.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlspmac__cmd__queue__struct.html">lspmac_cmd_queue_struct</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">PMAC command queue item.  <a href="structlspmac__cmd__queue__struct.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlspmac__motor__struct.html">lspmac_motor_struct</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Motor information.  <a href="structlspmac__motor__struct.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlspmac__bi__struct.html">lspmac_bi_struct</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Storage for binary inputs.  <a href="structlspmac__bi__struct.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlspgQueryQueueStruct.html">lspgQueryQueueStruct</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Store each query along with it's callback function.  <a href="structlspgQueryQueueStruct.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlspg__waitcryo__struct.html">lspg_waitcryo_struct</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlspg__getcurrentsampleid__struct.html">lspg_getcurrentsampleid_struct</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlspg__demandairrights__struct.html">lspg_demandairrights_struct</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlspg__getcenter__struct.html">lspg_getcenter_struct</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Storage for getcenter query Used for the md2 ROTATE command that generates the centering movies.  <a href="structlspg__getcenter__struct.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlspg__starttransfer__struct.html">lspg_starttransfer_struct</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">returns 1 if transfer can continue 0 to abort  <a href="structlspg__starttransfer__struct.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlspg__nextsample__struct.html">lspg_nextsample_struct</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the next sample number Just a 32 bit int (Ha!, take that, nextshot!)  <a href="structlspg__nextsample__struct.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlspg__nextshot__struct.html">lspg_nextshot_struct</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Storage definition for nextshot query.  <a href="structlspg__nextshot__struct.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a369266c24eacffb87046522897a570d5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a369266c24eacffb87046522897a570d5">_GNU_SOURCE</a></td></tr>
<tr class="separator:a369266c24eacffb87046522897a570d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3bae94e8e4e4347dd5f87b6bda058de6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a3bae94e8e4e4347dd5f87b6bda058de6">LS_DISPLAY_WINDOW_HEIGHT</a>&#160;&#160;&#160;8</td></tr>
<tr class="memdesc:a3bae94e8e4e4347dd5f87b6bda058de6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of status box rows.  <a href="#a3bae94e8e4e4347dd5f87b6bda058de6"></a><br/></td></tr>
<tr class="separator:a3bae94e8e4e4347dd5f87b6bda058de6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f96754f00a1f82414cebc66f75ded78"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a1f96754f00a1f82414cebc66f75ded78">LS_DISPLAY_WINDOW_WIDTH</a>&#160;&#160;&#160;24</td></tr>
<tr class="memdesc:a1f96754f00a1f82414cebc66f75ded78"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of status box columns.  <a href="#a1f96754f00a1f82414cebc66f75ded78"></a><br/></td></tr>
<tr class="separator:a1f96754f00a1f82414cebc66f75ded78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a8ef1b4b5994d6dd12bf74454ea891b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a3a8ef1b4b5994d6dd12bf74454ea891b">LS_PG_QUERY_STRING_LENGTH</a>&#160;&#160;&#160;1024</td></tr>
<tr class="memdesc:a3a8ef1b4b5994d6dd12bf74454ea891b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fixed length postgresql query strings. Queries should all be function calls so this is not as weird as one might think.  <a href="#a3a8ef1b4b5994d6dd12bf74454ea891b"></a><br/></td></tr>
<tr class="separator:a3a8ef1b4b5994d6dd12bf74454ea891b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab61d790b5572f116e091babfda53627b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#ab61d790b5572f116e091babfda53627b">LSEVENTS_EVENT_LENGTH</a>&#160;&#160;&#160;256</td></tr>
<tr class="memdesc:ab61d790b5572f116e091babfda53627b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fixed length for event names: simplifies string handling.  <a href="#ab61d790b5572f116e091babfda53627b"></a><br/></td></tr>
<tr class="separator:ab61d790b5572f116e091babfda53627b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30f0f377b0f0695284145d420ea51846"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a30f0f377b0f0695284145d420ea51846">MD2CMDS_CMD_LENGTH</a>&#160;&#160;&#160;32</td></tr>
<tr class="separator:a30f0f377b0f0695284145d420ea51846"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ad449de06d02791adf2498d2a1e1f909c"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structlsredis__obj__struct.html">lsredis_obj_struct</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#ad449de06d02791adf2498d2a1e1f909c">lsredis_obj_t</a></td></tr>
<tr class="memdesc:ad449de06d02791adf2498d2a1e1f909c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Redis Object Basic object whose value is sychronized with our redis db.  <a href="#ad449de06d02791adf2498d2a1e1f909c"></a><br/></td></tr>
<tr class="separator:ad449de06d02791adf2498d2a1e1f909c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d163436571135a457f4a4e2fbd09633"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structtagEthernetCmd.html">tagEthernetCmd</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a2d163436571135a457f4a4e2fbd09633">pmac_cmd_t</a></td></tr>
<tr class="memdesc:a2d163436571135a457f4a4e2fbd09633"><td class="mdescLeft">&#160;</td><td class="mdescRight">PMAC ethernet packet definition.  <a href="#a2d163436571135a457f4a4e2fbd09633"></a><br/></td></tr>
<tr class="separator:a2d163436571135a457f4a4e2fbd09633"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99c275e32ad897dca34d196b91f038cb"><td class="memItemLeft" align="right" valign="top">typedef struct <br class="typebreak"/>
<a class="el" href="structlspmac__cmd__queue__struct.html">lspmac_cmd_queue_struct</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a99c275e32ad897dca34d196b91f038cb">pmac_cmd_queue_t</a></td></tr>
<tr class="memdesc:a99c275e32ad897dca34d196b91f038cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">PMAC command queue item.  <a href="#a99c275e32ad897dca34d196b91f038cb"></a><br/></td></tr>
<tr class="separator:a99c275e32ad897dca34d196b91f038cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5067fcbaabc5bbfdc52492495518c96"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structlspmac__motor__struct.html">lspmac_motor_struct</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#aa5067fcbaabc5bbfdc52492495518c96">lspmac_motor_t</a></td></tr>
<tr class="memdesc:aa5067fcbaabc5bbfdc52492495518c96"><td class="mdescLeft">&#160;</td><td class="mdescRight">Motor information.  <a href="#aa5067fcbaabc5bbfdc52492495518c96"></a><br/></td></tr>
<tr class="separator:aa5067fcbaabc5bbfdc52492495518c96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac48984832ef73cf145e5f08bc65bd3a0"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structlspmac__bi__struct.html">lspmac_bi_struct</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#ac48984832ef73cf145e5f08bc65bd3a0">lspmac_bi_t</a></td></tr>
<tr class="memdesc:ac48984832ef73cf145e5f08bc65bd3a0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Storage for binary inputs.  <a href="#ac48984832ef73cf145e5f08bc65bd3a0"></a><br/></td></tr>
<tr class="separator:ac48984832ef73cf145e5f08bc65bd3a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae57432c0a6ac48a50457815dab2c5b4c"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structlspgQueryQueueStruct.html">lspgQueryQueueStruct</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#ae57432c0a6ac48a50457815dab2c5b4c">lspg_query_queue_t</a></td></tr>
<tr class="memdesc:ae57432c0a6ac48a50457815dab2c5b4c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Store each query along with it's callback function.  <a href="#ae57432c0a6ac48a50457815dab2c5b4c"></a><br/></td></tr>
<tr class="separator:ae57432c0a6ac48a50457815dab2c5b4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a779e2acce8b5e748c184caf23ed0db57"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structlspg__waitcryo__struct.html">lspg_waitcryo_struct</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a779e2acce8b5e748c184caf23ed0db57">lspg_waitcryo_t</a></td></tr>
<tr class="separator:a779e2acce8b5e748c184caf23ed0db57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a794370785ff015d5ee035917e3bee8"><td class="memItemLeft" align="right" valign="top">typedef struct <br class="typebreak"/>
<a class="el" href="structlspg__getcurrentsampleid__struct.html">lspg_getcurrentsampleid_struct</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a7a794370785ff015d5ee035917e3bee8">lspg_getcurrentsampleid_t</a></td></tr>
<tr class="separator:a7a794370785ff015d5ee035917e3bee8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f71abc6fdfd1839e2e3213d78aaf766"><td class="memItemLeft" align="right" valign="top">typedef struct <br class="typebreak"/>
<a class="el" href="structlspg__demandairrights__struct.html">lspg_demandairrights_struct</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a7f71abc6fdfd1839e2e3213d78aaf766">lspg_demandairrights_t</a></td></tr>
<tr class="separator:a7f71abc6fdfd1839e2e3213d78aaf766"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48b627e412dd038c1f17cdb0501eec33"><td class="memItemLeft" align="right" valign="top">typedef struct <br class="typebreak"/>
<a class="el" href="structlspg__getcenter__struct.html">lspg_getcenter_struct</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a48b627e412dd038c1f17cdb0501eec33">lspg_getcenter_t</a></td></tr>
<tr class="memdesc:a48b627e412dd038c1f17cdb0501eec33"><td class="mdescLeft">&#160;</td><td class="mdescRight">Storage for getcenter query Used for the md2 ROTATE command that generates the centering movies.  <a href="#a48b627e412dd038c1f17cdb0501eec33"></a><br/></td></tr>
<tr class="separator:a48b627e412dd038c1f17cdb0501eec33"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1f0e602ae9509005c62fb2d73bc1c5a"><td class="memItemLeft" align="right" valign="top">typedef struct <br class="typebreak"/>
<a class="el" href="structlspg__starttransfer__struct.html">lspg_starttransfer_struct</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#aa1f0e602ae9509005c62fb2d73bc1c5a">lspg_starttransfer_t</a></td></tr>
<tr class="memdesc:aa1f0e602ae9509005c62fb2d73bc1c5a"><td class="mdescLeft">&#160;</td><td class="mdescRight">returns 1 if transfer can continue 0 to abort  <a href="#aa1f0e602ae9509005c62fb2d73bc1c5a"></a><br/></td></tr>
<tr class="separator:aa1f0e602ae9509005c62fb2d73bc1c5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9dda9014cd0e39fba8d523e37cf9f982"><td class="memItemLeft" align="right" valign="top">typedef struct <br class="typebreak"/>
<a class="el" href="structlspg__nextsample__struct.html">lspg_nextsample_struct</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a9dda9014cd0e39fba8d523e37cf9f982">lspg_nextsample_t</a></td></tr>
<tr class="memdesc:a9dda9014cd0e39fba8d523e37cf9f982"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the next sample number Just a 32 bit int (Ha!, take that, nextshot!)  <a href="#a9dda9014cd0e39fba8d523e37cf9f982"></a><br/></td></tr>
<tr class="separator:a9dda9014cd0e39fba8d523e37cf9f982"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17ea2bf07a0b3b892baa00bd392607b3"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structlspg__nextshot__struct.html">lspg_nextshot_struct</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a17ea2bf07a0b3b892baa00bd392607b3">lspg_nextshot_t</a></td></tr>
<tr class="memdesc:a17ea2bf07a0b3b892baa00bd392607b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Storage definition for nextshot query.  <a href="#a17ea2bf07a0b3b892baa00bd392607b3"></a><br/></td></tr>
<tr class="separator:a17ea2bf07a0b3b892baa00bd392607b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a6a1b639686b771c1213b6e23716a7898"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a6a1b639686b771c1213b6e23716a7898">lspmac_getPosition</a> (<a class="el" href="pgpmac_8h.html#aa5067fcbaabc5bbfdc52492495518c96">lspmac_motor_t</a> *)</td></tr>
<tr class="memdesc:a6a1b639686b771c1213b6e23716a7898"><td class="mdescLeft">&#160;</td><td class="mdescRight">get the motor position (with locking)  <a href="#a6a1b639686b771c1213b6e23716a7898"></a><br/></td></tr>
<tr class="separator:a6a1b639686b771c1213b6e23716a7898"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ee000bfeef9380d479464a9500af311"><td class="memItemLeft" align="right" valign="top">char **&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a4ee000bfeef9380d479464a9500af311">lspg_array2ptrs</a> (char *)</td></tr>
<tr class="memdesc:a4ee000bfeef9380d479464a9500af311"><td class="mdescLeft">&#160;</td><td class="mdescRight">returns a null terminated list of strings parsed from postgresql array  <a href="#a4ee000bfeef9380d479464a9500af311"></a><br/></td></tr>
<tr class="separator:a4ee000bfeef9380d479464a9500af311"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe31d0e11c41b2235307612c963bb652"><td class="memItemLeft" align="right" valign="top">char **&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#abe31d0e11c41b2235307612c963bb652">lsredis_get_string_array</a> (<a class="el" href="pgpmac_8h.html#ad449de06d02791adf2498d2a1e1f909c">lsredis_obj_t</a> *p)</td></tr>
<tr class="separator:abe31d0e11c41b2235307612c963bb652"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49a53bb92535ca2b62208dce41760fbb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a49a53bb92535ca2b62208dce41760fbb">lspmac_SockSendDPline</a> (char *, char *fmt,...)</td></tr>
<tr class="memdesc:a49a53bb92535ca2b62208dce41760fbb"><td class="mdescLeft">&#160;</td><td class="mdescRight">prepare (queue up) a line to send the dpram ascii command interface  <a href="#a49a53bb92535ca2b62208dce41760fbb"></a><br/></td></tr>
<tr class="separator:a49a53bb92535ca2b62208dce41760fbb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79f86193e36c823157049061b94627a7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pgpmac_8h.html#a99c275e32ad897dca34d196b91f038cb">pmac_cmd_queue_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a79f86193e36c823157049061b94627a7">lspmac_SockSendline</a> (char *, char *,...)</td></tr>
<tr class="memdesc:a79f86193e36c823157049061b94627a7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a one line command.  <a href="#a79f86193e36c823157049061b94627a7"></a><br/></td></tr>
<tr class="separator:a79f86193e36c823157049061b94627a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d9f550b9ba36acd237925164abe3ffc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pgpmac_8h.html#ad449de06d02791adf2498d2a1e1f909c">lsredis_obj_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a6d9f550b9ba36acd237925164abe3ffc">lsredis_get_obj</a> (char *,...)</td></tr>
<tr class="separator:a6d9f550b9ba36acd237925164abe3ffc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac1994e56114b2315294527d76311f829"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#ac1994e56114b2315294527d76311f829">lsredis_getstr</a> (<a class="el" href="pgpmac_8h.html#ad449de06d02791adf2498d2a1e1f909c">lsredis_obj_t</a> *p)</td></tr>
<tr class="memdesc:ac1994e56114b2315294527d76311f829"><td class="mdescLeft">&#160;</td><td class="mdescRight">return a copy of the key's string value  <a href="#ac1994e56114b2315294527d76311f829"></a><br/></td></tr>
<tr class="separator:ac1994e56114b2315294527d76311f829"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76b11c62b122ee0fd8399435d4260681"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a76b11c62b122ee0fd8399435d4260681">PmacSockSendline</a> (char *s)</td></tr>
<tr class="separator:a76b11c62b122ee0fd8399435d4260681"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4cc866393eda0cf20276d035f6fbe206"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a4cc866393eda0cf20276d035f6fbe206">lspg_nextsample_all</a> (int *err)</td></tr>
<tr class="separator:a4cc866393eda0cf20276d035f6fbe206"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1923f998441f4f451204dfd214d52218"><td class="memItemLeft" align="right" valign="top">long int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a1923f998441f4f451204dfd214d52218">lsredis_getl</a> (<a class="el" href="pgpmac_8h.html#ad449de06d02791adf2498d2a1e1f909c">lsredis_obj_t</a> *p)</td></tr>
<tr class="separator:a1923f998441f4f451204dfd214d52218"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac89b916c1152c44042875feac35a9e4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#aac89b916c1152c44042875feac35a9e4">lsevents_add_listener</a> (char *, void(*cb)(char *))</td></tr>
<tr class="memdesc:aac89b916c1152c44042875feac35a9e4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a callback routine to listen for a specific event.  <a href="#aac89b916c1152c44042875feac35a9e4"></a><br/></td></tr>
<tr class="separator:aac89b916c1152c44042875feac35a9e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af19a77187e7406fc87d36bd26e672e6d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#af19a77187e7406fc87d36bd26e672e6d">lsevents_init</a> ()</td></tr>
<tr class="memdesc:af19a77187e7406fc87d36bd26e672e6d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize this module.  <a href="#af19a77187e7406fc87d36bd26e672e6d"></a><br/></td></tr>
<tr class="separator:af19a77187e7406fc87d36bd26e672e6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a024b08c7820bb31c3d5b8f281e07f3e8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a024b08c7820bb31c3d5b8f281e07f3e8">lsevents_remove_listener</a> (char *, void(*cb)(char *))</td></tr>
<tr class="memdesc:a024b08c7820bb31c3d5b8f281e07f3e8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove a listener previously added with lsevents_add_listener.  <a href="#a024b08c7820bb31c3d5b8f281e07f3e8"></a><br/></td></tr>
<tr class="separator:a024b08c7820bb31c3d5b8f281e07f3e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ddde538b603e3d4580ae9356bf9b89d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a4ddde538b603e3d4580ae9356bf9b89d">lsevents_run</a> ()</td></tr>
<tr class="memdesc:a4ddde538b603e3d4580ae9356bf9b89d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start up the thread and get out of the way.  <a href="#a4ddde538b603e3d4580ae9356bf9b89d"></a><br/></td></tr>
<tr class="separator:a4ddde538b603e3d4580ae9356bf9b89d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3661dfc51537c05b11f4fd184fdff07d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a3661dfc51537c05b11f4fd184fdff07d">lsevents_send_event</a> (char *,...)</td></tr>
<tr class="memdesc:a3661dfc51537c05b11f4fd184fdff07d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Call the callback routines for the given event.  <a href="#a3661dfc51537c05b11f4fd184fdff07d"></a><br/></td></tr>
<tr class="separator:a3661dfc51537c05b11f4fd184fdff07d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3418b9ab57811d28632794236e056408"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a3418b9ab57811d28632794236e056408">lslogging_init</a> ()</td></tr>
<tr class="memdesc:a3418b9ab57811d28632794236e056408"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the lslogging objects.  <a href="#a3418b9ab57811d28632794236e056408"></a><br/></td></tr>
<tr class="separator:a3418b9ab57811d28632794236e056408"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e756b36671055ef02a8f04d2ba8a93b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a0e756b36671055ef02a8f04d2ba8a93b">lslogging_log_message</a> (char *fmt,...)</td></tr>
<tr class="memdesc:a0e756b36671055ef02a8f04d2ba8a93b"><td class="mdescLeft">&#160;</td><td class="mdescRight">The routine everyone will be talking about.  <a href="#a0e756b36671055ef02a8f04d2ba8a93b"></a><br/></td></tr>
<tr class="separator:a0e756b36671055ef02a8f04d2ba8a93b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9f65252584e65957f461b809d59e3a2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#ad9f65252584e65957f461b809d59e3a2">lslogging_run</a> ()</td></tr>
<tr class="memdesc:ad9f65252584e65957f461b809d59e3a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start up the worker thread.  <a href="#ad9f65252584e65957f461b809d59e3a2"></a><br/></td></tr>
<tr class="separator:ad9f65252584e65957f461b809d59e3a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf0ad72847ccb93694b3bdc649e6d1fc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#aaf0ad72847ccb93694b3bdc649e6d1fc">lspg_demandairrights_all</a> ()</td></tr>
<tr class="memdesc:aaf0ad72847ccb93694b3bdc649e6d1fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">do nothing until we get airrights  <a href="#aaf0ad72847ccb93694b3bdc649e6d1fc"></a><br/></td></tr>
<tr class="separator:aaf0ad72847ccb93694b3bdc649e6d1fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f7cd0a06f6a266ef65b3604cf33d6c4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a6f7cd0a06f6a266ef65b3604cf33d6c4">lspg_getcenter_call</a> ()</td></tr>
<tr class="memdesc:a6f7cd0a06f6a266ef65b3604cf33d6c4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Request a getcenter query.  <a href="#a6f7cd0a06f6a266ef65b3604cf33d6c4"></a><br/></td></tr>
<tr class="separator:a6f7cd0a06f6a266ef65b3604cf33d6c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c678553b44c874d08ec9966ed7bb1c0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a7c678553b44c874d08ec9966ed7bb1c0">lspg_getcenter_done</a> ()</td></tr>
<tr class="memdesc:a7c678553b44c874d08ec9966ed7bb1c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Done with getcenter query.  <a href="#a7c678553b44c874d08ec9966ed7bb1c0"></a><br/></td></tr>
<tr class="separator:a7c678553b44c874d08ec9966ed7bb1c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e0e4b3cb9fa03961ee0c104e0b06754"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a3e0e4b3cb9fa03961ee0c104e0b06754">lspg_getcenter_wait</a> ()</td></tr>
<tr class="memdesc:a3e0e4b3cb9fa03961ee0c104e0b06754"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait for a getcenter query to return.  <a href="#a3e0e4b3cb9fa03961ee0c104e0b06754"></a><br/></td></tr>
<tr class="separator:a3e0e4b3cb9fa03961ee0c104e0b06754"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d624b228ddd560ace0cef4286a30b07"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a2d624b228ddd560ace0cef4286a30b07">lspg_getcurrentsampleid_wait_for_id</a> (unsigned int test)</td></tr>
<tr class="separator:a2d624b228ddd560ace0cef4286a30b07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a77972df14166e05c94ed0792baa09b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a8a77972df14166e05c94ed0792baa09b">lspg_init</a> ()</td></tr>
<tr class="memdesc:a8a77972df14166e05c94ed0792baa09b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initiallize the lspg module.  <a href="#a8a77972df14166e05c94ed0792baa09b"></a><br/></td></tr>
<tr class="separator:a8a77972df14166e05c94ed0792baa09b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af17ef79544ca5d78fd477010fe90d538"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#af17ef79544ca5d78fd477010fe90d538">lspg_nextshot_call</a> ()</td></tr>
<tr class="memdesc:af17ef79544ca5d78fd477010fe90d538"><td class="mdescLeft">&#160;</td><td class="mdescRight">Queue up a nextshot query.  <a href="#af17ef79544ca5d78fd477010fe90d538"></a><br/></td></tr>
<tr class="separator:af17ef79544ca5d78fd477010fe90d538"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50458a014041a4118452802dfb303960"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a50458a014041a4118452802dfb303960">lspg_nextshot_done</a> ()</td></tr>
<tr class="memdesc:a50458a014041a4118452802dfb303960"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called when the next shot query has been processed.  <a href="#a50458a014041a4118452802dfb303960"></a><br/></td></tr>
<tr class="separator:a50458a014041a4118452802dfb303960"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a784a6de32a86fec9efb3ef3ae4b6e3ac"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a784a6de32a86fec9efb3ef3ae4b6e3ac">lspg_nextshot_wait</a> ()</td></tr>
<tr class="memdesc:a784a6de32a86fec9efb3ef3ae4b6e3ac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait for the next shot query to get processed.  <a href="#a784a6de32a86fec9efb3ef3ae4b6e3ac"></a><br/></td></tr>
<tr class="separator:a784a6de32a86fec9efb3ef3ae4b6e3ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0bb9ef42da8fa21c4df48ec384ab69f4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a0bb9ef42da8fa21c4df48ec384ab69f4">lspg_query_push</a> (void(*cb)(<a class="el" href="kvredis_8c.html#ae57432c0a6ac48a50457815dab2c5b4c">lspg_query_queue_t</a> *, PGresult *), char *fmt,...)</td></tr>
<tr class="memdesc:a0bb9ef42da8fa21c4df48ec384ab69f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Place a query on the queue.  <a href="#a0bb9ef42da8fa21c4df48ec384ab69f4"></a><br/></td></tr>
<tr class="separator:a0bb9ef42da8fa21c4df48ec384ab69f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1adfdb5ca9fdb5060849d726bf540117"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a1adfdb5ca9fdb5060849d726bf540117">lspg_run</a> ()</td></tr>
<tr class="memdesc:a1adfdb5ca9fdb5060849d726bf540117"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start 'er runnin'.  <a href="#a1adfdb5ca9fdb5060849d726bf540117"></a><br/></td></tr>
<tr class="separator:a1adfdb5ca9fdb5060849d726bf540117"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4253474d4dd305aec0afdd5552b3ddd5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a4253474d4dd305aec0afdd5552b3ddd5">lspg_seq_run_prep_all</a> (long long skey, double <a class="el" href="pgpmac_8h.html#a0be79ccb7ebf3a665248fd856112b9fd">kappa</a>, double <a class="el" href="pgpmac_8h.html#ac8070dc568ad974a3db42b51eca828cc">phi</a>, double cx, double cy, double ax, double ay, double az)</td></tr>
<tr class="memdesc:a4253474d4dd305aec0afdd5552b3ddd5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convinence function to call seq run prep.  <a href="#a4253474d4dd305aec0afdd5552b3ddd5"></a><br/></td></tr>
<tr class="separator:a4253474d4dd305aec0afdd5552b3ddd5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af72c4b037347737df09348ab703f6802"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#af72c4b037347737df09348ab703f6802">lspg_starttransfer_call</a> (unsigned int nextsample, int <a class="el" href="pgpmac_8h.html#ac59ab990e48033a811aeb0281fb588fc">sample_detected</a>, double ax, double ay, double az, double horz, double vert, double esttime)</td></tr>
<tr class="separator:af72c4b037347737df09348ab703f6802"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad989179281d8b65b940250a4580007d0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#ad989179281d8b65b940250a4580007d0">lspg_starttransfer_done</a> ()</td></tr>
<tr class="separator:ad989179281d8b65b940250a4580007d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a189e9fd5cbc06dd09e5549f6e229fa5e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a189e9fd5cbc06dd09e5549f6e229fa5e">lspg_starttransfer_wait</a> ()</td></tr>
<tr class="separator:a189e9fd5cbc06dd09e5549f6e229fa5e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67a44f70405c8b6a01cec6ac3d166efb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a67a44f70405c8b6a01cec6ac3d166efb">lspg_waitcryo_all</a> ()</td></tr>
<tr class="memdesc:a67a44f70405c8b6a01cec6ac3d166efb"><td class="mdescLeft">&#160;</td><td class="mdescRight">no need to get fancy with the wait cryo command It should not return until the robot is almost ready for air rights  <a href="#a67a44f70405c8b6a01cec6ac3d166efb"></a><br/></td></tr>
<tr class="separator:a67a44f70405c8b6a01cec6ac3d166efb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7497a7c924b31c727ea487a3efb77fb6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a7497a7c924b31c727ea487a3efb77fb6">lspg_waitcryo_cb</a> (<a class="el" href="kvredis_8c.html#ae57432c0a6ac48a50457815dab2c5b4c">lspg_query_queue_t</a> *qqp, PGresult *pgr)</td></tr>
<tr class="separator:a7497a7c924b31c727ea487a3efb77fb6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95e3fd7c1685d7e6ab6d0a295ab42f78"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a95e3fd7c1685d7e6ab6d0a295ab42f78">lspg_zoom_lut_call</a> ()</td></tr>
<tr class="separator:a95e3fd7c1685d7e6ab6d0a295ab42f78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4bf3a54deeaeb6e93dc3183388ad104"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#ac4bf3a54deeaeb6e93dc3183388ad104">lspmac_getBIPosition</a> (<a class="el" href="pgpmac_8h.html#ac48984832ef73cf145e5f08bc65bd3a0">lspmac_bi_t</a> *)</td></tr>
<tr class="memdesc:ac4bf3a54deeaeb6e93dc3183388ad104"><td class="mdescLeft">&#160;</td><td class="mdescRight">get binary input value  <a href="#ac4bf3a54deeaeb6e93dc3183388ad104"></a><br/></td></tr>
<tr class="separator:ac4bf3a54deeaeb6e93dc3183388ad104"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9fbadf816a842c8f131cf8ee47b54e29"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a9fbadf816a842c8f131cf8ee47b54e29">lspmac_home1_queue</a> (<a class="el" href="pgpmac_8h.html#aa5067fcbaabc5bbfdc52492495518c96">lspmac_motor_t</a> *mp)</td></tr>
<tr class="memdesc:a9fbadf816a842c8f131cf8ee47b54e29"><td class="mdescLeft">&#160;</td><td class="mdescRight">Home the motor.  <a href="#a9fbadf816a842c8f131cf8ee47b54e29"></a><br/></td></tr>
<tr class="separator:a9fbadf816a842c8f131cf8ee47b54e29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3e30b0ba9b5d5a291fa29b77ba920d8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#ae3e30b0ba9b5d5a291fa29b77ba920d8">lspmac_init</a> (int, int)</td></tr>
<tr class="memdesc:ae3e30b0ba9b5d5a291fa29b77ba920d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize this module.  <a href="#ae3e30b0ba9b5d5a291fa29b77ba920d8"></a><br/></td></tr>
<tr class="separator:ae3e30b0ba9b5d5a291fa29b77ba920d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62273d5e9fd9a14838f4126fb94a5138"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a62273d5e9fd9a14838f4126fb94a5138">lspmac_jogabs_queue</a> (<a class="el" href="pgpmac_8h.html#aa5067fcbaabc5bbfdc52492495518c96">lspmac_motor_t</a> *, double)</td></tr>
<tr class="memdesc:a62273d5e9fd9a14838f4126fb94a5138"><td class="mdescLeft">&#160;</td><td class="mdescRight">Use jog to move motor to requested position.  <a href="#a62273d5e9fd9a14838f4126fb94a5138"></a><br/></td></tr>
<tr class="separator:a62273d5e9fd9a14838f4126fb94a5138"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a71a8e9cb210ac33874abe4e15149b964"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a71a8e9cb210ac33874abe4e15149b964">lspmac_move_or_jog_abs_queue</a> (<a class="el" href="pgpmac_8h.html#aa5067fcbaabc5bbfdc52492495518c96">lspmac_motor_t</a> *mp, double requested_position, int use_jo)</td></tr>
<tr class="memdesc:a71a8e9cb210ac33874abe4e15149b964"><td class="mdescLeft">&#160;</td><td class="mdescRight">Move method for normal stepper and servo motor objects.  <a href="#a71a8e9cb210ac33874abe4e15149b964"></a><br/></td></tr>
<tr class="separator:a71a8e9cb210ac33874abe4e15149b964"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adeec17e53dfc490f2a954b97fe95f0a7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#adeec17e53dfc490f2a954b97fe95f0a7">lspmac_move_or_jog_preset_queue</a> (<a class="el" href="pgpmac_8h.html#aa5067fcbaabc5bbfdc52492495518c96">lspmac_motor_t</a> *, char *, int)</td></tr>
<tr class="memdesc:adeec17e53dfc490f2a954b97fe95f0a7"><td class="mdescLeft">&#160;</td><td class="mdescRight">move using a preset value  <a href="#adeec17e53dfc490f2a954b97fe95f0a7"></a><br/></td></tr>
<tr class="separator:adeec17e53dfc490f2a954b97fe95f0a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6809c317931c4af226e0a0217764afae"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a6809c317931c4af226e0a0217764afae">lspmac_move_or_jog_queue</a> (<a class="el" href="pgpmac_8h.html#aa5067fcbaabc5bbfdc52492495518c96">lspmac_motor_t</a> *, double, int)</td></tr>
<tr class="separator:a6809c317931c4af226e0a0217764afae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f5751d89f83b4b436c6f8bc636e4156"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a6f5751d89f83b4b436c6f8bc636e4156">lspmac_move_preset_queue</a> (<a class="el" href="pgpmac_8h.html#aa5067fcbaabc5bbfdc52492495518c96">lspmac_motor_t</a> *mp, char *preset_name)</td></tr>
<tr class="memdesc:a6f5751d89f83b4b436c6f8bc636e4156"><td class="mdescLeft">&#160;</td><td class="mdescRight">Move a given motor to one of its preset positions.  <a href="#a6f5751d89f83b4b436c6f8bc636e4156"></a><br/></td></tr>
<tr class="separator:a6f5751d89f83b4b436c6f8bc636e4156"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9edebb71a4ebca5dad3df63164e2004"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#af9edebb71a4ebca5dad3df63164e2004">lspmac_moveabs_queue</a> (<a class="el" href="pgpmac_8h.html#aa5067fcbaabc5bbfdc52492495518c96">lspmac_motor_t</a> *, double)</td></tr>
<tr class="memdesc:af9edebb71a4ebca5dad3df63164e2004"><td class="mdescLeft">&#160;</td><td class="mdescRight">Use coordinate system motion program, if available, to move motor to requested position.  <a href="#af9edebb71a4ebca5dad3df63164e2004"></a><br/></td></tr>
<tr class="separator:af9edebb71a4ebca5dad3df63164e2004"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae2282edace621ee65c682d03b7ccc36"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#aae2282edace621ee65c682d03b7ccc36">lspmac_moveabs_wait</a> (<a class="el" href="pgpmac_8h.html#aa5067fcbaabc5bbfdc52492495518c96">lspmac_motor_t</a> *mp)</td></tr>
<tr class="memdesc:aae2282edace621ee65c682d03b7ccc36"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait for motor to finish moving.  <a href="#aae2282edace621ee65c682d03b7ccc36"></a><br/></td></tr>
<tr class="separator:aae2282edace621ee65c682d03b7ccc36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a7fb93fb3fb9c4454613f30bfb0b1ee"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a3a7fb93fb3fb9c4454613f30bfb0b1ee">lspmac_run</a> ()</td></tr>
<tr class="memdesc:a3a7fb93fb3fb9c4454613f30bfb0b1ee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start up the lspmac thread.  <a href="#a3a7fb93fb3fb9c4454613f30bfb0b1ee"></a><br/></td></tr>
<tr class="separator:a3a7fb93fb3fb9c4454613f30bfb0b1ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8bf745a9ec388783009e2275a8b56f8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#aa8bf745a9ec388783009e2275a8b56f8">lspmac_video_rotate</a> (double secs)</td></tr>
<tr class="memdesc:aa8bf745a9ec388783009e2275a8b56f8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Special motion program to collect centering video.  <a href="#aa8bf745a9ec388783009e2275a8b56f8"></a><br/></td></tr>
<tr class="separator:aa8bf745a9ec388783009e2275a8b56f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac356cd43e46799929242dcf5214df7f6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#ac356cd43e46799929242dcf5214df7f6">lsredis_cmpnstr</a> (<a class="el" href="pgpmac_8h.html#ad449de06d02791adf2498d2a1e1f909c">lsredis_obj_t</a> *p, char *s, int n)</td></tr>
<tr class="separator:ac356cd43e46799929242dcf5214df7f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9fc8fd0db4c71c5eae68682b43103078"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a9fc8fd0db4c71c5eae68682b43103078">lsredis_cmpstr</a> (<a class="el" href="pgpmac_8h.html#ad449de06d02791adf2498d2a1e1f909c">lsredis_obj_t</a> *p, char *s)</td></tr>
<tr class="separator:a9fc8fd0db4c71c5eae68682b43103078"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ad60526a09ca679f39174ce5d773abe"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a1ad60526a09ca679f39174ce5d773abe">lsredis_find_preset</a> (char *base, char *preset_name, double *dval)</td></tr>
<tr class="separator:a1ad60526a09ca679f39174ce5d773abe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbb4e5ece19ebd130e1be18036752a08"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#abbb4e5ece19ebd130e1be18036752a08">lsredis_getb</a> (<a class="el" href="pgpmac_8h.html#ad449de06d02791adf2498d2a1e1f909c">lsredis_obj_t</a> *p)</td></tr>
<tr class="separator:abbb4e5ece19ebd130e1be18036752a08"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8daf63b794b6b6341018feec205cb7d"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#aa8daf63b794b6b6341018feec205cb7d">lsredis_getd</a> (<a class="el" href="pgpmac_8h.html#ad449de06d02791adf2498d2a1e1f909c">lsredis_obj_t</a> *p)</td></tr>
<tr class="separator:aa8daf63b794b6b6341018feec205cb7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef0f12fda57e476a50b14acdc9f30b58"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#aef0f12fda57e476a50b14acdc9f30b58">lsredis_init</a> (char *pub, char *re, char *head)</td></tr>
<tr class="memdesc:aef0f12fda57e476a50b14acdc9f30b58"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize this module, that is, set up the connections.  <a href="#aef0f12fda57e476a50b14acdc9f30b58"></a><br/></td></tr>
<tr class="separator:aef0f12fda57e476a50b14acdc9f30b58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac58fca47533e695c8775e0d2b9128766"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#ac58fca47533e695c8775e0d2b9128766">lsredis_regexec</a> (const regex_t *preg, <a class="el" href="pgpmac_8h.html#ad449de06d02791adf2498d2a1e1f909c">lsredis_obj_t</a> *p, size_t nmatch, regmatch_t *pmatch, int eflags)</td></tr>
<tr class="separator:ac58fca47533e695c8775e0d2b9128766"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad438e4368d86bbe15a93dcf86deaded5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#ad438e4368d86bbe15a93dcf86deaded5">lsredis_run</a> ()</td></tr>
<tr class="separator:ad438e4368d86bbe15a93dcf86deaded5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b9c64f883c7ded60badfe89cb15fa78"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a9b9c64f883c7ded60badfe89cb15fa78">lsredis_setstr</a> (<a class="el" href="pgpmac_8h.html#ad449de06d02791adf2498d2a1e1f909c">lsredis_obj_t</a> *p, char *fmt,...)</td></tr>
<tr class="memdesc:a9b9c64f883c7ded60badfe89cb15fa78"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the value and update redis.  <a href="#a9b9c64f883c7ded60badfe89cb15fa78"></a><br/></td></tr>
<tr class="separator:a9b9c64f883c7ded60badfe89cb15fa78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af712dd2e9419026eff2762ba062eeaf1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#af712dd2e9419026eff2762ba062eeaf1">lstimer_add_timer</a> (char *, int, unsigned long int, unsigned long int)</td></tr>
<tr class="memdesc:af712dd2e9419026eff2762ba062eeaf1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a timer.  <a href="#af712dd2e9419026eff2762ba062eeaf1"></a><br/></td></tr>
<tr class="separator:af712dd2e9419026eff2762ba062eeaf1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8cd37a8fb0f061456456a5d79bdd5189"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a8cd37a8fb0f061456456a5d79bdd5189">lstimer_init</a> ()</td></tr>
<tr class="memdesc:a8cd37a8fb0f061456456a5d79bdd5189"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the timer list and pthread stuff.  <a href="#a8cd37a8fb0f061456456a5d79bdd5189"></a><br/></td></tr>
<tr class="separator:a8cd37a8fb0f061456456a5d79bdd5189"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b918acc1a4bf737cb62b5a70f8b553a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a0b918acc1a4bf737cb62b5a70f8b553a">lstimer_run</a> ()</td></tr>
<tr class="memdesc:a0b918acc1a4bf737cb62b5a70f8b553a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start up our thread.  <a href="#a0b918acc1a4bf737cb62b5a70f8b553a"></a><br/></td></tr>
<tr class="separator:a0b918acc1a4bf737cb62b5a70f8b553a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf63440ffbc65024fef87ea6a11ea8b0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#adf63440ffbc65024fef87ea6a11ea8b0">lsupdate_init</a> ()</td></tr>
<tr class="separator:adf63440ffbc65024fef87ea6a11ea8b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af219e9b2cc124f109aa4c2c2e16b5d07"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#af219e9b2cc124f109aa4c2c2e16b5d07">lsupdate_run</a> ()</td></tr>
<tr class="separator:af219e9b2cc124f109aa4c2c2e16b5d07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0851b1baecda6a67993efde41d77b1c1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a0851b1baecda6a67993efde41d77b1c1">md2cmds_init</a> ()</td></tr>
<tr class="memdesc:a0851b1baecda6a67993efde41d77b1c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the md2cmds module.  <a href="#a0851b1baecda6a67993efde41d77b1c1"></a><br/></td></tr>
<tr class="separator:a0851b1baecda6a67993efde41d77b1c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa62da7d423952334d41c7d282f45233d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#aa62da7d423952334d41c7d282f45233d">md2cmds_run</a> ()</td></tr>
<tr class="memdesc:aa62da7d423952334d41c7d282f45233d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start up the thread.  <a href="#aa62da7d423952334d41c7d282f45233d"></a><br/></td></tr>
<tr class="separator:aa62da7d423952334d41c7d282f45233d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7762ca7b97b44b979e23ce88ca3b4249"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a7762ca7b97b44b979e23ce88ca3b4249">pgpmac_printf</a> (char *fmt,...)</td></tr>
<tr class="memdesc:a7762ca7b97b44b979e23ce88ca3b4249"><td class="mdescLeft">&#160;</td><td class="mdescRight">Terminal output routine ala printf.  <a href="#a7762ca7b97b44b979e23ce88ca3b4249"></a><br/></td></tr>
<tr class="separator:a7762ca7b97b44b979e23ce88ca3b4249"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a5f699604dcc5d3d64fd6cb5c363d29c9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pgpmac_8h.html#a779e2acce8b5e748c184caf23ed0db57">lspg_waitcryo_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a5f699604dcc5d3d64fd6cb5c363d29c9">lspg_waitcryo</a></td></tr>
<tr class="memdesc:a5f699604dcc5d3d64fd6cb5c363d29c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">signal the robot  <a href="#a5f699604dcc5d3d64fd6cb5c363d29c9"></a><br/></td></tr>
<tr class="separator:a5f699604dcc5d3d64fd6cb5c363d29c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c50804e6019d47d91f3f1cb3ebd1f00"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pgpmac_8h.html#a7a794370785ff015d5ee035917e3bee8">lspg_getcurrentsampleid_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a5c50804e6019d47d91f3f1cb3ebd1f00">lspg_getcurrentsampleid</a></td></tr>
<tr class="memdesc:a5c50804e6019d47d91f3f1cb3ebd1f00"><td class="mdescLeft">&#160;</td><td class="mdescRight">our currentsample id  <a href="#a5c50804e6019d47d91f3f1cb3ebd1f00"></a><br/></td></tr>
<tr class="separator:a5c50804e6019d47d91f3f1cb3ebd1f00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf89a0299edd6a99992b95dff8992eba"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pgpmac_8h.html#a7f71abc6fdfd1839e2e3213d78aaf766">lspg_demandairrights_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#adf89a0299edd6a99992b95dff8992eba">lspg_demandairrights</a></td></tr>
<tr class="memdesc:adf89a0299edd6a99992b95dff8992eba"><td class="mdescLeft">&#160;</td><td class="mdescRight">our demandairrights object  <a href="#adf89a0299edd6a99992b95dff8992eba"></a><br/></td></tr>
<tr class="separator:adf89a0299edd6a99992b95dff8992eba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ef8a09203117578c9b2ce4719519f36"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pgpmac_8h.html#a48b627e412dd038c1f17cdb0501eec33">lspg_getcenter_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a7ef8a09203117578c9b2ce4719519f36">lspg_getcenter</a></td></tr>
<tr class="memdesc:a7ef8a09203117578c9b2ce4719519f36"><td class="mdescLeft">&#160;</td><td class="mdescRight">the getcenter object  <a href="#a7ef8a09203117578c9b2ce4719519f36"></a><br/></td></tr>
<tr class="separator:a7ef8a09203117578c9b2ce4719519f36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af18499d17171eff473cfc49d4a0a5562"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pgpmac_8h.html#aa1f0e602ae9509005c62fb2d73bc1c5a">lspg_starttransfer_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#af18499d17171eff473cfc49d4a0a5562">lspg_starttransfer</a></td></tr>
<tr class="memdesc:af18499d17171eff473cfc49d4a0a5562"><td class="mdescLeft">&#160;</td><td class="mdescRight">start a sample transfer  <a href="#af18499d17171eff473cfc49d4a0a5562"></a><br/></td></tr>
<tr class="separator:af18499d17171eff473cfc49d4a0a5562"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adbf70f382e469e02dce77833981f9547"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pgpmac_8h.html#a9dda9014cd0e39fba8d523e37cf9f982">lspg_nextsample_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#adbf70f382e469e02dce77833981f9547">lspg_nextsample</a></td></tr>
<tr class="memdesc:adbf70f382e469e02dce77833981f9547"><td class="mdescLeft">&#160;</td><td class="mdescRight">the very next sample  <a href="#adbf70f382e469e02dce77833981f9547"></a><br/></td></tr>
<tr class="separator:adbf70f382e469e02dce77833981f9547"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8d8e2f578ca79189a80c1fd5b60cefd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pgpmac_8h.html#a17ea2bf07a0b3b892baa00bd392607b3">lspg_nextshot_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#ad8d8e2f578ca79189a80c1fd5b60cefd">lspg_nextshot</a></td></tr>
<tr class="memdesc:ad8d8e2f578ca79189a80c1fd5b60cefd"><td class="mdescLeft">&#160;</td><td class="mdescRight">the nextshot object  <a href="#ad8d8e2f578ca79189a80c1fd5b60cefd"></a><br/></td></tr>
<tr class="separator:ad8d8e2f578ca79189a80c1fd5b60cefd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aebfce5f9cbc8ba7bd4e2ee4880f303e8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pgpmac_8h.html#aa5067fcbaabc5bbfdc52492495518c96">lspmac_motor_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#aebfce5f9cbc8ba7bd4e2ee4880f303e8">lspmac_motors</a> []</td></tr>
<tr class="memdesc:aebfce5f9cbc8ba7bd4e2ee4880f303e8"><td class="mdescLeft">&#160;</td><td class="mdescRight">All our motors.  <a href="#aebfce5f9cbc8ba7bd4e2ee4880f303e8"></a><br/></td></tr>
<tr class="separator:aebfce5f9cbc8ba7bd4e2ee4880f303e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8237e646ce032a840637a4ef7bff49b9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pgpmac_8h.html#aa5067fcbaabc5bbfdc52492495518c96">lspmac_motor_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a8237e646ce032a840637a4ef7bff49b9">omega</a></td></tr>
<tr class="memdesc:a8237e646ce032a840637a4ef7bff49b9"><td class="mdescLeft">&#160;</td><td class="mdescRight">MD2 omega axis (the air bearing)  <a href="#a8237e646ce032a840637a4ef7bff49b9"></a><br/></td></tr>
<tr class="separator:a8237e646ce032a840637a4ef7bff49b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6cb218bdccfe5a93471c161f15a15cab"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pgpmac_8h.html#aa5067fcbaabc5bbfdc52492495518c96">lspmac_motor_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a6cb218bdccfe5a93471c161f15a15cab">alignx</a></td></tr>
<tr class="memdesc:a6cb218bdccfe5a93471c161f15a15cab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Alignment stage X.  <a href="#a6cb218bdccfe5a93471c161f15a15cab"></a><br/></td></tr>
<tr class="separator:a6cb218bdccfe5a93471c161f15a15cab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a737c246c3948e644a18d191a931e1acd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pgpmac_8h.html#aa5067fcbaabc5bbfdc52492495518c96">lspmac_motor_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a737c246c3948e644a18d191a931e1acd">aligny</a></td></tr>
<tr class="memdesc:a737c246c3948e644a18d191a931e1acd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Alignment stage Y.  <a href="#a737c246c3948e644a18d191a931e1acd"></a><br/></td></tr>
<tr class="separator:a737c246c3948e644a18d191a931e1acd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7642b1da0f7c7f8448104c691d40a12"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pgpmac_8h.html#aa5067fcbaabc5bbfdc52492495518c96">lspmac_motor_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#ae7642b1da0f7c7f8448104c691d40a12">alignz</a></td></tr>
<tr class="memdesc:ae7642b1da0f7c7f8448104c691d40a12"><td class="mdescLeft">&#160;</td><td class="mdescRight">Alignment stage X.  <a href="#ae7642b1da0f7c7f8448104c691d40a12"></a><br/></td></tr>
<tr class="separator:ae7642b1da0f7c7f8448104c691d40a12"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa90d2363b744acbd4d45133b7a716d8f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pgpmac_8h.html#aa5067fcbaabc5bbfdc52492495518c96">lspmac_motor_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#aa90d2363b744acbd4d45133b7a716d8f">anal</a></td></tr>
<tr class="memdesc:aa90d2363b744acbd4d45133b7a716d8f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Polaroid analyzer motor.  <a href="#aa90d2363b744acbd4d45133b7a716d8f"></a><br/></td></tr>
<tr class="separator:aa90d2363b744acbd4d45133b7a716d8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad53a42cfaa04eff0336a44c8c9986333"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pgpmac_8h.html#aa5067fcbaabc5bbfdc52492495518c96">lspmac_motor_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#ad53a42cfaa04eff0336a44c8c9986333">zoom</a></td></tr>
<tr class="memdesc:ad53a42cfaa04eff0336a44c8c9986333"><td class="mdescLeft">&#160;</td><td class="mdescRight">Optical zoom.  <a href="#ad53a42cfaa04eff0336a44c8c9986333"></a><br/></td></tr>
<tr class="separator:ad53a42cfaa04eff0336a44c8c9986333"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a139200ddaa9856a7ffcec0e6cbaa8f1b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pgpmac_8h.html#aa5067fcbaabc5bbfdc52492495518c96">lspmac_motor_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a139200ddaa9856a7ffcec0e6cbaa8f1b">apery</a></td></tr>
<tr class="memdesc:a139200ddaa9856a7ffcec0e6cbaa8f1b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Aperture Y.  <a href="#a139200ddaa9856a7ffcec0e6cbaa8f1b"></a><br/></td></tr>
<tr class="separator:a139200ddaa9856a7ffcec0e6cbaa8f1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab93bd6ee850b285ca3a95e64d15e9477"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pgpmac_8h.html#aa5067fcbaabc5bbfdc52492495518c96">lspmac_motor_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#ab93bd6ee850b285ca3a95e64d15e9477">aperz</a></td></tr>
<tr class="memdesc:ab93bd6ee850b285ca3a95e64d15e9477"><td class="mdescLeft">&#160;</td><td class="mdescRight">Aperture Z.  <a href="#ab93bd6ee850b285ca3a95e64d15e9477"></a><br/></td></tr>
<tr class="separator:ab93bd6ee850b285ca3a95e64d15e9477"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51358daaea8b5236f08414877d8af6c2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pgpmac_8h.html#aa5067fcbaabc5bbfdc52492495518c96">lspmac_motor_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a51358daaea8b5236f08414877d8af6c2">capy</a></td></tr>
<tr class="memdesc:a51358daaea8b5236f08414877d8af6c2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Capillary Y.  <a href="#a51358daaea8b5236f08414877d8af6c2"></a><br/></td></tr>
<tr class="separator:a51358daaea8b5236f08414877d8af6c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa45f268d0af9f3d465acfab128919718"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pgpmac_8h.html#aa5067fcbaabc5bbfdc52492495518c96">lspmac_motor_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#aa45f268d0af9f3d465acfab128919718">capz</a></td></tr>
<tr class="memdesc:aa45f268d0af9f3d465acfab128919718"><td class="mdescLeft">&#160;</td><td class="mdescRight">Capillary Z.  <a href="#aa45f268d0af9f3d465acfab128919718"></a><br/></td></tr>
<tr class="separator:aa45f268d0af9f3d465acfab128919718"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a589431b3a79c21c251fcb97cc9126991"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pgpmac_8h.html#aa5067fcbaabc5bbfdc52492495518c96">lspmac_motor_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a589431b3a79c21c251fcb97cc9126991">scint</a></td></tr>
<tr class="memdesc:a589431b3a79c21c251fcb97cc9126991"><td class="mdescLeft">&#160;</td><td class="mdescRight">Scintillator Z.  <a href="#a589431b3a79c21c251fcb97cc9126991"></a><br/></td></tr>
<tr class="separator:a589431b3a79c21c251fcb97cc9126991"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac940d950d9efeaf3f0ae67e9bf331188"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pgpmac_8h.html#aa5067fcbaabc5bbfdc52492495518c96">lspmac_motor_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#ac940d950d9efeaf3f0ae67e9bf331188">cenx</a></td></tr>
<tr class="memdesc:ac940d950d9efeaf3f0ae67e9bf331188"><td class="mdescLeft">&#160;</td><td class="mdescRight">Centering Table X.  <a href="#ac940d950d9efeaf3f0ae67e9bf331188"></a><br/></td></tr>
<tr class="separator:ac940d950d9efeaf3f0ae67e9bf331188"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaed18e738ba7bfb6c771a44f5d7ea827"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pgpmac_8h.html#aa5067fcbaabc5bbfdc52492495518c96">lspmac_motor_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#aaed18e738ba7bfb6c771a44f5d7ea827">ceny</a></td></tr>
<tr class="memdesc:aaed18e738ba7bfb6c771a44f5d7ea827"><td class="mdescLeft">&#160;</td><td class="mdescRight">Centering Table Y.  <a href="#aaed18e738ba7bfb6c771a44f5d7ea827"></a><br/></td></tr>
<tr class="separator:aaed18e738ba7bfb6c771a44f5d7ea827"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0be79ccb7ebf3a665248fd856112b9fd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pgpmac_8h.html#aa5067fcbaabc5bbfdc52492495518c96">lspmac_motor_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a0be79ccb7ebf3a665248fd856112b9fd">kappa</a></td></tr>
<tr class="memdesc:a0be79ccb7ebf3a665248fd856112b9fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Kappa.  <a href="#a0be79ccb7ebf3a665248fd856112b9fd"></a><br/></td></tr>
<tr class="separator:a0be79ccb7ebf3a665248fd856112b9fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8070dc568ad974a3db42b51eca828cc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pgpmac_8h.html#aa5067fcbaabc5bbfdc52492495518c96">lspmac_motor_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#ac8070dc568ad974a3db42b51eca828cc">phi</a></td></tr>
<tr class="memdesc:ac8070dc568ad974a3db42b51eca828cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Phi (not data collection axis)  <a href="#ac8070dc568ad974a3db42b51eca828cc"></a><br/></td></tr>
<tr class="separator:ac8070dc568ad974a3db42b51eca828cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26dec4623af9beed912b8e7e6f99822c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pgpmac_8h.html#aa5067fcbaabc5bbfdc52492495518c96">lspmac_motor_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a26dec4623af9beed912b8e7e6f99822c">fshut</a></td></tr>
<tr class="memdesc:a26dec4623af9beed912b8e7e6f99822c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fast shutter.  <a href="#a26dec4623af9beed912b8e7e6f99822c"></a><br/></td></tr>
<tr class="separator:a26dec4623af9beed912b8e7e6f99822c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb09895663eff333b7a75acb319a9fc1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pgpmac_8h.html#aa5067fcbaabc5bbfdc52492495518c96">lspmac_motor_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#aeb09895663eff333b7a75acb319a9fc1">flight</a></td></tr>
<tr class="memdesc:aeb09895663eff333b7a75acb319a9fc1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Front Light DAC.  <a href="#aeb09895663eff333b7a75acb319a9fc1"></a><br/></td></tr>
<tr class="separator:aeb09895663eff333b7a75acb319a9fc1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85d6eaa4b4a82bb3112574f458d1dc50"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pgpmac_8h.html#aa5067fcbaabc5bbfdc52492495518c96">lspmac_motor_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a85d6eaa4b4a82bb3112574f458d1dc50">blight</a></td></tr>
<tr class="memdesc:a85d6eaa4b4a82bb3112574f458d1dc50"><td class="mdescLeft">&#160;</td><td class="mdescRight">Back Light DAC.  <a href="#a85d6eaa4b4a82bb3112574f458d1dc50"></a><br/></td></tr>
<tr class="separator:a85d6eaa4b4a82bb3112574f458d1dc50"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a3ca6fcf5e24dcc26170736843e53b2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pgpmac_8h.html#aa5067fcbaabc5bbfdc52492495518c96">lspmac_motor_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a8a3ca6fcf5e24dcc26170736843e53b2">fscint</a></td></tr>
<tr class="memdesc:a8a3ca6fcf5e24dcc26170736843e53b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Scintillator Piezo DAC.  <a href="#a8a3ca6fcf5e24dcc26170736843e53b2"></a><br/></td></tr>
<tr class="separator:a8a3ca6fcf5e24dcc26170736843e53b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abee73a0d9e5f3af9eb88d5cfd6b953c3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pgpmac_8h.html#aa5067fcbaabc5bbfdc52492495518c96">lspmac_motor_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#abee73a0d9e5f3af9eb88d5cfd6b953c3">smart_mag_oo</a></td></tr>
<tr class="memdesc:abee73a0d9e5f3af9eb88d5cfd6b953c3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Smart Magnet on/off.  <a href="#abee73a0d9e5f3af9eb88d5cfd6b953c3"></a><br/></td></tr>
<tr class="separator:abee73a0d9e5f3af9eb88d5cfd6b953c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af813a2eff0b7efa4c70633559054e84c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pgpmac_8h.html#aa5067fcbaabc5bbfdc52492495518c96">lspmac_motor_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#af813a2eff0b7efa4c70633559054e84c">blight_ud</a></td></tr>
<tr class="memdesc:af813a2eff0b7efa4c70633559054e84c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Back light Up/Down actuator.  <a href="#af813a2eff0b7efa4c70633559054e84c"></a><br/></td></tr>
<tr class="separator:af813a2eff0b7efa4c70633559054e84c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae78d9a757d4c85419fff9c94b15e25d7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pgpmac_8h.html#aa5067fcbaabc5bbfdc52492495518c96">lspmac_motor_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#ae78d9a757d4c85419fff9c94b15e25d7">cryo</a></td></tr>
<tr class="memdesc:ae78d9a757d4c85419fff9c94b15e25d7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Move the cryostream towards or away from the crystal.  <a href="#ae78d9a757d4c85419fff9c94b15e25d7"></a><br/></td></tr>
<tr class="separator:ae78d9a757d4c85419fff9c94b15e25d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d9c5030d817483ca9518027c91adac4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pgpmac_8h.html#aa5067fcbaabc5bbfdc52492495518c96">lspmac_motor_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a9d9c5030d817483ca9518027c91adac4">dryer</a></td></tr>
<tr class="memdesc:a9d9c5030d817483ca9518027c91adac4"><td class="mdescLeft">&#160;</td><td class="mdescRight">blow air on the scintilator to dry it off  <a href="#a9d9c5030d817483ca9518027c91adac4"></a><br/></td></tr>
<tr class="separator:a9d9c5030d817483ca9518027c91adac4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:addb26c80065506faa1de3c1b468fe03f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pgpmac_8h.html#aa5067fcbaabc5bbfdc52492495518c96">lspmac_motor_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#addb26c80065506faa1de3c1b468fe03f">fluo</a></td></tr>
<tr class="memdesc:addb26c80065506faa1de3c1b468fe03f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Move the fluorescence detector in/out.  <a href="#addb26c80065506faa1de3c1b468fe03f"></a><br/></td></tr>
<tr class="separator:addb26c80065506faa1de3c1b468fe03f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6630442dc65ce8a30a24ed718b301971"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pgpmac_8h.html#aa5067fcbaabc5bbfdc52492495518c96">lspmac_motor_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a6630442dc65ce8a30a24ed718b301971">flight_oo</a></td></tr>
<tr class="memdesc:a6630442dc65ce8a30a24ed718b301971"><td class="mdescLeft">&#160;</td><td class="mdescRight">Turn front light on/off.  <a href="#a6630442dc65ce8a30a24ed718b301971"></a><br/></td></tr>
<tr class="separator:a6630442dc65ce8a30a24ed718b301971"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af55c51d52c4586b647114f95d7ac1f42"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pgpmac_8h.html#aa5067fcbaabc5bbfdc52492495518c96">lspmac_motor_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#af55c51d52c4586b647114f95d7ac1f42">blight_f</a></td></tr>
<tr class="memdesc:af55c51d52c4586b647114f95d7ac1f42"><td class="mdescLeft">&#160;</td><td class="mdescRight">Back light scale factor.  <a href="#af55c51d52c4586b647114f95d7ac1f42"></a><br/></td></tr>
<tr class="separator:af55c51d52c4586b647114f95d7ac1f42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aabf4ec595b5183c1777d029ca56134b0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pgpmac_8h.html#aa5067fcbaabc5bbfdc52492495518c96">lspmac_motor_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#aabf4ec595b5183c1777d029ca56134b0">flight_f</a></td></tr>
<tr class="memdesc:aabf4ec595b5183c1777d029ca56134b0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Front light scale factor.  <a href="#aabf4ec595b5183c1777d029ca56134b0"></a><br/></td></tr>
<tr class="separator:aabf4ec595b5183c1777d029ca56134b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a56260f012c50a591ee7f97e500f16994"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a56260f012c50a591ee7f97e500f16994">lspmac_nmotors</a></td></tr>
<tr class="memdesc:a56260f012c50a591ee7f97e500f16994"><td class="mdescLeft">&#160;</td><td class="mdescRight">The number of motors we manage.  <a href="#a56260f012c50a591ee7f97e500f16994"></a><br/></td></tr>
<tr class="separator:a56260f012c50a591ee7f97e500f16994"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aade15098d213bb25522048e4a231941a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pgpmac_8h.html#ac48984832ef73cf145e5f08bc65bd3a0">lspmac_bi_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#aade15098d213bb25522048e4a231941a">lp_air</a></td></tr>
<tr class="memdesc:aade15098d213bb25522048e4a231941a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Low pressure air OK.  <a href="#aade15098d213bb25522048e4a231941a"></a><br/></td></tr>
<tr class="separator:aade15098d213bb25522048e4a231941a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb29b117ad38156ba16fcf44eeb427af"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pgpmac_8h.html#ac48984832ef73cf145e5f08bc65bd3a0">lspmac_bi_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#abb29b117ad38156ba16fcf44eeb427af">hp_air</a></td></tr>
<tr class="memdesc:abb29b117ad38156ba16fcf44eeb427af"><td class="mdescLeft">&#160;</td><td class="mdescRight">High pressure air OK.  <a href="#abb29b117ad38156ba16fcf44eeb427af"></a><br/></td></tr>
<tr class="separator:abb29b117ad38156ba16fcf44eeb427af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28df32fd6be9160603aa1bb74a823574"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pgpmac_8h.html#ac48984832ef73cf145e5f08bc65bd3a0">lspmac_bi_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a28df32fd6be9160603aa1bb74a823574">cryo_switch</a></td></tr>
<tr class="memdesc:a28df32fd6be9160603aa1bb74a823574"><td class="mdescLeft">&#160;</td><td class="mdescRight">that little toggle switch for the cryo  <a href="#a28df32fd6be9160603aa1bb74a823574"></a><br/></td></tr>
<tr class="separator:a28df32fd6be9160603aa1bb74a823574"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0d0bc95bcbcbd154b30c72a9645c8b2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pgpmac_8h.html#ac48984832ef73cf145e5f08bc65bd3a0">lspmac_bi_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#ac0d0bc95bcbcbd154b30c72a9645c8b2">blight_down</a></td></tr>
<tr class="memdesc:ac0d0bc95bcbcbd154b30c72a9645c8b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Backlight is down.  <a href="#ac0d0bc95bcbcbd154b30c72a9645c8b2"></a><br/></td></tr>
<tr class="separator:ac0d0bc95bcbcbd154b30c72a9645c8b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7fba65f6555c5c7908852c6cf1ad0c94"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pgpmac_8h.html#ac48984832ef73cf145e5f08bc65bd3a0">lspmac_bi_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a7fba65f6555c5c7908852c6cf1ad0c94">blight_up</a></td></tr>
<tr class="memdesc:a7fba65f6555c5c7908852c6cf1ad0c94"><td class="mdescLeft">&#160;</td><td class="mdescRight">Backlight is up.  <a href="#a7fba65f6555c5c7908852c6cf1ad0c94"></a><br/></td></tr>
<tr class="separator:a7fba65f6555c5c7908852c6cf1ad0c94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a871d4cdea0a1a8db85b8658a07655212"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pgpmac_8h.html#ac48984832ef73cf145e5f08bc65bd3a0">lspmac_bi_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a871d4cdea0a1a8db85b8658a07655212">cryo_back</a></td></tr>
<tr class="memdesc:a871d4cdea0a1a8db85b8658a07655212"><td class="mdescLeft">&#160;</td><td class="mdescRight">cryo is in the back position  <a href="#a871d4cdea0a1a8db85b8658a07655212"></a><br/></td></tr>
<tr class="separator:a871d4cdea0a1a8db85b8658a07655212"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67092de6f3fcc0b245e4970437eaff6b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pgpmac_8h.html#ac48984832ef73cf145e5f08bc65bd3a0">lspmac_bi_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a67092de6f3fcc0b245e4970437eaff6b">fluor_back</a></td></tr>
<tr class="memdesc:a67092de6f3fcc0b245e4970437eaff6b"><td class="mdescLeft">&#160;</td><td class="mdescRight">fluor is in the back position  <a href="#a67092de6f3fcc0b245e4970437eaff6b"></a><br/></td></tr>
<tr class="separator:a67092de6f3fcc0b245e4970437eaff6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac59ab990e48033a811aeb0281fb588fc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pgpmac_8h.html#ac48984832ef73cf145e5f08bc65bd3a0">lspmac_bi_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#ac59ab990e48033a811aeb0281fb588fc">sample_detected</a></td></tr>
<tr class="memdesc:ac59ab990e48033a811aeb0281fb588fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">smart magnet detected sample  <a href="#ac59ab990e48033a811aeb0281fb588fc"></a><br/></td></tr>
<tr class="separator:ac59ab990e48033a811aeb0281fb588fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5538a6aa526eeed65ff237303da2d348"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pgpmac_8h.html#ac48984832ef73cf145e5f08bc65bd3a0">lspmac_bi_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a5538a6aa526eeed65ff237303da2d348">etel_ready</a></td></tr>
<tr class="memdesc:a5538a6aa526eeed65ff237303da2d348"><td class="mdescLeft">&#160;</td><td class="mdescRight">ETEL is ready.  <a href="#a5538a6aa526eeed65ff237303da2d348"></a><br/></td></tr>
<tr class="separator:a5538a6aa526eeed65ff237303da2d348"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab48d4a2cf0225796db9aad49f034dc59"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pgpmac_8h.html#ac48984832ef73cf145e5f08bc65bd3a0">lspmac_bi_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#ab48d4a2cf0225796db9aad49f034dc59">etel_on</a></td></tr>
<tr class="memdesc:ab48d4a2cf0225796db9aad49f034dc59"><td class="mdescLeft">&#160;</td><td class="mdescRight">ETEL is on.  <a href="#ab48d4a2cf0225796db9aad49f034dc59"></a><br/></td></tr>
<tr class="separator:ab48d4a2cf0225796db9aad49f034dc59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e690d4ad981d020ea2c850282dca3be"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pgpmac_8h.html#ac48984832ef73cf145e5f08bc65bd3a0">lspmac_bi_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a1e690d4ad981d020ea2c850282dca3be">etel_init_ok</a></td></tr>
<tr class="memdesc:a1e690d4ad981d020ea2c850282dca3be"><td class="mdescLeft">&#160;</td><td class="mdescRight">ETEL initialized OK.  <a href="#a1e690d4ad981d020ea2c850282dca3be"></a><br/></td></tr>
<tr class="separator:a1e690d4ad981d020ea2c850282dca3be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab552f2e28dd9cccefafe01f27717101b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pgpmac_8h.html#ac48984832ef73cf145e5f08bc65bd3a0">lspmac_bi_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#ab552f2e28dd9cccefafe01f27717101b">minikappa_ok</a></td></tr>
<tr class="memdesc:ab552f2e28dd9cccefafe01f27717101b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Minikappa is OK (whatever that means)  <a href="#ab552f2e28dd9cccefafe01f27717101b"></a><br/></td></tr>
<tr class="separator:ab552f2e28dd9cccefafe01f27717101b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2dc6fa78bb6313fe8b696d646eaa2443"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pgpmac_8h.html#ac48984832ef73cf145e5f08bc65bd3a0">lspmac_bi_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a2dc6fa78bb6313fe8b696d646eaa2443">smart_mag_on</a></td></tr>
<tr class="memdesc:a2dc6fa78bb6313fe8b696d646eaa2443"><td class="mdescLeft">&#160;</td><td class="mdescRight">smart magnet is on  <a href="#a2dc6fa78bb6313fe8b696d646eaa2443"></a><br/></td></tr>
<tr class="separator:a2dc6fa78bb6313fe8b696d646eaa2443"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afaff4fbb5f03b0d2469fc7a14f174d69"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pgpmac_8h.html#ac48984832ef73cf145e5f08bc65bd3a0">lspmac_bi_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#afaff4fbb5f03b0d2469fc7a14f174d69">arm_parked</a></td></tr>
<tr class="memdesc:afaff4fbb5f03b0d2469fc7a14f174d69"><td class="mdescLeft">&#160;</td><td class="mdescRight">(whose arm? parked where?)  <a href="#afaff4fbb5f03b0d2469fc7a14f174d69"></a><br/></td></tr>
<tr class="separator:afaff4fbb5f03b0d2469fc7a14f174d69"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae98a0792d6b4b96a33df0a31bdec6342"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pgpmac_8h.html#ac48984832ef73cf145e5f08bc65bd3a0">lspmac_bi_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#ae98a0792d6b4b96a33df0a31bdec6342">shutter_open</a></td></tr>
<tr class="memdesc:ae98a0792d6b4b96a33df0a31bdec6342"><td class="mdescLeft">&#160;</td><td class="mdescRight">shutter is open (note in pmc says this is a slow input)  <a href="#ae98a0792d6b4b96a33df0a31bdec6342"></a><br/></td></tr>
<tr class="separator:ae98a0792d6b4b96a33df0a31bdec6342"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4892e918830dd12093d28c53a1c2df98"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pgpmac_8h.html#ac48984832ef73cf145e5f08bc65bd3a0">lspmac_bi_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a4892e918830dd12093d28c53a1c2df98">smart_mag_off</a></td></tr>
<tr class="memdesc:a4892e918830dd12093d28c53a1c2df98"><td class="mdescLeft">&#160;</td><td class="mdescRight">smart magnet is off  <a href="#a4892e918830dd12093d28c53a1c2df98"></a><br/></td></tr>
<tr class="separator:a4892e918830dd12093d28c53a1c2df98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37903ed8430ac4d9ead609a78eb62f32"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pgpmac_8h.html#ac48984832ef73cf145e5f08bc65bd3a0">lspmac_bi_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a37903ed8430ac4d9ead609a78eb62f32">smart_mag_err</a></td></tr>
<tr class="memdesc:a37903ed8430ac4d9ead609a78eb62f32"><td class="mdescLeft">&#160;</td><td class="mdescRight">smart magnet error (coil broken perhaps)  <a href="#a37903ed8430ac4d9ead609a78eb62f32"></a><br/></td></tr>
<tr class="separator:a37903ed8430ac4d9ead609a78eb62f32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6631a094accc469661805bdf80fc6d8"><td class="memItemLeft" align="right" valign="top">struct timespec&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#ae6631a094accc469661805bdf80fc6d8">omega_zero_time</a></td></tr>
<tr class="memdesc:ae6631a094accc469661805bdf80fc6d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Time we believe that omega crossed zero.  <a href="#ae6631a094accc469661805bdf80fc6d8"></a><br/></td></tr>
<tr class="separator:ae6631a094accc469661805bdf80fc6d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65daf0f4a5bc6def23a9df98ff5ca57e"><td class="memItemLeft" align="right" valign="top">WINDOW *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a65daf0f4a5bc6def23a9df98ff5ca57e">term_output</a></td></tr>
<tr class="memdesc:a65daf0f4a5bc6def23a9df98ff5ca57e"><td class="mdescLeft">&#160;</td><td class="mdescRight">place to print stuff out  <a href="#a65daf0f4a5bc6def23a9df98ff5ca57e"></a><br/></td></tr>
<tr class="separator:a65daf0f4a5bc6def23a9df98ff5ca57e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0487111dbe3c05d0bd835eb2fb9a3f7"><td class="memItemLeft" align="right" valign="top">WINDOW *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#ab0487111dbe3c05d0bd835eb2fb9a3f7">term_input</a></td></tr>
<tr class="memdesc:ab0487111dbe3c05d0bd835eb2fb9a3f7"><td class="mdescLeft">&#160;</td><td class="mdescRight">place to put the cursor  <a href="#ab0487111dbe3c05d0bd835eb2fb9a3f7"></a><br/></td></tr>
<tr class="separator:ab0487111dbe3c05d0bd835eb2fb9a3f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae746a6903fb8a4ea216def88eccedc3c"><td class="memItemLeft" align="right" valign="top">WINDOW *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#ae746a6903fb8a4ea216def88eccedc3c">term_status</a></td></tr>
<tr class="memdesc:ae746a6903fb8a4ea216def88eccedc3c"><td class="mdescLeft">&#160;</td><td class="mdescRight">shutter, lamp, air, etc status  <a href="#ae746a6903fb8a4ea216def88eccedc3c"></a><br/></td></tr>
<tr class="separator:ae746a6903fb8a4ea216def88eccedc3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2d7da3afeb756716e6e4ee9cab78f8a"><td class="memItemLeft" align="right" valign="top">WINDOW *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#ae2d7da3afeb756716e6e4ee9cab78f8a">term_status2</a></td></tr>
<tr class="memdesc:ae2d7da3afeb756716e6e4ee9cab78f8a"><td class="mdescLeft">&#160;</td><td class="mdescRight">shutter, lamp, air, etc status  <a href="#ae2d7da3afeb756716e6e4ee9cab78f8a"></a><br/></td></tr>
<tr class="separator:ae2d7da3afeb756716e6e4ee9cab78f8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad128c64890c7c0d4f836d9ec6e99216a"><td class="memItemLeft" align="right" valign="top">pthread_mutex_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#ad128c64890c7c0d4f836d9ec6e99216a">ncurses_mutex</a></td></tr>
<tr class="memdesc:ad128c64890c7c0d4f836d9ec6e99216a"><td class="mdescLeft">&#160;</td><td class="mdescRight">allow more than one thread access to the screen  <a href="#ad128c64890c7c0d4f836d9ec6e99216a"></a><br/></td></tr>
<tr class="separator:ad128c64890c7c0d4f836d9ec6e99216a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08d5b18ec9478d753c46a3e28d1f2126"><td class="memItemLeft" align="right" valign="top">pthread_cond_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a08d5b18ec9478d753c46a3e28d1f2126">md2cmds_cond</a></td></tr>
<tr class="memdesc:a08d5b18ec9478d753c46a3e28d1f2126"><td class="mdescLeft">&#160;</td><td class="mdescRight">condition to signal when it's time to run an md2 command  <a href="#a08d5b18ec9478d753c46a3e28d1f2126"></a><br/></td></tr>
<tr class="separator:a08d5b18ec9478d753c46a3e28d1f2126"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad67304bb851dc6268b0cda2f40fc5aa8"><td class="memItemLeft" align="right" valign="top">pthread_mutex_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#ad67304bb851dc6268b0cda2f40fc5aa8">md2cmds_mutex</a></td></tr>
<tr class="memdesc:ad67304bb851dc6268b0cda2f40fc5aa8"><td class="mdescLeft">&#160;</td><td class="mdescRight">mutex for the condition  <a href="#ad67304bb851dc6268b0cda2f40fc5aa8"></a><br/></td></tr>
<tr class="separator:ad67304bb851dc6268b0cda2f40fc5aa8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab517a930528e2b7d0993e11087765b03"><td class="memItemLeft" align="right" valign="top">pthread_cond_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#ab517a930528e2b7d0993e11087765b03">md2cmds_pg_cond</a></td></tr>
<tr class="separator:ab517a930528e2b7d0993e11087765b03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d2c3ac81d4b13eb21f4ddcdda8c7308"><td class="memItemLeft" align="right" valign="top">pthread_mutex_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a4d2c3ac81d4b13eb21f4ddcdda8c7308">md2cmds_pg_mutex</a></td></tr>
<tr class="separator:a4d2c3ac81d4b13eb21f4ddcdda8c7308"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc1bb77b9bcbc4d970f841a41fd274b3"><td class="memItemLeft" align="right" valign="top">pthread_mutex_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#acc1bb77b9bcbc4d970f841a41fd274b3">pmac_queue_mutex</a></td></tr>
<tr class="memdesc:acc1bb77b9bcbc4d970f841a41fd274b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">manage access to the pmac command queue  <a href="#acc1bb77b9bcbc4d970f841a41fd274b3"></a><br/></td></tr>
<tr class="separator:acc1bb77b9bcbc4d970f841a41fd274b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a25bd9c593c6985107f90f999ce0b08"><td class="memItemLeft" align="right" valign="top">pthread_cond_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a8a25bd9c593c6985107f90f999ce0b08">pmac_queue_cond</a></td></tr>
<tr class="memdesc:a8a25bd9c593c6985107f90f999ce0b08"><td class="mdescLeft">&#160;</td><td class="mdescRight">wait for a command to be sent to PMAC before continuing  <a href="#a8a25bd9c593c6985107f90f999ce0b08"></a><br/></td></tr>
<tr class="separator:a8a25bd9c593c6985107f90f999ce0b08"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b78a13c654409333569815e1c109d38"><td class="memItemLeft" align="right" valign="top">pthread_mutex_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a1b78a13c654409333569815e1c109d38">lspmac_shutter_mutex</a></td></tr>
<tr class="memdesc:a1b78a13c654409333569815e1c109d38"><td class="mdescLeft">&#160;</td><td class="mdescRight">Coordinates threads reading shutter status.  <a href="#a1b78a13c654409333569815e1c109d38"></a><br/></td></tr>
<tr class="separator:a1b78a13c654409333569815e1c109d38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbd51c2cefcee87afe994c9e9f372241"><td class="memItemLeft" align="right" valign="top">pthread_cond_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#afbd51c2cefcee87afe994c9e9f372241">lspmac_shutter_cond</a></td></tr>
<tr class="memdesc:afbd51c2cefcee87afe994c9e9f372241"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allows waiting for the shutter status to change.  <a href="#afbd51c2cefcee87afe994c9e9f372241"></a><br/></td></tr>
<tr class="separator:afbd51c2cefcee87afe994c9e9f372241"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a112158e0cd50449a440ac55c7af7bea2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a112158e0cd50449a440ac55c7af7bea2">lspmac_shutter_state</a></td></tr>
<tr class="memdesc:a112158e0cd50449a440ac55c7af7bea2"><td class="mdescLeft">&#160;</td><td class="mdescRight">State of the shutter, used to detect changes.  <a href="#a112158e0cd50449a440ac55c7af7bea2"></a><br/></td></tr>
<tr class="separator:a112158e0cd50449a440ac55c7af7bea2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a396fbf06208de3ecbe1b0df549f1cd46"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a396fbf06208de3ecbe1b0df549f1cd46">lspmac_shutter_has_opened</a></td></tr>
<tr class="memdesc:a396fbf06208de3ecbe1b0df549f1cd46"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indicates that the shutter had opened, perhaps briefly even if the state did not change.  <a href="#a396fbf06208de3ecbe1b0df549f1cd46"></a><br/></td></tr>
<tr class="separator:a396fbf06208de3ecbe1b0df549f1cd46"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85679cac947e199c88794f8e5a12bf5f"><td class="memItemLeft" align="right" valign="top">pthread_mutex_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a85679cac947e199c88794f8e5a12bf5f">lspmac_moving_mutex</a></td></tr>
<tr class="memdesc:a85679cac947e199c88794f8e5a12bf5f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Coordinate moving motors between threads.  <a href="#a85679cac947e199c88794f8e5a12bf5f"></a><br/></td></tr>
<tr class="separator:a85679cac947e199c88794f8e5a12bf5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57547d211906c981ef20257eba99f8df"><td class="memItemLeft" align="right" valign="top">pthread_cond_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a57547d211906c981ef20257eba99f8df">lspmac_moving_cond</a></td></tr>
<tr class="memdesc:a57547d211906c981ef20257eba99f8df"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait for motor(s) to finish moving condition.  <a href="#a57547d211906c981ef20257eba99f8df"></a><br/></td></tr>
<tr class="separator:a57547d211906c981ef20257eba99f8df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a32c617c183166308241e270959df56"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a7a32c617c183166308241e270959df56">lspmac_moving_flags</a></td></tr>
<tr class="memdesc:a7a32c617c183166308241e270959df56"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flag used to implement motor moving condition.  <a href="#a7a32c617c183166308241e270959df56"></a><br/></td></tr>
<tr class="separator:a7a32c617c183166308241e270959df56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a3e763682bd7f987d07f149e94b3bf8"><td class="memItemLeft" align="right" valign="top">pthread_mutex_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a7a3e763682bd7f987d07f149e94b3bf8">md2_status_mutex</a></td></tr>
<tr class="memdesc:a7a3e763682bd7f987d07f149e94b3bf8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Synchronize reading/writting status buffer.  <a href="#a7a3e763682bd7f987d07f149e94b3bf8"></a><br/></td></tr>
<tr class="separator:a7a3e763682bd7f987d07f149e94b3bf8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ccf455563dc8d828558b6a230e164a6"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a1ccf455563dc8d828558b6a230e164a6">md2cmds_cmd</a> []</td></tr>
<tr class="memdesc:a1ccf455563dc8d828558b6a230e164a6"><td class="mdescLeft">&#160;</td><td class="mdescRight">our command;  <a href="#a1ccf455563dc8d828558b6a230e164a6"></a><br/></td></tr>
<tr class="separator:a1ccf455563dc8d828558b6a230e164a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a34fb6876abbd580629d3708c805e7f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pgpmac_8h.html#ad449de06d02791adf2498d2a1e1f909c">lsredis_obj_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="pgpmac_8h.html#a6a34fb6876abbd580629d3708c805e7f">md2cmds_md_status_code</a></td></tr>
<tr class="separator:a6a34fb6876abbd580629d3708c805e7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Headers for the entire pgpmac project. </p>
<dl class="section date"><dt>Date</dt><dd>2012 </dd></dl>
<dl class="section author"><dt>Author</dt><dd>Keith Brister </dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>All Rights Reserved </dd></dl>

<p>Definition in file <a class="el" href="pgpmac_8h_source.html">pgpmac.h</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a369266c24eacffb87046522897a570d5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define _GNU_SOURCE</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="pgpmac_8h_source.html#l00007">7</a> of file <a class="el" href="pgpmac_8h_source.html">pgpmac.h</a>.</p>

</div>
</div>
<a class="anchor" id="a3bae94e8e4e4347dd5f87b6bda058de6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LS_DISPLAY_WINDOW_HEIGHT&#160;&#160;&#160;8</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Number of status box rows. </p>

<p>Definition at line <a class="el" href="pgpmac_8h_source.html#l00057">57</a> of file <a class="el" href="pgpmac_8h_source.html">pgpmac.h</a>.</p>

</div>
</div>
<a class="anchor" id="a1f96754f00a1f82414cebc66f75ded78"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LS_DISPLAY_WINDOW_WIDTH&#160;&#160;&#160;24</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Number of status box columns. </p>

<p>Definition at line <a class="el" href="pgpmac_8h_source.html#l00061">61</a> of file <a class="el" href="pgpmac_8h_source.html">pgpmac.h</a>.</p>

</div>
</div>
<a class="anchor" id="a3a8ef1b4b5994d6dd12bf74454ea891b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LS_PG_QUERY_STRING_LENGTH&#160;&#160;&#160;1024</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fixed length postgresql query strings. Queries should all be function calls so this is not as weird as one might think. </p>

<p>Definition at line <a class="el" href="pgpmac_8h_source.html#l00064">64</a> of file <a class="el" href="pgpmac_8h_source.html">pgpmac.h</a>.</p>

</div>
</div>
<a class="anchor" id="ab61d790b5572f116e091babfda53627b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LSEVENTS_EVENT_LENGTH&#160;&#160;&#160;256</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fixed length for event names: simplifies string handling. </p>

<p>Definition at line <a class="el" href="pgpmac_8h_source.html#l00067">67</a> of file <a class="el" href="pgpmac_8h_source.html">pgpmac.h</a>.</p>

</div>
</div>
<a class="anchor" id="a30f0f377b0f0695284145d420ea51846"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MD2CMDS_CMD_LENGTH&#160;&#160;&#160;32</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="pgpmac_8h_source.html#l00480">480</a> of file <a class="el" href="pgpmac_8h_source.html">pgpmac.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="a7f71abc6fdfd1839e2e3213d78aaf766"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structlspg__demandairrights__struct.html">lspg_demandairrights_struct</a>  <a class="el" href="pgpmac_8h.html#a7f71abc6fdfd1839e2e3213d78aaf766">lspg_demandairrights_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a48b627e412dd038c1f17cdb0501eec33"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structlspg__getcenter__struct.html">lspg_getcenter_struct</a>  <a class="el" href="pgpmac_8h.html#a48b627e412dd038c1f17cdb0501eec33">lspg_getcenter_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Storage for getcenter query Used for the md2 ROTATE command that generates the centering movies. </p>

</div>
</div>
<a class="anchor" id="a7a794370785ff015d5ee035917e3bee8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structlspg__getcurrentsampleid__struct.html">lspg_getcurrentsampleid_struct</a>  <a class="el" href="pgpmac_8h.html#a7a794370785ff015d5ee035917e3bee8">lspg_getcurrentsampleid_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a9dda9014cd0e39fba8d523e37cf9f982"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structlspg__nextsample__struct.html">lspg_nextsample_struct</a>  <a class="el" href="pgpmac_8h.html#a9dda9014cd0e39fba8d523e37cf9f982">lspg_nextsample_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the next sample number Just a 32 bit int (Ha!, take that, nextshot!) </p>

</div>
</div>
<a class="anchor" id="a17ea2bf07a0b3b892baa00bd392607b3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structlspg__nextshot__struct.html">lspg_nextshot_struct</a>  <a class="el" href="pgpmac_8h.html#a17ea2bf07a0b3b892baa00bd392607b3">lspg_nextshot_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Storage definition for nextshot query. </p>
<p>The next shot query returns all the information needed to collect the next data frame. Since SQL allows for null fields independently from blank strings a separate integer is used as a flag for this case. This adds to the program complexity but allows for some important cases. Suck it up.definition of the next image to be taken (and the one after that, too!) </p>

</div>
</div>
<a class="anchor" id="ae57432c0a6ac48a50457815dab2c5b4c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structlspgQueryQueueStruct.html">lspgQueryQueueStruct</a>  <a class="el" href="kvredis_8c.html#ae57432c0a6ac48a50457815dab2c5b4c">lspg_query_queue_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Store each query along with it's callback function. </p>
<p>All calls are asynchronous </p>

</div>
</div>
<a class="anchor" id="aa1f0e602ae9509005c62fb2d73bc1c5a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structlspg__starttransfer__struct.html">lspg_starttransfer_struct</a>  <a class="el" href="pgpmac_8h.html#aa1f0e602ae9509005c62fb2d73bc1c5a">lspg_starttransfer_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>returns 1 if transfer can continue 0 to abort </p>

</div>
</div>
<a class="anchor" id="a779e2acce8b5e748c184caf23ed0db57"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structlspg__waitcryo__struct.html">lspg_waitcryo_struct</a>  <a class="el" href="pgpmac_8h.html#a779e2acce8b5e748c184caf23ed0db57">lspg_waitcryo_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ac48984832ef73cf145e5f08bc65bd3a0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structlspmac__bi__struct.html">lspmac_bi_struct</a>  <a class="el" href="pgpmac_8h.html#ac48984832ef73cf145e5f08bc65bd3a0">lspmac_bi_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Storage for binary inputs. </p>

</div>
</div>
<a class="anchor" id="aa5067fcbaabc5bbfdc52492495518c96"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structlspmac__motor__struct.html">lspmac_motor_struct</a>  <a class="el" href="pgpmac_8h.html#aa5067fcbaabc5bbfdc52492495518c96">lspmac_motor_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Motor information. </p>
<p>A catchall for motors and motor like objects. Not all members are used by all objects. </p>

</div>
</div>
<a class="anchor" id="ad449de06d02791adf2498d2a1e1f909c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structlsredis__obj__struct.html">lsredis_obj_struct</a>  <a class="el" href="pgpmac_8h.html#ad449de06d02791adf2498d2a1e1f909c">lsredis_obj_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Redis Object Basic object whose value is sychronized with our redis db. </p>

</div>
</div>
<a class="anchor" id="a99c275e32ad897dca34d196b91f038cb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structlspmac__cmd__queue__struct.html">lspmac_cmd_queue_struct</a>  <a class="el" href="pgpmac_8h.html#a99c275e32ad897dca34d196b91f038cb">pmac_cmd_queue_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>PMAC command queue item. </p>
<p>Command queue items are fixed length to simplify memory management. </p>

</div>
</div>
<a class="anchor" id="a2d163436571135a457f4a4e2fbd09633"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structtagEthernetCmd.html">tagEthernetCmd</a>  <a class="el" href="pgpmac_8h.html#a2d163436571135a457f4a4e2fbd09633">pmac_cmd_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>PMAC ethernet packet definition. </p>
<p>Taken directly from the Delta Tau documentation. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="aac89b916c1152c44042875feac35a9e4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lsevents_add_listener </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(char *)&#160;</td>
          <td class="paramname"><em>cb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add a callback routine to listen for a specific event. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">event</td><td>the name of the event to listen for </td></tr>
    <tr><td class="paramname">cb</td><td>the routine to call </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lsevents_8c_source.html#l00075">75</a> of file <a class="el" href="lsevents_8c_source.html">lsevents.c</a>.</p>
<div class="fragment"><div class="line">                                                             {</div>
<div class="line">  <a class="code" href="structlsevents__listener__struct.html" title="Linked list of event listeners.">lsevents_listener_t</a> *<span class="keyword">new</span>;</div>
<div class="line">  <span class="keywordtype">int</span> err;</div>
<div class="line">  <span class="keywordtype">char</span> *errbuf;</div>
<div class="line">  <span class="keywordtype">int</span> nerrbuf;</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"></div>
<div class="line">  <span class="keyword">new</span> = calloc( 1, <span class="keyword">sizeof</span>( <a class="code" href="structlsevents__listener__struct.html" title="Linked list of event listeners.">lsevents_listener_t</a>));</div>
<div class="line">  <span class="keywordflow">if</span>( <span class="keyword">new</span> == NULL) {</div>
<div class="line">    <a class="code" href="lslogging_8c.html#a0e756b36671055ef02a8f04d2ba8a93b" title="The routine everyone will be talking about.">lslogging_log_message</a>( <span class="stringliteral">&quot;lsevents_add_listener: out of memory&quot;</span>);</div>
<div class="line">    exit( -1);</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  err = regcomp( &amp;new-&gt;re, event, REG_EXTENDED | REG_NOSUB);</div>
<div class="line">  <span class="keywordflow">if</span>( err != 0) {</div>
<div class="line">    nerrbuf = regerror( err, &amp;new-&gt;re, NULL, 0);</div>
<div class="line">    errbuf = calloc( nerrbuf, <span class="keyword">sizeof</span>( <span class="keywordtype">char</span>));</div>
<div class="line">    <span class="keywordflow">if</span>( errbuf == NULL) {</div>
<div class="line">      <a class="code" href="lslogging_8c.html#a0e756b36671055ef02a8f04d2ba8a93b" title="The routine everyone will be talking about.">lslogging_log_message</a>( <span class="stringliteral">&quot;lsevents_add_listener: out of memory (re)&quot;</span>);</div>
<div class="line">      exit( -1);</div>
<div class="line">    }</div>
<div class="line">    regerror( err, &amp;new-&gt;re, errbuf, nerrbuf);</div>
<div class="line">    <a class="code" href="lslogging_8c.html#a0e756b36671055ef02a8f04d2ba8a93b" title="The routine everyone will be talking about.">lslogging_log_message</a>( <span class="stringliteral">&quot;lsevents_add_listener: %s&quot;</span>, errbuf);</div>
<div class="line">    free( errbuf);</div>
<div class="line">    free( <span class="keyword">new</span>);</div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="keyword">new</span>-&gt;raw_regexp = strdup( event);</div>
<div class="line">  <span class="keyword">new</span>-&gt;cb   = cb;</div>
<div class="line"></div>
<div class="line">  pthread_mutex_lock( &amp;<a class="code" href="lsevents_8c.html#a70bba59930a1c7d7d181aa03cdfb6c00" title="mutex to protect the listener linked list">lsevents_listener_mutex</a>);</div>
<div class="line">  <span class="keyword">new</span>-&gt;next = <a class="code" href="lsevents_8c.html#a300dc3edfa8546d75e9f8bab8fa06c5c" title="Pointer to the first item in the link list of listeners.">lsevents_listeners_p</a>;</div>
<div class="line">  <a class="code" href="lsevents_8c.html#a300dc3edfa8546d75e9f8bab8fa06c5c" title="Pointer to the first item in the link list of listeners.">lsevents_listeners_p</a> = <span class="keyword">new</span>;</div>
<div class="line">  pthread_mutex_unlock( &amp;<a class="code" href="lsevents_8c.html#a70bba59930a1c7d7d181aa03cdfb6c00" title="mutex to protect the listener linked list">lsevents_listener_mutex</a>);</div>
<div class="line"></div>
<div class="line">  <a class="code" href="lslogging_8c.html#a0e756b36671055ef02a8f04d2ba8a93b" title="The routine everyone will be talking about.">lslogging_log_message</a>( <span class="stringliteral">&quot;lsevents_add_listener: added listener for event %s&quot;</span>, event);</div>
<div class="line"></div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af19a77187e7406fc87d36bd26e672e6d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lsevents_init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize this module. </p>

<p>Definition at line <a class="el" href="lsevents_8c_source.html#l00214">214</a> of file <a class="el" href="lsevents_8c_source.html">lsevents.c</a>.</p>
<div class="fragment"><div class="line">                     {</div>
<div class="line">  pthread_mutex_init( &amp;<a class="code" href="lsevents_8c.html#ab46f4ebda5e926a213faedac1a545ec1" title="mutex to protect the event queue">lsevents_queue_mutex</a>, NULL);</div>
<div class="line">  pthread_cond_init(  &amp;<a class="code" href="lsevents_8c.html#a8079d9fb8c35db3ca5f83be5aeb2a747" title="condition to pause the queue if needed">lsevents_queue_cond</a>, NULL);</div>
<div class="line">  pthread_mutex_init( &amp;<a class="code" href="lsevents_8c.html#a70bba59930a1c7d7d181aa03cdfb6c00" title="mutex to protect the listener linked list">lsevents_listener_mutex</a>, NULL);</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a024b08c7820bb31c3d5b8f281e07f3e8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lsevents_remove_listener </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(char *)&#160;</td>
          <td class="paramname"><em>cb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Remove a listener previously added with lsevents_add_listener. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">event</td><td>The name of the event </td></tr>
    <tr><td class="paramname">cb</td><td>The callback routine to remove </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lsevents_8c_source.html#l00120">120</a> of file <a class="el" href="lsevents_8c_source.html">lsevents.c</a>.</p>
<div class="fragment"><div class="line">                                                                {</div>
<div class="line">  </div>
<div class="line">  <a class="code" href="structlsevents__listener__struct.html" title="Linked list of event listeners.">lsevents_listener_t</a> *last, *current;</div>
<div class="line"></div>
<div class="line">  <span class="comment">//</span></div>
<div class="line">  <span class="comment">// Find the listener to remove</span></div>
<div class="line">  <span class="comment">// and unlink it from the list</span></div>
<div class="line">  <span class="comment">//</span></div>
<div class="line">  pthread_mutex_lock( &amp;<a class="code" href="lsevents_8c.html#a70bba59930a1c7d7d181aa03cdfb6c00" title="mutex to protect the listener linked list">lsevents_listener_mutex</a>);</div>
<div class="line">  last = NULL;</div>
<div class="line">  <span class="keywordflow">for</span>( current = <a class="code" href="lsevents_8c.html#a300dc3edfa8546d75e9f8bab8fa06c5c" title="Pointer to the first item in the link list of listeners.">lsevents_listeners_p</a>; current != NULL; current = current-&gt;<a class="code" href="structlsevents__listener__struct.html#a8aed9196b0deab84e018b96c0cc59305" title="Next listener.">next</a>) {</div>
<div class="line">    <span class="keywordflow">if</span>( strcmp( last-&gt;<a class="code" href="structlsevents__listener__struct.html#afffe7a6889fda47a3a7a91beefed9168" title="the original string sent to us">raw_regexp</a>, event) == 0 &amp;&amp; last-&gt;<a class="code" href="structlsevents__listener__struct.html#a005906c1c9f0647e6ed1fb4592d8c5d0" title="call back function">cb</a> == cb) {</div>
<div class="line">      <span class="keywordflow">if</span>( last == NULL) {</div>
<div class="line">        <a class="code" href="lsevents_8c.html#a300dc3edfa8546d75e9f8bab8fa06c5c" title="Pointer to the first item in the link list of listeners.">lsevents_listeners_p</a> = current-&gt;<a class="code" href="structlsevents__listener__struct.html#a8aed9196b0deab84e018b96c0cc59305" title="Next listener.">next</a>;</div>
<div class="line">      } <span class="keywordflow">else</span> {</div>
<div class="line">        last-&gt;<a class="code" href="structlsevents__listener__struct.html#a8aed9196b0deab84e018b96c0cc59305" title="Next listener.">next</a> = current-&gt;<a class="code" href="structlsevents__listener__struct.html#a8aed9196b0deab84e018b96c0cc59305" title="Next listener.">next</a>;</div>
<div class="line">      }</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">  pthread_mutex_unlock( &amp;<a class="code" href="lsevents_8c.html#a70bba59930a1c7d7d181aa03cdfb6c00" title="mutex to protect the listener linked list">lsevents_listener_mutex</a>);</div>
<div class="line"></div>
<div class="line">  <span class="comment">//</span></div>
<div class="line">  <span class="comment">// Now remove it</span></div>
<div class="line">  <span class="comment">//</span></div>
<div class="line">  <span class="keywordflow">if</span>( current != NULL) {</div>
<div class="line">    <span class="keywordflow">if</span>( current-&gt;<a class="code" href="structlsevents__listener__struct.html#afffe7a6889fda47a3a7a91beefed9168" title="the original string sent to us">raw_regexp</a> != NULL)</div>
<div class="line">      free( current-&gt;<a class="code" href="structlsevents__listener__struct.html#afffe7a6889fda47a3a7a91beefed9168" title="the original string sent to us">raw_regexp</a>);</div>
<div class="line">    free(current);</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a4ddde538b603e3d4580ae9356bf9b89d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lsevents_run </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start up the thread and get out of the way. </p>

<p>Definition at line <a class="el" href="lsevents_8c_source.html#l00222">222</a> of file <a class="el" href="lsevents_8c_source.html">lsevents.c</a>.</p>
<div class="fragment"><div class="line">                    {</div>
<div class="line">  pthread_create( &amp;<a class="code" href="lsevents_8c.html#a314640d7c3cb4fa90823ab2418fbac9b" title="thread to run the event queue">lsevents_thread</a>, NULL, <a class="code" href="lsevents_8c.html#a48e8f9dee00710bbe293b4bbded37a39" title="Our worker.">lsevents_worker</a>, NULL);</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3661dfc51537c05b11f4fd184fdff07d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lsevents_send_event </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Call the callback routines for the given event. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fmt</td><td>a printf style formating string </td></tr>
    <tr><td class="paramname">...</td><td>list of arguments specified by the format string </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lsevents_8c_source.html#l00045">45</a> of file <a class="el" href="lsevents_8c_source.html">lsevents.c</a>.</p>
<div class="fragment"><div class="line">                                          {</div>
<div class="line">  <span class="keywordtype">char</span> <span class="keyword">event</span>[<a class="code" href="pgpmac_8h.html#ab61d790b5572f116e091babfda53627b" title="Fixed length for event names: simplifies string handling.">LSEVENTS_EVENT_LENGTH</a>];</div>
<div class="line">  va_list arg_ptr;</div>
<div class="line"></div>
<div class="line">  va_start( arg_ptr, fmt);</div>
<div class="line">  vsnprintf( event, <span class="keyword">sizeof</span>(event)-1, fmt, arg_ptr);</div>
<div class="line">  <span class="keyword">event</span>[<span class="keyword">sizeof</span>(event)-1]=0;</div>
<div class="line">  va_end( arg_ptr);</div>
<div class="line"></div>
<div class="line">  pthread_mutex_lock( &amp;<a class="code" href="lsevents_8c.html#ab46f4ebda5e926a213faedac1a545ec1" title="mutex to protect the event queue">lsevents_queue_mutex</a>);</div>
<div class="line"></div>
<div class="line">  <a class="code" href="lslogging_8c.html#a0e756b36671055ef02a8f04d2ba8a93b" title="The routine everyone will be talking about.">lslogging_log_message</a>( <span class="stringliteral">&quot;lsevents_send_event: %s&quot;</span>, event);</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">  <span class="comment">// maybe wait for room on the queue</span></div>
<div class="line">  <span class="keywordflow">while</span>( (<a class="code" href="lsevents_8c.html#a3bccf603d56d5b2f4a92fad341d37e2c" title="next queue location to write">lsevents_queue_on</a> + 1) % <a class="code" href="lsevents_8c.html#a75469307c70790f04b9b2bfcb1473a48">LSEVENTS_QUEUE_LENGTH</a> == <a class="code" href="lsevents_8c.html#a50ad47e12cc4fc2d88659230b2fd44ff" title="next queue location to read">lsevents_queue_off</a> % <a class="code" href="lsevents_8c.html#a75469307c70790f04b9b2bfcb1473a48">LSEVENTS_QUEUE_LENGTH</a>)</div>
<div class="line">    pthread_cond_wait( &amp;<a class="code" href="lsevents_8c.html#a8079d9fb8c35db3ca5f83be5aeb2a747" title="condition to pause the queue if needed">lsevents_queue_cond</a>, &amp;<a class="code" href="lsevents_8c.html#ab46f4ebda5e926a213faedac1a545ec1" title="mutex to protect the event queue">lsevents_queue_mutex</a>);</div>
<div class="line">  </div>
<div class="line">  <a class="code" href="lsevents_8c.html#ad1ff5e895b4016113c8414d9a5daa2f2" title="simple list of events">lsevents_queue</a>[(<a class="code" href="lsevents_8c.html#a3bccf603d56d5b2f4a92fad341d37e2c" title="next queue location to write">lsevents_queue_on</a>++) % LSEVENTS_QUEUE_LENGTH].evp = strdup(event);</div>
<div class="line"></div>
<div class="line">  pthread_cond_signal(  &amp;<a class="code" href="lsevents_8c.html#a8079d9fb8c35db3ca5f83be5aeb2a747" title="condition to pause the queue if needed">lsevents_queue_cond</a>);</div>
<div class="line">  pthread_mutex_unlock( &amp;<a class="code" href="lsevents_8c.html#ab46f4ebda5e926a213faedac1a545ec1" title="mutex to protect the event queue">lsevents_queue_mutex</a>);</div>
<div class="line"></div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3418b9ab57811d28632794236e056408"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lslogging_init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the lslogging objects. </p>

<p>Definition at line <a class="el" href="lslogging_8c_source.html#l00037">37</a> of file <a class="el" href="lslogging_8c_source.html">lslogging.c</a>.</p>
<div class="fragment"><div class="line">                      {</div>
<div class="line">  pthread_mutex_init( &amp;<a class="code" href="lslogging_8c.html#a4a97ffe8731ae437f014ada051301be3" title="mutex to keep the various threads from adding to the queue at the exact same time">lslogging_mutex</a>, NULL);</div>
<div class="line">  pthread_cond_init(  &amp;<a class="code" href="lslogging_8c.html#afa5f05c4337683edc3c88ab56aa5ea6f" title="We&#39;ll spend most of our time waiting for this condition&#39;s signal.">lslogging_cond</a>, NULL);</div>
<div class="line"></div>
<div class="line">  <a class="code" href="lslogging_8c.html#a5709d6eb68a8eebf78ba58bb78da0649" title="our log file object">lslogging_file</a> = fopen( <a class="code" href="lslogging_8c.html#ade1e95a32a49f0fd1b3e635c4d15ccd3" title="Full name of the log file.">LSLOGGING_FILE_NAME</a>, <span class="stringliteral">&quot;w&quot;</span>);</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0e756b36671055ef02a8f04d2ba8a93b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lslogging_log_message </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The routine everyone will be talking about. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fmt</td><td>A printf style formating string. </td></tr>
    <tr><td class="paramname">...</td><td>The arguments specified by fmt </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lslogging_8c_source.html#l00048">48</a> of file <a class="el" href="lslogging_8c_source.html">lslogging.c</a>.</p>
<div class="fragment"><div class="line">                                            {</div>
<div class="line">  <span class="keywordtype">char</span> msg[<a class="code" href="lslogging_8c.html#a0526e4aa12fbaf357fe315d6b3209c54" title="Fixed maximum length messages to keep some form of sanity.">LSLOGGING_MSG_LENGTH</a>];</div>
<div class="line">  <span class="keyword">struct </span>timespec theTime;</div>
<div class="line">  va_list arg_ptr;</div>
<div class="line">  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> on;</div>
<div class="line"></div>
<div class="line">  clock_gettime( CLOCK_REALTIME, &amp;theTime);</div>
<div class="line"></div>
<div class="line">  va_start( arg_ptr, fmt);</div>
<div class="line">  vsnprintf( msg, <span class="keyword">sizeof</span>(msg)-1, fmt, arg_ptr);</div>
<div class="line">  va_end( arg_ptr);</div>
<div class="line">  msg[<span class="keyword">sizeof</span>(msg)-1]=0;</div>
<div class="line"></div>
<div class="line">  pthread_mutex_lock( &amp;<a class="code" href="lslogging_8c.html#a4a97ffe8731ae437f014ada051301be3" title="mutex to keep the various threads from adding to the queue at the exact same time">lslogging_mutex</a>);</div>
<div class="line">  </div>
<div class="line">  on = (<a class="code" href="lslogging_8c.html#a1f6e69ade57a17755e6b74a6286505df" title="next location to add to the queue">lslogging_on</a>++) % <a class="code" href="lslogging_8c.html#a5b1cb610bee26b000a2d64caa7d77a8d" title="Modest length queue.">LSLOGGING_QUEUE_LENGTH</a>;</div>
<div class="line">  strncpy( <a class="code" href="lslogging_8c.html#af98f94aec3e4501328da1b71f706c652" title="Our entire queue. Right here. Every message we&#39;ll ever write.">lslogging_queue</a>[on].lmsg, msg, <a class="code" href="lslogging_8c.html#a0526e4aa12fbaf357fe315d6b3209c54" title="Fixed maximum length messages to keep some form of sanity.">LSLOGGING_MSG_LENGTH</a> - 1);</div>
<div class="line">  <a class="code" href="lslogging_8c.html#af98f94aec3e4501328da1b71f706c652" title="Our entire queue. Right here. Every message we&#39;ll ever write.">lslogging_queue</a>[on].<a class="code" href="structlslogging__queue__struct.html#a5e83db0116b1289a84683ce48626d99d" title="our message, truncated if too long">lmsg</a>[<a class="code" href="lslogging_8c.html#a0526e4aa12fbaf357fe315d6b3209c54" title="Fixed maximum length messages to keep some form of sanity.">LSLOGGING_MSG_LENGTH</a>-1] = 0;</div>
<div class="line">  </div>
<div class="line">  memcpy( &amp;(<a class="code" href="lslogging_8c.html#af98f94aec3e4501328da1b71f706c652" title="Our entire queue. Right here. Every message we&#39;ll ever write.">lslogging_queue</a>[on].ltime), &amp;theTime, <span class="keyword">sizeof</span>(theTime));</div>
<div class="line"></div>
<div class="line">  pthread_cond_signal(  &amp;<a class="code" href="lslogging_8c.html#afa5f05c4337683edc3c88ab56aa5ea6f" title="We&#39;ll spend most of our time waiting for this condition&#39;s signal.">lslogging_cond</a>);</div>
<div class="line">  pthread_mutex_unlock( &amp;<a class="code" href="lslogging_8c.html#a4a97ffe8731ae437f014ada051301be3" title="mutex to keep the various threads from adding to the queue at the exact same time">lslogging_mutex</a>);</div>
<div class="line">  </div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad9f65252584e65957f461b809d59e3a2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lslogging_run </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start up the worker thread. </p>

<p>Definition at line <a class="el" href="lslogging_8c_source.html#l00105">105</a> of file <a class="el" href="lslogging_8c_source.html">lslogging.c</a>.</p>
<div class="fragment"><div class="line">                     {</div>
<div class="line">  pthread_create( &amp;<a class="code" href="lslogging_8c.html#ad7629be92d1bec1c621b5cc0800f497f" title="our thread">lslogging_thread</a>, NULL, &amp;<a class="code" href="lslogging_8c.html#a33ec49aea69b5e4b1b551a34e7bacfca" title="Service the queue, write to the file.">lslogging_worker</a>, NULL);</div>
<div class="line">  <a class="code" href="lslogging_8c.html#a0e756b36671055ef02a8f04d2ba8a93b" title="The routine everyone will be talking about.">lslogging_log_message</a>( <span class="stringliteral">&quot;Start up&quot;</span>);</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a4ee000bfeef9380d479464a9500af311"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char** lspg_array2ptrs </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>returns a null terminated list of strings parsed from postgresql array </p>

<p>Definition at line <a class="el" href="lspg_8c_source.html#l00161">161</a> of file <a class="el" href="lspg_8c_source.html">lspg.c</a>.</p>
<div class="fragment"><div class="line">                                 {</div>
<div class="line">  <span class="keywordtype">char</span> **rtn, *sp, *acums;</div>
<div class="line">  <span class="keywordtype">int</span> <a class="code" href="namespacemk__pgpmac__redis.html#afa643a23a5984fe44c2182ada3dfa401">i</a>, n, inquote, havebackslash, rtni;;</div>
<div class="line">  <span class="keywordtype">int</span> mxsz;</div>
<div class="line">  </div>
<div class="line">  inquote       = 0;</div>
<div class="line">  havebackslash = 0;</div>
<div class="line"></div>
<div class="line">  <span class="comment">// Despense with the null input condition before we complicate the code below</span></div>
<div class="line">  <span class="keywordflow">if</span>( a == NULL || a[0] != <span class="charliteral">&#39;{&#39;</span> || a[strlen(a)-1] != <span class="charliteral">&#39;}&#39;</span>)</div>
<div class="line">    <span class="keywordflow">return</span> NULL;</div>
<div class="line"></div>
<div class="line">  <span class="comment">// Count the maximum number of strings</span></div>
<div class="line">  <span class="comment">// Actual number will be less if there are quoted commas</span></div>
<div class="line">  <span class="comment">//</span></div>
<div class="line">  n = 1;</div>
<div class="line">  <span class="keywordflow">for</span>( i=0; a[<a class="code" href="namespacemk__pgpmac__redis.html#afa643a23a5984fe44c2182ada3dfa401">i</a>]; i++) {</div>
<div class="line">    <span class="keywordflow">if</span>( a[i] == <span class="charliteral">&#39;,&#39;</span>)</div>
<div class="line">      n++;</div>
<div class="line">  }</div>
<div class="line">  <span class="comment">//</span></div>
<div class="line">  <span class="comment">// The maximum size of any string is the length of a (+1)</span></div>
<div class="line">  <span class="comment">//</span></div>
<div class="line">  mxsz = strlen(a) + 1;</div>
<div class="line"></div>
<div class="line">  <span class="comment">// This is the accumulation string to make up the array elements</span></div>
<div class="line">  acums = (<span class="keywordtype">char</span> *)calloc( mxsz, <span class="keyword">sizeof</span>( <span class="keywordtype">char</span>));</div>
<div class="line">  <span class="keywordflow">if</span>( acums == NULL) {</div>
<div class="line">    <a class="code" href="lslogging_8c.html#a0e756b36671055ef02a8f04d2ba8a93b" title="The routine everyone will be talking about.">lslogging_log_message</a>( <span class="stringliteral">&quot;lspg_array2ptrs: out of memory (acums)&quot;</span>);</div>
<div class="line">    exit( 1);</div>
<div class="line">  }</div>
<div class="line">  </div>
<div class="line">  <span class="comment">//</span></div>
<div class="line">  <span class="comment">// allocate storage for the pointer array and the null terminator</span></div>
<div class="line">  <span class="comment">//</span></div>
<div class="line">  rtn = (<span class="keywordtype">char</span> **)calloc( n+1, <span class="keyword">sizeof</span>( <span class="keywordtype">char</span> *));</div>
<div class="line">  <span class="keywordflow">if</span>( rtn == NULL) {</div>
<div class="line">    <a class="code" href="lslogging_8c.html#a0e756b36671055ef02a8f04d2ba8a93b" title="The routine everyone will be talking about.">lslogging_log_message</a>( <span class="stringliteral">&quot;lspg_array2ptrs: out of memory (rtn)&quot;</span>);</div>
<div class="line">    exit( 1);</div>
<div class="line">  }</div>
<div class="line">  rtni = 0;</div>
<div class="line">  </div>
<div class="line">  <span class="comment">// Go through and create the individual strings</span></div>
<div class="line">  sp = acums;</div>
<div class="line">  *sp = 0;</div>
<div class="line"></div>
<div class="line">  inquote = 0;</div>
<div class="line">  havebackslash = 0;</div>
<div class="line">  <span class="keywordflow">for</span>( i=1; a[<a class="code" href="namespacemk__pgpmac__redis.html#afa643a23a5984fe44c2182ada3dfa401">i</a>] != 0; i++) {</div>
<div class="line">    <span class="keywordflow">switch</span>( a[i]) {</div>
<div class="line">    <span class="keywordflow">case</span> <span class="charliteral">&#39;&quot;&#39;</span>:</div>
<div class="line">      <span class="keywordflow">if</span>( havebackslash) {</div>
<div class="line">        <span class="comment">// a quoted quote.  Cool</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        *(sp++) = a[i];</div>
<div class="line">        *sp = 0;</div>
<div class="line">        havebackslash = 0;</div>
<div class="line">      } <span class="keywordflow">else</span> {</div>
<div class="line">        <span class="comment">// Toggle the flag</span></div>
<div class="line">        inquote = 1 - inquote;</div>
<div class="line">      }</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">case</span> <span class="charliteral">&#39;\\&#39;</span>:</div>
<div class="line">      <span class="keywordflow">if</span>( havebackslash) {</div>
<div class="line">        *(sp++) = a[i];</div>
<div class="line">        *sp = 0;</div>
<div class="line">        havebackslash = 0;</div>
<div class="line">      } <span class="keywordflow">else</span> {</div>
<div class="line">        havebackslash = 1;</div>
<div class="line">      }</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">case</span> <span class="charliteral">&#39;,&#39;</span>:</div>
<div class="line">      <span class="keywordflow">if</span>( inquote || havebackslash) {</div>
<div class="line">        *(sp++) = a[i];</div>
<div class="line">        *sp = 0;</div>
<div class="line">        havebackslash = 0;</div>
<div class="line">      } <span class="keywordflow">else</span> {</div>
<div class="line">        rtn[rtni++] = strdup( acums);</div>
<div class="line">        sp = acums;</div>
<div class="line">      }</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">      </div>
<div class="line">    <span class="keywordflow">case</span> <span class="charliteral">&#39;}&#39;</span>:</div>
<div class="line">      <span class="keywordflow">if</span>( inquote || havebackslash) {</div>
<div class="line">        *(sp++) = a[i];</div>
<div class="line">        *sp = 0;</div>
<div class="line">        havebackslash = 0;</div>
<div class="line">      } <span class="keywordflow">else</span> {</div>
<div class="line">        rtn[rtni++] = strdup( acums);</div>
<div class="line">        rtn[rtni]   = NULL;</div>
<div class="line">        free( acums);</div>
<div class="line">        <span class="keywordflow">return</span>( rtn);</div>
<div class="line">      }</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">default</span>:</div>
<div class="line">      *(sp++) = a[i];</div>
<div class="line">      *sp = 0;</div>
<div class="line">      havebackslash = 0;</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">  <span class="comment">//</span></div>
<div class="line">  <span class="comment">// Getting here means the final &#39;}&#39; was missing</span></div>
<div class="line">  <span class="comment">// Probably we should throw an error or log it or something.</span></div>
<div class="line">  <span class="comment">// Through out the last entry since this there is not resonable expectation that</span></div>
<div class="line">  <span class="comment">// we should be parsing it anyway.</span></div>
<div class="line">  <span class="comment">//</span></div>
<div class="line">  rtn[rtni]   = NULL;</div>
<div class="line">  free( acums);</div>
<div class="line">  <span class="keywordflow">return</span>( rtn);</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aaf0ad72847ccb93694b3bdc649e6d1fc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lspg_demandairrights_all </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>do nothing until we get airrights </p>

<p>Definition at line <a class="el" href="lspg_8c_source.html#l00556">556</a> of file <a class="el" href="lspg_8c_source.html">lspg.c</a>.</p>
<div class="fragment"><div class="line">                                {</div>
<div class="line">  <a class="code" href="lspg_8c.html#ae3f3ae783042eb1f5f2c37b517b7404a" title="call for airrights">lspg_demandairrights_call</a>();</div>
<div class="line">  <a class="code" href="lspg_8c.html#a96e3098f6f87fde74a83af96bf27a638" title="wait for the air rights request to return">lspg_demandairrights_wait</a>();</div>
<div class="line">  <span class="comment">// there is no &quot;done&quot; version</span></div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6f7cd0a06f6a266ef65b3604cf33d6c4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lspg_getcenter_call </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Request a getcenter query. </p>

<p>Definition at line <a class="el" href="lspg_8c_source.html#l01177">1177</a> of file <a class="el" href="lspg_8c_source.html">lspg.c</a>.</p>
<div class="fragment"><div class="line">                           {</div>
<div class="line">  pthread_mutex_lock( &amp;<a class="code" href="lspg_8c.html#a7ef8a09203117578c9b2ce4719519f36" title="the getcenter object">lspg_getcenter</a>.<a class="code" href="structlspg__getcenter__struct.html#a214bb7e88b137162f13f41f2c43002a9" title="don&#39;t let the threads collide!">mutex</a>);</div>
<div class="line">  <a class="code" href="lspg_8c.html#a7ef8a09203117578c9b2ce4719519f36" title="the getcenter object">lspg_getcenter</a>.<a class="code" href="structlspg__getcenter__struct.html#a4b350f11f1e375b9e9e839caaffbcb6b" title="used with condition">new_value_ready</a> = 0;</div>
<div class="line">  pthread_mutex_unlock( &amp;<a class="code" href="lspg_8c.html#a7ef8a09203117578c9b2ce4719519f36" title="the getcenter object">lspg_getcenter</a>.<a class="code" href="structlspg__getcenter__struct.html#a214bb7e88b137162f13f41f2c43002a9" title="don&#39;t let the threads collide!">mutex</a>);</div>
<div class="line"></div>
<div class="line">  <a class="code" href="kvredis_8c.html#a0bb9ef42da8fa21c4df48ec384ab69f4" title="Place a query on the queue.">lspg_query_push</a>( <a class="code" href="lspg_8c.html#a8184824f2b71b1d35141d7922ca69cd7" title="Retrieve the data to center the crystal.">lspg_getcenter_cb</a>, <span class="stringliteral">&quot;SELECT * FROM px.getcenter2()&quot;</span>);</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7c678553b44c874d08ec9966ed7bb1c0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lspg_getcenter_done </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Done with getcenter query. </p>

<p>Definition at line <a class="el" href="lspg_8c_source.html#l01195">1195</a> of file <a class="el" href="lspg_8c_source.html">lspg.c</a>.</p>
<div class="fragment"><div class="line">                           {</div>
<div class="line">  pthread_mutex_unlock( &amp;(<a class="code" href="lspg_8c.html#a7ef8a09203117578c9b2ce4719519f36" title="the getcenter object">lspg_getcenter</a>.<a class="code" href="structlspg__getcenter__struct.html#a214bb7e88b137162f13f41f2c43002a9" title="don&#39;t let the threads collide!">mutex</a>));</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3e0e4b3cb9fa03961ee0c104e0b06754"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lspg_getcenter_wait </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Wait for a getcenter query to return. </p>

<p>Definition at line <a class="el" href="lspg_8c_source.html#l01187">1187</a> of file <a class="el" href="lspg_8c_source.html">lspg.c</a>.</p>
<div class="fragment"><div class="line">                           {</div>
<div class="line">  pthread_mutex_lock( &amp;(<a class="code" href="lspg_8c.html#a7ef8a09203117578c9b2ce4719519f36" title="the getcenter object">lspg_getcenter</a>.<a class="code" href="structlspg__getcenter__struct.html#a214bb7e88b137162f13f41f2c43002a9" title="don&#39;t let the threads collide!">mutex</a>));</div>
<div class="line">  <span class="keywordflow">while</span>( <a class="code" href="lspg_8c.html#a7ef8a09203117578c9b2ce4719519f36" title="the getcenter object">lspg_getcenter</a>.<a class="code" href="structlspg__getcenter__struct.html#a4b350f11f1e375b9e9e839caaffbcb6b" title="used with condition">new_value_ready</a> == 0)</div>
<div class="line">    pthread_cond_wait( &amp;(<a class="code" href="lspg_8c.html#a7ef8a09203117578c9b2ce4719519f36" title="the getcenter object">lspg_getcenter</a>.<a class="code" href="structlspg__getcenter__struct.html#ae0db0ff2608ab5ba3e7c1b4ad3fc0e91" title="provides signaling for when the query is done">cond</a>), &amp;(<a class="code" href="lspg_8c.html#a7ef8a09203117578c9b2ce4719519f36" title="the getcenter object">lspg_getcenter</a>.<a class="code" href="structlspg__getcenter__struct.html#a214bb7e88b137162f13f41f2c43002a9" title="don&#39;t let the threads collide!">mutex</a>));</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2d624b228ddd560ace0cef4286a30b07"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lspg_getcurrentsampleid_wait_for_id </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>test</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="lspg_8c_source.html#l00393">393</a> of file <a class="el" href="lspg_8c_source.html">lspg.c</a>.</p>
<div class="fragment"><div class="line">                                                             {</div>
<div class="line">  pthread_mutex_lock( &amp;<a class="code" href="lspg_8c.html#a5c50804e6019d47d91f3f1cb3ebd1f00" title="our currentsample id">lspg_getcurrentsampleid</a>.<a class="code" href="structlspg__getcurrentsampleid__struct.html#ace54acbdcbce620437962858ba04e256" title="practice safe threading">mutex</a>);</div>
<div class="line">  <span class="keywordflow">while</span>( <a class="code" href="lspg_8c.html#a5c50804e6019d47d91f3f1cb3ebd1f00" title="our currentsample id">lspg_getcurrentsampleid</a>.<a class="code" href="structlspg__getcurrentsampleid__struct.html#af629de1e076fd6763bccea3547ef24e7" title="the sample we think is mounted on the diffractometer">getcurrentsampleid</a> != test)</div>
<div class="line">    pthread_cond_wait( &amp;<a class="code" href="lspg_8c.html#a5c50804e6019d47d91f3f1cb3ebd1f00" title="our currentsample id">lspg_getcurrentsampleid</a>.<a class="code" href="structlspg__getcurrentsampleid__struct.html#a289960e45fdc9339a05dc8607f1b7563" title="for signaling">cond</a>, &amp;<a class="code" href="lspg_8c.html#a5c50804e6019d47d91f3f1cb3ebd1f00" title="our currentsample id">lspg_getcurrentsampleid</a>.<a class="code" href="structlspg__getcurrentsampleid__struct.html#ace54acbdcbce620437962858ba04e256" title="practice safe threading">mutex</a>);</div>
<div class="line">    </div>
<div class="line">  pthread_mutex_unlock( &amp;<a class="code" href="lspg_8c.html#a5c50804e6019d47d91f3f1cb3ebd1f00" title="our currentsample id">lspg_getcurrentsampleid</a>.<a class="code" href="structlspg__getcurrentsampleid__struct.html#ace54acbdcbce620437962858ba04e256" title="practice safe threading">mutex</a>);</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8a77972df14166e05c94ed0792baa09b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lspg_init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initiallize the lspg module. </p>

<p>Definition at line <a class="el" href="lspg_8c_source.html#l01758">1758</a> of file <a class="el" href="lspg_8c_source.html">lspg.c</a>.</p>
<div class="fragment"><div class="line">                 {</div>
<div class="line">  pthread_mutex_init( &amp;<a class="code" href="lspg_8c.html#aed46a94106c583796e3a8ca0e89aa8e4" title="keep the queue from getting tangled">lspg_queue_mutex</a>, NULL);</div>
<div class="line">  pthread_cond_init( &amp;<a class="code" href="lspg_8c.html#a61a308b6a37afd645beb422653b95baa" title="keeps the queue from overflowing">lspg_queue_cond</a>, NULL);</div>
<div class="line"></div>
<div class="line">  <a class="code" href="lspg_8c.html#a61e47be0d5d7154700e7e5edb889852e" title="initialize the demandairrights structure">lspg_demandairrights_init</a>();</div>
<div class="line">  <a class="code" href="lspg_8c.html#ad31db17587a02302ac4e40fb7d260b1b" title="Initialize getcenter object.">lspg_getcenter_init</a>();</div>
<div class="line">  <a class="code" href="lspg_8c.html#a5d6f6c4733629fc14e4f0bc128a1ffb7">lspg_getcurrentsampleid_init</a>();</div>
<div class="line">  <a class="code" href="lspg_8c.html#a0e9bbf847dadfe0d10830d67824d9be8" title="Initialize detector lock object.">lspg_lock_detector_init</a>();</div>
<div class="line">  <a class="code" href="lspg_8c.html#a39bb94f8e0d47702b2b920a3dee61ebc" title="initialize the diffractometer locking object">lspg_lock_diffractometer_init</a>();</div>
<div class="line">  <a class="code" href="lspg_8c.html#a2faa901ea0a8ef00cfd93a893b34b446" title="Initialize the nextsample variable, mutex, and condition.">lspg_nextsample_init</a>();</div>
<div class="line">  <a class="code" href="lspg_8c.html#aff91db7d60e6c832684c023813e36dbf" title="Initialize the nextshot variable, mutex, and condition.">lspg_nextshot_init</a>();</div>
<div class="line">  <a class="code" href="lspg_8c.html#a31823ecb2b44d4a6674f804059a27bce" title="Initialize the data collection object.">lspg_seq_run_prep_init</a>();</div>
<div class="line">  <a class="code" href="lspg_8c.html#ab98f7d254fa0f5f4826f9427ca8b4f03">lspg_starttransfer_init</a>();</div>
<div class="line">  <a class="code" href="lspg_8c.html#a3517f8fbed91c998f6036284f9bd0c48" title="initialize the detector timing object">lspg_wait_for_detector_init</a>();</div>
<div class="line">  <a class="code" href="lspg_8c.html#a32b2bf00d66ee5fca130ee616a09cf7b">lspg_waitcryo_init</a>();</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a4cc866393eda0cf20276d035f6fbe206"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int lspg_nextsample_all </td>
          <td>(</td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>err</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="lspg_8c_source.html#l00468">468</a> of file <a class="el" href="lspg_8c_source.html">lspg.c</a>.</p>
<div class="fragment"><div class="line">                                            {</div>
<div class="line">  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> rtn;</div>
<div class="line"></div>
<div class="line">  <a class="code" href="lspg_8c.html#aab1c441d22126ea4334b3c61b7e4b4c2" title="Queue up a nextsample query.">lspg_nextsample_call</a>();</div>
<div class="line">  <a class="code" href="lspg_8c.html#a32878d3d29f4595d1d2b861d7e871726" title="Wait for the nextsample query to get processed.">lspg_nextsample_wait</a>();</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span>( <a class="code" href="lspg_8c.html#adbf70f382e469e02dce77833981f9547" title="the very next sample">lspg_nextsample</a>.<a class="code" href="structlspg__nextsample__struct.html#aeee8110133db9f1895237ed9b54dd873" title="just in case, though this query should always return an integer, perhaps 0">no_rows_returned</a>) {</div>
<div class="line">    rtn = 0;</div>
<div class="line">    *err = 1;</div>
<div class="line">  } <span class="keywordflow">else</span> {</div>
<div class="line">    <span class="keywordflow">if</span>( <a class="code" href="lspg_8c.html#adbf70f382e469e02dce77833981f9547" title="the very next sample">lspg_nextsample</a>.<a class="code" href="structlspg__nextsample__struct.html#a2ca6e2a667c9fe7f1a54329de04d2a3c" title="shouldn&#39;t ever be set, but if we change the logic of this call in PG then we are ready for it here...">nextsample_isnull</a>) {</div>
<div class="line">      rtn = 0;</div>
<div class="line">      *err = 1;</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">      rtn = <a class="code" href="lspg_8c.html#adbf70f382e469e02dce77833981f9547" title="the very next sample">lspg_nextsample</a>.<a class="code" href="structlspg__nextsample__struct.html#aecd82b329462ae06bc2f0d162985a086" title="sample number (4 8-bit segments: station, dewar (lid), puck, and position in the puck)">nextsample</a>;</div>
<div class="line">      *err = 0;</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">  <a class="code" href="lspg_8c.html#ac52207cc8f4c14494ae6f4972b6a3b23" title="Called when the next shot query has been processed.">lspg_nextsample_done</a>();</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">return</span> rtn;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af17ef79544ca5d78fd477010fe90d538"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lspg_nextshot_call </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Queue up a nextshot query. </p>

<p>Definition at line <a class="el" href="lspg_8c_source.html#l00824">824</a> of file <a class="el" href="lspg_8c_source.html">lspg.c</a>.</p>
<div class="fragment"><div class="line">                          {</div>
<div class="line">  pthread_mutex_lock( &amp;(<a class="code" href="lspg_8c.html#ad8d8e2f578ca79189a80c1fd5b60cefd" title="the nextshot object">lspg_nextshot</a>.<a class="code" href="structlspg__nextshot__struct.html#a38b657155fbee9b73278f76912cf2333" title="Our mutex for sanity in the multi-threaded program.">mutex</a>));</div>
<div class="line">  <a class="code" href="lspg_8c.html#ad8d8e2f578ca79189a80c1fd5b60cefd" title="the nextshot object">lspg_nextshot</a>.<a class="code" href="structlspg__nextshot__struct.html#adb8da14444b98f556dba9420dd4666dc" title="Our flag for the condition to wait for.">new_value_ready</a> = 0;</div>
<div class="line">  pthread_mutex_unlock( &amp;(<a class="code" href="lspg_8c.html#ad8d8e2f578ca79189a80c1fd5b60cefd" title="the nextshot object">lspg_nextshot</a>.<a class="code" href="structlspg__nextshot__struct.html#a38b657155fbee9b73278f76912cf2333" title="Our mutex for sanity in the multi-threaded program.">mutex</a>));</div>
<div class="line">  </div>
<div class="line">  <a class="code" href="kvredis_8c.html#a0bb9ef42da8fa21c4df48ec384ab69f4" title="Place a query on the queue.">lspg_query_push</a>( <a class="code" href="lspg_8c.html#a9e92a204f606761d368ac7e06ef0f09c" title="Next Shot Callback.">lspg_nextshot_cb</a>, <span class="stringliteral">&quot;SELECT * FROM px.nextshot2()&quot;</span>);</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a50458a014041a4118452802dfb303960"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lspg_nextshot_done </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Called when the next shot query has been processed. </p>

<p>Definition at line <a class="el" href="lspg_8c_source.html#l00842">842</a> of file <a class="el" href="lspg_8c_source.html">lspg.c</a>.</p>
<div class="fragment"><div class="line">                          {</div>
<div class="line">  pthread_mutex_unlock( &amp;(<a class="code" href="lspg_8c.html#ad8d8e2f578ca79189a80c1fd5b60cefd" title="the nextshot object">lspg_nextshot</a>.<a class="code" href="structlspg__nextshot__struct.html#a38b657155fbee9b73278f76912cf2333" title="Our mutex for sanity in the multi-threaded program.">mutex</a>));</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a784a6de32a86fec9efb3ef3ae4b6e3ac"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lspg_nextshot_wait </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Wait for the next shot query to get processed. </p>

<p>Definition at line <a class="el" href="lspg_8c_source.html#l00834">834</a> of file <a class="el" href="lspg_8c_source.html">lspg.c</a>.</p>
<div class="fragment"><div class="line">                          {</div>
<div class="line">  pthread_mutex_lock( &amp;(<a class="code" href="lspg_8c.html#ad8d8e2f578ca79189a80c1fd5b60cefd" title="the nextshot object">lspg_nextshot</a>.<a class="code" href="structlspg__nextshot__struct.html#a38b657155fbee9b73278f76912cf2333" title="Our mutex for sanity in the multi-threaded program.">mutex</a>));</div>
<div class="line">  <span class="keywordflow">while</span>( <a class="code" href="lspg_8c.html#ad8d8e2f578ca79189a80c1fd5b60cefd" title="the nextshot object">lspg_nextshot</a>.<a class="code" href="structlspg__nextshot__struct.html#adb8da14444b98f556dba9420dd4666dc" title="Our flag for the condition to wait for.">new_value_ready</a> == 0)</div>
<div class="line">    pthread_cond_wait( &amp;(<a class="code" href="lspg_8c.html#ad8d8e2f578ca79189a80c1fd5b60cefd" title="the nextshot object">lspg_nextshot</a>.<a class="code" href="structlspg__nextshot__struct.html#afc773a9eefc173aa98d5c2889e1d7669" title="Condition to wait for a response from our postgresql server.">cond</a>), &amp;(<a class="code" href="lspg_8c.html#ad8d8e2f578ca79189a80c1fd5b60cefd" title="the nextshot object">lspg_nextshot</a>.<a class="code" href="structlspg__nextshot__struct.html#a38b657155fbee9b73278f76912cf2333" title="Our mutex for sanity in the multi-threaded program.">mutex</a>));</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0bb9ef42da8fa21c4df48ec384ab69f4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lspg_query_push </td>
          <td>(</td>
          <td class="paramtype">void(*)(<a class="el" href="kvredis_8c.html#ae57432c0a6ac48a50457815dab2c5b4c">lspg_query_queue_t</a> *, PGresult *)&#160;</td>
          <td class="paramname"><em>cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Place a query on the queue. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">cb</td><td>Our callback function that deals with the response </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fmt</td><td>Printf style function to generate the query </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="kvredis_8c_source.html#l00234">234</a> of file <a class="el" href="kvredis_8c_source.html">kvredis.c</a>.</p>
<div class="fragment"><div class="line">                       {</div>
<div class="line">  <span class="keywordtype">int</span> idx;</div>
<div class="line">  va_list arg_ptr;</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">  <span class="comment">//</span></div>
<div class="line">  <span class="comment">// Pause the thread while we service the queue</span></div>
<div class="line">  <span class="comment">//</span></div>
<div class="line">  <span class="keywordflow">if</span>( (<a class="code" href="kvredis_8c.html#a3cbe7f3161b3c1838ebc56a3bbcfd8a6" title="Next position to add something to the queue.">lspg_query_queue_on</a> + 1) % <a class="code" href="kvredis_8c.html#a08fe83fe8226002ee8b80ce0a914fd11">LS_PG_QUERY_QUEUE_LENGTH</a> == <a class="code" href="kvredis_8c.html#aca86bb77d6cecfae9251743f4171bafb" title="The last item still being used (on == off means nothing in queue)">lspg_query_queue_off</a> % <a class="code" href="kvredis_8c.html#a08fe83fe8226002ee8b80ce0a914fd11">LS_PG_QUERY_QUEUE_LENGTH</a>) {</div>
<div class="line">    fprintf( stderr, <span class="stringliteral">&quot;lspg_query_push: queue is full.  Ignoring query \&quot;%s\&quot;\n&quot;</span>, fmt);</div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  idx = <a class="code" href="kvredis_8c.html#a3cbe7f3161b3c1838ebc56a3bbcfd8a6" title="Next position to add something to the queue.">lspg_query_queue_on</a> % <a class="code" href="kvredis_8c.html#a08fe83fe8226002ee8b80ce0a914fd11">LS_PG_QUERY_QUEUE_LENGTH</a>;</div>
<div class="line"></div>
<div class="line">  va_start( arg_ptr, fmt);</div>
<div class="line">  vsnprintf( <a class="code" href="kvredis_8c.html#a357d9d98f0b8c9625ccebcebfcdce955" title="Our query queue.">lspg_query_queue</a>[idx].qs, <a class="code" href="kvredis_8c.html#a3a8ef1b4b5994d6dd12bf74454ea891b">LS_PG_QUERY_STRING_LENGTH</a>-1, fmt, arg_ptr);</div>
<div class="line">  va_end( arg_ptr);</div>
<div class="line"></div>
<div class="line">  <a class="code" href="kvredis_8c.html#a357d9d98f0b8c9625ccebcebfcdce955" title="Our query queue.">lspg_query_queue</a>[idx].<a class="code" href="structlspgQueryQueueStruct.html#a1389b3ec4ddf9ed5cc0344d229a7ff9e" title="our queries should all be pretty short as we&#39;ll just be calling functions: fixed length here simplifi...">qs</a>[<a class="code" href="kvredis_8c.html#a3a8ef1b4b5994d6dd12bf74454ea891b">LS_PG_QUERY_STRING_LENGTH</a> - 1] = 0;</div>
<div class="line">  <a class="code" href="kvredis_8c.html#a357d9d98f0b8c9625ccebcebfcdce955" title="Our query queue.">lspg_query_queue</a>[idx].<a class="code" href="structlspgQueryQueueStruct.html#a53bac5ae4cab775423940bff5092a831" title="Callback function for when a query returns a result.">onResponse</a> = cb;</div>
<div class="line">  <a class="code" href="kvredis_8c.html#a3cbe7f3161b3c1838ebc56a3bbcfd8a6" title="Next position to add something to the queue.">lspg_query_queue_on</a>++;</div>
<div class="line"></div>
<div class="line">};</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1adfdb5ca9fdb5060849d726bf540117"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lspg_run </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start 'er runnin'. </p>

<p>Definition at line <a class="el" href="lspg_8c_source.html#l01777">1777</a> of file <a class="el" href="lspg_8c_source.html">lspg.c</a>.</p>
<div class="fragment"><div class="line">                {</div>
<div class="line">  pthread_create( &amp;<a class="code" href="lspg_8c.html#a04eb0cda0d5e5afeae7c393b51689765" title="our worker thread">lspg_thread</a>, NULL, <a class="code" href="lspg_8c.html#aaf4fadd2943fa3a2ecb5d840e84d68fa" title="The main loop for the lspg thread.">lspg_worker</a>, NULL);</div>
<div class="line">  <a class="code" href="lsevents_8c.html#ab0617d3f0594b51d10e34bf397096654" title="Add a callback routine to listen for a specific event.">lsevents_add_listener</a>( <span class="stringliteral">&quot;Sample(Detected|Absent)&quot;</span>, <a class="code" href="lspg_8c.html#aaba848ff514781cf8468cf23bc4d214f" title="log magnet state">lspmac_sample_detector_cb</a>);</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a4253474d4dd305aec0afdd5552b3ddd5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lspg_seq_run_prep_all </td>
          <td>(</td>
          <td class="paramtype">long long&#160;</td>
          <td class="paramname"><em>skey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>kappa</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>phi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>cx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>cy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>ax</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>ay</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>az</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convinence function to call seq run prep. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">skey</td><td>px.shots key for this image </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">kappa</td><td>current kappa postion </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">phi</td><td>current phi postition </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cx</td><td>current center table x </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cy</td><td>current center table y </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ax</td><td>current alignment table x </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ay</td><td>current alignment table y </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">az</td><td>current alignment table z </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lspg_8c_source.html#l01095">1095</a> of file <a class="el" href="lspg_8c_source.html">lspg.c</a>.</p>
<div class="fragment"><div class="line">                             {</div>
<div class="line">  <a class="code" href="lspg_8c.html#af7d6efd861b152a371442791deb42bd3" title="queue up the seq_run_prep query">lspg_seq_run_prep_call</a>( skey, <a class="code" href="lspmac_8c.html#a0be79ccb7ebf3a665248fd856112b9fd" title="Kappa.">kappa</a>, <a class="code" href="lspmac_8c.html#ac8070dc568ad974a3db42b51eca828cc" title="Phi (not data collection axis)">phi</a>, cx, cy, ax, ay, az);</div>
<div class="line">  <a class="code" href="lspg_8c.html#ac0b01f501322432a8fa37f31898c3499" title="Wait for seq run prep query to return.">lspg_seq_run_prep_wait</a>();</div>
<div class="line">  <a class="code" href="lspg_8c.html#a472b09ddf716c80207f97e2bb5d37d66" title="Indicate we are done waiting.">lspg_seq_run_prep_done</a>();</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af72c4b037347737df09348ab703f6802"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lspg_starttransfer_call </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>nextsample</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sample_detected</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>ax</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>ay</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>az</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>horz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>vert</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>esttime</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="lspg_8c_source.html#l00302">302</a> of file <a class="el" href="lspg_8c_source.html">lspg.c</a>.</p>
<div class="fragment"><div class="line">                                                                                                                                                       {</div>
<div class="line">  pthread_mutex_lock( &amp;(<a class="code" href="lspg_8c.html#af18499d17171eff473cfc49d4a0a5562" title="start a sample transfer">lspg_starttransfer</a>.<a class="code" href="structlspg__starttransfer__struct.html#a47824bb2701a699d43a7a916e2010705" title="Our mutex.">mutex</a>));</div>
<div class="line">  <a class="code" href="lspg_8c.html#af18499d17171eff473cfc49d4a0a5562" title="start a sample transfer">lspg_starttransfer</a>.<a class="code" href="structlspg__starttransfer__struct.html#ad3a6356e5ccce15c982ddecf9634999f" title="flag for our condition">new_value_ready</a> = 0;</div>
<div class="line">  pthread_mutex_unlock( &amp;(<a class="code" href="lspg_8c.html#af18499d17171eff473cfc49d4a0a5562" title="start a sample transfer">lspg_starttransfer</a>.<a class="code" href="structlspg__starttransfer__struct.html#a47824bb2701a699d43a7a916e2010705" title="Our mutex.">mutex</a>));</div>
<div class="line"></div>
<div class="line">  <a class="code" href="kvredis_8c.html#a0bb9ef42da8fa21c4df48ec384ab69f4" title="Place a query on the queue.">lspg_query_push</a>( <a class="code" href="lspg_8c.html#a289005bed571909f5ce4de2ff4e70e36">lspg_starttransfer_cb</a>, <span class="stringliteral">&quot;SELECT px.starttransfer( %d, %d, %.3f, %.3f, %.3f, %.3f, %.3f, %.3f&quot;</span>,</div>
<div class="line">                   nextsample, <a class="code" href="lspmac_8c.html#ac59ab990e48033a811aeb0281fb588fc" title="smart magnet detected sample">sample_detected</a>, ax, ay, az, horz, vert, esttime);</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad989179281d8b65b940250a4580007d0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lspg_starttransfer_done </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="lspg_8c_source.html#l00317">317</a> of file <a class="el" href="lspg_8c_source.html">lspg.c</a>.</p>
<div class="fragment"><div class="line">                               {</div>
<div class="line">  pthread_mutex_unlock( &amp;(<a class="code" href="lspg_8c.html#af18499d17171eff473cfc49d4a0a5562" title="start a sample transfer">lspg_starttransfer</a>.<a class="code" href="structlspg__starttransfer__struct.html#a47824bb2701a699d43a7a916e2010705" title="Our mutex.">mutex</a>));</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a189e9fd5cbc06dd09e5549f6e229fa5e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lspg_starttransfer_wait </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="lspg_8c_source.html#l00311">311</a> of file <a class="el" href="lspg_8c_source.html">lspg.c</a>.</p>
<div class="fragment"><div class="line">                               {</div>
<div class="line">  pthread_mutex_lock( &amp;(<a class="code" href="lspg_8c.html#af18499d17171eff473cfc49d4a0a5562" title="start a sample transfer">lspg_starttransfer</a>.<a class="code" href="structlspg__starttransfer__struct.html#a47824bb2701a699d43a7a916e2010705" title="Our mutex.">mutex</a>));</div>
<div class="line">  <span class="keywordflow">while</span>( <a class="code" href="lspg_8c.html#af18499d17171eff473cfc49d4a0a5562" title="start a sample transfer">lspg_starttransfer</a>.<a class="code" href="structlspg__starttransfer__struct.html#ad3a6356e5ccce15c982ddecf9634999f" title="flag for our condition">new_value_ready</a> == 0)</div>
<div class="line">    pthread_cond_wait( &amp;(<a class="code" href="lspg_8c.html#af18499d17171eff473cfc49d4a0a5562" title="start a sample transfer">lspg_starttransfer</a>.<a class="code" href="structlspg__starttransfer__struct.html#a1a569a2afabd7910219ff9d2d48c1b38" title="Our condition.">cond</a>), &amp;(<a class="code" href="lspg_8c.html#af18499d17171eff473cfc49d4a0a5562" title="start a sample transfer">lspg_starttransfer</a>.<a class="code" href="structlspg__starttransfer__struct.html#a47824bb2701a699d43a7a916e2010705" title="Our mutex.">mutex</a>));</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a67a44f70405c8b6a01cec6ac3d166efb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lspg_waitcryo_all </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>no need to get fancy with the wait cryo command It should not return until the robot is almost ready for air rights </p>

<p>Definition at line <a class="el" href="lspg_8c_source.html#l00507">507</a> of file <a class="el" href="lspg_8c_source.html">lspg.c</a>.</p>
<div class="fragment"><div class="line">                         {</div>
<div class="line">  pthread_mutex_lock( &amp;<a class="code" href="lspg_8c.html#a5f699604dcc5d3d64fd6cb5c363d29c9" title="signal the robot">lspg_waitcryo</a>.<a class="code" href="structlspg__waitcryo__struct.html#a62b50ead380fc8a6be35956eba384ba6" title="practice safe threading">mutex</a>);</div>
<div class="line">  <a class="code" href="lspg_8c.html#a5f699604dcc5d3d64fd6cb5c363d29c9" title="signal the robot">lspg_waitcryo</a>.<a class="code" href="structlspg__waitcryo__struct.html#a97298b773fd8c1f2ef20159093a08246" title="OK, there is never a value, we need a variable for the conditional wait and this is what we call it e...">new_value_ready</a> = 0;</div>
<div class="line"></div>
<div class="line">  <a class="code" href="kvredis_8c.html#a0bb9ef42da8fa21c4df48ec384ab69f4" title="Place a query on the queue.">lspg_query_push</a>( <a class="code" href="lspg_8c.html#a7497a7c924b31c727ea487a3efb77fb6">lspg_waitcryo_cb</a>, <span class="stringliteral">&quot;SELECT px.waitcryo())&quot;</span>);</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">while</span>( <a class="code" href="lspg_8c.html#a5f699604dcc5d3d64fd6cb5c363d29c9" title="signal the robot">lspg_waitcryo</a>.<a class="code" href="structlspg__waitcryo__struct.html#a97298b773fd8c1f2ef20159093a08246" title="OK, there is never a value, we need a variable for the conditional wait and this is what we call it e...">new_value_ready</a> == 0)</div>
<div class="line">    pthread_cond_wait( &amp;<a class="code" href="lspg_8c.html#a5f699604dcc5d3d64fd6cb5c363d29c9" title="signal the robot">lspg_waitcryo</a>.<a class="code" href="structlspg__waitcryo__struct.html#a54c275159d9f096e0d1884e64d099298" title="for signaling">cond</a>, &amp;<a class="code" href="lspg_8c.html#a5f699604dcc5d3d64fd6cb5c363d29c9" title="signal the robot">lspg_waitcryo</a>.<a class="code" href="structlspg__waitcryo__struct.html#a62b50ead380fc8a6be35956eba384ba6" title="practice safe threading">mutex</a>);</div>
<div class="line"></div>
<div class="line">  pthread_mutex_unlock( &amp;<a class="code" href="lspg_8c.html#a5f699604dcc5d3d64fd6cb5c363d29c9" title="signal the robot">lspg_waitcryo</a>.<a class="code" href="structlspg__waitcryo__struct.html#a62b50ead380fc8a6be35956eba384ba6" title="practice safe threading">mutex</a>);</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7497a7c924b31c727ea487a3efb77fb6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lspg_waitcryo_cb </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="kvredis_8c.html#ae57432c0a6ac48a50457815dab2c5b4c">lspg_query_queue_t</a> *&#160;</td>
          <td class="paramname"><em>qqp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">PGresult *&#160;</td>
          <td class="paramname"><em>pgr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="lspg_8c_source.html#l00497">497</a> of file <a class="el" href="lspg_8c_source.html">lspg.c</a>.</p>
<div class="fragment"><div class="line">                                                               {</div>
<div class="line">  pthread_mutex_lock( &amp;<a class="code" href="lspg_8c.html#a5f699604dcc5d3d64fd6cb5c363d29c9" title="signal the robot">lspg_waitcryo</a>.<a class="code" href="structlspg__waitcryo__struct.html#a62b50ead380fc8a6be35956eba384ba6" title="practice safe threading">mutex</a>);</div>
<div class="line">  <a class="code" href="lspg_8c.html#a5f699604dcc5d3d64fd6cb5c363d29c9" title="signal the robot">lspg_waitcryo</a>.<a class="code" href="structlspg__waitcryo__struct.html#a97298b773fd8c1f2ef20159093a08246" title="OK, there is never a value, we need a variable for the conditional wait and this is what we call it e...">new_value_ready</a> = 1;</div>
<div class="line">  pthread_cond_signal( &amp;<a class="code" href="lspg_8c.html#a5f699604dcc5d3d64fd6cb5c363d29c9" title="signal the robot">lspg_waitcryo</a>.<a class="code" href="structlspg__waitcryo__struct.html#a54c275159d9f096e0d1884e64d099298" title="for signaling">cond</a>);</div>
<div class="line">  pthread_mutex_unlock( &amp;<a class="code" href="lspg_8c.html#a5f699604dcc5d3d64fd6cb5c363d29c9" title="signal the robot">lspg_waitcryo</a>.<a class="code" href="structlspg__waitcryo__struct.html#a62b50ead380fc8a6be35956eba384ba6" title="practice safe threading">mutex</a>);</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a95e3fd7c1685d7e6ab6d0a295ab42f78"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lspg_zoom_lut_call </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ac4bf3a54deeaeb6e93dc3183388ad104"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lspmac_getBIPosition </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="pgpmac_8h.html#ac48984832ef73cf145e5f08bc65bd3a0">lspmac_bi_t</a> *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>get binary input value </p>

<p>Definition at line <a class="el" href="lspmac_8c_source.html#l01567">1567</a> of file <a class="el" href="lspmac_8c_source.html">lspmac.c</a>.</p>
<div class="fragment"><div class="line">                                            {</div>
<div class="line">  <span class="keywordtype">int</span> rtn;</div>
<div class="line">  pthread_mutex_lock( &amp;bip-&gt;mutex);</div>
<div class="line">  rtn = bip-&gt;position;</div>
<div class="line">  pthread_mutex_unlock( &amp;bip-&gt;mutex);</div>
<div class="line">  <span class="keywordflow">return</span> rtn;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6a1b639686b771c1213b6e23716a7898"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double lspmac_getPosition </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="pgpmac_8h.html#aa5067fcbaabc5bbfdc52492495518c96">lspmac_motor_t</a> *&#160;</td>
          <td class="paramname"><em>mp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>get the motor position (with locking) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mp</td><td>the motor object </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lspmac_8c_source.html#l01336">1336</a> of file <a class="el" href="lspmac_8c_source.html">lspmac.c</a>.</p>
<div class="fragment"><div class="line">                                               {</div>
<div class="line">  <span class="keywordtype">double</span> rtn;</div>
<div class="line">  pthread_mutex_lock( &amp;(mp-&gt;<a class="code" href="structlspmac__motor__struct.html#a188c5b1e991750ce2ffd53e0192e0907" title="coordinate waiting for motor to be done">mutex</a>));</div>
<div class="line">  rtn = mp-&gt;<a class="code" href="structlspmac__motor__struct.html#af8ffb3aed907d8664b65b37601954411" title="scaled position">position</a>;</div>
<div class="line">  pthread_mutex_unlock( &amp;(mp-&gt;<a class="code" href="structlspmac__motor__struct.html#a188c5b1e991750ce2ffd53e0192e0907" title="coordinate waiting for motor to be done">mutex</a>));</div>
<div class="line">  <span class="keywordflow">return</span> rtn;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a9fbadf816a842c8f131cf8ee47b54e29"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lspmac_home1_queue </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="pgpmac_8h.html#aa5067fcbaabc5bbfdc52492495518c96">lspmac_motor_t</a> *&#160;</td>
          <td class="paramname"><em>mp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Home the motor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mp</td><td>motor we are concerned about </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lspmac_8c_source.html#l01203">1203</a> of file <a class="el" href="lspmac_8c_source.html">lspmac.c</a>.</p>
<div class="fragment"><div class="line">                          {</div>
<div class="line">  <span class="keywordtype">int</span> <a class="code" href="namespacemk__pgpmac__redis.html#afa643a23a5984fe44c2182ada3dfa401">i</a>;</div>
<div class="line">  <span class="keywordtype">int</span> motor_num;</div>
<div class="line">  <span class="keywordtype">int</span> coord_num;</div>
<div class="line">  <span class="keywordtype">char</span> **home;</div>
<div class="line"></div>
<div class="line">  pthread_mutex_lock( &amp;(mp-&gt;<a class="code" href="structlspmac__motor__struct.html#a188c5b1e991750ce2ffd53e0192e0907" title="coordinate waiting for motor to be done">mutex</a>));</div>
<div class="line"></div>
<div class="line">  motor_num = <a class="code" href="lsredis_8c.html#a1923f998441f4f451204dfd214d52218">lsredis_getl</a>( mp-&gt;<a class="code" href="structlspmac__motor__struct.html#ad6a51cca3c7e5f79168e5c33fd9e736b" title="pmac motor number">motor_num</a>);</div>
<div class="line">  coord_num = <a class="code" href="lsredis_8c.html#a1923f998441f4f451204dfd214d52218">lsredis_getl</a>( mp-&gt;<a class="code" href="structlspmac__motor__struct.html#a5614e003272e8323f8809bf7b6559532" title="coordinate system this motor belongs to (0 if none)">coord_num</a>);</div>
<div class="line">  home      = <a class="code" href="lsredis_8c.html#abe31d0e11c41b2235307612c963bb652">lsredis_get_string_array</a>( mp-&gt;<a class="code" href="structlspmac__motor__struct.html#a6dc1ceab86687f741d4c4a574501959c" title="pmac commands to home motor">home</a>);</div>
<div class="line">  </div>
<div class="line">  <span class="comment">// Each of the motors should have this defined</span></div>
<div class="line">  <span class="comment">// but let&#39;s not seg fault if home is missing</span></div>
<div class="line">  <span class="comment">//</span></div>
<div class="line">  <span class="keywordflow">if</span>( home == NULL || *home == NULL) {</div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="comment">// Note we are already initialized</span></div>
<div class="line">    <span class="comment">// so if we are here there is something wrong.</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <a class="code" href="lslogging_8c.html#a0e756b36671055ef02a8f04d2ba8a93b" title="The routine everyone will be talking about.">lslogging_log_message</a>( <span class="stringliteral">&quot;lspmac_home1_queue: null or empty home strings for motor %s&quot;</span>, mp-&gt;<a class="code" href="structlspmac__motor__struct.html#aa90af2f6f1489f1befe1d0891e51575a" title="Name of motor as refered by ls database kvs table.">name</a>);</div>
<div class="line">    pthread_mutex_unlock( &amp;(mp-&gt;<a class="code" href="structlspmac__motor__struct.html#a188c5b1e991750ce2ffd53e0192e0907" title="coordinate waiting for motor to be done">mutex</a>));</div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">// We&#39;ve already been called.  Don&#39;t home again until</span></div>
<div class="line">  <span class="comment">// we&#39;re finish with the last time.</span></div>
<div class="line">  <span class="comment">//</span></div>
<div class="line">  <span class="keywordflow">if</span>( mp-&gt;<a class="code" href="structlspmac__motor__struct.html#aa74108855693f94fc2ff76333c9fb6ac" title="Homing routine started.">homing</a>) {</div>
<div class="line">    pthread_mutex_unlock( &amp;(mp-&gt;<a class="code" href="structlspmac__motor__struct.html#a188c5b1e991750ce2ffd53e0192e0907" title="coordinate waiting for motor to be done">mutex</a>));</div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">  }    </div>
<div class="line"></div>
<div class="line"></div>
<div class="line">  <span class="comment">//</span></div>
<div class="line">  <span class="comment">// Don&#39;t go on if any other motors in this coordinate system are homing.</span></div>
<div class="line">  <span class="comment">// It&#39;s possible to write the homing program to home all the motors in the coordinate</span></div>
<div class="line">  <span class="comment">// system.  TODO  (hint hint)</span></div>
<div class="line">  <span class="comment">//</span></div>
<div class="line">  <span class="keywordflow">if</span>( coord_num &gt; 0) {</div>
<div class="line">    <span class="keywordflow">for</span>( i=0; i&lt;<a class="code" href="lspmac_8c.html#a56260f012c50a591ee7f97e500f16994" title="The number of motors we manage.">lspmac_nmotors</a>; i++) {</div>
<div class="line">      <span class="keywordflow">if</span>( &amp;(<a class="code" href="lspmac_8c.html#a894c709ddd0652583d6db22e86282503" title="All our motors.">lspmac_motors</a>[i]) == mp)</div>
<div class="line">        <span class="keywordflow">continue</span>;</div>
<div class="line">      <span class="keywordflow">if</span>( <a class="code" href="lsredis_8c.html#a1923f998441f4f451204dfd214d52218">lsredis_getl</a>(<a class="code" href="lspmac_8c.html#a894c709ddd0652583d6db22e86282503" title="All our motors.">lspmac_motors</a>[i].coord_num) == coord_num) {</div>
<div class="line">        <span class="keywordtype">int</span> nogo;</div>
<div class="line">        nogo = 0;</div>
<div class="line">        pthread_mutex_lock( &amp;(<a class="code" href="lspmac_8c.html#a894c709ddd0652583d6db22e86282503" title="All our motors.">lspmac_motors</a>[i].mutex));</div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">//  Don&#39;t go on if</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="comment">//    we are homing         or      ( not in position                while     in open loop)</span></div>
<div class="line">        <span class="comment">//</span></div>
<div class="line">        <span class="keywordflow">if</span>( <a class="code" href="lspmac_8c.html#a894c709ddd0652583d6db22e86282503" title="All our motors.">lspmac_motors</a>[i].homing || (((<a class="code" href="lspmac_8c.html#a894c709ddd0652583d6db22e86282503" title="All our motors.">lspmac_motors</a>[i].status2 &amp; 0x01)==0) &amp;&amp; ((<a class="code" href="lspmac_8c.html#a894c709ddd0652583d6db22e86282503" title="All our motors.">lspmac_motors</a>[i].status1 &amp; 0x040000) != 0)))</div>
<div class="line">          nogo = 1;</div>
<div class="line">        pthread_mutex_unlock( &amp;(<a class="code" href="lspmac_8c.html#a894c709ddd0652583d6db22e86282503" title="All our motors.">lspmac_motors</a>[i].mutex));</div>
<div class="line">        <span class="keywordflow">if</span>( nogo) {</div>
<div class="line">          pthread_mutex_unlock( &amp;(mp-&gt;<a class="code" href="structlspmac__motor__struct.html#a188c5b1e991750ce2ffd53e0192e0907" title="coordinate waiting for motor to be done">mutex</a>));</div>
<div class="line">          <span class="keywordflow">return</span>;</div>
<div class="line">        }</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">  mp-&gt;<a class="code" href="structlspmac__motor__struct.html#aa74108855693f94fc2ff76333c9fb6ac" title="Homing routine started.">homing</a>   = 1;</div>
<div class="line">  mp-&gt;<a class="code" href="structlspmac__motor__struct.html#ab7bd8bff48953ce05c758598d75877ac" title="set to 1 when request is queued, zero after motion has toggled">not_done</a> = 1;     <span class="comment">// set up waiting for cond</span></div>
<div class="line">  mp-&gt;<a class="code" href="structlspmac__motor__struct.html#a68c471836f52707fa8582f7860cf500f" title="set to 1 when motion has been verified to have started">motion_seen</a> = 0;</div>
<div class="line">  <span class="comment">// This opens the control loop.</span></div>
<div class="line">  <span class="comment">// The status routine should notice this and the fact that</span></div>
<div class="line">  <span class="comment">// the homing flag is set and call on the home2 routine</span></div>
<div class="line">  <span class="comment">//</span></div>
<div class="line">  <span class="comment">// Only send the open loop command if we are not in</span></div>
<div class="line">  <span class="comment">// open loop mode already.  This test might prevent a race condition</span></div>
<div class="line">  <span class="comment">// where we&#39;ve already moved the home2 routine (and queue the homing program motion)</span></div>
<div class="line">  <span class="comment">// before the open loop command is dequeued and acted on.</span></div>
<div class="line">  <span class="comment">//</span></div>
<div class="line">  <span class="keywordflow">if</span>( ~(mp-&gt;<a class="code" href="structlspmac__motor__struct.html#acb52b612b9237e8eec0b97fb1e76a35d" title="local copy of status1">status1</a>) &amp; 0x040000) {</div>
<div class="line">    <a class="code" href="lspmac_8c.html#afab9e8f0502a92ee5cf93209af710f81" title="prepare (queue up) a line to send the dpram ascii command interface">lspmac_SockSendDPline</a>( mp-&gt;<a class="code" href="structlspmac__motor__struct.html#aa90af2f6f1489f1befe1d0891e51575a" title="Name of motor as refered by ls database kvs table.">name</a>, <span class="stringliteral">&quot;#%d$*&quot;</span>, motor_num);</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  pthread_mutex_unlock( &amp;(mp-&gt;<a class="code" href="structlspmac__motor__struct.html#a188c5b1e991750ce2ffd53e0192e0907" title="coordinate waiting for motor to be done">mutex</a>));</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae3e30b0ba9b5d5a291fa29b77ba920d8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lspmac_init </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize this module. </p>

<p>Definition at line <a class="el" href="lspmac_8c_source.html#l02910">2910</a> of file <a class="el" href="lspmac_8c_source.html">lspmac.c</a>.</p>
<div class="fragment"><div class="line">                   {</div>
<div class="line">  <a class="code" href="structmd2StatusStruct.html" title="The block of memory retrieved in a status request.">md2_status_t</a> *<a class="code" href="namespacemk__pgpmac__redis.html#a11daf2847f2dc94562b5b61b3f412574">p</a>;</div>
<div class="line"></div>
<div class="line">  <span class="comment">// Set our global harvest flags</span></div>
<div class="line">  <a class="code" href="lspmac_8c.html#a07b7b8254772075e6a4ced500b589c36" title="flag set at initialization to send i vars to db">getivars</a> = ivarsflag;</div>
<div class="line">  <a class="code" href="lspmac_8c.html#a50e9c0a06654fd81b3446a6e54ff12c3" title="flag set at initialization to send m vars to db">getmvars</a> = mvarsflag;</div>
<div class="line"></div>
<div class="line">  <span class="comment">// All important status mutex</span></div>
<div class="line">  pthread_mutex_init( &amp;<a class="code" href="lspmac_8c.html#a7a3e763682bd7f987d07f149e94b3bf8" title="Synchronize reading/writting status buffer.">md2_status_mutex</a>, NULL);</div>
<div class="line"></div>
<div class="line">  <span class="comment">//</span></div>
<div class="line">  <span class="comment">// Get the MD2 initialization strings</span></div>
<div class="line">  <span class="comment">//</span></div>
<div class="line">  <span class="comment">//  lspmac_md2_init = lsredis_get_obj( &quot;md2_pmac.init&quot;);  // hard coded now.</span></div>
<div class="line"></div>
<div class="line">  <span class="comment">//</span></div>
<div class="line">  <span class="comment">// Initialize the motor objects</span></div>
<div class="line">  <span class="comment">//</span></div>
<div class="line"></div>
<div class="line">  p = &amp;<a class="code" href="lspmac_8c.html#ad5bce7451d48127bace5af445d03b492" title="Buffer for MD2 Status.">md2_status</a>;</div>
<div class="line"></div>
<div class="line">  <a class="code" href="lspmac_8c.html#a8237e646ce032a840637a4ef7bff49b9" title="MD2 omega axis (the air bearing)">omega</a>  = <a class="code" href="lspmac_8c.html#a95c0a2d36e4e2a0f170fcf3583e7c422" title="Initialize a pmac stepper or servo motor.">lspmac_motor_init</a>( &amp;(<a class="code" href="lspmac_8c.html#a894c709ddd0652583d6db22e86282503" title="All our motors.">lspmac_motors</a>[ 0]), 0, 0, &amp;p-&gt;<a class="code" href="structmd2StatusStruct.html#a6ce303bec89082cae1e9b1fddf6b6c10">omega_act_pos</a>,     &amp;p-&gt;<a class="code" href="structmd2StatusStruct.html#af6cf3cd65b9ef205685a0d970f168907">omega_status_1</a>,     &amp;p-&gt;<a class="code" href="structmd2StatusStruct.html#a8577c9df7b663b548b2759ac3db721cd">omega_status_2</a>,     <span class="stringliteral">&quot;Omega   #1 &amp;1 X&quot;</span>, <span class="stringliteral">&quot;omega&quot;</span>,       <a class="code" href="lspmac_8c.html#aa4ea5a4c387ef167702c58eaddcb4151" title="Use coordinate system motion program, if available, to move motor to requested position.">lspmac_moveabs_queue</a>);</div>
<div class="line">  <a class="code" href="lspmac_8c.html#a6cb218bdccfe5a93471c161f15a15cab" title="Alignment stage X.">alignx</a> = <a class="code" href="lspmac_8c.html#a95c0a2d36e4e2a0f170fcf3583e7c422" title="Initialize a pmac stepper or servo motor.">lspmac_motor_init</a>( &amp;(<a class="code" href="lspmac_8c.html#a894c709ddd0652583d6db22e86282503" title="All our motors.">lspmac_motors</a>[ 1]), 0, 1, &amp;p-&gt;<a class="code" href="structmd2StatusStruct.html#a9653a75bc0b66c5f86d8b0206dc39b4f">alignx_act_pos</a>,    &amp;p-&gt;<a class="code" href="structmd2StatusStruct.html#a56accf8cb00c59bff87ed75df7dafbbe">alignx_status_1</a>,    &amp;p-&gt;<a class="code" href="structmd2StatusStruct.html#a2feb35ceab8129fd2cc34d1104af8b8f">alignx_status_2</a>,    <span class="stringliteral">&quot;Align X #2 &amp;3 X&quot;</span>, <span class="stringliteral">&quot;align.x&quot;</span>,     <a class="code" href="lspmac_8c.html#aa4ea5a4c387ef167702c58eaddcb4151" title="Use coordinate system motion program, if available, to move motor to requested position.">lspmac_moveabs_queue</a>);</div>
<div class="line">  <a class="code" href="lspmac_8c.html#a737c246c3948e644a18d191a931e1acd" title="Alignment stage Y.">aligny</a> = <a class="code" href="lspmac_8c.html#a95c0a2d36e4e2a0f170fcf3583e7c422" title="Initialize a pmac stepper or servo motor.">lspmac_motor_init</a>( &amp;(<a class="code" href="lspmac_8c.html#a894c709ddd0652583d6db22e86282503" title="All our motors.">lspmac_motors</a>[ 2]), 0, 2, &amp;p-&gt;<a class="code" href="structmd2StatusStruct.html#a0d40a01d2aa93c443526e826440f77fc">aligny_act_pos</a>,    &amp;p-&gt;<a class="code" href="structmd2StatusStruct.html#a2f2a11fe2fc7a446323def2be465185a">aligny_status_1</a>,    &amp;p-&gt;<a class="code" href="structmd2StatusStruct.html#a1f98d8b9831e32d77129f9b0f1d7d255">aligny_status_2</a>,    <span class="stringliteral">&quot;Align Y #3 &amp;3 Y&quot;</span>, <span class="stringliteral">&quot;align.y&quot;</span>,     <a class="code" href="lspmac_8c.html#aa4ea5a4c387ef167702c58eaddcb4151" title="Use coordinate system motion program, if available, to move motor to requested position.">lspmac_moveabs_queue</a>);</div>
<div class="line">  <a class="code" href="lspmac_8c.html#ae7642b1da0f7c7f8448104c691d40a12" title="Alignment stage X.">alignz</a> = <a class="code" href="lspmac_8c.html#a95c0a2d36e4e2a0f170fcf3583e7c422" title="Initialize a pmac stepper or servo motor.">lspmac_motor_init</a>( &amp;(<a class="code" href="lspmac_8c.html#a894c709ddd0652583d6db22e86282503" title="All our motors.">lspmac_motors</a>[ 3]), 0, 3, &amp;p-&gt;<a class="code" href="structmd2StatusStruct.html#a480f892fe91b05b2980fb00064807e2b">alignz_act_pos</a>,    &amp;p-&gt;<a class="code" href="structmd2StatusStruct.html#aadbfac5709de57e449a37e2937d6ade7">alignz_status_1</a>,    &amp;p-&gt;<a class="code" href="structmd2StatusStruct.html#ac378da16eeaab2bc47f3f8f88f7411ed">alignz_status_2</a>,    <span class="stringliteral">&quot;Align Z #4 &amp;3 Z&quot;</span>, <span class="stringliteral">&quot;align.z&quot;</span>,     <a class="code" href="lspmac_8c.html#aa4ea5a4c387ef167702c58eaddcb4151" title="Use coordinate system motion program, if available, to move motor to requested position.">lspmac_moveabs_queue</a>);</div>
<div class="line">  <a class="code" href="lspmac_8c.html#aa90d2363b744acbd4d45133b7a716d8f" title="Polaroid analyzer motor.">anal</a>   = <a class="code" href="lspmac_8c.html#a95c0a2d36e4e2a0f170fcf3583e7c422" title="Initialize a pmac stepper or servo motor.">lspmac_motor_init</a>( &amp;(<a class="code" href="lspmac_8c.html#a894c709ddd0652583d6db22e86282503" title="All our motors.">lspmac_motors</a>[ 4]), 0, 4, &amp;p-&gt;<a class="code" href="structmd2StatusStruct.html#a49d1151b0e819646587be0ca9c9d612a">analyzer_act_pos</a>,  &amp;p-&gt;<a class="code" href="structmd2StatusStruct.html#ab876b484f55bcce576fcd89dcc3f7267">analyzer_status_1</a>,  &amp;p-&gt;<a class="code" href="structmd2StatusStruct.html#a4f88bb778e4e18f1fbf7672ac11e7433">analyzer_status_2</a>,  <span class="stringliteral">&quot;Anal    #5&quot;</span>,      <span class="stringliteral">&quot;lightPolar&quot;</span>,  <a class="code" href="lspmac_8c.html#aa4ea5a4c387ef167702c58eaddcb4151" title="Use coordinate system motion program, if available, to move motor to requested position.">lspmac_moveabs_queue</a>);</div>
<div class="line">  <a class="code" href="lspmac_8c.html#ad53a42cfaa04eff0336a44c8c9986333" title="Optical zoom.">zoom</a>   = <a class="code" href="lspmac_8c.html#a95c0a2d36e4e2a0f170fcf3583e7c422" title="Initialize a pmac stepper or servo motor.">lspmac_motor_init</a>( &amp;(<a class="code" href="lspmac_8c.html#a894c709ddd0652583d6db22e86282503" title="All our motors.">lspmac_motors</a>[ 5]), 1, 0, &amp;p-&gt;<a class="code" href="structmd2StatusStruct.html#a920b80e9f5f08aedac3ad541d5ffc8ae">zoom_act_pos</a>,      &amp;p-&gt;<a class="code" href="structmd2StatusStruct.html#af28e978b761dc07eefed3971547cfd4d">zoom_status_1</a>,      &amp;p-&gt;<a class="code" href="structmd2StatusStruct.html#a34e4200315a083deb8a970e21bbbe277">zoom_status_2</a>,      <span class="stringliteral">&quot;Zoom    #6 &amp;4 Z&quot;</span>, <span class="stringliteral">&quot;cam.zoom&quot;</span>,    <a class="code" href="lspmac_8c.html#ad6ae1e37afd118f24ab1c6878da53878" title="Move method for the zoom motor.">lspmac_movezoom_queue</a>);</div>
<div class="line">  <a class="code" href="lspmac_8c.html#a139200ddaa9856a7ffcec0e6cbaa8f1b" title="Aperture Y.">apery</a>  = <a class="code" href="lspmac_8c.html#a95c0a2d36e4e2a0f170fcf3583e7c422" title="Initialize a pmac stepper or servo motor.">lspmac_motor_init</a>( &amp;(<a class="code" href="lspmac_8c.html#a894c709ddd0652583d6db22e86282503" title="All our motors.">lspmac_motors</a>[ 6]), 1, 1, &amp;p-&gt;<a class="code" href="structmd2StatusStruct.html#a2a434d2b57dbb669de0765486a1516ff">aperturey_act_pos</a>, &amp;p-&gt;<a class="code" href="structmd2StatusStruct.html#a2ef953eaddf7058bf4276585e6ff066b">aperturey_status_1</a>, &amp;p-&gt;<a class="code" href="structmd2StatusStruct.html#a0a7738f13a0fa80626cafc2299b104b4">aperturey_status_2</a>, <span class="stringliteral">&quot;Aper Y  #7 &amp;5 Y&quot;</span>, <span class="stringliteral">&quot;appy&quot;</span>,        <a class="code" href="lspmac_8c.html#aa4ea5a4c387ef167702c58eaddcb4151" title="Use coordinate system motion program, if available, to move motor to requested position.">lspmac_moveabs_queue</a>);</div>
<div class="line">  <a class="code" href="lspmac_8c.html#ab93bd6ee850b285ca3a95e64d15e9477" title="Aperture Z.">aperz</a>  = <a class="code" href="lspmac_8c.html#a95c0a2d36e4e2a0f170fcf3583e7c422" title="Initialize a pmac stepper or servo motor.">lspmac_motor_init</a>( &amp;(<a class="code" href="lspmac_8c.html#a894c709ddd0652583d6db22e86282503" title="All our motors.">lspmac_motors</a>[ 7]), 1, 2, &amp;p-&gt;<a class="code" href="structmd2StatusStruct.html#a62d584ce23cfd9aa626d3c03649b455c">aperturez_act_pos</a>, &amp;p-&gt;<a class="code" href="structmd2StatusStruct.html#a27880dd795e1ba4fea4870c64ee3aa84">aperturez_status_1</a>, &amp;p-&gt;<a class="code" href="structmd2StatusStruct.html#ae407a99e428d9f4a7444a02c8bc3414e">aperturez_status_2</a>, <span class="stringliteral">&quot;Aper Z  #8 &amp;5 Z&quot;</span>, <span class="stringliteral">&quot;appz&quot;</span>,        <a class="code" href="lspmac_8c.html#aa4ea5a4c387ef167702c58eaddcb4151" title="Use coordinate system motion program, if available, to move motor to requested position.">lspmac_moveabs_queue</a>);</div>
<div class="line">  <a class="code" href="lspmac_8c.html#a51358daaea8b5236f08414877d8af6c2" title="Capillary Y.">capy</a>   = <a class="code" href="lspmac_8c.html#a95c0a2d36e4e2a0f170fcf3583e7c422" title="Initialize a pmac stepper or servo motor.">lspmac_motor_init</a>( &amp;(<a class="code" href="lspmac_8c.html#a894c709ddd0652583d6db22e86282503" title="All our motors.">lspmac_motors</a>[ 8]), 1, 3, &amp;p-&gt;<a class="code" href="structmd2StatusStruct.html#ae25122a6db146501b51609b9cb59b044">capy_act_pos</a>,      &amp;p-&gt;<a class="code" href="structmd2StatusStruct.html#a7f4e945e80b1980b9e69366a69ad79cc">capy_status_1</a>,      &amp;p-&gt;<a class="code" href="structmd2StatusStruct.html#a5d7c10d9a16ebcc53ac4a0770ab2ef62">capy_status_2</a>,      <span class="stringliteral">&quot;Cap Y   #9 &amp;5 U&quot;</span>, <span class="stringliteral">&quot;capy&quot;</span>,        <a class="code" href="lspmac_8c.html#aa4ea5a4c387ef167702c58eaddcb4151" title="Use coordinate system motion program, if available, to move motor to requested position.">lspmac_moveabs_queue</a>);</div>
<div class="line">  <a class="code" href="lspmac_8c.html#aa45f268d0af9f3d465acfab128919718" title="Capillary Z.">capz</a>   = <a class="code" href="lspmac_8c.html#a95c0a2d36e4e2a0f170fcf3583e7c422" title="Initialize a pmac stepper or servo motor.">lspmac_motor_init</a>( &amp;(<a class="code" href="lspmac_8c.html#a894c709ddd0652583d6db22e86282503" title="All our motors.">lspmac_motors</a>[ 9]), 1, 4, &amp;p-&gt;<a class="code" href="structmd2StatusStruct.html#a257c04efac3a33d5d34b21d64c6f1266">capz_act_pos</a>,      &amp;p-&gt;<a class="code" href="structmd2StatusStruct.html#a719db4477f35331eaa8b7b44150e88a2">capz_status_1</a>,      &amp;p-&gt;<a class="code" href="structmd2StatusStruct.html#a3abb998bb89433aed16121d0dae6275a">capz_status_2</a>,      <span class="stringliteral">&quot;Cap Z  #10 &amp;5 V&quot;</span>, <span class="stringliteral">&quot;capz&quot;</span>,        <a class="code" href="lspmac_8c.html#aa4ea5a4c387ef167702c58eaddcb4151" title="Use coordinate system motion program, if available, to move motor to requested position.">lspmac_moveabs_queue</a>);</div>
<div class="line">  <a class="code" href="lspmac_8c.html#a589431b3a79c21c251fcb97cc9126991" title="Scintillator Z.">scint</a>  = <a class="code" href="lspmac_8c.html#a95c0a2d36e4e2a0f170fcf3583e7c422" title="Initialize a pmac stepper or servo motor.">lspmac_motor_init</a>( &amp;(<a class="code" href="lspmac_8c.html#a894c709ddd0652583d6db22e86282503" title="All our motors.">lspmac_motors</a>[10]), 2, 0, &amp;p-&gt;<a class="code" href="structmd2StatusStruct.html#a1c146fc792c4285eed5b2c446c214f98">scint_act_pos</a>,     &amp;p-&gt;<a class="code" href="structmd2StatusStruct.html#a1723870357f428ac5c2758a2c9a475c7">scint_status_1</a>,     &amp;p-&gt;<a class="code" href="structmd2StatusStruct.html#a4e5bc72e2f4007370f1c29ea272c952f">scint_status_2</a>,     <span class="stringliteral">&quot;Scin Z #11 &amp;5 W&quot;</span>, <span class="stringliteral">&quot;scint&quot;</span>,       <a class="code" href="lspmac_8c.html#aa4ea5a4c387ef167702c58eaddcb4151" title="Use coordinate system motion program, if available, to move motor to requested position.">lspmac_moveabs_queue</a>);</div>
<div class="line">  <a class="code" href="lspmac_8c.html#ac940d950d9efeaf3f0ae67e9bf331188" title="Centering Table X.">cenx</a>   = <a class="code" href="lspmac_8c.html#a95c0a2d36e4e2a0f170fcf3583e7c422" title="Initialize a pmac stepper or servo motor.">lspmac_motor_init</a>( &amp;(<a class="code" href="lspmac_8c.html#a894c709ddd0652583d6db22e86282503" title="All our motors.">lspmac_motors</a>[11]), 2, 1, &amp;p-&gt;<a class="code" href="structmd2StatusStruct.html#ae7924b6e91e1de82f6f7910cb3a9c9bd">centerx_act_pos</a>,   &amp;p-&gt;<a class="code" href="structmd2StatusStruct.html#aa619cdbd7a563408c6b825ddc4f74ebb">centerx_status_1</a>,   &amp;p-&gt;<a class="code" href="structmd2StatusStruct.html#ae4fad6debe138ed7815d463e83f8d0f6">centerx_status_2</a>,   <span class="stringliteral">&quot;Cen X  #17 &amp;2 X&quot;</span>, <span class="stringliteral">&quot;centering.x&quot;</span>, <a class="code" href="lspmac_8c.html#aa4ea5a4c387ef167702c58eaddcb4151" title="Use coordinate system motion program, if available, to move motor to requested position.">lspmac_moveabs_queue</a>);</div>
<div class="line">  <a class="code" href="lspmac_8c.html#aaed18e738ba7bfb6c771a44f5d7ea827" title="Centering Table Y.">ceny</a>   = <a class="code" href="lspmac_8c.html#a95c0a2d36e4e2a0f170fcf3583e7c422" title="Initialize a pmac stepper or servo motor.">lspmac_motor_init</a>( &amp;(<a class="code" href="lspmac_8c.html#a894c709ddd0652583d6db22e86282503" title="All our motors.">lspmac_motors</a>[12]), 2, 2, &amp;p-&gt;<a class="code" href="structmd2StatusStruct.html#a6be71a92a599d490ca808af8c7e7faa0">centery_act_pos</a>,   &amp;p-&gt;<a class="code" href="structmd2StatusStruct.html#a57f65ebe28ef88f1c632d9f35d9167eb">centery_status_1</a>,   &amp;p-&gt;<a class="code" href="structmd2StatusStruct.html#aa242098c185cce8f852cd6e081ef0b1d">centery_status_2</a>,   <span class="stringliteral">&quot;Cen Y  #18 &amp;2 Y&quot;</span>, <span class="stringliteral">&quot;centering.y&quot;</span>, <a class="code" href="lspmac_8c.html#aa4ea5a4c387ef167702c58eaddcb4151" title="Use coordinate system motion program, if available, to move motor to requested position.">lspmac_moveabs_queue</a>);</div>
<div class="line">  <a class="code" href="lspmac_8c.html#a0be79ccb7ebf3a665248fd856112b9fd" title="Kappa.">kappa</a>  = <a class="code" href="lspmac_8c.html#a95c0a2d36e4e2a0f170fcf3583e7c422" title="Initialize a pmac stepper or servo motor.">lspmac_motor_init</a>( &amp;(<a class="code" href="lspmac_8c.html#a894c709ddd0652583d6db22e86282503" title="All our motors.">lspmac_motors</a>[13]), 2, 3, &amp;p-&gt;<a class="code" href="structmd2StatusStruct.html#ac384fb7073387dd5dcb2e85a00ec8a77">kappa_act_pos</a>,     &amp;p-&gt;<a class="code" href="structmd2StatusStruct.html#ab152694bc32d37c1d180f55e8d282020">kappa_status_1</a>,     &amp;p-&gt;<a class="code" href="structmd2StatusStruct.html#af6891f5f8dcfc62668f64c583042c6bc">kappa_status_2</a>,     <span class="stringliteral">&quot;Kappa  #19 &amp;7 X&quot;</span>, <span class="stringliteral">&quot;kappa&quot;</span>,       <a class="code" href="lspmac_8c.html#aa4ea5a4c387ef167702c58eaddcb4151" title="Use coordinate system motion program, if available, to move motor to requested position.">lspmac_moveabs_queue</a>);</div>
<div class="line">  <a class="code" href="lspmac_8c.html#ac8070dc568ad974a3db42b51eca828cc" title="Phi (not data collection axis)">phi</a>    = <a class="code" href="lspmac_8c.html#a95c0a2d36e4e2a0f170fcf3583e7c422" title="Initialize a pmac stepper or servo motor.">lspmac_motor_init</a>( &amp;(<a class="code" href="lspmac_8c.html#a894c709ddd0652583d6db22e86282503" title="All our motors.">lspmac_motors</a>[14]), 2, 4, &amp;p-&gt;<a class="code" href="structmd2StatusStruct.html#a4de22995a72ff6e72a1a9ccab6d00620">phi_act_pos</a>,       &amp;p-&gt;<a class="code" href="structmd2StatusStruct.html#ad8b8fd90ffff43016e2adaab5ccbfa02">phi_status_1</a>,       &amp;p-&gt;<a class="code" href="structmd2StatusStruct.html#a0e6cea4c32cb34e602b9ac3d21259219">phi_status_2</a>,       <span class="stringliteral">&quot;Phi    #20 &amp;7 Y&quot;</span>, <span class="stringliteral">&quot;phi&quot;</span>,         <a class="code" href="lspmac_8c.html#aa4ea5a4c387ef167702c58eaddcb4151" title="Use coordinate system motion program, if available, to move motor to requested position.">lspmac_moveabs_queue</a>);</div>
<div class="line"></div>
<div class="line">  <a class="code" href="lspmac_8c.html#a26dec4623af9beed912b8e7e6f99822c" title="Fast shutter.">fshut</a>  = <a class="code" href="lspmac_8c.html#a40aa4aeb5c799a6a3a089137da4fd6a8" title="Initalize the fast shutter motor.">lspmac_fshut_init</a>( &amp;(<a class="code" href="lspmac_8c.html#a894c709ddd0652583d6db22e86282503" title="All our motors.">lspmac_motors</a>[15]));</div>
<div class="line">  <a class="code" href="lspmac_8c.html#aeb09895663eff333b7a75acb319a9fc1" title="Front Light DAC.">flight</a> = <a class="code" href="lspmac_8c.html#a676f13681af304b58475f8ba45f86f28" title="Initialize DAC motor Note that some motors require further initialization from a database query...">lspmac_dac_init</a>( &amp;(<a class="code" href="lspmac_8c.html#a894c709ddd0652583d6db22e86282503" title="All our motors.">lspmac_motors</a>[16]), &amp;p-&gt;<a class="code" href="structmd2StatusStruct.html#a3be73c48b09190241a2bcb801af5b97c">front_dac</a>,   <span class="stringliteral">&quot;M1200&quot;</span>, <span class="stringliteral">&quot;frontLight.intensity&quot;</span>, <a class="code" href="lspmac_8c.html#a7d601716497857c2b5c072c1aed37b71" title="Move method for dac motor objects (ie, lights)">lspmac_movedac_queue</a>);</div>
<div class="line">  <a class="code" href="lspmac_8c.html#a85d6eaa4b4a82bb3112574f458d1dc50" title="Back Light DAC.">blight</a> = <a class="code" href="lspmac_8c.html#a676f13681af304b58475f8ba45f86f28" title="Initialize DAC motor Note that some motors require further initialization from a database query...">lspmac_dac_init</a>( &amp;(<a class="code" href="lspmac_8c.html#a894c709ddd0652583d6db22e86282503" title="All our motors.">lspmac_motors</a>[17]), &amp;p-&gt;<a class="code" href="structmd2StatusStruct.html#a33ce490348c8de255cf49b96469d3d4e">back_dac</a>,    <span class="stringliteral">&quot;M1201&quot;</span>, <span class="stringliteral">&quot;backLight.intensity&quot;</span>,  <a class="code" href="lspmac_8c.html#a7d601716497857c2b5c072c1aed37b71" title="Move method for dac motor objects (ie, lights)">lspmac_movedac_queue</a>);</div>
<div class="line">  <a class="code" href="lspmac_8c.html#a8a3ca6fcf5e24dcc26170736843e53b2" title="Scintillator Piezo DAC.">fscint</a> = <a class="code" href="lspmac_8c.html#a676f13681af304b58475f8ba45f86f28" title="Initialize DAC motor Note that some motors require further initialization from a database query...">lspmac_dac_init</a>( &amp;(<a class="code" href="lspmac_8c.html#a894c709ddd0652583d6db22e86282503" title="All our motors.">lspmac_motors</a>[18]), &amp;p-&gt;<a class="code" href="structmd2StatusStruct.html#a031be48adfa016c637d6eae49054c435">scint_piezo</a>, <span class="stringliteral">&quot;M1203&quot;</span>, <span class="stringliteral">&quot;scint.focus&quot;</span>,          <a class="code" href="lspmac_8c.html#a7d601716497857c2b5c072c1aed37b71" title="Move method for dac motor objects (ie, lights)">lspmac_movedac_queue</a>);</div>
<div class="line"></div>
<div class="line">  <a class="code" href="lspmac_8c.html#abee73a0d9e5f3af9eb88d5cfd6b953c3" title="Smart Magnet on/off.">smart_mag_oo</a>  = <a class="code" href="lspmac_8c.html#aeaa263af25d139f249d8b825a058d0ce" title="Initialize binary i/o motor.">lspmac_bo_init</a>( &amp;(<a class="code" href="lspmac_8c.html#a894c709ddd0652583d6db22e86282503" title="All our motors.">lspmac_motors</a>[19]), <span class="stringliteral">&quot;smartMagnet&quot;</span>,<span class="stringliteral">&quot;M1100=%d&quot;</span>, &amp;(<a class="code" href="lspmac_8c.html#ad5bce7451d48127bace5af445d03b492" title="Buffer for MD2 Status.">md2_status</a>.<a class="code" href="structmd2StatusStruct.html#ab09c1342dc12052b8f5b35f78ef95000">acc11c_5</a>), 0x01);</div>
<div class="line">  <a class="code" href="lspmac_8c.html#af813a2eff0b7efa4c70633559054e84c" title="Back light Up/Down actuator.">blight_ud</a>     = <a class="code" href="lspmac_8c.html#aeaa263af25d139f249d8b825a058d0ce" title="Initialize binary i/o motor.">lspmac_bo_init</a>( &amp;(<a class="code" href="lspmac_8c.html#a894c709ddd0652583d6db22e86282503" title="All our motors.">lspmac_motors</a>[20]), <span class="stringliteral">&quot;backLight&quot;</span>,  <span class="stringliteral">&quot;M1101=%d&quot;</span>, &amp;(<a class="code" href="lspmac_8c.html#ad5bce7451d48127bace5af445d03b492" title="Buffer for MD2 Status.">md2_status</a>.<a class="code" href="structmd2StatusStruct.html#ab09c1342dc12052b8f5b35f78ef95000">acc11c_5</a>), 0x02);</div>
<div class="line">  <a class="code" href="lspmac_8c.html#ae78d9a757d4c85419fff9c94b15e25d7" title="Move the cryostream towards or away from the crystal.">cryo</a>          = <a class="code" href="lspmac_8c.html#aeaa263af25d139f249d8b825a058d0ce" title="Initialize binary i/o motor.">lspmac_bo_init</a>( &amp;(<a class="code" href="lspmac_8c.html#a894c709ddd0652583d6db22e86282503" title="All our motors.">lspmac_motors</a>[21]), <span class="stringliteral">&quot;cryo&quot;</span>,       <span class="stringliteral">&quot;M1102=%d&quot;</span>, &amp;(<a class="code" href="lspmac_8c.html#ad5bce7451d48127bace5af445d03b492" title="Buffer for MD2 Status.">md2_status</a>.<a class="code" href="structmd2StatusStruct.html#ab09c1342dc12052b8f5b35f78ef95000">acc11c_5</a>), 0x04);</div>
<div class="line">  <a class="code" href="lspmac_8c.html#a9d9c5030d817483ca9518027c91adac4" title="blow air on the scintilator to dry it off">dryer</a>         = <a class="code" href="lspmac_8c.html#aeaa263af25d139f249d8b825a058d0ce" title="Initialize binary i/o motor.">lspmac_bo_init</a>( &amp;(<a class="code" href="lspmac_8c.html#a894c709ddd0652583d6db22e86282503" title="All our motors.">lspmac_motors</a>[22]), <span class="stringliteral">&quot;dryer&quot;</span>,      <span class="stringliteral">&quot;M1103=%d&quot;</span>, &amp;(<a class="code" href="lspmac_8c.html#ad5bce7451d48127bace5af445d03b492" title="Buffer for MD2 Status.">md2_status</a>.<a class="code" href="structmd2StatusStruct.html#ab09c1342dc12052b8f5b35f78ef95000">acc11c_5</a>), 0x08);</div>
<div class="line">  <a class="code" href="lspmac_8c.html#addb26c80065506faa1de3c1b468fe03f" title="Move the fluorescence detector in/out.">fluo</a>          = <a class="code" href="lspmac_8c.html#aeaa263af25d139f249d8b825a058d0ce" title="Initialize binary i/o motor.">lspmac_bo_init</a>( &amp;(<a class="code" href="lspmac_8c.html#a894c709ddd0652583d6db22e86282503" title="All our motors.">lspmac_motors</a>[23]), <span class="stringliteral">&quot;fluo&quot;</span>,       <span class="stringliteral">&quot;M1104=%d&quot;</span>, &amp;(<a class="code" href="lspmac_8c.html#ad5bce7451d48127bace5af445d03b492" title="Buffer for MD2 Status.">md2_status</a>.<a class="code" href="structmd2StatusStruct.html#ab09c1342dc12052b8f5b35f78ef95000">acc11c_5</a>), 0x10);</div>
<div class="line">  <a class="code" href="lspmac_8c.html#a6630442dc65ce8a30a24ed718b301971" title="Turn front light on/off.">flight_oo</a>     = <a class="code" href="lspmac_8c.html#a25e8b92da927708fab6ac41feee6f502">lspmac_soft_motor_init</a>( &amp;(<a class="code" href="lspmac_8c.html#a894c709ddd0652583d6db22e86282503" title="All our motors.">lspmac_motors</a>[24]), <span class="stringliteral">&quot;frontLight&quot;</span>,        <a class="code" href="lspmac_8c.html#a1c529ad597a2ff5cb06a199a04ca9a8c" title="&quot;move&quot; frontlight on/off">lspmac_moveabs_frontlight_oo_queue</a>);</div>
<div class="line">  <a class="code" href="lspmac_8c.html#af55c51d52c4586b647114f95d7ac1f42" title="Back light scale factor.">blight_f</a>      = <a class="code" href="lspmac_8c.html#a25e8b92da927708fab6ac41feee6f502">lspmac_soft_motor_init</a>( &amp;(<a class="code" href="lspmac_8c.html#a894c709ddd0652583d6db22e86282503" title="All our motors.">lspmac_motors</a>[25]), <span class="stringliteral">&quot;backLight.factor&quot;</span>,  <a class="code" href="lspmac_8c.html#ae8f8f355aefad437e4364469024e2e07">lspmac_moveabs_blight_factor_queue</a>);</div>
<div class="line">  <a class="code" href="lspmac_8c.html#aabf4ec595b5183c1777d029ca56134b0" title="Front light scale factor.">flight_f</a>      = <a class="code" href="lspmac_8c.html#a25e8b92da927708fab6ac41feee6f502">lspmac_soft_motor_init</a>( &amp;(<a class="code" href="lspmac_8c.html#a894c709ddd0652583d6db22e86282503" title="All our motors.">lspmac_motors</a>[26]), <span class="stringliteral">&quot;frontLight.factor&quot;</span>, <a class="code" href="lspmac_8c.html#a64c4eff486a01a8e170a65c0d68777aa">lspmac_moveabs_flight_factor_queue</a>);</div>
<div class="line"></div>
<div class="line">  <a class="code" href="lspmac_8c.html#aade15098d213bb25522048e4a231941a" title="Low pressure air OK.">lp_air</a>          = <a class="code" href="lspmac_8c.html#ac27a61fa5aca398b0db588674e7f6dc7" title="Initialize binary input.">lspmac_bi_init</a>( &amp;(<a class="code" href="lspmac_8c.html#a37c46609cb32aea5178c4d59d7892d13" title="array of binary inputs">lspmac_bis</a>[ 0]), &amp;(<a class="code" href="lspmac_8c.html#ad5bce7451d48127bace5af445d03b492" title="Buffer for MD2 Status.">md2_status</a>.<a class="code" href="structmd2StatusStruct.html#a69fc2e30a5de0a11c992d133e7a761cd">acc11c_1</a>),  0x01, <span class="stringliteral">&quot;Low Pressure Air OK&quot;</span>,  <span class="stringliteral">&quot;Low Pressure Air Failed&quot;</span>);</div>
<div class="line">  <a class="code" href="lspmac_8c.html#abb29b117ad38156ba16fcf44eeb427af" title="High pressure air OK.">hp_air</a>          = <a class="code" href="lspmac_8c.html#ac27a61fa5aca398b0db588674e7f6dc7" title="Initialize binary input.">lspmac_bi_init</a>( &amp;(<a class="code" href="lspmac_8c.html#a37c46609cb32aea5178c4d59d7892d13" title="array of binary inputs">lspmac_bis</a>[ 1]), &amp;(<a class="code" href="lspmac_8c.html#ad5bce7451d48127bace5af445d03b492" title="Buffer for MD2 Status.">md2_status</a>.<a class="code" href="structmd2StatusStruct.html#a69fc2e30a5de0a11c992d133e7a761cd">acc11c_1</a>),  0x02, <span class="stringliteral">&quot;High Pressure Air OK&quot;</span>, <span class="stringliteral">&quot;High Pressure Air Failed&quot;</span>);</div>
<div class="line">  <a class="code" href="lspmac_8c.html#a28df32fd6be9160603aa1bb74a823574" title="that little toggle switch for the cryo">cryo_switch</a>     = <a class="code" href="lspmac_8c.html#ac27a61fa5aca398b0db588674e7f6dc7" title="Initialize binary input.">lspmac_bi_init</a>( &amp;(<a class="code" href="lspmac_8c.html#a37c46609cb32aea5178c4d59d7892d13" title="array of binary inputs">lspmac_bis</a>[ 2]), &amp;(<a class="code" href="lspmac_8c.html#ad5bce7451d48127bace5af445d03b492" title="Buffer for MD2 Status.">md2_status</a>.<a class="code" href="structmd2StatusStruct.html#a69fc2e30a5de0a11c992d133e7a761cd">acc11c_1</a>),  0x04, <span class="stringliteral">&quot;CryoSwitchChanged&quot;</span>,    <span class="stringliteral">&quot;CryoSwitchChanged&quot;</span>);</div>
<div class="line">  <a class="code" href="lspmac_8c.html#ac0d0bc95bcbcbd154b30c72a9645c8b2" title="Backlight is down.">blight_down</a>     = <a class="code" href="lspmac_8c.html#ac27a61fa5aca398b0db588674e7f6dc7" title="Initialize binary input.">lspmac_bi_init</a>( &amp;(<a class="code" href="lspmac_8c.html#a37c46609cb32aea5178c4d59d7892d13" title="array of binary inputs">lspmac_bis</a>[ 3]), &amp;(<a class="code" href="lspmac_8c.html#ad5bce7451d48127bace5af445d03b492" title="Buffer for MD2 Status.">md2_status</a>.<a class="code" href="structmd2StatusStruct.html#a69fc2e30a5de0a11c992d133e7a761cd">acc11c_1</a>),  0x08, <span class="stringliteral">&quot;Backlight Down&quot;</span>,       <span class="stringliteral">&quot;Backlight Not Down&quot;</span>);</div>
<div class="line">  <a class="code" href="lspmac_8c.html#a7fba65f6555c5c7908852c6cf1ad0c94" title="Backlight is up.">blight_up</a>       = <a class="code" href="lspmac_8c.html#ac27a61fa5aca398b0db588674e7f6dc7" title="Initialize binary input.">lspmac_bi_init</a>( &amp;(<a class="code" href="lspmac_8c.html#a37c46609cb32aea5178c4d59d7892d13" title="array of binary inputs">lspmac_bis</a>[ 4]), &amp;(<a class="code" href="lspmac_8c.html#ad5bce7451d48127bace5af445d03b492" title="Buffer for MD2 Status.">md2_status</a>.<a class="code" href="structmd2StatusStruct.html#a69fc2e30a5de0a11c992d133e7a761cd">acc11c_1</a>),  0x10, <span class="stringliteral">&quot;Backlight Up&quot;</span>,         <span class="stringliteral">&quot;Backlight Not Up&quot;</span>);</div>
<div class="line">  <a class="code" href="lspmac_8c.html#a871d4cdea0a1a8db85b8658a07655212" title="cryo is in the back position">cryo_back</a>       = <a class="code" href="lspmac_8c.html#ac27a61fa5aca398b0db588674e7f6dc7" title="Initialize binary input.">lspmac_bi_init</a>( &amp;(<a class="code" href="lspmac_8c.html#a37c46609cb32aea5178c4d59d7892d13" title="array of binary inputs">lspmac_bis</a>[ 5]), &amp;(<a class="code" href="lspmac_8c.html#ad5bce7451d48127bace5af445d03b492" title="Buffer for MD2 Status.">md2_status</a>.<a class="code" href="structmd2StatusStruct.html#a69fc2e30a5de0a11c992d133e7a761cd">acc11c_1</a>),  0x40, <span class="stringliteral">&quot;Cryo Back&quot;</span>,            <span class="stringliteral">&quot;Cryo Not Back&quot;</span>);</div>
<div class="line">  <a class="code" href="lspmac_8c.html#a67092de6f3fcc0b245e4970437eaff6b" title="fluor is in the back position">fluor_back</a>      = <a class="code" href="lspmac_8c.html#ac27a61fa5aca398b0db588674e7f6dc7" title="Initialize binary input.">lspmac_bi_init</a>( &amp;(<a class="code" href="lspmac_8c.html#a37c46609cb32aea5178c4d59d7892d13" title="array of binary inputs">lspmac_bis</a>[ 6]), &amp;(<a class="code" href="lspmac_8c.html#ad5bce7451d48127bace5af445d03b492" title="Buffer for MD2 Status.">md2_status</a>.<a class="code" href="structmd2StatusStruct.html#ad186f06cb4670b00b8af8264d1da66a4">acc11c_2</a>),  0x01, <span class="stringliteral">&quot;Fluor. Det. Parked&quot;</span>,   <span class="stringliteral">&quot;Fluor. Det. Not Parked&quot;</span>);</div>
<div class="line">  <a class="code" href="lspmac_8c.html#ac59ab990e48033a811aeb0281fb588fc" title="smart magnet detected sample">sample_detected</a> = <a class="code" href="lspmac_8c.html#ac27a61fa5aca398b0db588674e7f6dc7" title="Initialize binary input.">lspmac_bi_init</a>( &amp;(<a class="code" href="lspmac_8c.html#a37c46609cb32aea5178c4d59d7892d13" title="array of binary inputs">lspmac_bis</a>[ 7]), &amp;(<a class="code" href="lspmac_8c.html#ad5bce7451d48127bace5af445d03b492" title="Buffer for MD2 Status.">md2_status</a>.<a class="code" href="structmd2StatusStruct.html#ad186f06cb4670b00b8af8264d1da66a4">acc11c_2</a>),  0x02, <span class="stringliteral">&quot;SamplePresent&quot;</span>,        <span class="stringliteral">&quot;SampleAbsent&quot;</span>);</div>
<div class="line">  <a class="code" href="lspmac_8c.html#a5538a6aa526eeed65ff237303da2d348" title="ETEL is ready.">etel_ready</a>      = <a class="code" href="lspmac_8c.html#ac27a61fa5aca398b0db588674e7f6dc7" title="Initialize binary input.">lspmac_bi_init</a>( &amp;(<a class="code" href="lspmac_8c.html#a37c46609cb32aea5178c4d59d7892d13" title="array of binary inputs">lspmac_bis</a>[ 8]), &amp;(<a class="code" href="lspmac_8c.html#ad5bce7451d48127bace5af445d03b492" title="Buffer for MD2 Status.">md2_status</a>.<a class="code" href="structmd2StatusStruct.html#ad186f06cb4670b00b8af8264d1da66a4">acc11c_2</a>),  0x20, <span class="stringliteral">&quot;ETEL Ready&quot;</span>,           <span class="stringliteral">&quot;ETEL Not Ready&quot;</span>);</div>
<div class="line">  <a class="code" href="lspmac_8c.html#ab48d4a2cf0225796db9aad49f034dc59" title="ETEL is on.">etel_on</a>         = <a class="code" href="lspmac_8c.html#ac27a61fa5aca398b0db588674e7f6dc7" title="Initialize binary input.">lspmac_bi_init</a>( &amp;(<a class="code" href="lspmac_8c.html#a37c46609cb32aea5178c4d59d7892d13" title="array of binary inputs">lspmac_bis</a>[ 9]), &amp;(<a class="code" href="lspmac_8c.html#ad5bce7451d48127bace5af445d03b492" title="Buffer for MD2 Status.">md2_status</a>.<a class="code" href="structmd2StatusStruct.html#ad186f06cb4670b00b8af8264d1da66a4">acc11c_2</a>),  0x40, <span class="stringliteral">&quot;ETEL On&quot;</span>,              <span class="stringliteral">&quot;ETEL Off&quot;</span>);</div>
<div class="line">  <a class="code" href="lspmac_8c.html#a1e690d4ad981d020ea2c850282dca3be" title="ETEL initialized OK.">etel_init_ok</a>    = <a class="code" href="lspmac_8c.html#ac27a61fa5aca398b0db588674e7f6dc7" title="Initialize binary input.">lspmac_bi_init</a>( &amp;(<a class="code" href="lspmac_8c.html#a37c46609cb32aea5178c4d59d7892d13" title="array of binary inputs">lspmac_bis</a>[10]), &amp;(<a class="code" href="lspmac_8c.html#ad5bce7451d48127bace5af445d03b492" title="Buffer for MD2 Status.">md2_status</a>.<a class="code" href="structmd2StatusStruct.html#ad186f06cb4670b00b8af8264d1da66a4">acc11c_2</a>),  0x80, <span class="stringliteral">&quot;ETEL Init OK&quot;</span>,         <span class="stringliteral">&quot;ETEL Init Not OK&quot;</span>);</div>
<div class="line">  <a class="code" href="lspmac_8c.html#ab552f2e28dd9cccefafe01f27717101b" title="Minikappa is OK (whatever that means)">minikappa_ok</a>    = <a class="code" href="lspmac_8c.html#ac27a61fa5aca398b0db588674e7f6dc7" title="Initialize binary input.">lspmac_bi_init</a>( &amp;(<a class="code" href="lspmac_8c.html#a37c46609cb32aea5178c4d59d7892d13" title="array of binary inputs">lspmac_bis</a>[11]), &amp;(<a class="code" href="lspmac_8c.html#ad5bce7451d48127bace5af445d03b492" title="Buffer for MD2 Status.">md2_status</a>.<a class="code" href="structmd2StatusStruct.html#a20a15620e12888f61c0aed1e47e97932">acc11c_3</a>),  0x01, <span class="stringliteral">&quot;Minikappa OK&quot;</span>,         <span class="stringliteral">&quot;Minikappa Not OK&quot;</span>);</div>
<div class="line">  <a class="code" href="lspmac_8c.html#a2dc6fa78bb6313fe8b696d646eaa2443" title="smart magnet is on">smart_mag_on</a>    = <a class="code" href="lspmac_8c.html#ac27a61fa5aca398b0db588674e7f6dc7" title="Initialize binary input.">lspmac_bi_init</a>( &amp;(<a class="code" href="lspmac_8c.html#a37c46609cb32aea5178c4d59d7892d13" title="array of binary inputs">lspmac_bis</a>[12]), &amp;(<a class="code" href="lspmac_8c.html#ad5bce7451d48127bace5af445d03b492" title="Buffer for MD2 Status.">md2_status</a>.<a class="code" href="structmd2StatusStruct.html#a20a15620e12888f61c0aed1e47e97932">acc11c_3</a>),  0x04, <span class="stringliteral">&quot;Smart Magnet On&quot;</span>,      <span class="stringliteral">&quot;Smart Magnet Not On&quot;</span>);</div>
<div class="line">  <a class="code" href="lspmac_8c.html#afaff4fbb5f03b0d2469fc7a14f174d69" title="(whose arm? parked where?)">arm_parked</a>      = <a class="code" href="lspmac_8c.html#ac27a61fa5aca398b0db588674e7f6dc7" title="Initialize binary input.">lspmac_bi_init</a>( &amp;(<a class="code" href="lspmac_8c.html#a37c46609cb32aea5178c4d59d7892d13" title="array of binary inputs">lspmac_bis</a>[13]), &amp;(<a class="code" href="lspmac_8c.html#ad5bce7451d48127bace5af445d03b492" title="Buffer for MD2 Status.">md2_status</a>.<a class="code" href="structmd2StatusStruct.html#a20a15620e12888f61c0aed1e47e97932">acc11c_3</a>),  0x08, <span class="stringliteral">&quot;Arm Parked&quot;</span>,           <span class="stringliteral">&quot;Arm Not Parked&quot;</span>);</div>
<div class="line">  <a class="code" href="lspmac_8c.html#a37903ed8430ac4d9ead609a78eb62f32" title="smart magnet error (coil broken perhaps)">smart_mag_err</a>   = <a class="code" href="lspmac_8c.html#ac27a61fa5aca398b0db588674e7f6dc7" title="Initialize binary input.">lspmac_bi_init</a>( &amp;(<a class="code" href="lspmac_8c.html#a37c46609cb32aea5178c4d59d7892d13" title="array of binary inputs">lspmac_bis</a>[14]), &amp;(<a class="code" href="lspmac_8c.html#ad5bce7451d48127bace5af445d03b492" title="Buffer for MD2 Status.">md2_status</a>.<a class="code" href="structmd2StatusStruct.html#a20a15620e12888f61c0aed1e47e97932">acc11c_3</a>),  0x10, <span class="stringliteral">&quot;Smart Magnet Error&quot;</span>,   <span class="stringliteral">&quot;Smart Magnet OK&quot;</span>);</div>
<div class="line">  <a class="code" href="lspmac_8c.html#ae98a0792d6b4b96a33df0a31bdec6342" title="shutter is open (note in pmc says this is a slow input)">shutter_open</a>    = <a class="code" href="lspmac_8c.html#ac27a61fa5aca398b0db588674e7f6dc7" title="Initialize binary input.">lspmac_bi_init</a>( &amp;(<a class="code" href="lspmac_8c.html#a37c46609cb32aea5178c4d59d7892d13" title="array of binary inputs">lspmac_bis</a>[15]), &amp;(<a class="code" href="lspmac_8c.html#ad5bce7451d48127bace5af445d03b492" title="Buffer for MD2 Status.">md2_status</a>.<a class="code" href="structmd2StatusStruct.html#a20a15620e12888f61c0aed1e47e97932">acc11c_3</a>), 0x100, <span class="stringliteral">&quot;Shutter Open&quot;</span>,         <span class="stringliteral">&quot;Shutter Not Open&quot;</span>);</div>
<div class="line">  <a class="code" href="lspmac_8c.html#a4892e918830dd12093d28c53a1c2df98" title="smart magnet is off">smart_mag_off</a>   = <a class="code" href="lspmac_8c.html#ac27a61fa5aca398b0db588674e7f6dc7" title="Initialize binary input.">lspmac_bi_init</a>( &amp;(<a class="code" href="lspmac_8c.html#a37c46609cb32aea5178c4d59d7892d13" title="array of binary inputs">lspmac_bis</a>[16]), &amp;(<a class="code" href="lspmac_8c.html#ad5bce7451d48127bace5af445d03b492" title="Buffer for MD2 Status.">md2_status</a>.<a class="code" href="structmd2StatusStruct.html#ab09c1342dc12052b8f5b35f78ef95000">acc11c_5</a>),  0x01, <span class="stringliteral">&quot;Smart Magnet Off&quot;</span>,     <span class="stringliteral">&quot;Smart Magnet Not Off&quot;</span>);</div>
<div class="line">  </div>
<div class="line"></div>
<div class="line">  <span class="comment">//</span></div>
<div class="line">  <span class="comment">// Initialize several commands that get called, perhaps, alot</span></div>
<div class="line">  <span class="comment">//</span></div>
<div class="line">  </div>
<div class="line"></div>
<div class="line">  <a class="code" href="lspmac_8c.html#a6fcbbe47fe9912533962601f5befdb29">rr_cmd</a>.<a class="code" href="structtagEthernetCmd.html#a6a155eb3ae546dd29369c4a33ddb3310" title="VR_UPLOAD or VR_DOWNLOAD.">RequestType</a> = <a class="code" href="lspmac_8c.html#a5485d08fdc80533b5cebadff63696ed2">VR_UPLOAD</a>;</div>
<div class="line">  <a class="code" href="lspmac_8c.html#a6fcbbe47fe9912533962601f5befdb29">rr_cmd</a>.<a class="code" href="structtagEthernetCmd.html#a0dc566e7edbb226f1a4ea443d93d56e2" title="The command to run (VR_PMAC_GETMEM, etc).">Request</a>     = <a class="code" href="lspmac_8c.html#aad3c7b4a9403e56c09eceadcf21252c0">VR_PMAC_READREADY</a>;</div>
<div class="line">  <a class="code" href="lspmac_8c.html#a6fcbbe47fe9912533962601f5befdb29">rr_cmd</a>.<a class="code" href="structtagEthernetCmd.html#aec0ee9a5f6c7e3bc6e4bd98f1bd52783" title="Command parameter 1.">wValue</a>      = 0;</div>
<div class="line">  <a class="code" href="lspmac_8c.html#a6fcbbe47fe9912533962601f5befdb29">rr_cmd</a>.<a class="code" href="structtagEthernetCmd.html#a92f5a374e87d4f496b64b4888850d6e6" title="Command parameter 2.">wIndex</a>      = 0;</div>
<div class="line">  <a class="code" href="lspmac_8c.html#a6fcbbe47fe9912533962601f5befdb29">rr_cmd</a>.<a class="code" href="structtagEthernetCmd.html#af5df25ff13ca30fa33719d0df1ab7e97" title="Number of bytes in bData.">wLength</a>     = htons(2);</div>
<div class="line">  memset( <a class="code" href="lspmac_8c.html#a6fcbbe47fe9912533962601f5befdb29">rr_cmd</a>.<a class="code" href="structtagEthernetCmd.html#a872dab798127d6f589974a79c5d0aef1" title="The data buffer, if required.">bData</a>, 0, <span class="keyword">sizeof</span>(<a class="code" href="lspmac_8c.html#a6fcbbe47fe9912533962601f5befdb29">rr_cmd</a>.<a class="code" href="structtagEthernetCmd.html#a872dab798127d6f589974a79c5d0aef1" title="The data buffer, if required.">bData</a>));</div>
<div class="line"></div>
<div class="line">  <a class="code" href="lspmac_8c.html#ae7b21213b9c78b6745213409f1ef7320">gb_cmd</a>.<a class="code" href="structtagEthernetCmd.html#a6a155eb3ae546dd29369c4a33ddb3310" title="VR_UPLOAD or VR_DOWNLOAD.">RequestType</a> = <a class="code" href="lspmac_8c.html#a5485d08fdc80533b5cebadff63696ed2">VR_UPLOAD</a>;</div>
<div class="line">  <a class="code" href="lspmac_8c.html#ae7b21213b9c78b6745213409f1ef7320">gb_cmd</a>.<a class="code" href="structtagEthernetCmd.html#a0dc566e7edbb226f1a4ea443d93d56e2" title="The command to run (VR_PMAC_GETMEM, etc).">Request</a>     = <a class="code" href="lspmac_8c.html#a50e444b5ceb6d62a1be43c88c55c549c">VR_PMAC_GETBUFFER</a>;</div>
<div class="line">  <a class="code" href="lspmac_8c.html#ae7b21213b9c78b6745213409f1ef7320">gb_cmd</a>.<a class="code" href="structtagEthernetCmd.html#aec0ee9a5f6c7e3bc6e4bd98f1bd52783" title="Command parameter 1.">wValue</a>      = 0;</div>
<div class="line">  <a class="code" href="lspmac_8c.html#ae7b21213b9c78b6745213409f1ef7320">gb_cmd</a>.<a class="code" href="structtagEthernetCmd.html#a92f5a374e87d4f496b64b4888850d6e6" title="Command parameter 2.">wIndex</a>      = 0;</div>
<div class="line">  <a class="code" href="lspmac_8c.html#ae7b21213b9c78b6745213409f1ef7320">gb_cmd</a>.<a class="code" href="structtagEthernetCmd.html#af5df25ff13ca30fa33719d0df1ab7e97" title="Number of bytes in bData.">wLength</a>     = htons(1400);</div>
<div class="line">  memset( <a class="code" href="lspmac_8c.html#ae7b21213b9c78b6745213409f1ef7320">gb_cmd</a>.<a class="code" href="structtagEthernetCmd.html#a872dab798127d6f589974a79c5d0aef1" title="The data buffer, if required.">bData</a>, 0, <span class="keyword">sizeof</span>(<a class="code" href="lspmac_8c.html#ae7b21213b9c78b6745213409f1ef7320">gb_cmd</a>.<a class="code" href="structtagEthernetCmd.html#a872dab798127d6f589974a79c5d0aef1" title="The data buffer, if required.">bData</a>));</div>
<div class="line"></div>
<div class="line">  <a class="code" href="lspmac_8c.html#a8908812f4ff25c196679e00d330edd81" title="commands to send out &quot;readready&quot;, &quot;getbuffer&quot;, &quot;controlresponse&quot; (initialized in main)">cr_cmd</a>.<a class="code" href="structtagEthernetCmd.html#a6a155eb3ae546dd29369c4a33ddb3310" title="VR_UPLOAD or VR_DOWNLOAD.">RequestType</a> = <a class="code" href="lspmac_8c.html#a5485d08fdc80533b5cebadff63696ed2">VR_UPLOAD</a>;</div>
<div class="line">  <a class="code" href="lspmac_8c.html#a8908812f4ff25c196679e00d330edd81" title="commands to send out &quot;readready&quot;, &quot;getbuffer&quot;, &quot;controlresponse&quot; (initialized in main)">cr_cmd</a>.<a class="code" href="structtagEthernetCmd.html#a0dc566e7edbb226f1a4ea443d93d56e2" title="The command to run (VR_PMAC_GETMEM, etc).">Request</a>     = <a class="code" href="lspmac_8c.html#a8f4ce4666a23a3fb153d680bd1cb6556">VR_CTRL_RESPONSE</a>;</div>
<div class="line">  <a class="code" href="lspmac_8c.html#a8908812f4ff25c196679e00d330edd81" title="commands to send out &quot;readready&quot;, &quot;getbuffer&quot;, &quot;controlresponse&quot; (initialized in main)">cr_cmd</a>.<a class="code" href="structtagEthernetCmd.html#aec0ee9a5f6c7e3bc6e4bd98f1bd52783" title="Command parameter 1.">wValue</a>      = 0;</div>
<div class="line">  <a class="code" href="lspmac_8c.html#a8908812f4ff25c196679e00d330edd81" title="commands to send out &quot;readready&quot;, &quot;getbuffer&quot;, &quot;controlresponse&quot; (initialized in main)">cr_cmd</a>.<a class="code" href="structtagEthernetCmd.html#a92f5a374e87d4f496b64b4888850d6e6" title="Command parameter 2.">wIndex</a>      = 0;</div>
<div class="line">  <a class="code" href="lspmac_8c.html#a8908812f4ff25c196679e00d330edd81" title="commands to send out &quot;readready&quot;, &quot;getbuffer&quot;, &quot;controlresponse&quot; (initialized in main)">cr_cmd</a>.<a class="code" href="structtagEthernetCmd.html#af5df25ff13ca30fa33719d0df1ab7e97" title="Number of bytes in bData.">wLength</a>     = htons(1400);</div>
<div class="line">  memset( <a class="code" href="lspmac_8c.html#a8908812f4ff25c196679e00d330edd81" title="commands to send out &quot;readready&quot;, &quot;getbuffer&quot;, &quot;controlresponse&quot; (initialized in main)">cr_cmd</a>.<a class="code" href="structtagEthernetCmd.html#a872dab798127d6f589974a79c5d0aef1" title="The data buffer, if required.">bData</a>, 0, <span class="keyword">sizeof</span>(<a class="code" href="lspmac_8c.html#a8908812f4ff25c196679e00d330edd81" title="commands to send out &quot;readready&quot;, &quot;getbuffer&quot;, &quot;controlresponse&quot; (initialized in main)">cr_cmd</a>.<a class="code" href="structtagEthernetCmd.html#a872dab798127d6f589974a79c5d0aef1" title="The data buffer, if required.">bData</a>));</div>
<div class="line"></div>
<div class="line">  <span class="comment">//</span></div>
<div class="line">  <span class="comment">// Initialize some mutexs and conditions</span></div>
<div class="line">  <span class="comment">//</span></div>
<div class="line"></div>
<div class="line">  pthread_mutex_init( &amp;<a class="code" href="lspmac_8c.html#acc1bb77b9bcbc4d970f841a41fd274b3" title="manage access to the pmac command queue">pmac_queue_mutex</a>, NULL);</div>
<div class="line">  pthread_cond_init(  &amp;<a class="code" href="lspmac_8c.html#a8a25bd9c593c6985107f90f999ce0b08" title="wait for a command to be sent to PMAC before continuing">pmac_queue_cond</a>, NULL);</div>
<div class="line"></div>
<div class="line">  <a class="code" href="lspmac_8c.html#a112158e0cd50449a440ac55c7af7bea2" title="State of the shutter, used to detect changes.">lspmac_shutter_state</a> = 0;                             <span class="comment">// assume the shutter is now closed: not a big deal if we are wrong</span></div>
<div class="line">  pthread_mutex_init( &amp;<a class="code" href="lspmac_8c.html#a1b78a13c654409333569815e1c109d38" title="Coordinates threads reading shutter status.">lspmac_shutter_mutex</a>, NULL);</div>
<div class="line">  pthread_cond_init(  &amp;<a class="code" href="lspmac_8c.html#afbd51c2cefcee87afe994c9e9f372241" title="Allows waiting for the shutter status to change.">lspmac_shutter_cond</a>, NULL);</div>
<div class="line">  <a class="code" href="lspmac_8c.html#adba7f5f4bbeabc4dac859221d4c684ba" title="our poll structure">pmacfd</a>.fd = -1;</div>
<div class="line"></div>
<div class="line">  pthread_mutex_init( &amp;<a class="code" href="lspmac_8c.html#a85679cac947e199c88794f8e5a12bf5f" title="Coordinate moving motors between threads.">lspmac_moving_mutex</a>, NULL);</div>
<div class="line">  pthread_cond_init(  &amp;<a class="code" href="lspmac_8c.html#a57547d211906c981ef20257eba99f8df" title="Wait for motor(s) to finish moving condition.">lspmac_moving_cond</a>, NULL);</div>
<div class="line"></div>
<div class="line">  pthread_mutex_init( &amp;<a class="code" href="lspmac_8c.html#a2ff142105e17d933871d09759e7082f8" title="Keep too many processes from sending commands at once.">lspmac_ascii_mutex</a>, NULL);</div>
<div class="line"></div>
<div class="line">  pthread_mutex_init( &amp;<a class="code" href="lspmac_8c.html#a3e7ae750b8988cd2eb93895e3ea1a49e">lspmac_ascii_buffers_mutex</a>, NULL);</div>
<div class="line"></div>
<div class="line">  <span class="comment">//</span></div>
<div class="line">  <span class="comment">// clear the ascii communications buffers</span></div>
<div class="line">  <span class="comment">//</span></div>
<div class="line">  {</div>
<div class="line">    uint32_t cc;</div>
<div class="line">    cc = 0;</div>
<div class="line">    <a class="code" href="lspmac_8c.html#ac60f32e1ab6d81a60155e355db752726" title="Compose a packet and send it to the PMAC.">lspmac_send_command</a>( <a class="code" href="lspmac_8c.html#a5485d08fdc80533b5cebadff63696ed2">VR_UPLOAD</a>, <a class="code" href="lspmac_8c.html#ab79207cc3145740f8c070a24c91b11e0">VR_PMAC_SETMEM</a>, 0x0e9e, 0, 4, (<span class="keywordtype">char</span> *)&amp;cc, NULL, 1, NULL);</div>
<div class="line"></div>
<div class="line">    cc = 0x18;</div>
<div class="line">    <a class="code" href="lspmac_8c.html#ac60f32e1ab6d81a60155e355db752726" title="Compose a packet and send it to the PMAC.">lspmac_send_command</a>( <a class="code" href="lspmac_8c.html#a5485d08fdc80533b5cebadff63696ed2">VR_UPLOAD</a>, <a class="code" href="lspmac_8c.html#ab79207cc3145740f8c070a24c91b11e0">VR_PMAC_SETMEM</a>, 0x0e9e, 0, 4, (<span class="keywordtype">char</span> *)&amp;cc, NULL, 1, NULL);</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <a class="code" href="lspmac_8c.html#afab9e8f0502a92ee5cf93209af710f81" title="prepare (queue up) a line to send the dpram ascii command interface">lspmac_SockSendDPline</a>( NULL, <span class="stringliteral">&quot;I5=0&quot;</span>);</div>
<div class="line">  <a class="code" href="lspmac_8c.html#afab9e8f0502a92ee5cf93209af710f81" title="prepare (queue up) a line to send the dpram ascii command interface">lspmac_SockSendDPline</a>( NULL, <span class="stringliteral">&quot;ENABLE PLCC 0,2&quot;</span>);</div>
<div class="line">  <a class="code" href="lspmac_8c.html#afab9e8f0502a92ee5cf93209af710f81" title="prepare (queue up) a line to send the dpram ascii command interface">lspmac_SockSendDPline</a>( NULL, <span class="stringliteral">&quot;DISABLE PLCC 1&quot;</span>);</div>
<div class="line">  <a class="code" href="lspmac_8c.html#afab9e8f0502a92ee5cf93209af710f81" title="prepare (queue up) a line to send the dpram ascii command interface">lspmac_SockSendDPline</a>( NULL, <span class="stringliteral">&quot;I5=3&quot;</span>);</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a62273d5e9fd9a14838f4126fb94a5138"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lspmac_jogabs_queue </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="pgpmac_8h.html#aa5067fcbaabc5bbfdc52492495518c96">lspmac_motor_t</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Use jog to move motor to requested position. </p>

<p>Definition at line <a class="el" href="lspmac_8c_source.html#l02682">2682</a> of file <a class="el" href="lspmac_8c_source.html">lspmac.c</a>.</p>
<div class="fragment"><div class="line">                            {</div>
<div class="line">  </div>
<div class="line">  <a class="code" href="lspmac_8c.html#a4ccd25a1a3a83cd7c9187975e52a9484" title="Move method for normal stepper and servo motor objects.">lspmac_move_or_jog_abs_queue</a>( mp, requested_position, 1);</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a71a8e9cb210ac33874abe4e15149b964"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lspmac_move_or_jog_abs_queue </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="pgpmac_8h.html#aa5067fcbaabc5bbfdc52492495518c96">lspmac_motor_t</a> *&#160;</td>
          <td class="paramname"><em>mp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>requested_position</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>use_jo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Move method for normal stepper and servo motor objects. </p>
<p>&lt; format string for coordinate system move</p>
<p>&lt; coordinate system bit</p>
<p>&lt; the requested position in units of "counts"</p>
<p>&lt; motor and coordinate system;</p>
<p>&lt; our axis </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mp</td><td>The motor to move </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">requested_position</td><td>Where to move it </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">use_jo</td><td>1 to force jog, 0 for motion prog </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lspmac_8c_source.html#l02530">2530</a> of file <a class="el" href="lspmac_8c_source.html">lspmac.c</a>.</p>
<div class="fragment"><div class="line">                            {</div>
<div class="line">  <span class="keywordtype">char</span> *fmt;                    </div>
<div class="line">  <span class="keywordtype">int</span> q100;                     </div>
<div class="line">  <span class="keywordtype">int</span> requested_pos_cnts;       </div>
<div class="line">  <span class="keywordtype">int</span> coord_num, motor_num;     </div>
<div class="line">  <span class="keywordtype">char</span> *axis;                   </div>
<div class="line">  <span class="keywordtype">double</span> u2c;</div>
<div class="line">  <span class="keywordtype">double</span> neutral_pos;</div>
<div class="line"></div>
<div class="line">  pthread_mutex_lock( &amp;(mp-&gt;<a class="code" href="structlspmac__motor__struct.html#a188c5b1e991750ce2ffd53e0192e0907" title="coordinate waiting for motor to be done">mutex</a>));</div>
<div class="line"></div>
<div class="line">  u2c         = <a class="code" href="lsredis_8c.html#aa8daf63b794b6b6341018feec205cb7d">lsredis_getd</a>(   mp-&gt;<a class="code" href="structlspmac__motor__struct.html#a8838915ebb6f9989944117c8197d5e86" title="conversion from counts to units: 0.0 means not loaded yet">u2c</a>);</div>
<div class="line">  motor_num   = <a class="code" href="lsredis_8c.html#a1923f998441f4f451204dfd214d52218">lsredis_getl</a>(   mp-&gt;<a class="code" href="structlspmac__motor__struct.html#ad6a51cca3c7e5f79168e5c33fd9e736b" title="pmac motor number">motor_num</a>);</div>
<div class="line">  coord_num   = <a class="code" href="lsredis_8c.html#a1923f998441f4f451204dfd214d52218">lsredis_getl</a>(   mp-&gt;<a class="code" href="structlspmac__motor__struct.html#a5614e003272e8323f8809bf7b6559532" title="coordinate system this motor belongs to (0 if none)">coord_num</a>);</div>
<div class="line">  axis        = <a class="code" href="lsredis_8c.html#ac1994e56114b2315294527d76311f829" title="return a copy of the key&#39;s string value">lsredis_getstr</a>( mp-&gt;<a class="code" href="structlspmac__motor__struct.html#a7437ef16c2dce65bde4dda1ea00e9df3" title="the axis (X, Y, Z, etc) or null if not in a coordinate system">axis</a>);</div>
<div class="line">  neutral_pos = <a class="code" href="lsredis_8c.html#aa8daf63b794b6b6341018feec205cb7d">lsredis_getd</a>(   mp-&gt;<a class="code" href="structlspmac__motor__struct.html#ae931e9bc9fc2fa82ca649334fc052fbe" title="zero offset">neutral_pos</a>);</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span>( u2c == 0.0) {</div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="comment">// Shouldn&#39;t try moving a motor that has no units defined</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    pthread_mutex_unlock( &amp;(mp-&gt;<a class="code" href="structlspmac__motor__struct.html#a188c5b1e991750ce2ffd53e0192e0907" title="coordinate waiting for motor to be done">mutex</a>));</div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">  }</div>
<div class="line">  mp-&gt;<a class="code" href="structlspmac__motor__struct.html#af8cdc94c6e2478b12ce942d4cf1d7499" title="The position as requested by the user.">requested_position</a> = requested_position;</div>
<div class="line">  mp-&gt;<a class="code" href="structlspmac__motor__struct.html#ab7bd8bff48953ce05c758598d75877ac" title="set to 1 when request is queued, zero after motion has toggled">not_done</a>     = 1;</div>
<div class="line">  mp-&gt;<a class="code" href="structlspmac__motor__struct.html#a68c471836f52707fa8582f7860cf500f" title="set to 1 when motion has been verified to have started">motion_seen</a>  = 0;</div>
<div class="line">  mp-&gt;<a class="code" href="structlspmac__motor__struct.html#a59a7f007476b2428fd3c5bd7f24440e8" title="Motion command verified sent to pmac.">command_sent</a> = 0;</div>
<div class="line">  mp-&gt;<a class="code" href="structlspmac__motor__struct.html#a6e8dc9c11dc52a439fe9837230f93ce2" title="requested position">requested_pos_cnts</a> = u2c * (requested_position + neutral_pos);</div>
<div class="line">  requested_pos_cnts = mp-&gt;<a class="code" href="structlspmac__motor__struct.html#a6e8dc9c11dc52a439fe9837230f93ce2" title="requested position">requested_pos_cnts</a>;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span>( use_jog || axis == NULL || *axis == 0) {</div>
<div class="line">    use_jog = 1;</div>
<div class="line">  } <span class="keywordflow">else</span> {</div>
<div class="line">    use_jog = 0;</div>
<div class="line">    q100 = 1 &lt;&lt; (coord_num -1);</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  pthread_mutex_unlock( &amp;(mp-&gt;<a class="code" href="structlspmac__motor__struct.html#a188c5b1e991750ce2ffd53e0192e0907" title="coordinate waiting for motor to be done">mutex</a>));</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span>( !use_jog) {</div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="comment">// Make sure the coordinate system is not moving something, wait if it is</span></div>
<div class="line">    <span class="comment">// TODO: put in a timeout so we have a way out if something goes wrong</span></div>
<div class="line">    <span class="comment">// TODO: are we sure this thread is not the one moving it?</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    pthread_mutex_lock( &amp;<a class="code" href="lspmac_8c.html#a85679cac947e199c88794f8e5a12bf5f" title="Coordinate moving motors between threads.">lspmac_moving_mutex</a>);</div>
<div class="line">    <a class="code" href="lslogging_8c.html#a0e756b36671055ef02a8f04d2ba8a93b" title="The routine everyone will be talking about.">lslogging_log_message</a>( <span class="stringliteral">&quot;lspmac_move_or_jog_abs_queue: waiting for previous moves to end.  lspmac_moving_flags = %0x&quot;</span>, <a class="code" href="lspmac_8c.html#a7a32c617c183166308241e270959df56" title="Flag used to implement motor moving condition.">lspmac_moving_flags</a>);</div>
<div class="line">    <span class="keywordflow">while</span>( (<a class="code" href="lspmac_8c.html#a7a32c617c183166308241e270959df56" title="Flag used to implement motor moving condition.">lspmac_moving_flags</a> &amp; q100) != 0)</div>
<div class="line">      pthread_cond_wait( &amp;<a class="code" href="lspmac_8c.html#a57547d211906c981ef20257eba99f8df" title="Wait for motor(s) to finish moving condition.">lspmac_moving_cond</a>, &amp;<a class="code" href="lspmac_8c.html#a85679cac947e199c88794f8e5a12bf5f" title="Coordinate moving motors between threads.">lspmac_moving_mutex</a>);</div>
<div class="line">    pthread_mutex_unlock( &amp;<a class="code" href="lspmac_8c.html#a85679cac947e199c88794f8e5a12bf5f" title="Coordinate moving motors between threads.">lspmac_moving_mutex</a>);</div>
<div class="line">    <a class="code" href="lslogging_8c.html#a0e756b36671055ef02a8f04d2ba8a93b" title="The routine everyone will be talking about.">lslogging_log_message</a>( <span class="stringliteral">&quot;lspmac_move_or_jog_abs_queue: Done.  lspmac_moving_flags = %0x&quot;</span>, <a class="code" href="lspmac_8c.html#a7a32c617c183166308241e270959df56" title="Flag used to implement motor moving condition.">lspmac_moving_flags</a>);</div>
<div class="line"></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="comment">// Set the &quot;we are moving this coordinate system&quot; flag</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <a class="code" href="lspmac_8c.html#afab9e8f0502a92ee5cf93209af710f81" title="prepare (queue up) a line to send the dpram ascii command interface">lspmac_SockSendDPline</a>( NULL, <span class="stringliteral">&quot;M5075=(M5075 | %d)&quot;</span>, q100);</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">switch</span>( *axis) {</div>
<div class="line">    <span class="keywordflow">case</span> <span class="charliteral">&#39;A&#39;</span>:</div>
<div class="line">      fmt = <span class="stringliteral">&quot;&amp;%d Q16=%d Q100=%d B146R&quot;</span>;</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">case</span> <span class="charliteral">&#39;B&#39;</span>:</div>
<div class="line">      fmt = <span class="stringliteral">&quot;&amp;%d Q17=%d Q100=%d B147R&quot;</span>;</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">case</span> <span class="charliteral">&#39;C&#39;</span>:</div>
<div class="line">      fmt = <span class="stringliteral">&quot;&amp;%d Q18=%d Q100=%d B148R&quot;</span>;</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> <span class="charliteral">&#39;X&#39;</span>:</div>
<div class="line">      fmt = <span class="stringliteral">&quot;&amp;%d Q10=%d Q100=%d B140R&quot;</span>;</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">case</span> <span class="charliteral">&#39;Y&#39;</span>:</div>
<div class="line">      fmt = <span class="stringliteral">&quot;&amp;%d Q11=%d Q100=%d B141R&quot;</span>;</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">case</span> <span class="charliteral">&#39;Z&#39;</span>:</div>
<div class="line">      fmt = <span class="stringliteral">&quot;&amp;%d Q12=%d Q100=%d B142R&quot;</span>;</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">case</span> <span class="charliteral">&#39;U&#39;</span>:</div>
<div class="line">      fmt = <span class="stringliteral">&quot;&amp;%d Q13=%d Q100=%d B143R&quot;</span>;</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">case</span> <span class="charliteral">&#39;V&#39;</span>:</div>
<div class="line">      fmt = <span class="stringliteral">&quot;&amp;%d Q14=%d Q100=%d B144R&quot;</span>;</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">case</span> <span class="charliteral">&#39;W&#39;</span>:</div>
<div class="line">      fmt = <span class="stringliteral">&quot;&amp;%d Q15=%d Q100=%d B145R&quot;</span>;</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="comment">// Make sure the flag has been seen</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    pthread_mutex_lock( &amp;<a class="code" href="lspmac_8c.html#a85679cac947e199c88794f8e5a12bf5f" title="Coordinate moving motors between threads.">lspmac_moving_mutex</a>);</div>
<div class="line">    <a class="code" href="lslogging_8c.html#a0e756b36671055ef02a8f04d2ba8a93b" title="The routine everyone will be talking about.">lslogging_log_message</a>( <span class="stringliteral">&quot;lspmac_move_or_jog_abs_queue: waiting for moving flag to propagate.  lspmac_moving_flags = %0x&quot;</span>, <a class="code" href="lspmac_8c.html#a7a32c617c183166308241e270959df56" title="Flag used to implement motor moving condition.">lspmac_moving_flags</a>);</div>
<div class="line">    <span class="keywordflow">while</span>( (<a class="code" href="lspmac_8c.html#a7a32c617c183166308241e270959df56" title="Flag used to implement motor moving condition.">lspmac_moving_flags</a> &amp; q100) == 0)</div>
<div class="line">      pthread_cond_wait( &amp;<a class="code" href="lspmac_8c.html#a57547d211906c981ef20257eba99f8df" title="Wait for motor(s) to finish moving condition.">lspmac_moving_cond</a>, &amp;<a class="code" href="lspmac_8c.html#a85679cac947e199c88794f8e5a12bf5f" title="Coordinate moving motors between threads.">lspmac_moving_mutex</a>);</div>
<div class="line">    pthread_mutex_unlock( &amp;<a class="code" href="lspmac_8c.html#a85679cac947e199c88794f8e5a12bf5f" title="Coordinate moving motors between threads.">lspmac_moving_mutex</a>);</div>
<div class="line">    <a class="code" href="lslogging_8c.html#a0e756b36671055ef02a8f04d2ba8a93b" title="The routine everyone will be talking about.">lslogging_log_message</a>( <span class="stringliteral">&quot;lspmac_move_or_jog_abs_queue: Done.  lspmac_moving_flags = %0x&quot;</span>, <a class="code" href="lspmac_8c.html#a7a32c617c183166308241e270959df56" title="Flag used to implement motor moving condition.">lspmac_moving_flags</a>);</div>
<div class="line">  }</div>
<div class="line">  pthread_mutex_lock( &amp;(mp-&gt;<a class="code" href="structlspmac__motor__struct.html#a188c5b1e991750ce2ffd53e0192e0907" title="coordinate waiting for motor to be done">mutex</a>));</div>
<div class="line">  <span class="keywordflow">if</span>( use_jog) {</div>
<div class="line">    <a class="code" href="lspmac_8c.html#afab9e8f0502a92ee5cf93209af710f81" title="prepare (queue up) a line to send the dpram ascii command interface">lspmac_SockSendDPline</a>( mp-&gt;<a class="code" href="structlspmac__motor__struct.html#aa90af2f6f1489f1befe1d0891e51575a" title="Name of motor as refered by ls database kvs table.">name</a>, <span class="stringliteral">&quot;#%d j=%d&quot;</span>, motor_num, requested_pos_cnts);</div>
<div class="line">  } <span class="keywordflow">else</span> {</div>
<div class="line">    <a class="code" href="lspmac_8c.html#afab9e8f0502a92ee5cf93209af710f81" title="prepare (queue up) a line to send the dpram ascii command interface">lspmac_SockSendDPline</a>( mp-&gt;<a class="code" href="structlspmac__motor__struct.html#aa90af2f6f1489f1befe1d0891e51575a" title="Name of motor as refered by ls database kvs table.">name</a>, fmt, coord_num, requested_pos_cnts, q100);</div>
<div class="line">  }</div>
<div class="line">  pthread_mutex_unlock( &amp;(mp-&gt;<a class="code" href="structlspmac__motor__struct.html#a188c5b1e991750ce2ffd53e0192e0907" title="coordinate waiting for motor to be done">mutex</a>));</div>
<div class="line"></div>
<div class="line">  free( axis);</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="adeec17e53dfc490f2a954b97fe95f0a7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lspmac_move_or_jog_preset_queue </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="pgpmac_8h.html#aa5067fcbaabc5bbfdc52492495518c96">lspmac_motor_t</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>move using a preset value </p>

<p>Definition at line <a class="el" href="lspmac_8c_source.html#l02652">2652</a> of file <a class="el" href="lspmac_8c_source.html">lspmac.c</a>.</p>
<div class="fragment"><div class="line">                                       {</div>
<div class="line">  <span class="keywordtype">double</span> pos;</div>
<div class="line">  <span class="keywordtype">int</span> err;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span>( preset == NULL || *preset == 0)</div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line"></div>
<div class="line">  err = <a class="code" href="lsredis_8c.html#a1ad60526a09ca679f39174ce5d773abe">lsredis_find_preset</a>( mp-&gt;name, preset, &amp;pos);</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span>( err != 0)</div>
<div class="line">    <a class="code" href="lspmac_8c.html#a4ccd25a1a3a83cd7c9187975e52a9484" title="Move method for normal stepper and servo motor objects.">lspmac_move_or_jog_abs_queue</a>( mp, pos, use_jog);</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6809c317931c4af226e0a0217764afae"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lspmac_move_or_jog_queue </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="pgpmac_8h.html#aa5067fcbaabc5bbfdc52492495518c96">lspmac_motor_t</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a6f5751d89f83b4b436c6f8bc636e4156"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lspmac_move_preset_queue </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="pgpmac_8h.html#aa5067fcbaabc5bbfdc52492495518c96">lspmac_motor_t</a> *&#160;</td>
          <td class="paramname"><em>mp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>preset_name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Move a given motor to one of its preset positions. </p>
<p>No movement if the preset is not found. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mp</td><td>lspmac motor pointer </td></tr>
    <tr><td class="paramname">name</td><td>Name of the preset to use </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lspmac_8c_source.html#l02295">2295</a> of file <a class="el" href="lspmac_8c_source.html">lspmac.c</a>.</p>
<div class="fragment"><div class="line">                                                                      {</div>
<div class="line">  <span class="keywordtype">double</span> pos;</div>
<div class="line">  <span class="keywordtype">int</span> err;</div>
<div class="line"></div>
<div class="line">  <a class="code" href="lslogging_8c.html#a0e756b36671055ef02a8f04d2ba8a93b" title="The routine everyone will be talking about.">lslogging_log_message</a>( <span class="stringliteral">&quot;lspmac_move_preset_queue: Called with motor %s and preset named &#39;%s&#39;&quot;</span>, mp-&gt;<a class="code" href="structlspmac__motor__struct.html#aa90af2f6f1489f1befe1d0891e51575a" title="Name of motor as refered by ls database kvs table.">name</a>, preset_name);</div>
<div class="line"></div>
<div class="line">  err = <a class="code" href="lsredis_8c.html#a1ad60526a09ca679f39174ce5d773abe">lsredis_find_preset</a>( mp-&gt;<a class="code" href="structlspmac__motor__struct.html#aa90af2f6f1489f1befe1d0891e51575a" title="Name of motor as refered by ls database kvs table.">name</a>, preset_name, &amp;pos);</div>
<div class="line">  <span class="keywordflow">if</span>( err == 0)</div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line"></div>
<div class="line">  mp-&gt;<a class="code" href="structlspmac__motor__struct.html#a20db3de86854b627815b3d940555ea75" title="function to move the motor">moveAbs</a>( mp, pos);</div>
<div class="line">  <a class="code" href="lslogging_8c.html#a0e756b36671055ef02a8f04d2ba8a93b" title="The routine everyone will be talking about.">lslogging_log_message</a>( <span class="stringliteral">&quot;lspmac_move_preset_queue: moving %s to preset &#39;%s&#39; (%f)&quot;</span>, mp-&gt;<a class="code" href="structlspmac__motor__struct.html#aa90af2f6f1489f1befe1d0891e51575a" title="Name of motor as refered by ls database kvs table.">name</a>, preset_name, pos);</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af9edebb71a4ebca5dad3df63164e2004"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lspmac_moveabs_queue </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="pgpmac_8h.html#aa5067fcbaabc5bbfdc52492495518c96">lspmac_motor_t</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Use coordinate system motion program, if available, to move motor to requested position. </p>

<p>Definition at line <a class="el" href="lspmac_8c_source.html#l02672">2672</a> of file <a class="el" href="lspmac_8c_source.html">lspmac.c</a>.</p>
<div class="fragment"><div class="line">                            {</div>
<div class="line">  </div>
<div class="line">  <a class="code" href="lspmac_8c.html#a4ccd25a1a3a83cd7c9187975e52a9484" title="Move method for normal stepper and servo motor objects.">lspmac_move_or_jog_abs_queue</a>( mp, requested_position, 0);</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aae2282edace621ee65c682d03b7ccc36"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lspmac_moveabs_wait </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="pgpmac_8h.html#aa5067fcbaabc5bbfdc52492495518c96">lspmac_motor_t</a> *&#160;</td>
          <td class="paramname"><em>mp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Wait for motor to finish moving. </p>
<p>Assume motion already queued, now just wait </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mp</td><td>The motor object to wait for </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lspmac_8c_source.html#l02694">2694</a> of file <a class="el" href="lspmac_8c_source.html">lspmac.c</a>.</p>
<div class="fragment"><div class="line">                           {</div>
<div class="line">  <span class="keyword">struct </span>timespec wt;</div>
<div class="line">  <span class="keywordtype">int</span> return_code;</div>
<div class="line"></div>
<div class="line">  <span class="comment">//</span></div>
<div class="line">  <span class="comment">// Copy the queue item for the most recent move request</span></div>
<div class="line">  <span class="comment">//</span></div>
<div class="line">  pthread_mutex_lock( &amp;(mp-&gt;<a class="code" href="structlspmac__motor__struct.html#a188c5b1e991750ce2ffd53e0192e0907" title="coordinate waiting for motor to be done">mutex</a>));</div>
<div class="line">  </div>
<div class="line">  <span class="keywordflow">while</span>( mp-&gt;<a class="code" href="structlspmac__motor__struct.html#a59a7f007476b2428fd3c5bd7f24440e8" title="Motion command verified sent to pmac.">command_sent</a> == 0)</div>
<div class="line">    pthread_cond_wait( &amp;mp-&gt;<a class="code" href="structlspmac__motor__struct.html#aa0ea4108b8fed5b41ff91ca7266f3d84" title="used to signal when a motor is done moving">cond</a>, &amp;mp-&gt;<a class="code" href="structlspmac__motor__struct.html#a188c5b1e991750ce2ffd53e0192e0907" title="coordinate waiting for motor to be done">mutex</a>);</div>
<div class="line">  pthread_mutex_unlock( &amp;(mp-&gt;<a class="code" href="structlspmac__motor__struct.html#a188c5b1e991750ce2ffd53e0192e0907" title="coordinate waiting for motor to be done">mutex</a>));</div>
<div class="line"></div>
<div class="line">  <span class="comment">//</span></div>
<div class="line">  <span class="comment">// wait for the motion to have started</span></div>
<div class="line">  <span class="comment">// This will time out if the motion ends before we can read the status back</span></div>
<div class="line">  <span class="comment">// hence the added complication of time stamp of the sent packet.</span></div>
<div class="line">  <span class="comment">//</span></div>
<div class="line">  <span class="comment">// This sets up a one second wait</span></div>
<div class="line">  <span class="comment">//</span></div>
<div class="line">  clock_gettime( CLOCK_REALTIME, &amp;wt);</div>
<div class="line">  wt.tv_sec++;</div>
<div class="line"></div>
<div class="line">  return_code=0;</div>
<div class="line"></div>
<div class="line">  pthread_mutex_lock( &amp;(mp-&gt;<a class="code" href="structlspmac__motor__struct.html#a188c5b1e991750ce2ffd53e0192e0907" title="coordinate waiting for motor to be done">mutex</a>));</div>
<div class="line">  <span class="keywordflow">while</span>( mp-&gt;<a class="code" href="structlspmac__motor__struct.html#a68c471836f52707fa8582f7860cf500f" title="set to 1 when motion has been verified to have started">motion_seen</a> == 0 &amp;&amp; return_code == 0)</div>
<div class="line">    return_code = pthread_cond_timedwait( &amp;(mp-&gt;<a class="code" href="structlspmac__motor__struct.html#aa0ea4108b8fed5b41ff91ca7266f3d84" title="used to signal when a motor is done moving">cond</a>), &amp;(mp-&gt;<a class="code" href="structlspmac__motor__struct.html#a188c5b1e991750ce2ffd53e0192e0907" title="coordinate waiting for motor to be done">mutex</a>), &amp;wt);</div>
<div class="line">  </div>
<div class="line">  <span class="keywordflow">if</span>( return_code == 0) {</div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="comment">// wait for the motion that we know has started to finish</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="keywordflow">while</span>( mp-&gt;<a class="code" href="structlspmac__motor__struct.html#ab7bd8bff48953ce05c758598d75877ac" title="set to 1 when request is queued, zero after motion has toggled">not_done</a>)</div>
<div class="line">      pthread_cond_wait( &amp;(mp-&gt;<a class="code" href="structlspmac__motor__struct.html#aa0ea4108b8fed5b41ff91ca7266f3d84" title="used to signal when a motor is done moving">cond</a>), &amp;(mp-&gt;<a class="code" href="structlspmac__motor__struct.html#a188c5b1e991750ce2ffd53e0192e0907" title="coordinate waiting for motor to be done">mutex</a>));</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">//</span></div>
<div class="line">  <span class="comment">// if return code was not 0 then we know we shouldn&#39;t wait for not_done flag.</span></div>
<div class="line">  <span class="comment">// In this case the motion ended before we read the status registers</span></div>
<div class="line">  <span class="comment">//</span></div>
<div class="line">  pthread_mutex_unlock( &amp;(mp-&gt;<a class="code" href="structlspmac__motor__struct.html#a188c5b1e991750ce2ffd53e0192e0907" title="coordinate waiting for motor to be done">mutex</a>));</div>
<div class="line"></div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3a7fb93fb3fb9c4454613f30bfb0b1ee"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lspmac_run </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start up the lspmac thread. </p>

<p>Definition at line <a class="el" href="lspmac_8c_source.html#l03282">3282</a> of file <a class="el" href="lspmac_8c_source.html">lspmac.c</a>.</p>
<div class="fragment"><div class="line">                  {</div>
<div class="line">  <span class="keywordtype">char</span> **inits;</div>
<div class="line">  <a class="code" href="structlspmac__motor__struct.html" title="Motor information.">lspmac_motor_t</a> *mp;</div>
<div class="line">  <span class="keywordtype">char</span> evts[64];</div>
<div class="line">  <span class="keywordtype">int</span> <a class="code" href="namespacemk__pgpmac__redis.html#afa643a23a5984fe44c2182ada3dfa401">i</a>;</div>
<div class="line">  <span class="keywordtype">int</span> active;</div>
<div class="line"></div>
<div class="line">  pthread_create( &amp;<a class="code" href="lspmac_8c.html#a6b7011dd7d2c2d3afadff8d3e50e7677" title="our thread to manage access and communication to the pmac">pmac_thread</a>, NULL, <a class="code" href="lspmac_8c.html#abdec5883055967b1eda043670870f55f" title="Our lspmac worker thread.">lspmac_worker</a>, NULL);</div>
<div class="line"></div>
<div class="line">  <a class="code" href="lsevents_8c.html#ab0617d3f0594b51d10e34bf397096654" title="Add a callback routine to listen for a specific event.">lsevents_add_listener</a>( <span class="stringliteral">&quot;CryoSwitchChanged&quot;</span>,    <a class="code" href="lspmac_8c.html#afc00ddac633f8c8a3a699e3d22de2770">lspmac_cryoSwitchChanged_cb</a>);</div>
<div class="line">  <a class="code" href="lsevents_8c.html#ab0617d3f0594b51d10e34bf397096654" title="Add a callback routine to listen for a specific event.">lsevents_add_listener</a>( <span class="stringliteral">&quot;scint In Position&quot;</span>,    <a class="code" href="lspmac_8c.html#a8707350625ca81a089a90f8b64ce6d28" title="Maybe start drying off the scintilator.">lspmac_scint_inPosition_cb</a>);</div>
<div class="line">  <a class="code" href="lsevents_8c.html#ab0617d3f0594b51d10e34bf397096654" title="Add a callback routine to listen for a specific event.">lsevents_add_listener</a>( <span class="stringliteral">&quot;scintDried&quot;</span>,           <a class="code" href="lspmac_8c.html#a585676eb411025c7b44da958d4e98eb2" title="Turn off the dryer.">lspmac_scint_dried_cb</a>);</div>
<div class="line">  <a class="code" href="lsevents_8c.html#ab0617d3f0594b51d10e34bf397096654" title="Add a callback routine to listen for a specific event.">lsevents_add_listener</a>( <span class="stringliteral">&quot;backLight 1&quot;</span>,          <a class="code" href="lspmac_8c.html#a094f66824c57b27c9dad2ca36bd75e44" title="Turn on the backlight whenever it goes up.">lspmac_backLight_up_cb</a>);</div>
<div class="line">  <a class="code" href="lsevents_8c.html#ab0617d3f0594b51d10e34bf397096654" title="Add a callback routine to listen for a specific event.">lsevents_add_listener</a>( <span class="stringliteral">&quot;backLight 0&quot;</span>,          <a class="code" href="lspmac_8c.html#a571cf14b82b5aae163af5aec3201cd3e" title="Turn off the backlight whenever it goes down.">lspmac_backLight_down_cb</a>);</div>
<div class="line">  <a class="code" href="lsevents_8c.html#ab0617d3f0594b51d10e34bf397096654" title="Add a callback routine to listen for a specific event.">lsevents_add_listener</a>( <span class="stringliteral">&quot;cam.zoom In Position&quot;</span>, <a class="code" href="lspmac_8c.html#a55791bd8a07e5ca1dd2aeedf3c23942c" title="Set the backlight intensity whenever the zoom is changed (and the backlight is up)">lspmac_light_zoom_cb</a>);</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">for</span>( i=0; i&lt;<a class="code" href="lspmac_8c.html#a56260f012c50a591ee7f97e500f16994" title="The number of motors we manage.">lspmac_nmotors</a>; i++) {</div>
<div class="line">    snprintf( evts, <span class="keyword">sizeof</span>( evts)-1, <span class="stringliteral">&quot;%s command done&quot;</span>, <a class="code" href="lspmac_8c.html#a894c709ddd0652583d6db22e86282503" title="All our motors.">lspmac_motors</a>[i].name);</div>
<div class="line">    evts[<span class="keyword">sizeof</span>(evts)-1] = 0;</div>
<div class="line">    <a class="code" href="lsevents_8c.html#ab0617d3f0594b51d10e34bf397096654" title="Add a callback routine to listen for a specific event.">lsevents_add_listener</a>( evts, <a class="code" href="lspmac_8c.html#a611168a1076b2de45c596ed95c68445a">lspmac_command_done_cb</a>);</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"></div>
<div class="line">  <a class="code" href="lspmac_8c.html#a3816a9a1a3bb5bb89fcec8a30d863970" title="Set up lookup table for zoom.">lspmac_zoom_lut_setup</a>();</div>
<div class="line">  <a class="code" href="lspmac_8c.html#ad52a5dbc2f06247eca7619195936b85f" title="Set up lookup table for flight.">lspmac_flight_lut_setup</a>();</div>
<div class="line">  <a class="code" href="lspmac_8c.html#a4aa8c178a56276eb64138d52fe65dc8c" title="Set up lookup table for blight.">lspmac_blight_lut_setup</a>();</div>
<div class="line">  <a class="code" href="lspmac_8c.html#a54ceac41b127ad8bbad07bd90c6729dc" title="Set up lookup table for fscint.">lspmac_fscint_lut_setup</a>();</div>
<div class="line"></div>
<div class="line">  <span class="comment">//</span></div>
<div class="line">  <span class="comment">// Clear the command interfaces</span></div>
<div class="line">  <span class="comment">//</span></div>
<div class="line">  <a class="code" href="lspmac_8c.html#a8707477f9799b4cc8c6f465ecfeee24b" title="Send a control character.">lspmac_SockSendControlCharPrint</a>( NULL, <span class="stringliteral">&#39;\x18&#39;</span>);</div>
<div class="line">  {</div>
<div class="line">    uint32_t cc;</div>
<div class="line">    cc = 0;</div>
<div class="line">    <a class="code" href="lspmac_8c.html#ac60f32e1ab6d81a60155e355db752726" title="Compose a packet and send it to the PMAC.">lspmac_send_command</a>( <a class="code" href="lspmac_8c.html#a5485d08fdc80533b5cebadff63696ed2">VR_UPLOAD</a>, <a class="code" href="lspmac_8c.html#ab79207cc3145740f8c070a24c91b11e0">VR_PMAC_SETMEM</a>, 0x0e9e, 0, 4, (<span class="keywordtype">char</span> *)&amp;cc, NULL, 1, NULL);</div>
<div class="line"></div>
<div class="line">    cc = 0x18;</div>
<div class="line">    <a class="code" href="lspmac_8c.html#ac60f32e1ab6d81a60155e355db752726" title="Compose a packet and send it to the PMAC.">lspmac_send_command</a>( <a class="code" href="lspmac_8c.html#a5485d08fdc80533b5cebadff63696ed2">VR_UPLOAD</a>, <a class="code" href="lspmac_8c.html#ab79207cc3145740f8c070a24c91b11e0">VR_PMAC_SETMEM</a>, 0x0e9e, 0, 4, (<span class="keywordtype">char</span> *)&amp;cc, NULL, 1, NULL);</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">//</span></div>
<div class="line">  <span class="comment">// Initialize the MD2 pmac (ie, turn on the right plcc&#39;s etc)</span></div>
<div class="line">  <span class="comment">//</span></div>
<div class="line">  <span class="comment">/*</span></div>
<div class="line"><span class="comment">  for( inits = lsredis_get_string_array(lspmac_md2_init); *inits != NULL; inits++) {</span></div>
<div class="line"><span class="comment">    lspmac_SockSendDPline( NULL, *inits);</span></div>
<div class="line"><span class="comment">  }</span></div>
<div class="line"><span class="comment">  */</span></div>
<div class="line"></div>
<div class="line">  <span class="comment">//</span></div>
<div class="line">  <span class="comment">// Initialize the pmac&#39;s support for each motor</span></div>
<div class="line">  <span class="comment">// (ie, set the various flag for when a motor is active or not)</span></div>
<div class="line">  <span class="comment">//</span></div>
<div class="line">  <span class="keywordflow">for</span>( i=0; i&lt;<a class="code" href="lspmac_8c.html#a56260f012c50a591ee7f97e500f16994" title="The number of motors we manage.">lspmac_nmotors</a>; i++) {</div>
<div class="line">    mp = &amp;(<a class="code" href="lspmac_8c.html#a894c709ddd0652583d6db22e86282503" title="All our motors.">lspmac_motors</a>[<a class="code" href="namespacemk__pgpmac__redis.html#afa643a23a5984fe44c2182ada3dfa401">i</a>]);</div>
<div class="line">    active = <a class="code" href="lsredis_8c.html#abbb4e5ece19ebd130e1be18036752a08">lsredis_getb</a>( mp-&gt;<a class="code" href="structlspmac__motor__struct.html#aed4998885bcd5a2a30069637180f58e3" title="Use the motor (&quot;true&quot;) or not (&quot;false&quot;)">active</a>);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// if there is a problem with &quot;active&quot; then don&#39;t do anything</span></div>
<div class="line">    <span class="comment">// On the other hand, various combinations of yes/no true/fals 1/0 should work</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="keywordflow">switch</span>( active) {</div>
<div class="line">    <span class="keywordflow">case</span> 1:</div>
<div class="line">      inits = <a class="code" href="lsredis_8c.html#abe31d0e11c41b2235307612c963bb652">lsredis_get_string_array</a>( mp-&gt;<a class="code" href="structlspmac__motor__struct.html#ac2a02f137e4a35db816bc728290d3558" title="pmac commands to make this motor active">active_init</a>);</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">case</span> 0:</div>
<div class="line">      inits = <a class="code" href="lsredis_8c.html#abe31d0e11c41b2235307612c963bb652">lsredis_get_string_array</a>( mp-&gt;<a class="code" href="structlspmac__motor__struct.html#ab329ce9b277eca9984c18417dece7bf7" title="pmac commands to inactivate the motor">inactive_init</a>);</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">default</span>:</div>
<div class="line">      <a class="code" href="lslogging_8c.html#a0e756b36671055ef02a8f04d2ba8a93b" title="The routine everyone will be talking about.">lslogging_log_message</a>( <span class="stringliteral">&quot;lspmac_run: motor %s is neither active nor inactive (!?)&quot;</span>, mp-&gt;<a class="code" href="structlspmac__motor__struct.html#aa90af2f6f1489f1befe1d0891e51575a" title="Name of motor as refered by ls database kvs table.">name</a>);</div>
<div class="line">      inits = NULL;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span>( inits != NULL) {</div>
<div class="line">      <span class="keywordflow">while</span>( *inits != NULL) {</div>
<div class="line">        <a class="code" href="lspmac_8c.html#afab9e8f0502a92ee5cf93209af710f81" title="prepare (queue up) a line to send the dpram ascii command interface">lspmac_SockSendDPline</a>( NULL, *inits);</div>
<div class="line">        inits++;</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a49a53bb92535ca2b62208dce41760fbb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lspmac_SockSendDPline </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>prepare (queue up) a line to send the dpram ascii command interface </p>

<p>Definition at line <a class="el" href="lspmac_8c_source.html#l01921">1921</a> of file <a class="el" href="lspmac_8c_source.html">lspmac.c</a>.</p>
<div class="fragment"><div class="line">                                                         {</div>
<div class="line">  va_list arg_ptr;</div>
<div class="line">  uint32_t index;</div>
<div class="line">  <span class="keywordtype">char</span> *pl;</div>
<div class="line">  </div>
<div class="line">  pthread_mutex_lock( &amp;<a class="code" href="lspmac_8c.html#a2ff142105e17d933871d09759e7082f8" title="Keep too many processes from sending commands at once.">lspmac_ascii_mutex</a>);</div>
<div class="line">  index = <a class="code" href="lspmac_8c.html#a09701de0235acaeae5abf4e04268be33">lspmac_dpascii_on</a>++ % <a class="code" href="lspmac_8c.html#a3a407e2e4d57ac45ecd700f8bad3d3b5">LSPMAC_DPASCII_QUEUE_LENGTH</a>;</div>
<div class="line"></div>
<div class="line">  pl = <a class="code" href="lspmac_8c.html#a2bd5340143f40b5e6404a381fb438710">lspmac_dpascii_queue</a>[index].<a class="code" href="structlspmac__dpascii__queue__struct.html#a318d65317b14eba9e38efd0ab0133a5c">pl</a>;</div>
<div class="line"></div>
<div class="line">  va_start( arg_ptr, fmt);</div>
<div class="line">  vsnprintf( pl, 159, fmt, arg_ptr);</div>
<div class="line">  pl[159] = 0;</div>
<div class="line">  va_end( arg_ptr);</div>
<div class="line"></div>
<div class="line">  <a class="code" href="lspmac_8c.html#a2bd5340143f40b5e6404a381fb438710">lspmac_dpascii_queue</a>[index].<a class="code" href="structlspmac__dpascii__queue__struct.html#a8775c09713a917f4ddd80a3a5a8a4668">event</a> = event;</div>
<div class="line"></div>
<div class="line">  pthread_mutex_unlock( &amp;<a class="code" href="lspmac_8c.html#a2ff142105e17d933871d09759e7082f8" title="Keep too many processes from sending commands at once.">lspmac_ascii_mutex</a>);</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a79f86193e36c823157049061b94627a7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pgpmac_8h.html#a99c275e32ad897dca34d196b91f038cb">pmac_cmd_queue_t</a>* lspmac_SockSendline </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a one line command. </p>
<p>Uses printf style arguments. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">event</td><td>base name for events </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fmt</td><td>Printf style format string </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lspmac_8c_source.html#l01058">1058</a> of file <a class="el" href="lspmac_8c_source.html">lspmac.c</a>.</p>
<div class="fragment"><div class="line">                                         {</div>
<div class="line">  va_list arg_ptr;</div>
<div class="line">  <span class="keywordtype">char</span> payload[1400];</div>
<div class="line"></div>
<div class="line">  va_start( arg_ptr, fmt);</div>
<div class="line">  vsnprintf( payload, <span class="keyword">sizeof</span>(payload)-1, fmt, arg_ptr);</div>
<div class="line">  payload[ <span class="keyword">sizeof</span>(payload)-1] = 0;</div>
<div class="line">  va_end( arg_ptr);</div>
<div class="line"></div>
<div class="line">  <a class="code" href="lslogging_8c.html#a0e756b36671055ef02a8f04d2ba8a93b" title="The routine everyone will be talking about.">lslogging_log_message</a>( payload);</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">return</span> <a class="code" href="lspmac_8c.html#ac60f32e1ab6d81a60155e355db752726" title="Compose a packet and send it to the PMAC.">lspmac_send_command</a>( <a class="code" href="lspmac_8c.html#af24ecdc10723dc8fd6320fef416ae514">VR_DOWNLOAD</a>, <a class="code" href="lspmac_8c.html#a772b2ea2ad93989ae4275c79a93525ee">VR_PMAC_SENDLINE</a>, 0, 0, strlen( payload), payload, <a class="code" href="lspmac_8c.html#a81e8e315099cf9b6eef0335b01f97bfd" title="Receive a reply that does not require multiple buffers.">lspmac_GetShortReplyCB</a>, 0, event);</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa8bf745a9ec388783009e2275a8b56f8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lspmac_video_rotate </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>secs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Special motion program to collect centering video. </p>

<p>Definition at line <a class="el" href="lspmac_8c_source.html#l02499">2499</a> of file <a class="el" href="lspmac_8c_source.html">lspmac.c</a>.</p>
<div class="fragment"><div class="line">                                       {</div>
<div class="line">  <span class="keywordtype">double</span> q10;           <span class="comment">// starting position (counts)</span></div>
<div class="line">  <span class="keywordtype">double</span> q11;           <span class="comment">// delta counts</span></div>
<div class="line">  <span class="keywordtype">double</span> q12;           <span class="comment">// milliseconds to run over delta</span></div>
<div class="line">  </div>
<div class="line">  <span class="keywordtype">double</span> u2c;</div>
<div class="line">  <span class="keywordtype">double</span> neutral_pos;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span>( secs &lt;= 0.0)</div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line"></div>
<div class="line">  <a class="code" href="lspmac_8c.html#ae06d2291c1996ffb7dcf7d132e25b038" title="Indicate we&#39;d really like to know when omega crosses zero.">omega_zero_search</a> = 1;</div>
<div class="line"></div>
<div class="line">  pthread_mutex_lock( &amp;(<a class="code" href="lspmac_8c.html#a8237e646ce032a840637a4ef7bff49b9" title="MD2 omega axis (the air bearing)">omega</a>-&gt;<a class="code" href="structlspmac__motor__struct.html#a188c5b1e991750ce2ffd53e0192e0907" title="coordinate waiting for motor to be done">mutex</a>));</div>
<div class="line">  u2c         = <a class="code" href="lsredis_8c.html#aa8daf63b794b6b6341018feec205cb7d">lsredis_getd</a>( <a class="code" href="lspmac_8c.html#a8237e646ce032a840637a4ef7bff49b9" title="MD2 omega axis (the air bearing)">omega</a>-&gt;<a class="code" href="structlspmac__motor__struct.html#a8838915ebb6f9989944117c8197d5e86" title="conversion from counts to units: 0.0 means not loaded yet">u2c</a>);</div>
<div class="line">  neutral_pos = <a class="code" href="lsredis_8c.html#aa8daf63b794b6b6341018feec205cb7d">lsredis_getd</a>( <a class="code" href="lspmac_8c.html#a8237e646ce032a840637a4ef7bff49b9" title="MD2 omega axis (the air bearing)">omega</a>-&gt;<a class="code" href="structlspmac__motor__struct.html#ae931e9bc9fc2fa82ca649334fc052fbe" title="zero offset">neutral_pos</a>);</div>
<div class="line"></div>
<div class="line">  q10 = neutral_pos * u2c;</div>
<div class="line">  q11 = 360.0 * u2c;</div>
<div class="line">  q12 = 1000 * secs;</div>
<div class="line">  </div>
<div class="line"></div>
<div class="line">  <a class="code" href="lspmac_8c.html#aea11895d2ec4a3324f4baa9d24cd192d" title="rate (cnts/sec) that omega was traveling when it crossed zero">omega_zero_velocity</a> = 360.0 * u2c / secs;     <span class="comment">// counts/second to back calculate zero crossing time</span></div>
<div class="line"></div>
<div class="line">  <a class="code" href="lspmac_8c.html#afab9e8f0502a92ee5cf93209af710f81" title="prepare (queue up) a line to send the dpram ascii command interface">lspmac_SockSendDPline</a>( <a class="code" href="lspmac_8c.html#a8237e646ce032a840637a4ef7bff49b9" title="MD2 omega axis (the air bearing)">omega</a>-&gt;<a class="code" href="structlspmac__motor__struct.html#aa90af2f6f1489f1befe1d0891e51575a" title="Name of motor as refered by ls database kvs table.">name</a>, <span class="stringliteral">&quot;&amp;1 Q10=%.1f Q11=%.1f Q12=%.1f Q13=(I117) Q14=(I116) B240R&quot;</span>, q10, q11, q12);</div>
<div class="line">  pthread_mutex_unlock( &amp;(<a class="code" href="lspmac_8c.html#a8237e646ce032a840637a4ef7bff49b9" title="MD2 omega axis (the air bearing)">omega</a>-&gt;<a class="code" href="structlspmac__motor__struct.html#a188c5b1e991750ce2ffd53e0192e0907" title="coordinate waiting for motor to be done">mutex</a>));</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac356cd43e46799929242dcf5214df7f6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lsredis_cmpnstr </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="pgpmac_8h.html#ad449de06d02791adf2498d2a1e1f909c">lsredis_obj_t</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="lsredis_8c_source.html#l00236">236</a> of file <a class="el" href="lsredis_8c_source.html">lsredis.c</a>.</p>
<div class="fragment"><div class="line">                                                       {</div>
<div class="line">  <span class="keywordtype">int</span> rtn;</div>
<div class="line">  pthread_mutex_lock( &amp;p-&gt;<a class="code" href="structlsredis__obj__struct.html#a0da18e7d0f7d52459bbc6fbc696d5252" title="Don&#39;t let anyone use an old value.">mutex</a>);</div>
<div class="line">  <span class="keywordflow">while</span>( p-&gt;<a class="code" href="structlsredis__obj__struct.html#a338ffa4123bd06b39c8b58f5e695575e" title="1 if we think the value is good, 0 otherwise">valid</a> == 0)</div>
<div class="line">    pthread_cond_wait( &amp;p-&gt;<a class="code" href="structlsredis__obj__struct.html#a356f6a228bb19ac7d66fdb1c875d68be" title="wait for a valid value">cond</a>, &amp;p-&gt;<a class="code" href="structlsredis__obj__struct.html#a0da18e7d0f7d52459bbc6fbc696d5252" title="Don&#39;t let anyone use an old value.">mutex</a>);</div>
<div class="line">  </div>
<div class="line">  rtn = strncmp( p-&gt;<a class="code" href="structlsredis__obj__struct.html#a0465c65288e8101805a6f91049164517" title="our value">value</a>, s, n);</div>
<div class="line">  pthread_mutex_unlock( &amp;p-&gt;<a class="code" href="structlsredis__obj__struct.html#a0da18e7d0f7d52459bbc6fbc696d5252" title="Don&#39;t let anyone use an old value.">mutex</a>);</div>
<div class="line">  <span class="keywordflow">return</span> rtn;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a9fc8fd0db4c71c5eae68682b43103078"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lsredis_cmpstr </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="pgpmac_8h.html#ad449de06d02791adf2498d2a1e1f909c">lsredis_obj_t</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>s</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="lsredis_8c_source.html#l00225">225</a> of file <a class="el" href="lsredis_8c_source.html">lsredis.c</a>.</p>
<div class="fragment"><div class="line">                                               {</div>
<div class="line">  <span class="keywordtype">int</span> rtn;</div>
<div class="line">  pthread_mutex_lock( &amp;p-&gt;<a class="code" href="structlsredis__obj__struct.html#a0da18e7d0f7d52459bbc6fbc696d5252" title="Don&#39;t let anyone use an old value.">mutex</a>);</div>
<div class="line">  <span class="keywordflow">while</span>( p-&gt;<a class="code" href="structlsredis__obj__struct.html#a338ffa4123bd06b39c8b58f5e695575e" title="1 if we think the value is good, 0 otherwise">valid</a> == 0)</div>
<div class="line">    pthread_cond_wait( &amp;p-&gt;<a class="code" href="structlsredis__obj__struct.html#a356f6a228bb19ac7d66fdb1c875d68be" title="wait for a valid value">cond</a>, &amp;p-&gt;<a class="code" href="structlsredis__obj__struct.html#a0da18e7d0f7d52459bbc6fbc696d5252" title="Don&#39;t let anyone use an old value.">mutex</a>);</div>
<div class="line">  </div>
<div class="line">  rtn = strcmp( p-&gt;<a class="code" href="structlsredis__obj__struct.html#a0465c65288e8101805a6f91049164517" title="our value">value</a>, s);</div>
<div class="line">  pthread_mutex_unlock( &amp;p-&gt;<a class="code" href="structlsredis__obj__struct.html#a0da18e7d0f7d52459bbc6fbc696d5252" title="Don&#39;t let anyone use an old value.">mutex</a>);</div>
<div class="line">  <span class="keywordflow">return</span> rtn;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1ad60526a09ca679f39174ce5d773abe"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lsredis_find_preset </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>base</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>preset_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>dval</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="lsredis_8c_source.html#l00756">756</a> of file <a class="el" href="lsredis_8c_source.html">lsredis.c</a>.</p>
<div class="fragment"><div class="line">                                                                      {</div>
<div class="line">  <span class="keywordtype">char</span> s[512];</div>
<div class="line">  <span class="keywordtype">int</span> <a class="code" href="namespacemk__pgpmac__redis.html#afa643a23a5984fe44c2182ada3dfa401">i</a>;</div>
<div class="line">  <span class="keywordtype">int</span> err;</div>
<div class="line">  ENTRY htab_input, *htab_output;</div>
<div class="line">  <a class="code" href="structlsredis__obj__struct.html" title="Redis Object Basic object whose value is sychronized with our redis db.">lsredis_obj_t</a> *<a class="code" href="namespacemk__pgpmac__redis.html#a11daf2847f2dc94562b5b61b3f412574">p</a>;</div>
<div class="line"></div>
<div class="line">  i = 0;</div>
<div class="line">  <span class="keywordflow">for</span>( i=0; i&lt;1024; i++) {</div>
<div class="line">    snprintf( s, <span class="keyword">sizeof</span>( s)-1, <span class="stringliteral">&quot;%s.%s.presets.%d.name&quot;</span>, <a class="code" href="lsredis_8c.html#acdca9095c7a3288d7febe9f4c440a6e9">lsredis_head</a>, base, i);</div>
<div class="line">    s[<span class="keyword">sizeof</span>(s)-1] = 0;</div>
<div class="line">    htab_input.key  = s;</div>
<div class="line">    htab_input.data = NULL;</div>
<div class="line">    err = hsearch_r( htab_input, FIND, &amp;htab_output, &amp;<a class="code" href="lsredis_8c.html#a42aec6aa74072797ec0344847b0e9e39">lsredis_htab</a>);</div>
<div class="line">    <span class="keywordflow">if</span>( err == 0) {</div>
<div class="line">      <span class="comment">// We&#39;ve run out of names to look for: done</span></div>
<div class="line">      <a class="code" href="lslogging_8c.html#a0e756b36671055ef02a8f04d2ba8a93b" title="The routine everyone will be talking about.">lslogging_log_message</a>( <span class="stringliteral">&quot;lsredis_find_preset: no preset for motor %s named &#39;%s&#39;&quot;</span>, base, preset_name);</div>
<div class="line">      *dval = 0.0;</div>
<div class="line">      <span class="keywordflow">return</span> 0;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Check if we have a match</span></div>
<div class="line">    p = htab_output-&gt;data;</div>
<div class="line">    <span class="keywordflow">if</span>( <a class="code" href="lsredis_8c.html#a9fc8fd0db4c71c5eae68682b43103078">lsredis_cmpstr</a>( p, preset_name)==0) {</div>
<div class="line">      <span class="comment">// got a match, now look for the position</span></div>
<div class="line">      snprintf( s, <span class="keyword">sizeof</span>( s)-1, <span class="stringliteral">&quot;%s.%s.presets.%d.position&quot;</span>, <a class="code" href="lsredis_8c.html#acdca9095c7a3288d7febe9f4c440a6e9">lsredis_head</a>, base, i);</div>
<div class="line">      s[<span class="keyword">sizeof</span>(s)-1] = 0;</div>
<div class="line">      htab_input.key = s;</div>
<div class="line">      htab_input.data = NULL;</div>
<div class="line">      err = hsearch_r( htab_input, FIND, &amp;htab_output, &amp;<a class="code" href="lsredis_8c.html#a42aec6aa74072797ec0344847b0e9e39">lsredis_htab</a>);</div>
<div class="line">      <span class="keywordflow">if</span>( err == 0) {</div>
<div class="line">        <span class="comment">// Name but not position? odd.</span></div>
<div class="line">        <a class="code" href="lslogging_8c.html#a0e756b36671055ef02a8f04d2ba8a93b" title="The routine everyone will be talking about.">lslogging_log_message</a>( <span class="stringliteral">&quot;lsredis_find_preset: Error, motor %s preset &#39;%s&#39; has no position defined&quot;</span>, base, preset_name);</div>
<div class="line">        *dval = 0.0;</div>
<div class="line">        <span class="keywordflow">return</span> 0;</div>
<div class="line">      }</div>
<div class="line">      p = htab_output-&gt;data;</div>
<div class="line">      *dval = <a class="code" href="lsredis_8c.html#aa8daf63b794b6b6341018feec205cb7d">lsredis_getd</a>( p);</div>
<div class="line">      <span class="keywordflow">return</span> 1;</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">  <span class="comment">// How&#39;d we get here?</span></div>
<div class="line">  <span class="comment">// did someone really define that many presets?  And then looked for one that&#39;s not there?</span></div>
<div class="line">  *dval = 0;</div>
<div class="line">  <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6d9f550b9ba36acd237925164abe3ffc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pgpmac_8h.html#ad449de06d02791adf2498d2a1e1f909c">lsredis_obj_t</a>* lsredis_get_obj </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="lsredis_8c_source.html#l00524">524</a> of file <a class="el" href="lsredis_8c_source.html">lsredis.c</a>.</p>
<div class="fragment"><div class="line">                                                {</div>
<div class="line">  <a class="code" href="structlsredis__obj__struct.html" title="Redis Object Basic object whose value is sychronized with our redis db.">lsredis_obj_t</a> *rtn;</div>
<div class="line">  va_list arg_ptr;</div>
<div class="line">  <span class="keywordtype">char</span> k[512];</div>
<div class="line">  <span class="keywordtype">char</span> *kp;</div>
<div class="line">  <span class="keywordtype">int</span> nkp;</div>
<div class="line"></div>
<div class="line">  va_start( arg_ptr, fmt);</div>
<div class="line">  vsnprintf( k, <span class="keyword">sizeof</span>(k)-1, fmt, arg_ptr);</div>
<div class="line">  k[<span class="keyword">sizeof</span>(k)-1] = 0;</div>
<div class="line">  va_end( arg_ptr);</div>
<div class="line"></div>
<div class="line">  nkp = strlen(k) + strlen( <a class="code" href="lsredis_8c.html#acdca9095c7a3288d7febe9f4c440a6e9">lsredis_head</a>) + 16;         <span class="comment">// 16 is overkill. I know. Get over it.</span></div>
<div class="line">  kp = calloc( nkp, <span class="keyword">sizeof</span>( <span class="keywordtype">char</span>));</div>
<div class="line">  <span class="keywordflow">if</span>( kp == NULL) {</div>
<div class="line">    <a class="code" href="lslogging_8c.html#a0e756b36671055ef02a8f04d2ba8a93b" title="The routine everyone will be talking about.">lslogging_log_message</a>( <span class="stringliteral">&quot;lsredis_get_obj: Out of memory&quot;</span>);</div>
<div class="line">    exit( -1);</div>
<div class="line">  }</div>
<div class="line">  </div>
<div class="line">  snprintf( kp, nkp-1, <span class="stringliteral">&quot;%s.%s&quot;</span>, <a class="code" href="lsredis_8c.html#acdca9095c7a3288d7febe9f4c440a6e9">lsredis_head</a>, k);</div>
<div class="line">  kp[nkp-1] = 0;</div>
<div class="line"></div>
<div class="line">  pthread_mutex_lock( &amp;<a class="code" href="lsredis_8c.html#a390e8acf789b0fa41b43a794dd27e28f">lsredis_mutex</a>);</div>
<div class="line">  <span class="keywordflow">while</span>( <a class="code" href="lsredis_8c.html#a7461eb2b5974a2ffac2189007d39193c">lsredis_running</a> == 0)</div>
<div class="line">    pthread_cond_wait( &amp;<a class="code" href="lsredis_8c.html#a2f63408d16b5603541b124a78f36a5a8">lsredis_cond</a>, &amp;<a class="code" href="lsredis_8c.html#a390e8acf789b0fa41b43a794dd27e28f">lsredis_mutex</a>);</div>
<div class="line"></div>
<div class="line">  rtn = <a class="code" href="lsredis_8c.html#ac3fb8589e280bfa18ecbca6619fea637" title="Maybe add a new object Used internally for this module Must be called with lsredis_mutex locked...">_lsredis_get_obj</a>( kp);</div>
<div class="line">  pthread_mutex_unlock( &amp;<a class="code" href="lsredis_8c.html#a390e8acf789b0fa41b43a794dd27e28f">lsredis_mutex</a>);</div>
<div class="line"></div>
<div class="line">  free( kp);</div>
<div class="line">  <span class="keywordflow">return</span> rtn;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="abe31d0e11c41b2235307612c963bb652"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char** lsredis_get_string_array </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="pgpmac_8h.html#ad449de06d02791adf2498d2a1e1f909c">lsredis_obj_t</a> *&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="lsredis_8c_source.html#l00365">365</a> of file <a class="el" href="lsredis_8c_source.html">lsredis.c</a>.</p>
<div class="fragment"><div class="line">                                                   {</div>
<div class="line">  <span class="keywordtype">char</span> **rtn;</div>
<div class="line"></div>
<div class="line">  pthread_mutex_lock( &amp;p-&gt;<a class="code" href="structlsredis__obj__struct.html#a0da18e7d0f7d52459bbc6fbc696d5252" title="Don&#39;t let anyone use an old value.">mutex</a>);</div>
<div class="line">  <span class="keywordflow">while</span>( p-&gt;<a class="code" href="structlsredis__obj__struct.html#a338ffa4123bd06b39c8b58f5e695575e" title="1 if we think the value is good, 0 otherwise">valid</a> == 0)</div>
<div class="line">    pthread_cond_wait( &amp;p-&gt;<a class="code" href="structlsredis__obj__struct.html#a356f6a228bb19ac7d66fdb1c875d68be" title="wait for a valid value">cond</a>, &amp;p-&gt;<a class="code" href="structlsredis__obj__struct.html#a0da18e7d0f7d52459bbc6fbc696d5252" title="Don&#39;t let anyone use an old value.">mutex</a>);</div>
<div class="line"></div>
<div class="line">  rtn = p-&gt;<a class="code" href="structlsredis__obj__struct.html#ac065eeede0e08f25bcfedd45022fe593" title="our value as an array of strings">avalue</a>;</div>
<div class="line">  pthread_mutex_unlock( &amp;p-&gt;<a class="code" href="structlsredis__obj__struct.html#a0da18e7d0f7d52459bbc6fbc696d5252" title="Don&#39;t let anyone use an old value.">mutex</a>);</div>
<div class="line">  </div>
<div class="line">  <span class="keywordflow">return</span> rtn;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="abbb4e5ece19ebd130e1be18036752a08"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lsredis_getb </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="pgpmac_8h.html#ad449de06d02791adf2498d2a1e1f909c">lsredis_obj_t</a> *&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="lsredis_8c_source.html#l00378">378</a> of file <a class="el" href="lsredis_8c_source.html">lsredis.c</a>.</p>
<div class="fragment"><div class="line">                                    {</div>
<div class="line">  <span class="keywordtype">int</span> rtn;</div>
<div class="line"></div>
<div class="line">  pthread_mutex_lock( &amp;p-&gt;<a class="code" href="structlsredis__obj__struct.html#a0da18e7d0f7d52459bbc6fbc696d5252" title="Don&#39;t let anyone use an old value.">mutex</a>);</div>
<div class="line">  <span class="keywordflow">while</span>( p-&gt;<a class="code" href="structlsredis__obj__struct.html#a338ffa4123bd06b39c8b58f5e695575e" title="1 if we think the value is good, 0 otherwise">valid</a> == 0)</div>
<div class="line">    pthread_cond_wait( &amp;p-&gt;<a class="code" href="structlsredis__obj__struct.html#a356f6a228bb19ac7d66fdb1c875d68be" title="wait for a valid value">cond</a>, &amp;p-&gt;<a class="code" href="structlsredis__obj__struct.html#a0da18e7d0f7d52459bbc6fbc696d5252" title="Don&#39;t let anyone use an old value.">mutex</a>);</div>
<div class="line"></div>
<div class="line">  rtn = p-&gt;<a class="code" href="structlsredis__obj__struct.html#ac3df3eaa275c1e8e333024c1fa8353af" title="our value as a boolean (1 or 0) -1 means we couldn&#39;t figure it out">bvalue</a>;</div>
<div class="line">  pthread_mutex_unlock( &amp;p-&gt;<a class="code" href="structlsredis__obj__struct.html#a0da18e7d0f7d52459bbc6fbc696d5252" title="Don&#39;t let anyone use an old value.">mutex</a>);</div>
<div class="line">  </div>
<div class="line">  <span class="keywordflow">return</span> rtn;</div>
<div class="line">}  </div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa8daf63b794b6b6341018feec205cb7d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double lsredis_getd </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="pgpmac_8h.html#ad449de06d02791adf2498d2a1e1f909c">lsredis_obj_t</a> *&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="lsredis_8c_source.html#l00339">339</a> of file <a class="el" href="lsredis_8c_source.html">lsredis.c</a>.</p>
<div class="fragment"><div class="line">                                       {</div>
<div class="line">  <span class="keywordtype">double</span> rtn;</div>
<div class="line"></div>
<div class="line">  pthread_mutex_lock( &amp;p-&gt;<a class="code" href="structlsredis__obj__struct.html#a0da18e7d0f7d52459bbc6fbc696d5252" title="Don&#39;t let anyone use an old value.">mutex</a>);</div>
<div class="line">  <span class="keywordflow">while</span>( p-&gt;<a class="code" href="structlsredis__obj__struct.html#a338ffa4123bd06b39c8b58f5e695575e" title="1 if we think the value is good, 0 otherwise">valid</a> == 0)</div>
<div class="line">    pthread_cond_wait( &amp;p-&gt;<a class="code" href="structlsredis__obj__struct.html#a356f6a228bb19ac7d66fdb1c875d68be" title="wait for a valid value">cond</a>, &amp;p-&gt;<a class="code" href="structlsredis__obj__struct.html#a0da18e7d0f7d52459bbc6fbc696d5252" title="Don&#39;t let anyone use an old value.">mutex</a>);</div>
<div class="line"></div>
<div class="line">  rtn = p-&gt;<a class="code" href="structlsredis__obj__struct.html#ab60d0a71cabad6b921b6edb5a8f68996" title="our value as a double">dvalue</a>;</div>
<div class="line">  pthread_mutex_unlock( &amp;p-&gt;<a class="code" href="structlsredis__obj__struct.html#a0da18e7d0f7d52459bbc6fbc696d5252" title="Don&#39;t let anyone use an old value.">mutex</a>);</div>
<div class="line">  </div>
<div class="line">  <span class="keywordflow">return</span> rtn;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1923f998441f4f451204dfd214d52218"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long int lsredis_getl </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="pgpmac_8h.html#ad449de06d02791adf2498d2a1e1f909c">lsredis_obj_t</a> *&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="lsredis_8c_source.html#l00352">352</a> of file <a class="el" href="lsredis_8c_source.html">lsredis.c</a>.</p>
<div class="fragment"><div class="line">                                         {</div>
<div class="line">  <span class="keywordtype">long</span> <span class="keywordtype">int</span> rtn;</div>
<div class="line"></div>
<div class="line">  pthread_mutex_lock( &amp;p-&gt;<a class="code" href="structlsredis__obj__struct.html#a0da18e7d0f7d52459bbc6fbc696d5252" title="Don&#39;t let anyone use an old value.">mutex</a>);</div>
<div class="line">  <span class="keywordflow">while</span>( p-&gt;<a class="code" href="structlsredis__obj__struct.html#a338ffa4123bd06b39c8b58f5e695575e" title="1 if we think the value is good, 0 otherwise">valid</a> == 0)</div>
<div class="line">    pthread_cond_wait( &amp;p-&gt;<a class="code" href="structlsredis__obj__struct.html#a356f6a228bb19ac7d66fdb1c875d68be" title="wait for a valid value">cond</a>, &amp;p-&gt;<a class="code" href="structlsredis__obj__struct.html#a0da18e7d0f7d52459bbc6fbc696d5252" title="Don&#39;t let anyone use an old value.">mutex</a>);</div>
<div class="line"></div>
<div class="line">  rtn = p-&gt;<a class="code" href="structlsredis__obj__struct.html#a26211a0ab3fc02e7776e24dbc1f1256c" title="our value as a long">lvalue</a>;</div>
<div class="line">  pthread_mutex_unlock( &amp;p-&gt;<a class="code" href="structlsredis__obj__struct.html#a0da18e7d0f7d52459bbc6fbc696d5252" title="Don&#39;t let anyone use an old value.">mutex</a>);</div>
<div class="line">  </div>
<div class="line">  <span class="keywordflow">return</span> rtn;</div>
<div class="line">}  </div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac1994e56114b2315294527d76311f829"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* lsredis_getstr </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="pgpmac_8h.html#ad449de06d02791adf2498d2a1e1f909c">lsredis_obj_t</a> *&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>return a copy of the key's string value </p>

<p>Definition at line <a class="el" href="lsredis_8c_source.html#l00263">263</a> of file <a class="el" href="lsredis_8c_source.html">lsredis.c</a>.</p>
<div class="fragment"><div class="line">                                        {</div>
<div class="line">  <span class="keywordtype">char</span> *rtn;</div>
<div class="line"></div>
<div class="line">  <span class="comment">//</span></div>
<div class="line">  <span class="comment">// Have to use strdup since we cannot guarantee that p-&gt;value won&#39;t be freed while the caller is still using it</span></div>
<div class="line">  <span class="comment">//</span></div>
<div class="line">  pthread_mutex_lock( &amp;p-&gt;<a class="code" href="structlsredis__obj__struct.html#a0da18e7d0f7d52459bbc6fbc696d5252" title="Don&#39;t let anyone use an old value.">mutex</a>);</div>
<div class="line">  <span class="keywordflow">while</span>( p-&gt;<a class="code" href="structlsredis__obj__struct.html#a338ffa4123bd06b39c8b58f5e695575e" title="1 if we think the value is good, 0 otherwise">valid</a> == 0)</div>
<div class="line">    pthread_cond_wait( &amp;p-&gt;<a class="code" href="structlsredis__obj__struct.html#a356f6a228bb19ac7d66fdb1c875d68be" title="wait for a valid value">cond</a>, &amp;p-&gt;<a class="code" href="structlsredis__obj__struct.html#a0da18e7d0f7d52459bbc6fbc696d5252" title="Don&#39;t let anyone use an old value.">mutex</a>);</div>
<div class="line"></div>
<div class="line">  rtn = strdup(p-&gt;<a class="code" href="structlsredis__obj__struct.html#a0465c65288e8101805a6f91049164517" title="our value">value</a>);</div>
<div class="line">  pthread_mutex_unlock( &amp;p-&gt;<a class="code" href="structlsredis__obj__struct.html#a0da18e7d0f7d52459bbc6fbc696d5252" title="Don&#39;t let anyone use an old value.">mutex</a>);</div>
<div class="line">  <span class="keywordflow">return</span> rtn;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aef0f12fda57e476a50b14acdc9f30b58"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lsredis_init </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>pub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>re</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>head</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize this module, that is, set up the connections. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pub</td><td>Publish under this (unique) name </td></tr>
    <tr><td class="paramname">re</td><td>Regular expression to select keys we want to mirror </td></tr>
    <tr><td class="paramname">head</td><td>Prepend this (+ a dot) to the beginning of requested objects </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lsredis_8c_source.html#l00810">810</a> of file <a class="el" href="lsredis_8c_source.html">lsredis.c</a>.</p>
<div class="fragment"><div class="line">                                                    {</div>
<div class="line">  <span class="keywordtype">int</span> err;</div>
<div class="line">  <span class="keywordtype">int</span> nerrmsg;</div>
<div class="line">  <span class="keywordtype">char</span> *errmsg;</div>
<div class="line"></div>
<div class="line">  <span class="comment">//</span></div>
<div class="line">  <span class="comment">// set up hash map to store redis objects</span></div>
<div class="line">  <span class="comment">//</span></div>
<div class="line">  err = hcreate_r( 8192, &amp;<a class="code" href="lsredis_8c.html#a42aec6aa74072797ec0344847b0e9e39">lsredis_htab</a>);</div>
<div class="line">  <span class="keywordflow">if</span>( err == 0) {</div>
<div class="line">    <a class="code" href="lslogging_8c.html#a0e756b36671055ef02a8f04d2ba8a93b" title="The routine everyone will be talking about.">lslogging_log_message</a>( <span class="stringliteral">&quot;lsredis_init: Cannot create hash table.  Really bad things are going to happen.  hcreate_r returned %d&quot;</span>, err);</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <a class="code" href="lsredis_8c.html#acdca9095c7a3288d7febe9f4c440a6e9">lsredis_head</a>      = strdup( <a class="code" href="namespacemk__pgpmac__redis.html#a760ff4955cbf5beef4ae36a28c30b01a">head</a>);</div>
<div class="line">  <a class="code" href="lsredis_8c.html#a0c81dce2e75584eeb14ab7d9dd86c72e">lsredis_publisher</a> = strdup( pub);</div>
<div class="line"></div>
<div class="line">  </div>
<div class="line">  pthread_cond_init( &amp;<a class="code" href="lsredis_8c.html#a2f63408d16b5603541b124a78f36a5a8">lsredis_cond</a>, NULL);</div>
<div class="line"></div>
<div class="line">  <a class="code" href="lsredis_8c.html#a4d65536cb1094fb5deda0a852b181232">subac</a> = redisAsyncConnect(<span class="stringliteral">&quot;127.0.0.1&quot;</span>, 6379);</div>
<div class="line">  <span class="keywordflow">if</span>( <a class="code" href="lsredis_8c.html#a4d65536cb1094fb5deda0a852b181232">subac</a>-&gt;err) {</div>
<div class="line">    <a class="code" href="lslogging_8c.html#a0e756b36671055ef02a8f04d2ba8a93b" title="The routine everyone will be talking about.">lslogging_log_message</a>( <span class="stringliteral">&quot;Error: %s&quot;</span>, <a class="code" href="lsredis_8c.html#a4d65536cb1094fb5deda0a852b181232">subac</a>-&gt;errstr);</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <a class="code" href="lsredis_8c.html#a0cd3bdc79d035eb1595371c845d14367">subfd</a>.fd           = <a class="code" href="lsredis_8c.html#a4d65536cb1094fb5deda0a852b181232">subac</a>-&gt;c.fd;</div>
<div class="line">  <a class="code" href="lsredis_8c.html#a0cd3bdc79d035eb1595371c845d14367">subfd</a>.events       = 0;</div>
<div class="line">  <a class="code" href="lsredis_8c.html#a4d65536cb1094fb5deda0a852b181232">subac</a>-&gt;ev.data     = &amp;<a class="code" href="lsredis_8c.html#a0cd3bdc79d035eb1595371c845d14367">subfd</a>;</div>
<div class="line">  <a class="code" href="lsredis_8c.html#a4d65536cb1094fb5deda0a852b181232">subac</a>-&gt;ev.addRead  = <a class="code" href="lsredis_8c.html#adee3bccecc86dd531ac5f89491632439" title="hook to mange read events">lsredis_addRead</a>;</div>
<div class="line">  <a class="code" href="lsredis_8c.html#a4d65536cb1094fb5deda0a852b181232">subac</a>-&gt;ev.delRead  = <a class="code" href="lsredis_8c.html#a2e1f2258b3cc864ce3eef4eda556e2a6" title="hook to manage &quot;don&#39;t need to read&quot; events">lsredis_delRead</a>;</div>
<div class="line">  <a class="code" href="lsredis_8c.html#a4d65536cb1094fb5deda0a852b181232">subac</a>-&gt;ev.addWrite = <a class="code" href="lsredis_8c.html#a3cb6eda5c8ae80019e7a1c078940e9e9" title="hook to manage write events">lsredis_addWrite</a>;</div>
<div class="line">  <a class="code" href="lsredis_8c.html#a4d65536cb1094fb5deda0a852b181232">subac</a>-&gt;ev.delWrite = <a class="code" href="lsredis_8c.html#a04f0119cfa1156dc34d35b237358822a" title="hook to manage &quot;don&#39;t need to write anymore&quot; events">lsredis_delWrite</a>;</div>
<div class="line">  <a class="code" href="lsredis_8c.html#a4d65536cb1094fb5deda0a852b181232">subac</a>-&gt;ev.cleanup  = <a class="code" href="lsredis_8c.html#a45f946a5262c23b362be17c2cb0310c2" title="hook to clean up TODO: figure out what we are supposed to do here and do it">lsredis_cleanup</a>;</div>
<div class="line"></div>
<div class="line">  <a class="code" href="lsredis_8c.html#afc92245910ec04f9a341c092def45564">roac</a> = redisAsyncConnect(<span class="stringliteral">&quot;127.0.0.1&quot;</span>, 6379);</div>
<div class="line">  <span class="keywordflow">if</span>( <a class="code" href="lsredis_8c.html#afc92245910ec04f9a341c092def45564">roac</a>-&gt;err) {</div>
<div class="line">    <a class="code" href="lslogging_8c.html#a0e756b36671055ef02a8f04d2ba8a93b" title="The routine everyone will be talking about.">lslogging_log_message</a>( <span class="stringliteral">&quot;Error: %s&quot;</span>, <a class="code" href="lsredis_8c.html#afc92245910ec04f9a341c092def45564">roac</a>-&gt;errstr);</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <a class="code" href="lsredis_8c.html#add819e43a356d0575ec64c346c6fed57">rofd</a>.fd           = <a class="code" href="lsredis_8c.html#afc92245910ec04f9a341c092def45564">roac</a>-&gt;c.fd;</div>
<div class="line">  <a class="code" href="lsredis_8c.html#add819e43a356d0575ec64c346c6fed57">rofd</a>.events       = 0;</div>
<div class="line">  <a class="code" href="lsredis_8c.html#afc92245910ec04f9a341c092def45564">roac</a>-&gt;ev.data     = &amp;<a class="code" href="lsredis_8c.html#add819e43a356d0575ec64c346c6fed57">rofd</a>;</div>
<div class="line">  <a class="code" href="lsredis_8c.html#afc92245910ec04f9a341c092def45564">roac</a>-&gt;ev.addRead  = <a class="code" href="lsredis_8c.html#adee3bccecc86dd531ac5f89491632439" title="hook to mange read events">lsredis_addRead</a>;</div>
<div class="line">  <a class="code" href="lsredis_8c.html#afc92245910ec04f9a341c092def45564">roac</a>-&gt;ev.delRead  = <a class="code" href="lsredis_8c.html#a2e1f2258b3cc864ce3eef4eda556e2a6" title="hook to manage &quot;don&#39;t need to read&quot; events">lsredis_delRead</a>;</div>
<div class="line">  <a class="code" href="lsredis_8c.html#afc92245910ec04f9a341c092def45564">roac</a>-&gt;ev.addWrite = <a class="code" href="lsredis_8c.html#a3cb6eda5c8ae80019e7a1c078940e9e9" title="hook to manage write events">lsredis_addWrite</a>;</div>
<div class="line">  <a class="code" href="lsredis_8c.html#afc92245910ec04f9a341c092def45564">roac</a>-&gt;ev.delWrite = <a class="code" href="lsredis_8c.html#a04f0119cfa1156dc34d35b237358822a" title="hook to manage &quot;don&#39;t need to write anymore&quot; events">lsredis_delWrite</a>;</div>
<div class="line">  <a class="code" href="lsredis_8c.html#afc92245910ec04f9a341c092def45564">roac</a>-&gt;ev.cleanup  = <a class="code" href="lsredis_8c.html#a45f946a5262c23b362be17c2cb0310c2" title="hook to clean up TODO: figure out what we are supposed to do here and do it">lsredis_cleanup</a>;</div>
<div class="line"></div>
<div class="line">  <span class="comment">//wrac = redisAsyncConnect(&quot;10.1.0.3&quot;, 6379);</span></div>
<div class="line">  <a class="code" href="lsredis_8c.html#a7ea13129ad9e41a0ed2fc19fa75ffb0d">wrac</a> = redisAsyncConnect(<span class="stringliteral">&quot;127.0.0.1&quot;</span>, 6379);</div>
<div class="line">  <span class="keywordflow">if</span>( <a class="code" href="lsredis_8c.html#a7ea13129ad9e41a0ed2fc19fa75ffb0d">wrac</a>-&gt;err) {</div>
<div class="line">    <a class="code" href="lslogging_8c.html#a0e756b36671055ef02a8f04d2ba8a93b" title="The routine everyone will be talking about.">lslogging_log_message</a>( <span class="stringliteral">&quot;Error: %s&quot;</span>, <a class="code" href="lsredis_8c.html#a7ea13129ad9e41a0ed2fc19fa75ffb0d">wrac</a>-&gt;errstr);</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <a class="code" href="lsredis_8c.html#a13acbee14dbe8cdb98e238abb921d048">wrfd</a>.fd           = <a class="code" href="lsredis_8c.html#a7ea13129ad9e41a0ed2fc19fa75ffb0d">wrac</a>-&gt;c.fd;</div>
<div class="line">  <a class="code" href="lsredis_8c.html#a13acbee14dbe8cdb98e238abb921d048">wrfd</a>.events       = 0;</div>
<div class="line">  <a class="code" href="lsredis_8c.html#a7ea13129ad9e41a0ed2fc19fa75ffb0d">wrac</a>-&gt;ev.data     = &amp;<a class="code" href="lsredis_8c.html#a13acbee14dbe8cdb98e238abb921d048">wrfd</a>;</div>
<div class="line">  <a class="code" href="lsredis_8c.html#a7ea13129ad9e41a0ed2fc19fa75ffb0d">wrac</a>-&gt;ev.addRead  = <a class="code" href="lsredis_8c.html#adee3bccecc86dd531ac5f89491632439" title="hook to mange read events">lsredis_addRead</a>;</div>
<div class="line">  <a class="code" href="lsredis_8c.html#a7ea13129ad9e41a0ed2fc19fa75ffb0d">wrac</a>-&gt;ev.delRead  = <a class="code" href="lsredis_8c.html#a2e1f2258b3cc864ce3eef4eda556e2a6" title="hook to manage &quot;don&#39;t need to read&quot; events">lsredis_delRead</a>;</div>
<div class="line">  <a class="code" href="lsredis_8c.html#a7ea13129ad9e41a0ed2fc19fa75ffb0d">wrac</a>-&gt;ev.addWrite = <a class="code" href="lsredis_8c.html#a3cb6eda5c8ae80019e7a1c078940e9e9" title="hook to manage write events">lsredis_addWrite</a>;</div>
<div class="line">  <a class="code" href="lsredis_8c.html#a7ea13129ad9e41a0ed2fc19fa75ffb0d">wrac</a>-&gt;ev.delWrite = <a class="code" href="lsredis_8c.html#a04f0119cfa1156dc34d35b237358822a" title="hook to manage &quot;don&#39;t need to write anymore&quot; events">lsredis_delWrite</a>;</div>
<div class="line">  <a class="code" href="lsredis_8c.html#a7ea13129ad9e41a0ed2fc19fa75ffb0d">wrac</a>-&gt;ev.cleanup  = <a class="code" href="lsredis_8c.html#a45f946a5262c23b362be17c2cb0310c2" title="hook to clean up TODO: figure out what we are supposed to do here and do it">lsredis_cleanup</a>;</div>
<div class="line"></div>
<div class="line">  err = regcomp( &amp;<a class="code" href="lsredis_8c.html#abee04898347f9b2551fa0435b1cc597e">lsredis_key_select_regex</a>, re, REG_EXTENDED);</div>
<div class="line">  <span class="keywordflow">if</span>( err != 0) {</div>
<div class="line">    nerrmsg = regerror( err, &amp;<a class="code" href="lsredis_8c.html#abee04898347f9b2551fa0435b1cc597e">lsredis_key_select_regex</a>, NULL, 0);</div>
<div class="line">    <span class="keywordflow">if</span>( nerrmsg &gt; 0) {</div>
<div class="line">      errmsg = calloc( nerrmsg, <span class="keyword">sizeof</span>( <span class="keywordtype">char</span>));</div>
<div class="line">      nerrmsg = regerror( err, &amp;<a class="code" href="lsredis_8c.html#abee04898347f9b2551fa0435b1cc597e">lsredis_key_select_regex</a>, errmsg, nerrmsg);</div>
<div class="line">      <a class="code" href="lslogging_8c.html#a0e756b36671055ef02a8f04d2ba8a93b" title="The routine everyone will be talking about.">lslogging_log_message</a>( <span class="stringliteral">&quot;lsredis_select: %s&quot;</span>, errmsg);</div>
<div class="line">      free( errmsg);</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac58fca47533e695c8775e0d2b9128766"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lsredis_regexec </td>
          <td>(</td>
          <td class="paramtype">const regex_t *&#160;</td>
          <td class="paramname"><em>preg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="pgpmac_8h.html#ad449de06d02791adf2498d2a1e1f909c">lsredis_obj_t</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>nmatch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">regmatch_t *&#160;</td>
          <td class="paramname"><em>pmatch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>eflags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="lsredis_8c_source.html#l00247">247</a> of file <a class="el" href="lsredis_8c_source.html">lsredis.c</a>.</p>
<div class="fragment"><div class="line">                                                                                                           {</div>
<div class="line">  <span class="keywordtype">int</span> rtn;</div>
<div class="line"></div>
<div class="line">  pthread_mutex_lock( &amp;p-&gt;<a class="code" href="structlsredis__obj__struct.html#a0da18e7d0f7d52459bbc6fbc696d5252" title="Don&#39;t let anyone use an old value.">mutex</a>);</div>
<div class="line">  <span class="keywordflow">while</span>( p-&gt;<a class="code" href="structlsredis__obj__struct.html#a338ffa4123bd06b39c8b58f5e695575e" title="1 if we think the value is good, 0 otherwise">valid</a> == 0) </div>
<div class="line">    pthread_cond_wait( &amp;p-&gt;<a class="code" href="structlsredis__obj__struct.html#a356f6a228bb19ac7d66fdb1c875d68be" title="wait for a valid value">cond</a>, &amp;p-&gt;<a class="code" href="structlsredis__obj__struct.html#a0da18e7d0f7d52459bbc6fbc696d5252" title="Don&#39;t let anyone use an old value.">mutex</a>);</div>
<div class="line"></div>
<div class="line">  rtn = regexec( preg, p-&gt;<a class="code" href="structlsredis__obj__struct.html#a0465c65288e8101805a6f91049164517" title="our value">value</a>, nmatch, pmatch, eflags);</div>
<div class="line"></div>
<div class="line">  pthread_mutex_unlock( &amp;p-&gt;<a class="code" href="structlsredis__obj__struct.html#a0da18e7d0f7d52459bbc6fbc696d5252" title="Don&#39;t let anyone use an old value.">mutex</a>);</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">return</span> rtn;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad438e4368d86bbe15a93dcf86deaded5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lsredis_run </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="lsredis_8c_source.html#l01014">1014</a> of file <a class="el" href="lsredis_8c_source.html">lsredis.c</a>.</p>
<div class="fragment"><div class="line">                   {</div>
<div class="line">  pthread_create( &amp;<a class="code" href="lsredis_8c.html#a79c33eb11ad6819247930ade3a25671f">lsredis_thread</a>, NULL, <a class="code" href="lsredis_8c.html#ade7b1ddfdc88c6964a4c90513e360f75" title="subscribe to changes and service sockets">lsredis_worker</a>, NULL);</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a9b9c64f883c7ded60badfe89cb15fa78"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lsredis_setstr </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="pgpmac_8h.html#ad449de06d02791adf2498d2a1e1f909c">lsredis_obj_t</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the value and update redis. </p>
<p>Note that lsredis_set_value sets the value based on redis while here we set redis based on the value Arbitray maximum string length set here. TODO: Probably this limit should be removed at some point.</p>
<p>redisAsyncCommandArgv used instead of redisAsyncCommand 'cause it's easier (and possible) to deal with strings that would otherwise cause hiredis to emit a bad command, like those containing spaces. </p>
<p>&lt; up the count of times we need to see ourselves published before we start listening to others again</p>
<p>&lt; Unlock to prevent deadlock in case the service routine needs to set our value</p>
<p>&lt; redisAsyncCommandArgv shouldn't need to access this after it's made up it's packet (before it returns) so we should be OK with this location disappearing soon. </p>

<p>Definition at line <a class="el" href="lsredis_8c_source.html#l00288">288</a> of file <a class="el" href="lsredis_8c_source.html">lsredis.c</a>.</p>
<div class="fragment"><div class="line">                                                       {</div>
<div class="line">  va_list arg_ptr;</div>
<div class="line">  <span class="keywordtype">char</span> <a class="code" href="namespacemk__pgpmac__redis.html#ac732d49b0afca9a9951e3a252bae42fc">v</a>[512];</div>
<div class="line">  <span class="keywordtype">char</span> *argv[4];</div>
<div class="line"></div>
<div class="line">  va_start( arg_ptr, fmt);</div>
<div class="line">  vsnprintf( v, <span class="keyword">sizeof</span>(v)-1, fmt, arg_ptr);</div>
<div class="line">  v[<span class="keyword">sizeof</span>(<a class="code" href="namespacemk__pgpmac__redis.html#ac732d49b0afca9a9951e3a252bae42fc">v</a>)-1] = 0;</div>
<div class="line">  va_end( arg_ptr);</div>
<div class="line">  </div>
<div class="line">  pthread_mutex_lock( &amp;p-&gt;<a class="code" href="structlsredis__obj__struct.html#a0da18e7d0f7d52459bbc6fbc696d5252" title="Don&#39;t let anyone use an old value.">mutex</a>);</div>
<div class="line"></div>
<div class="line">  <span class="comment">//</span></div>
<div class="line">  <span class="comment">// Don&#39;t send an update if a good value has not changed</span></div>
<div class="line">  <span class="comment">//</span></div>
<div class="line">  <span class="keywordflow">if</span>( p-&gt;<a class="code" href="structlsredis__obj__struct.html#a338ffa4123bd06b39c8b58f5e695575e" title="1 if we think the value is good, 0 otherwise">valid</a> &amp;&amp; strcmp( v, p-&gt;<a class="code" href="structlsredis__obj__struct.html#a0465c65288e8101805a6f91049164517" title="our value">value</a>) == 0) {</div>
<div class="line">    <span class="comment">// nothing to do</span></div>
<div class="line">    pthread_mutex_unlock( &amp;p-&gt;<a class="code" href="structlsredis__obj__struct.html#a0da18e7d0f7d52459bbc6fbc696d5252" title="Don&#39;t let anyone use an old value.">mutex</a>);</div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  p-&gt;<a class="code" href="structlsredis__obj__struct.html#a8bc1a536b7155a1e2a749c7c434b898b" title="Number of times we need to see our publication before we start accepting new values.">wait_for_me</a>++;                     </div>
<div class="line">  pthread_mutex_unlock( &amp;p-&gt;<a class="code" href="structlsredis__obj__struct.html#a0da18e7d0f7d52459bbc6fbc696d5252" title="Don&#39;t let anyone use an old value.">mutex</a>);     </div>
<div class="line"></div>
<div class="line"></div>
<div class="line">  argv[0] = <span class="stringliteral">&quot;HSET&quot;</span>;</div>
<div class="line">  argv[1] = p-&gt;<a class="code" href="structlsredis__obj__struct.html#aa8c5a453b9424e5666320b8675a42f5c" title="The redis key for this object.">key</a>;</div>
<div class="line">  argv[2] = <span class="stringliteral">&quot;VALUE&quot;</span>;</div>
<div class="line">  argv[3] = <a class="code" href="namespacemk__pgpmac__redis.html#ac732d49b0afca9a9951e3a252bae42fc">v</a>;          </div>
<div class="line"></div>
<div class="line"></div>
<div class="line">  pthread_mutex_lock( &amp;<a class="code" href="lsredis_8c.html#a390e8acf789b0fa41b43a794dd27e28f">lsredis_mutex</a>);</div>
<div class="line">  <span class="keywordflow">while</span>( <a class="code" href="lsredis_8c.html#a7461eb2b5974a2ffac2189007d39193c">lsredis_running</a> == 0)</div>
<div class="line">    pthread_cond_wait( &amp;<a class="code" href="lsredis_8c.html#a2f63408d16b5603541b124a78f36a5a8">lsredis_cond</a>, &amp;<a class="code" href="lsredis_8c.html#a390e8acf789b0fa41b43a794dd27e28f">lsredis_mutex</a>);</div>
<div class="line"></div>
<div class="line">  redisAsyncCommand( <a class="code" href="lsredis_8c.html#a7ea13129ad9e41a0ed2fc19fa75ffb0d">wrac</a>, NULL, NULL, <span class="stringliteral">&quot;MULTI&quot;</span>);</div>
<div class="line">  redisAsyncCommandArgv( <a class="code" href="lsredis_8c.html#a7ea13129ad9e41a0ed2fc19fa75ffb0d">wrac</a>, NULL, NULL, 4, (<span class="keyword">const</span> <span class="keywordtype">char</span> **)argv, NULL);</div>
<div class="line"></div>
<div class="line">  redisAsyncCommand( <a class="code" href="lsredis_8c.html#a7ea13129ad9e41a0ed2fc19fa75ffb0d">wrac</a>, NULL, NULL, <span class="stringliteral">&quot;PUBLISH %s %s&quot;</span>, <a class="code" href="lsredis_8c.html#a0c81dce2e75584eeb14ab7d9dd86c72e">lsredis_publisher</a>, p-&gt;<a class="code" href="structlsredis__obj__struct.html#aa8c5a453b9424e5666320b8675a42f5c" title="The redis key for this object.">key</a>);</div>
<div class="line">  redisAsyncCommand( <a class="code" href="lsredis_8c.html#a7ea13129ad9e41a0ed2fc19fa75ffb0d">wrac</a>, NULL, NULL, <span class="stringliteral">&quot;EXEC&quot;</span>);</div>
<div class="line">  pthread_mutex_unlock( &amp;<a class="code" href="lsredis_8c.html#a390e8acf789b0fa41b43a794dd27e28f">lsredis_mutex</a>);</div>
<div class="line"></div>
<div class="line">  <span class="comment">// Assume redis will take exactly the value we sent it</span></div>
<div class="line">  <span class="comment">//</span></div>
<div class="line">  pthread_mutex_lock( &amp;p-&gt;<a class="code" href="structlsredis__obj__struct.html#a0da18e7d0f7d52459bbc6fbc696d5252" title="Don&#39;t let anyone use an old value.">mutex</a>);</div>
<div class="line">  <a class="code" href="lsredis_8c.html#a05c7ed2bb1b5702a5c83ed3b51abb546" title="set_value and setstr helper funciton p-&gt;mutex must be locked before calling">_lsredis_set_value</a>( p, v);</div>
<div class="line">  pthread_cond_signal( &amp;p-&gt;<a class="code" href="structlsredis__obj__struct.html#a356f6a228bb19ac7d66fdb1c875d68be" title="wait for a valid value">cond</a>);</div>
<div class="line">  pthread_mutex_unlock( &amp;p-&gt;<a class="code" href="structlsredis__obj__struct.html#a0da18e7d0f7d52459bbc6fbc696d5252" title="Don&#39;t let anyone use an old value.">mutex</a>);</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af712dd2e9419026eff2762ba062eeaf1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lstimer_add_timer </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>shots</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long int&#160;</td>
          <td class="paramname"><em>secs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned long int&#160;</td>
          <td class="paramname"><em>nsecs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a timer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">event</td><td>Name of the event to send when the timer goes off </td></tr>
    <tr><td class="paramname">shots</td><td>Number of times to run. 0 means never, -1 means forever </td></tr>
    <tr><td class="paramname">secs</td><td>Number of seconds to wait </td></tr>
    <tr><td class="paramname">nsecs</td><td>Number of nano-seconds to run in addition to secs </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="lstimer_8c_source.html#l00050">50</a> of file <a class="el" href="lstimer_8c_source.html">lstimer.c</a>.</p>
<div class="fragment"><div class="line">                                                                                                 {</div>
<div class="line">  <span class="keywordtype">int</span> <a class="code" href="namespacemk__pgpmac__redis.html#afa643a23a5984fe44c2182ada3dfa401">i</a>;</div>
<div class="line">  <span class="keyword">struct </span>timespec <a class="code" href="kvredis_8c.html#ad40ac52086f6b774928af45b09d54c6e" title="used to ensure we do not inundate the db server with connection requests">now</a>;</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">  <span class="comment">// Time we were called.  Delay is based on call time, not queued time</span></div>
<div class="line">  <span class="comment">//</span></div>
<div class="line">  clock_gettime( CLOCK_REALTIME, &amp;<a class="code" href="kvredis_8c.html#ad40ac52086f6b774928af45b09d54c6e" title="used to ensure we do not inundate the db server with connection requests">now</a>);</div>
<div class="line">  </div>
<div class="line"></div>
<div class="line">  pthread_mutex_lock( &amp;<a class="code" href="lstimer_8c.html#a170993cbed9b9ec8bc64b6642a3ed581" title="protect the timer list">lstimer_mutex</a>);</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">for</span>( i=0; i&lt;<a class="code" href="lstimer_8c.html#af020a0f708e86162a32d2ca6373c96bb" title="We&#39;ll allow this many timers. This should be way more than enough.">LSTIMER_LIST_LENGTH</a>; i++) {</div>
<div class="line">    <span class="keywordflow">if</span>( <a class="code" href="lstimer_8c.html#a35b456765fe2c955cef445768d12ca6c" title="Our timer list.">lstimer_list</a>[i].shots == 0)</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span>( i == LSTIMER_LIST_LENGTH) {</div>
<div class="line">    pthread_mutex_unlock( &amp;<a class="code" href="lstimer_8c.html#a170993cbed9b9ec8bc64b6642a3ed581" title="protect the timer list">lstimer_mutex</a>);</div>
<div class="line">    </div>
<div class="line">    <a class="code" href="lslogging_8c.html#a0e756b36671055ef02a8f04d2ba8a93b" title="The routine everyone will be talking about.">lslogging_log_message</a>( <span class="stringliteral">&quot;lstimer_add_timer: out of timers for event: %s, shots: %d,  secs: %u, nsecs: %u&quot;</span>,</div>
<div class="line">                          event, shots, secs, nsecs);</div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  strncpy( <a class="code" href="lstimer_8c.html#a35b456765fe2c955cef445768d12ca6c" title="Our timer list.">lstimer_list</a>[i].event, event, <a class="code" href="pgpmac_8h.html#ab61d790b5572f116e091babfda53627b" title="Fixed length for event names: simplifies string handling.">LSEVENTS_EVENT_LENGTH</a> - 1);</div>
<div class="line">  <a class="code" href="lstimer_8c.html#a35b456765fe2c955cef445768d12ca6c" title="Our timer list.">lstimer_list</a>[<a class="code" href="namespacemk__pgpmac__redis.html#afa643a23a5984fe44c2182ada3dfa401">i</a>].<a class="code" href="structlstimer__list__struct.html#a54d564e392315b2730278bb925803184" title="the event to send">event</a>[<a class="code" href="pgpmac_8h.html#ab61d790b5572f116e091babfda53627b" title="Fixed length for event names: simplifies string handling.">LSEVENTS_EVENT_LENGTH</a> - 1] = 0;</div>
<div class="line">  <a class="code" href="lstimer_8c.html#a35b456765fe2c955cef445768d12ca6c" title="Our timer list.">lstimer_list</a>[<a class="code" href="namespacemk__pgpmac__redis.html#afa643a23a5984fe44c2182ada3dfa401">i</a>].<a class="code" href="structlstimer__list__struct.html#ac7ab4cd1f3065156f95b49e66bf05283" title="run this many times: -1 means reload forever, 0 means we are done with this timer and it may be reuse...">shots</a>        = shots;</div>
<div class="line">  <a class="code" href="lstimer_8c.html#a35b456765fe2c955cef445768d12ca6c" title="Our timer list.">lstimer_list</a>[<a class="code" href="namespacemk__pgpmac__redis.html#afa643a23a5984fe44c2182ada3dfa401">i</a>].<a class="code" href="structlstimer__list__struct.html#aa5eac664fe8159916bc3cdfbf583f818" title="number of seconds for a periodic delay">delay_secs</a>   = secs;</div>
<div class="line">  <a class="code" href="lstimer_8c.html#a35b456765fe2c955cef445768d12ca6c" title="Our timer list.">lstimer_list</a>[<a class="code" href="namespacemk__pgpmac__redis.html#afa643a23a5984fe44c2182ada3dfa401">i</a>].<a class="code" href="structlstimer__list__struct.html#a45e9fc0b669a1b2831d46b465822344c" title="nano seconds of delay">delay_nsecs</a>  = nsecs;</div>
<div class="line"></div>
<div class="line">  <a class="code" href="lstimer_8c.html#a35b456765fe2c955cef445768d12ca6c" title="Our timer list.">lstimer_list</a>[<a class="code" href="namespacemk__pgpmac__redis.html#afa643a23a5984fe44c2182ada3dfa401">i</a>].<a class="code" href="structlstimer__list__struct.html#a6a7538fafa77c5769c8dd2bdd34500b7" title="epoch (seconds) of next alarm">next_secs</a>    = secs + <a class="code" href="kvredis_8c.html#ad40ac52086f6b774928af45b09d54c6e" title="used to ensure we do not inundate the db server with connection requests">now</a>.tv_sec + (<a class="code" href="kvredis_8c.html#ad40ac52086f6b774928af45b09d54c6e" title="used to ensure we do not inundate the db server with connection requests">now</a>.tv_nsec + nsecs) / 1000000000;</div>
<div class="line">  <a class="code" href="lstimer_8c.html#a35b456765fe2c955cef445768d12ca6c" title="Our timer list.">lstimer_list</a>[<a class="code" href="namespacemk__pgpmac__redis.html#afa643a23a5984fe44c2182ada3dfa401">i</a>].<a class="code" href="structlstimer__list__struct.html#acf993c87ab0ee8ffd74c3907022d6996" title="nano seconds of next alarm">next_nsecs</a>   = (<a class="code" href="kvredis_8c.html#ad40ac52086f6b774928af45b09d54c6e" title="used to ensure we do not inundate the db server with connection requests">now</a>.tv_nsec + nsecs) % 1000000000;</div>
<div class="line">  <a class="code" href="lstimer_8c.html#a35b456765fe2c955cef445768d12ca6c" title="Our timer list.">lstimer_list</a>[<a class="code" href="namespacemk__pgpmac__redis.html#afa643a23a5984fe44c2182ada3dfa401">i</a>].<a class="code" href="structlstimer__list__struct.html#a8f881e66431efbed84b6ad029757bc67" title="the last time this timer was triggered">last_secs</a>    = 0;</div>
<div class="line">  <a class="code" href="lstimer_8c.html#a35b456765fe2c955cef445768d12ca6c" title="Our timer list.">lstimer_list</a>[<a class="code" href="namespacemk__pgpmac__redis.html#afa643a23a5984fe44c2182ada3dfa401">i</a>].<a class="code" href="structlstimer__list__struct.html#a0b2ab04246481397116ac9770c3c6603" title="the last time this timer was triggered">last_nsecs</a>   = 0;</div>
<div class="line">  </div>
<div class="line">  <a class="code" href="lstimer_8c.html#a35b456765fe2c955cef445768d12ca6c" title="Our timer list.">lstimer_list</a>[<a class="code" href="namespacemk__pgpmac__redis.html#afa643a23a5984fe44c2182ada3dfa401">i</a>].<a class="code" href="structlstimer__list__struct.html#aa56c5b8ce7fa0ae93132cb9908195836" title="track how many times we triggered a callback (like an unsigned long int is really needed)...">ncalls</a>       = 0;</div>
<div class="line">  <a class="code" href="lstimer_8c.html#a35b456765fe2c955cef445768d12ca6c" title="Our timer list.">lstimer_list</a>[<a class="code" href="namespacemk__pgpmac__redis.html#afa643a23a5984fe44c2182ada3dfa401">i</a>].<a class="code" href="structlstimer__list__struct.html#a9633d830ecdce7852530079bb09a6d3c" title="our initialization time">init_secs</a>    = <a class="code" href="kvredis_8c.html#ad40ac52086f6b774928af45b09d54c6e" title="used to ensure we do not inundate the db server with connection requests">now</a>.tv_sec;</div>
<div class="line">  <a class="code" href="lstimer_8c.html#a35b456765fe2c955cef445768d12ca6c" title="Our timer list.">lstimer_list</a>[<a class="code" href="namespacemk__pgpmac__redis.html#afa643a23a5984fe44c2182ada3dfa401">i</a>].<a class="code" href="structlstimer__list__struct.html#a72665e0a227b5ee0c82aee43dfaf440a" title="our initialization time">init_nsecs</a>   = <a class="code" href="kvredis_8c.html#ad40ac52086f6b774928af45b09d54c6e" title="used to ensure we do not inundate the db server with connection requests">now</a>.tv_nsec;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span>( shots != 0) {</div>
<div class="line">    <a class="code" href="lstimer_8c.html#a1a47dadbec1776920ab83409234c1833" title="count of the number timers we are tracking">lstimer_active_timers</a>++;</div>
<div class="line">    <a class="code" href="lstimer_8c.html#a5a3c6ef3507448d284d91958878d3f75" title="indicate that a new timer exists and a call to service_timers is required">new_timer</a>++;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  pthread_cond_signal(  &amp;<a class="code" href="lstimer_8c.html#a96b7516e4a15c4b879de82a569cd5f0a" title="allows us to be idle when there is nothing to do">lstimer_cond</a>);</div>
<div class="line">  pthread_mutex_unlock( &amp;<a class="code" href="lstimer_8c.html#a170993cbed9b9ec8bc64b6642a3ed581" title="protect the timer list">lstimer_mutex</a>);</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8cd37a8fb0f061456456a5d79bdd5189"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lstimer_init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the timer list and pthread stuff. </p>

<p>Definition at line <a class="el" href="lstimer_8c_source.html#l00259">259</a> of file <a class="el" href="lstimer_8c_source.html">lstimer.c</a>.</p>
<div class="fragment"><div class="line">                    {</div>
<div class="line">  <span class="keywordtype">int</span> <a class="code" href="namespacemk__pgpmac__redis.html#afa643a23a5984fe44c2182ada3dfa401">i</a>;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">for</span>( i=0; i&lt;<a class="code" href="lstimer_8c.html#af020a0f708e86162a32d2ca6373c96bb" title="We&#39;ll allow this many timers. This should be way more than enough.">LSTIMER_LIST_LENGTH</a>; i++) {</div>
<div class="line">    <a class="code" href="lstimer_8c.html#a35b456765fe2c955cef445768d12ca6c" title="Our timer list.">lstimer_list</a>[<a class="code" href="namespacemk__pgpmac__redis.html#afa643a23a5984fe44c2182ada3dfa401">i</a>].<a class="code" href="structlstimer__list__struct.html#ac7ab4cd1f3065156f95b49e66bf05283" title="run this many times: -1 means reload forever, 0 means we are done with this timer and it may be reuse...">shots</a> = 0;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">  pthread_mutex_init( &amp;<a class="code" href="lstimer_8c.html#a170993cbed9b9ec8bc64b6642a3ed581" title="protect the timer list">lstimer_mutex</a>, NULL);</div>
<div class="line">  pthread_cond_init(  &amp;<a class="code" href="lstimer_8c.html#a96b7516e4a15c4b879de82a569cd5f0a" title="allows us to be idle when there is nothing to do">lstimer_cond</a>, NULL);</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0b918acc1a4bf737cb62b5a70f8b553a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lstimer_run </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start up our thread. </p>

<p>Definition at line <a class="el" href="lstimer_8c_source.html#l00273">273</a> of file <a class="el" href="lstimer_8c_source.html">lstimer.c</a>.</p>
<div class="fragment"><div class="line">                   {</div>
<div class="line">  pthread_create( &amp;<a class="code" href="lstimer_8c.html#a76660e8720b08f4adee2be9f44b5f419" title="the timer thread">lstimer_thread</a>, NULL, <a class="code" href="lstimer_8c.html#ab8b409bb2a7ff78da22d988cfb3b537a" title="Our worker.">lstimer_worker</a>, NULL);</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="adf63440ffbc65024fef87ea6a11ea8b0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lsupdate_init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="af219e9b2cc124f109aa4c2c2e16b5d07"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lsupdate_run </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a0851b1baecda6a67993efde41d77b1c1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void md2cmds_init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the md2cmds module. </p>

<p>Definition at line <a class="el" href="md2cmds_8c_source.html#l01023">1023</a> of file <a class="el" href="md2cmds_8c_source.html">md2cmds.c</a>.</p>
<div class="fragment"><div class="line">                    {</div>
<div class="line">  memset( <a class="code" href="md2cmds_8c.html#a5f0fe1e2dfa92cf345b8c29134ab1ede" title="our command;">md2cmds_cmd</a>, 0, <span class="keyword">sizeof</span>( <a class="code" href="md2cmds_8c.html#a5f0fe1e2dfa92cf345b8c29134ab1ede" title="our command;">md2cmds_cmd</a>));</div>
<div class="line"></div>
<div class="line">  pthread_mutex_init( &amp;<a class="code" href="md2cmds_8c.html#ad67304bb851dc6268b0cda2f40fc5aa8" title="mutex for the condition">md2cmds_mutex</a>, NULL);</div>
<div class="line">  pthread_cond_init( &amp;<a class="code" href="md2cmds_8c.html#a08d5b18ec9478d753c46a3e28d1f2126" title="condition to signal when it&#39;s time to run an md2 command">md2cmds_cond</a>, NULL);</div>
<div class="line"></div>
<div class="line">  pthread_mutex_init( &amp;<a class="code" href="md2cmds_8c.html#a4ea6e6bf63aefcd49f87c3921029451d" title="message passing between md2cmds and pg">md2cmds_moving_mutex</a>, NULL);</div>
<div class="line">  pthread_cond_init(  &amp;<a class="code" href="md2cmds_8c.html#adeebdb8f552bff14bd666c187505ee9e" title="wait for command to have been dequeued and run">md2cmds_moving_cond</a>, NULL);</div>
<div class="line"></div>
<div class="line">  <a class="code" href="md2cmds_8c.html#a6a34fb6876abbd580629d3708c805e7f">md2cmds_md_status_code</a> = <a class="code" href="lsredis_8c.html#ad3bb3ebbae1ffbd03e062ecdd663cc6a">lsredis_get_obj</a>( <span class="stringliteral">&quot;md2_status_code&quot;</span>);</div>
<div class="line">  <a class="code" href="lsredis_8c.html#a9b9c64f883c7ded60badfe89cb15fa78" title="Set the value and update redis.">lsredis_setstr</a>( <a class="code" href="md2cmds_8c.html#a6a34fb6876abbd580629d3708c805e7f">md2cmds_md_status_code</a>, <span class="stringliteral">&quot;7&quot;</span>);</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa62da7d423952334d41c7d282f45233d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void md2cmds_run </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start up the thread. </p>

<p>Definition at line <a class="el" href="md2cmds_8c_source.html#l01038">1038</a> of file <a class="el" href="md2cmds_8c_source.html">md2cmds.c</a>.</p>
<div class="fragment"><div class="line">                   {</div>
<div class="line">  pthread_create( &amp;<a class="code" href="md2cmds_8c.html#aa230921945149692de98fff15c01962f">md2cmds_thread</a>, NULL,              <a class="code" href="md2cmds_8c.html#ae967e769d23555a631f615e630f25b00" title="Our worker thread.">md2cmds_worker</a>, NULL);</div>
<div class="line">  <a class="code" href="lsevents_8c.html#ab0617d3f0594b51d10e34bf397096654" title="Add a callback routine to listen for a specific event.">lsevents_add_listener</a>( <span class="stringliteral">&quot;omega crossed zero&quot;</span>,        <a class="code" href="md2cmds_8c.html#aa43887b7c9799bc88d51df13745d0e5c" title="Tell the database about the time we went through omega=zero.">md2cmds_rotate_cb</a>);</div>
<div class="line">  <a class="code" href="lsevents_8c.html#ab0617d3f0594b51d10e34bf397096654" title="Add a callback routine to listen for a specific event.">lsevents_add_listener</a>( <span class="stringliteral">&quot;omega In Position&quot;</span>,         <a class="code" href="md2cmds_8c.html#a136f278c9f5a2742b2e9b4987b063faa" title="Now that we are done with the 360 rotation lets rehome right quick.">md2cmds_maybe_rotate_done_cb</a>);</div>
<div class="line">  <a class="code" href="lsevents_8c.html#ab0617d3f0594b51d10e34bf397096654" title="Add a callback routine to listen for a specific event.">lsevents_add_listener</a>( <span class="stringliteral">&quot;.+ (Moving|In Position)&quot;</span>,   <a class="code" href="md2cmds_8c.html#a3970ef1a233dabcc5c1408e9d3865f13" title="Track how many motors are moving.">md2cmds_maybe_done_moving_cb</a>);</div>
<div class="line">  <a class="code" href="lsevents_8c.html#ab0617d3f0594b51d10e34bf397096654" title="Add a callback routine to listen for a specific event.">lsevents_add_listener</a>( <span class="stringliteral">&quot;capz (Moving|In Position)&quot;</span>, <a class="code" href="md2cmds_8c.html#aab9e2aa02903648acc342068f0664a96" title="Time the capillary motion for the transfer routine.">md2cmds_time_capz_cb</a>);</div>
<div class="line">  <a class="code" href="lsevents_8c.html#ab0617d3f0594b51d10e34bf397096654" title="Add a callback routine to listen for a specific event.">lsevents_add_listener</a>( <span class="stringliteral">&quot;Coordsys 1 Stopped&quot;</span>,        <a class="code" href="md2cmds_8c.html#a4cf5215fdb88407144f582d829c03c7b">md2cmds_coordsys_1_stopped_cb</a>);</div>
<div class="line">  <a class="code" href="lsevents_8c.html#ab0617d3f0594b51d10e34bf397096654" title="Add a callback routine to listen for a specific event.">lsevents_add_listener</a>( <span class="stringliteral">&quot;Coordsys 2 Stopped&quot;</span>,        <a class="code" href="md2cmds_8c.html#a1ab8f6d08c82ee2130202d65d44ef3fe">md2cmds_coordsys_2_stopped_cb</a>);</div>
<div class="line">  <a class="code" href="lsevents_8c.html#ab0617d3f0594b51d10e34bf397096654" title="Add a callback routine to listen for a specific event.">lsevents_add_listener</a>( <span class="stringliteral">&quot;Coordsys 3 Stopped&quot;</span>,        <a class="code" href="md2cmds_8c.html#a3640785c2fc9cd2f27ce0bafd7959179">md2cmds_coordsys_3_stopped_cb</a>);</div>
<div class="line">  <a class="code" href="lsevents_8c.html#ab0617d3f0594b51d10e34bf397096654" title="Add a callback routine to listen for a specific event.">lsevents_add_listener</a>( <span class="stringliteral">&quot;Coordsys 4 Stopped&quot;</span>,        <a class="code" href="md2cmds_8c.html#a6069cb2f6e9f662edd54e1aeb6e78370">md2cmds_coordsys_4_stopped_cb</a>);</div>
<div class="line">  <a class="code" href="lsevents_8c.html#ab0617d3f0594b51d10e34bf397096654" title="Add a callback routine to listen for a specific event.">lsevents_add_listener</a>( <span class="stringliteral">&quot;Coordsys 5 Stopped&quot;</span>,        <a class="code" href="md2cmds_8c.html#a846ed10de4e5ad48cfa429a93c853308">md2cmds_coordsys_5_stopped_cb</a>);</div>
<div class="line">  <a class="code" href="lsevents_8c.html#ab0617d3f0594b51d10e34bf397096654" title="Add a callback routine to listen for a specific event.">lsevents_add_listener</a>( <span class="stringliteral">&quot;Coordsys 7 Stopped&quot;</span>,        <a class="code" href="md2cmds_8c.html#ab172a83eaf3e74799159e6720e4f5268">md2cmds_coordsys_7_stopped_cb</a>);</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7762ca7b97b44b979e23ce88ca3b4249"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pgpmac_printf </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Terminal output routine ala printf. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fmt</td><td>Printf style formating string </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="pgpmac_8c_source.html#l00330">330</a> of file <a class="el" href="pgpmac_8c_source.html">pgpmac.c</a>.</p>
<div class="fragment"><div class="line">                     {</div>
<div class="line">  va_list arg_ptr;</div>
<div class="line"></div>
<div class="line">  pthread_mutex_lock( &amp;<a class="code" href="pgpmac_8c.html#ad128c64890c7c0d4f836d9ec6e99216a" title="allow more than one thread access to the screen">ncurses_mutex</a>);</div>
<div class="line"></div>
<div class="line">  va_start( arg_ptr, fmt);</div>
<div class="line">  vwprintw( <a class="code" href="pgpmac_8c.html#a65daf0f4a5bc6def23a9df98ff5ca57e" title="place to print stuff out">term_output</a>, fmt, arg_ptr);</div>
<div class="line">  va_end( arg_ptr);</div>
<div class="line"></div>
<div class="line">  wnoutrefresh( <a class="code" href="pgpmac_8c.html#a65daf0f4a5bc6def23a9df98ff5ca57e" title="place to print stuff out">term_output</a>);</div>
<div class="line">  wnoutrefresh( <a class="code" href="pgpmac_8c.html#ab0487111dbe3c05d0bd835eb2fb9a3f7" title="place to put the cursor">term_input</a>);</div>
<div class="line">  doupdate();</div>
<div class="line"></div>
<div class="line">  pthread_mutex_unlock( &amp;<a class="code" href="pgpmac_8c.html#ad128c64890c7c0d4f836d9ec6e99216a" title="allow more than one thread access to the screen">ncurses_mutex</a>);</div>
<div class="line"></div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a76b11c62b122ee0fd8399435d4260681"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void PmacSockSendline </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="a6cb218bdccfe5a93471c161f15a15cab"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pgpmac_8h.html#aa5067fcbaabc5bbfdc52492495518c96">lspmac_motor_t</a>* alignx</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Alignment stage X. </p>

<p>Definition at line <a class="el" href="lspmac_8c_source.html#l00088">88</a> of file <a class="el" href="lspmac_8c_source.html">lspmac.c</a>.</p>

</div>
</div>
<a class="anchor" id="a737c246c3948e644a18d191a931e1acd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pgpmac_8h.html#aa5067fcbaabc5bbfdc52492495518c96">lspmac_motor_t</a>* aligny</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Alignment stage Y. </p>

<p>Definition at line <a class="el" href="lspmac_8c_source.html#l00089">89</a> of file <a class="el" href="lspmac_8c_source.html">lspmac.c</a>.</p>

</div>
</div>
<a class="anchor" id="ae7642b1da0f7c7f8448104c691d40a12"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pgpmac_8h.html#aa5067fcbaabc5bbfdc52492495518c96">lspmac_motor_t</a>* alignz</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Alignment stage X. </p>

<p>Definition at line <a class="el" href="lspmac_8c_source.html#l00090">90</a> of file <a class="el" href="lspmac_8c_source.html">lspmac.c</a>.</p>

</div>
</div>
<a class="anchor" id="aa90d2363b744acbd4d45133b7a716d8f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pgpmac_8h.html#aa5067fcbaabc5bbfdc52492495518c96">lspmac_motor_t</a>* anal</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Polaroid analyzer motor. </p>

<p>Definition at line <a class="el" href="lspmac_8c_source.html#l00091">91</a> of file <a class="el" href="lspmac_8c_source.html">lspmac.c</a>.</p>

</div>
</div>
<a class="anchor" id="a139200ddaa9856a7ffcec0e6cbaa8f1b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pgpmac_8h.html#aa5067fcbaabc5bbfdc52492495518c96">lspmac_motor_t</a>* apery</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Aperture Y. </p>

<p>Definition at line <a class="el" href="lspmac_8c_source.html#l00093">93</a> of file <a class="el" href="lspmac_8c_source.html">lspmac.c</a>.</p>

</div>
</div>
<a class="anchor" id="ab93bd6ee850b285ca3a95e64d15e9477"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pgpmac_8h.html#aa5067fcbaabc5bbfdc52492495518c96">lspmac_motor_t</a>* aperz</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Aperture Z. </p>

<p>Definition at line <a class="el" href="lspmac_8c_source.html#l00094">94</a> of file <a class="el" href="lspmac_8c_source.html">lspmac.c</a>.</p>

</div>
</div>
<a class="anchor" id="afaff4fbb5f03b0d2469fc7a14f174d69"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pgpmac_8h.html#ac48984832ef73cf145e5f08bc65bd3a0">lspmac_bi_t</a>* arm_parked</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>(whose arm? parked where?) </p>

<p>Definition at line <a class="el" href="lspmac_8c_source.html#l00131">131</a> of file <a class="el" href="lspmac_8c_source.html">lspmac.c</a>.</p>

</div>
</div>
<a class="anchor" id="a85d6eaa4b4a82bb3112574f458d1dc50"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pgpmac_8h.html#aa5067fcbaabc5bbfdc52492495518c96">lspmac_motor_t</a>* blight</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Back Light DAC. </p>

<p>Definition at line <a class="el" href="lspmac_8c_source.html#l00105">105</a> of file <a class="el" href="lspmac_8c_source.html">lspmac.c</a>.</p>

</div>
</div>
<a class="anchor" id="ac0d0bc95bcbcbd154b30c72a9645c8b2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pgpmac_8h.html#ac48984832ef73cf145e5f08bc65bd3a0">lspmac_bi_t</a>* blight_down</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Backlight is down. </p>

<p>Definition at line <a class="el" href="lspmac_8c_source.html#l00121">121</a> of file <a class="el" href="lspmac_8c_source.html">lspmac.c</a>.</p>

</div>
</div>
<a class="anchor" id="af55c51d52c4586b647114f95d7ac1f42"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pgpmac_8h.html#aa5067fcbaabc5bbfdc52492495518c96">lspmac_motor_t</a>* blight_f</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Back light scale factor. </p>

<p>Definition at line <a class="el" href="lspmac_8c_source.html#l00114">114</a> of file <a class="el" href="lspmac_8c_source.html">lspmac.c</a>.</p>

</div>
</div>
<a class="anchor" id="af813a2eff0b7efa4c70633559054e84c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pgpmac_8h.html#aa5067fcbaabc5bbfdc52492495518c96">lspmac_motor_t</a>* blight_ud</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Back light Up/Down actuator. </p>

<p>Definition at line <a class="el" href="lspmac_8c_source.html#l00109">109</a> of file <a class="el" href="lspmac_8c_source.html">lspmac.c</a>.</p>

</div>
</div>
<a class="anchor" id="a7fba65f6555c5c7908852c6cf1ad0c94"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pgpmac_8h.html#ac48984832ef73cf145e5f08bc65bd3a0">lspmac_bi_t</a>* blight_up</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Backlight is up. </p>

<p>Definition at line <a class="el" href="lspmac_8c_source.html#l00122">122</a> of file <a class="el" href="lspmac_8c_source.html">lspmac.c</a>.</p>

</div>
</div>
<a class="anchor" id="a51358daaea8b5236f08414877d8af6c2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pgpmac_8h.html#aa5067fcbaabc5bbfdc52492495518c96">lspmac_motor_t</a>* capy</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Capillary Y. </p>

<p>Definition at line <a class="el" href="lspmac_8c_source.html#l00095">95</a> of file <a class="el" href="lspmac_8c_source.html">lspmac.c</a>.</p>

</div>
</div>
<a class="anchor" id="aa45f268d0af9f3d465acfab128919718"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pgpmac_8h.html#aa5067fcbaabc5bbfdc52492495518c96">lspmac_motor_t</a>* capz</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Capillary Z. </p>

<p>Definition at line <a class="el" href="lspmac_8c_source.html#l00096">96</a> of file <a class="el" href="lspmac_8c_source.html">lspmac.c</a>.</p>

</div>
</div>
<a class="anchor" id="ac940d950d9efeaf3f0ae67e9bf331188"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pgpmac_8h.html#aa5067fcbaabc5bbfdc52492495518c96">lspmac_motor_t</a>* cenx</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Centering Table X. </p>

<p>Definition at line <a class="el" href="lspmac_8c_source.html#l00098">98</a> of file <a class="el" href="lspmac_8c_source.html">lspmac.c</a>.</p>

</div>
</div>
<a class="anchor" id="aaed18e738ba7bfb6c771a44f5d7ea827"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pgpmac_8h.html#aa5067fcbaabc5bbfdc52492495518c96">lspmac_motor_t</a>* ceny</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Centering Table Y. </p>

<p>Definition at line <a class="el" href="lspmac_8c_source.html#l00099">99</a> of file <a class="el" href="lspmac_8c_source.html">lspmac.c</a>.</p>

</div>
</div>
<a class="anchor" id="ae78d9a757d4c85419fff9c94b15e25d7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pgpmac_8h.html#aa5067fcbaabc5bbfdc52492495518c96">lspmac_motor_t</a>* cryo</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Move the cryostream towards or away from the crystal. </p>

<p>Definition at line <a class="el" href="lspmac_8c_source.html#l00110">110</a> of file <a class="el" href="lspmac_8c_source.html">lspmac.c</a>.</p>

</div>
</div>
<a class="anchor" id="a871d4cdea0a1a8db85b8658a07655212"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pgpmac_8h.html#ac48984832ef73cf145e5f08bc65bd3a0">lspmac_bi_t</a>* cryo_back</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>cryo is in the back position </p>

<p>Definition at line <a class="el" href="lspmac_8c_source.html#l00123">123</a> of file <a class="el" href="lspmac_8c_source.html">lspmac.c</a>.</p>

</div>
</div>
<a class="anchor" id="a28df32fd6be9160603aa1bb74a823574"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pgpmac_8h.html#ac48984832ef73cf145e5f08bc65bd3a0">lspmac_bi_t</a>* cryo_switch</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>that little toggle switch for the cryo </p>

<p>Definition at line <a class="el" href="lspmac_8c_source.html#l00120">120</a> of file <a class="el" href="lspmac_8c_source.html">lspmac.c</a>.</p>

</div>
</div>
<a class="anchor" id="a9d9c5030d817483ca9518027c91adac4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pgpmac_8h.html#aa5067fcbaabc5bbfdc52492495518c96">lspmac_motor_t</a>* dryer</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>blow air on the scintilator to dry it off </p>

<p>Definition at line <a class="el" href="lspmac_8c_source.html#l00111">111</a> of file <a class="el" href="lspmac_8c_source.html">lspmac.c</a>.</p>

</div>
</div>
<a class="anchor" id="a1e690d4ad981d020ea2c850282dca3be"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pgpmac_8h.html#ac48984832ef73cf145e5f08bc65bd3a0">lspmac_bi_t</a>* etel_init_ok</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>ETEL initialized OK. </p>

<p>Definition at line <a class="el" href="lspmac_8c_source.html#l00128">128</a> of file <a class="el" href="lspmac_8c_source.html">lspmac.c</a>.</p>

</div>
</div>
<a class="anchor" id="ab48d4a2cf0225796db9aad49f034dc59"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pgpmac_8h.html#ac48984832ef73cf145e5f08bc65bd3a0">lspmac_bi_t</a>* etel_on</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>ETEL is on. </p>

<p>Definition at line <a class="el" href="lspmac_8c_source.html#l00127">127</a> of file <a class="el" href="lspmac_8c_source.html">lspmac.c</a>.</p>

</div>
</div>
<a class="anchor" id="a5538a6aa526eeed65ff237303da2d348"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pgpmac_8h.html#ac48984832ef73cf145e5f08bc65bd3a0">lspmac_bi_t</a>* etel_ready</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>ETEL is ready. </p>

<p>Definition at line <a class="el" href="lspmac_8c_source.html#l00126">126</a> of file <a class="el" href="lspmac_8c_source.html">lspmac.c</a>.</p>

</div>
</div>
<a class="anchor" id="aeb09895663eff333b7a75acb319a9fc1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pgpmac_8h.html#aa5067fcbaabc5bbfdc52492495518c96">lspmac_motor_t</a>* flight</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Front Light DAC. </p>

<p>Definition at line <a class="el" href="lspmac_8c_source.html#l00104">104</a> of file <a class="el" href="lspmac_8c_source.html">lspmac.c</a>.</p>

</div>
</div>
<a class="anchor" id="aabf4ec595b5183c1777d029ca56134b0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pgpmac_8h.html#aa5067fcbaabc5bbfdc52492495518c96">lspmac_motor_t</a>* flight_f</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Front light scale factor. </p>

<p>Definition at line <a class="el" href="lspmac_8c_source.html#l00115">115</a> of file <a class="el" href="lspmac_8c_source.html">lspmac.c</a>.</p>

</div>
</div>
<a class="anchor" id="a6630442dc65ce8a30a24ed718b301971"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pgpmac_8h.html#aa5067fcbaabc5bbfdc52492495518c96">lspmac_motor_t</a>* flight_oo</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Turn front light on/off. </p>

<p>Definition at line <a class="el" href="lspmac_8c_source.html#l00113">113</a> of file <a class="el" href="lspmac_8c_source.html">lspmac.c</a>.</p>

</div>
</div>
<a class="anchor" id="addb26c80065506faa1de3c1b468fe03f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pgpmac_8h.html#aa5067fcbaabc5bbfdc52492495518c96">lspmac_motor_t</a>* fluo</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Move the fluorescence detector in/out. </p>

<p>Definition at line <a class="el" href="lspmac_8c_source.html#l00112">112</a> of file <a class="el" href="lspmac_8c_source.html">lspmac.c</a>.</p>

</div>
</div>
<a class="anchor" id="a67092de6f3fcc0b245e4970437eaff6b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pgpmac_8h.html#ac48984832ef73cf145e5f08bc65bd3a0">lspmac_bi_t</a>* fluor_back</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>fluor is in the back position </p>

<p>Definition at line <a class="el" href="lspmac_8c_source.html#l00124">124</a> of file <a class="el" href="lspmac_8c_source.html">lspmac.c</a>.</p>

</div>
</div>
<a class="anchor" id="a8a3ca6fcf5e24dcc26170736843e53b2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pgpmac_8h.html#aa5067fcbaabc5bbfdc52492495518c96">lspmac_motor_t</a>* fscint</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Scintillator Piezo DAC. </p>

<p>Definition at line <a class="el" href="lspmac_8c_source.html#l00106">106</a> of file <a class="el" href="lspmac_8c_source.html">lspmac.c</a>.</p>

</div>
</div>
<a class="anchor" id="a26dec4623af9beed912b8e7e6f99822c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pgpmac_8h.html#aa5067fcbaabc5bbfdc52492495518c96">lspmac_motor_t</a>* fshut</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fast shutter. </p>

<p>Definition at line <a class="el" href="lspmac_8c_source.html#l00103">103</a> of file <a class="el" href="lspmac_8c_source.html">lspmac.c</a>.</p>

</div>
</div>
<a class="anchor" id="abb29b117ad38156ba16fcf44eeb427af"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pgpmac_8h.html#ac48984832ef73cf145e5f08bc65bd3a0">lspmac_bi_t</a>* hp_air</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>High pressure air OK. </p>

<p>Definition at line <a class="el" href="lspmac_8c_source.html#l00119">119</a> of file <a class="el" href="lspmac_8c_source.html">lspmac.c</a>.</p>

</div>
</div>
<a class="anchor" id="a0be79ccb7ebf3a665248fd856112b9fd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pgpmac_8h.html#aa5067fcbaabc5bbfdc52492495518c96">lspmac_motor_t</a>* kappa</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Kappa. </p>

<p>Definition at line <a class="el" href="lspmac_8c_source.html#l00100">100</a> of file <a class="el" href="lspmac_8c_source.html">lspmac.c</a>.</p>

</div>
</div>
<a class="anchor" id="aade15098d213bb25522048e4a231941a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pgpmac_8h.html#ac48984832ef73cf145e5f08bc65bd3a0">lspmac_bi_t</a>* lp_air</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Low pressure air OK. </p>

<p>Definition at line <a class="el" href="lspmac_8c_source.html#l00118">118</a> of file <a class="el" href="lspmac_8c_source.html">lspmac.c</a>.</p>

</div>
</div>
<a class="anchor" id="adf89a0299edd6a99992b95dff8992eba"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pgpmac_8h.html#a7f71abc6fdfd1839e2e3213d78aaf766">lspg_demandairrights_t</a> lspg_demandairrights</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>our demandairrights object </p>

<p>Definition at line <a class="el" href="lspg_8c_source.html#l00066">66</a> of file <a class="el" href="lspg_8c_source.html">lspg.c</a>.</p>

</div>
</div>
<a class="anchor" id="a7ef8a09203117578c9b2ce4719519f36"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pgpmac_8h.html#a48b627e412dd038c1f17cdb0501eec33">lspg_getcenter_t</a> lspg_getcenter</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>the getcenter object </p>

<p>Definition at line <a class="el" href="lspg_8c_source.html#l00065">65</a> of file <a class="el" href="lspg_8c_source.html">lspg.c</a>.</p>

</div>
</div>
<a class="anchor" id="a5c50804e6019d47d91f3f1cb3ebd1f00"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pgpmac_8h.html#a7a794370785ff015d5ee035917e3bee8">lspg_getcurrentsampleid_t</a> lspg_getcurrentsampleid</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>our currentsample id </p>

<p>Definition at line <a class="el" href="lspg_8c_source.html#l00067">67</a> of file <a class="el" href="lspg_8c_source.html">lspg.c</a>.</p>

</div>
</div>
<a class="anchor" id="adbf70f382e469e02dce77833981f9547"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pgpmac_8h.html#a9dda9014cd0e39fba8d523e37cf9f982">lspg_nextsample_t</a> lspg_nextsample</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>the very next sample </p>

<p>Definition at line <a class="el" href="lspg_8c_source.html#l00063">63</a> of file <a class="el" href="lspg_8c_source.html">lspg.c</a>.</p>

</div>
</div>
<a class="anchor" id="ad8d8e2f578ca79189a80c1fd5b60cefd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pgpmac_8h.html#a17ea2bf07a0b3b892baa00bd392607b3">lspg_nextshot_t</a> lspg_nextshot</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>the nextshot object </p>

<p>Definition at line <a class="el" href="lspg_8c_source.html#l00064">64</a> of file <a class="el" href="lspg_8c_source.html">lspg.c</a>.</p>

</div>
</div>
<a class="anchor" id="af18499d17171eff473cfc49d4a0a5562"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pgpmac_8h.html#aa1f0e602ae9509005c62fb2d73bc1c5a">lspg_starttransfer_t</a> lspg_starttransfer</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>start a sample transfer </p>

<p>Definition at line <a class="el" href="lspg_8c_source.html#l00068">68</a> of file <a class="el" href="lspg_8c_source.html">lspg.c</a>.</p>

</div>
</div>
<a class="anchor" id="a5f699604dcc5d3d64fd6cb5c363d29c9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pgpmac_8h.html#a779e2acce8b5e748c184caf23ed0db57">lspg_waitcryo_t</a> lspg_waitcryo</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>signal the robot </p>

<p>Definition at line <a class="el" href="lspg_8c_source.html#l00069">69</a> of file <a class="el" href="lspg_8c_source.html">lspg.c</a>.</p>

</div>
</div>
<a class="anchor" id="aebfce5f9cbc8ba7bd4e2ee4880f303e8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pgpmac_8h.html#aa5067fcbaabc5bbfdc52492495518c96">lspmac_motor_t</a> lspmac_motors[]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>All our motors. </p>

<p>Definition at line <a class="el" href="lspmac_8c_source.html#l00085">85</a> of file <a class="el" href="lspmac_8c_source.html">lspmac.c</a>.</p>

</div>
</div>
<a class="anchor" id="a57547d211906c981ef20257eba99f8df"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pthread_cond_t lspmac_moving_cond</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Wait for motor(s) to finish moving condition. </p>

<p>Definition at line <a class="el" href="lspmac_8c_source.html#l00062">62</a> of file <a class="el" href="lspmac_8c_source.html">lspmac.c</a>.</p>

</div>
</div>
<a class="anchor" id="a7a32c617c183166308241e270959df56"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lspmac_moving_flags</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Flag used to implement motor moving condition. </p>

<p>Definition at line <a class="el" href="lspmac_8c_source.html#l00063">63</a> of file <a class="el" href="lspmac_8c_source.html">lspmac.c</a>.</p>

</div>
</div>
<a class="anchor" id="a85679cac947e199c88794f8e5a12bf5f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pthread_mutex_t lspmac_moving_mutex</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Coordinate moving motors between threads. </p>

<p>Definition at line <a class="el" href="lspmac_8c_source.html#l00061">61</a> of file <a class="el" href="lspmac_8c_source.html">lspmac.c</a>.</p>

</div>
</div>
<a class="anchor" id="a56260f012c50a591ee7f97e500f16994"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lspmac_nmotors</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The number of motors we manage. </p>

<p>Definition at line <a class="el" href="lspmac_8c_source.html#l00086">86</a> of file <a class="el" href="lspmac_8c_source.html">lspmac.c</a>.</p>

</div>
</div>
<a class="anchor" id="afbd51c2cefcee87afe994c9e9f372241"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pthread_cond_t lspmac_shutter_cond</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allows waiting for the shutter status to change. </p>

<p>Definition at line <a class="el" href="lspmac_8c_source.html#l00060">60</a> of file <a class="el" href="lspmac_8c_source.html">lspmac.c</a>.</p>

</div>
</div>
<a class="anchor" id="a396fbf06208de3ecbe1b0df549f1cd46"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lspmac_shutter_has_opened</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Indicates that the shutter had opened, perhaps briefly even if the state did not change. </p>

<p>Definition at line <a class="el" href="lspmac_8c_source.html#l00058">58</a> of file <a class="el" href="lspmac_8c_source.html">lspmac.c</a>.</p>

</div>
</div>
<a class="anchor" id="a1b78a13c654409333569815e1c109d38"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pthread_mutex_t lspmac_shutter_mutex</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Coordinates threads reading shutter status. </p>

<p>Definition at line <a class="el" href="lspmac_8c_source.html#l00059">59</a> of file <a class="el" href="lspmac_8c_source.html">lspmac.c</a>.</p>

</div>
</div>
<a class="anchor" id="a112158e0cd50449a440ac55c7af7bea2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int lspmac_shutter_state</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>State of the shutter, used to detect changes. </p>

<p>Definition at line <a class="el" href="lspmac_8c_source.html#l00057">57</a> of file <a class="el" href="lspmac_8c_source.html">lspmac.c</a>.</p>

</div>
</div>
<a class="anchor" id="a7a3e763682bd7f987d07f149e94b3bf8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pthread_mutex_t md2_status_mutex</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Synchronize reading/writting status buffer. </p>

<p>Definition at line <a class="el" href="lspmac_8c_source.html#l00339">339</a> of file <a class="el" href="lspmac_8c_source.html">lspmac.c</a>.</p>

</div>
</div>
<a class="anchor" id="a1ccf455563dc8d828558b6a230e164a6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char md2cmds_cmd[]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>our command; </p>

<p>Definition at line <a class="el" href="md2cmds_8c_source.html#l00019">19</a> of file <a class="el" href="md2cmds_8c_source.html">md2cmds.c</a>.</p>

</div>
</div>
<a class="anchor" id="a08d5b18ec9478d753c46a3e28d1f2126"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pthread_cond_t md2cmds_cond</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>condition to signal when it's time to run an md2 command </p>

<p>Definition at line <a class="el" href="md2cmds_8c_source.html#l00010">10</a> of file <a class="el" href="md2cmds_8c_source.html">md2cmds.c</a>.</p>

</div>
</div>
<a class="anchor" id="a6a34fb6876abbd580629d3708c805e7f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pgpmac_8h.html#ad449de06d02791adf2498d2a1e1f909c">lsredis_obj_t</a>* md2cmds_md_status_code</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="md2cmds_8c_source.html#l00021">21</a> of file <a class="el" href="md2cmds_8c_source.html">md2cmds.c</a>.</p>

</div>
</div>
<a class="anchor" id="ad67304bb851dc6268b0cda2f40fc5aa8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pthread_mutex_t md2cmds_mutex</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>mutex for the condition </p>

<p>Definition at line <a class="el" href="md2cmds_8c_source.html#l00011">11</a> of file <a class="el" href="md2cmds_8c_source.html">md2cmds.c</a>.</p>

</div>
</div>
<a class="anchor" id="ab517a930528e2b7d0993e11087765b03"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pthread_cond_t md2cmds_pg_cond</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a4d2c3ac81d4b13eb21f4ddcdda8c7308"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pthread_mutex_t md2cmds_pg_mutex</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ab552f2e28dd9cccefafe01f27717101b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pgpmac_8h.html#ac48984832ef73cf145e5f08bc65bd3a0">lspmac_bi_t</a>* minikappa_ok</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Minikappa is OK (whatever that means) </p>

<p>Definition at line <a class="el" href="lspmac_8c_source.html#l00129">129</a> of file <a class="el" href="lspmac_8c_source.html">lspmac.c</a>.</p>

</div>
</div>
<a class="anchor" id="ad128c64890c7c0d4f836d9ec6e99216a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pthread_mutex_t ncurses_mutex</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>allow more than one thread access to the screen </p>

<p>Definition at line <a class="el" href="pgpmac_8c_source.html#l00242">242</a> of file <a class="el" href="pgpmac_8c_source.html">pgpmac.c</a>.</p>

</div>
</div>
<a class="anchor" id="a8237e646ce032a840637a4ef7bff49b9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pgpmac_8h.html#aa5067fcbaabc5bbfdc52492495518c96">lspmac_motor_t</a>* omega</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>MD2 omega axis (the air bearing) </p>

<p>Definition at line <a class="el" href="lspmac_8c_source.html#l00087">87</a> of file <a class="el" href="lspmac_8c_source.html">lspmac.c</a>.</p>

</div>
</div>
<a class="anchor" id="ae6631a094accc469661805bdf80fc6d8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct timespec omega_zero_time</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Time we believe that omega crossed zero. </p>

<p>Definition at line <a class="el" href="lspmac_8c_source.html#l00070">70</a> of file <a class="el" href="lspmac_8c_source.html">lspmac.c</a>.</p>

</div>
</div>
<a class="anchor" id="ac8070dc568ad974a3db42b51eca828cc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pgpmac_8h.html#aa5067fcbaabc5bbfdc52492495518c96">lspmac_motor_t</a>* phi</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Phi (not data collection axis) </p>

<p>Definition at line <a class="el" href="lspmac_8c_source.html#l00101">101</a> of file <a class="el" href="lspmac_8c_source.html">lspmac.c</a>.</p>

</div>
</div>
<a class="anchor" id="a8a25bd9c593c6985107f90f999ce0b08"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pthread_cond_t pmac_queue_cond</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>wait for a command to be sent to PMAC before continuing </p>

<p>Definition at line <a class="el" href="lspmac_8c_source.html#l00076">76</a> of file <a class="el" href="lspmac_8c_source.html">lspmac.c</a>.</p>

</div>
</div>
<a class="anchor" id="acc1bb77b9bcbc4d970f841a41fd274b3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pthread_mutex_t pmac_queue_mutex</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>manage access to the pmac command queue </p>

<p>Definition at line <a class="el" href="lspmac_8c_source.html#l00075">75</a> of file <a class="el" href="lspmac_8c_source.html">lspmac.c</a>.</p>

</div>
</div>
<a class="anchor" id="ac59ab990e48033a811aeb0281fb588fc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pgpmac_8h.html#ac48984832ef73cf145e5f08bc65bd3a0">lspmac_bi_t</a>* sample_detected</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>smart magnet detected sample </p>

<p>Definition at line <a class="el" href="lspmac_8c_source.html#l00125">125</a> of file <a class="el" href="lspmac_8c_source.html">lspmac.c</a>.</p>

</div>
</div>
<a class="anchor" id="a589431b3a79c21c251fcb97cc9126991"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pgpmac_8h.html#aa5067fcbaabc5bbfdc52492495518c96">lspmac_motor_t</a>* scint</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Scintillator Z. </p>

<p>Definition at line <a class="el" href="lspmac_8c_source.html#l00097">97</a> of file <a class="el" href="lspmac_8c_source.html">lspmac.c</a>.</p>

</div>
</div>
<a class="anchor" id="ae98a0792d6b4b96a33df0a31bdec6342"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pgpmac_8h.html#ac48984832ef73cf145e5f08bc65bd3a0">lspmac_bi_t</a>* shutter_open</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>shutter is open (note in pmc says this is a slow input) </p>

<p>Definition at line <a class="el" href="lspmac_8c_source.html#l00132">132</a> of file <a class="el" href="lspmac_8c_source.html">lspmac.c</a>.</p>

</div>
</div>
<a class="anchor" id="a37903ed8430ac4d9ead609a78eb62f32"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pgpmac_8h.html#ac48984832ef73cf145e5f08bc65bd3a0">lspmac_bi_t</a>* smart_mag_err</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>smart magnet error (coil broken perhaps) </p>

<p>Definition at line <a class="el" href="lspmac_8c_source.html#l00133">133</a> of file <a class="el" href="lspmac_8c_source.html">lspmac.c</a>.</p>

</div>
</div>
<a class="anchor" id="a4892e918830dd12093d28c53a1c2df98"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pgpmac_8h.html#ac48984832ef73cf145e5f08bc65bd3a0">lspmac_bi_t</a>* smart_mag_off</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>smart magnet is off </p>

<p>Definition at line <a class="el" href="lspmac_8c_source.html#l00134">134</a> of file <a class="el" href="lspmac_8c_source.html">lspmac.c</a>.</p>

</div>
</div>
<a class="anchor" id="a2dc6fa78bb6313fe8b696d646eaa2443"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pgpmac_8h.html#ac48984832ef73cf145e5f08bc65bd3a0">lspmac_bi_t</a>* smart_mag_on</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>smart magnet is on </p>

<p>Definition at line <a class="el" href="lspmac_8c_source.html#l00130">130</a> of file <a class="el" href="lspmac_8c_source.html">lspmac.c</a>.</p>

</div>
</div>
<a class="anchor" id="abee73a0d9e5f3af9eb88d5cfd6b953c3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pgpmac_8h.html#aa5067fcbaabc5bbfdc52492495518c96">lspmac_motor_t</a>* smart_mag_oo</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Smart Magnet on/off. </p>

<p>Definition at line <a class="el" href="lspmac_8c_source.html#l00108">108</a> of file <a class="el" href="lspmac_8c_source.html">lspmac.c</a>.</p>

</div>
</div>
<a class="anchor" id="ab0487111dbe3c05d0bd835eb2fb9a3f7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">WINDOW* term_input</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>place to put the cursor </p>

<p>Definition at line <a class="el" href="pgpmac_8c_source.html#l00238">238</a> of file <a class="el" href="pgpmac_8c_source.html">pgpmac.c</a>.</p>

</div>
</div>
<a class="anchor" id="a65daf0f4a5bc6def23a9df98ff5ca57e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">WINDOW* term_output</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>place to print stuff out </p>

<p>Definition at line <a class="el" href="pgpmac_8c_source.html#l00237">237</a> of file <a class="el" href="pgpmac_8c_source.html">pgpmac.c</a>.</p>

</div>
</div>
<a class="anchor" id="ae746a6903fb8a4ea216def88eccedc3c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">WINDOW* term_status</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>shutter, lamp, air, etc status </p>

<p>Definition at line <a class="el" href="pgpmac_8c_source.html#l00239">239</a> of file <a class="el" href="pgpmac_8c_source.html">pgpmac.c</a>.</p>

</div>
</div>
<a class="anchor" id="ae2d7da3afeb756716e6e4ee9cab78f8a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">WINDOW* term_status2</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>shutter, lamp, air, etc status </p>

<p>Definition at line <a class="el" href="pgpmac_8c_source.html#l00240">240</a> of file <a class="el" href="pgpmac_8c_source.html">pgpmac.c</a>.</p>

</div>
</div>
<a class="anchor" id="ad53a42cfaa04eff0336a44c8c9986333"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pgpmac_8h.html#aa5067fcbaabc5bbfdc52492495518c96">lspmac_motor_t</a>* zoom</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Optical zoom. </p>

<p>Definition at line <a class="el" href="lspmac_8c_source.html#l00092">92</a> of file <a class="el" href="lspmac_8c_source.html">lspmac.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="pgpmac_8h.html">pgpmac.h</a></li>
    <li class="footer">Generated on Thu Jan 17 2013 17:06:26 for LS-CAT PGPMAC by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.2 </li>
  </ul>
</div>
</body>
</html>
