\hypertarget{pgpmac_8h}{\section{pgpmac.\-h File Reference}
\label{pgpmac_8h}\index{pgpmac.\-h@{pgpmac.\-h}}
}


Headers for the entire pgpmac project.  


{\ttfamily \#include $<$stdio.\-h$>$}\\*
{\ttfamily \#include $<$stdlib.\-h$>$}\\*
{\ttfamily \#include $<$unistd.\-h$>$}\\*
{\ttfamily \#include $<$sys/types.\-h$>$}\\*
{\ttfamily \#include $<$sys/socket.\-h$>$}\\*
{\ttfamily \#include $<$netdb.\-h$>$}\\*
{\ttfamily \#include $<$string.\-h$>$}\\*
{\ttfamily \#include $<$netinet/in.\-h$>$}\\*
{\ttfamily \#include $<$errno.\-h$>$}\\*
{\ttfamily \#include $<$poll.\-h$>$}\\*
{\ttfamily \#include $<$libpq-\/fe.\-h$>$}\\*
{\ttfamily \#include $<$ncurses.\-h$>$}\\*
{\ttfamily \#include $<$math.\-h$>$}\\*
{\ttfamily \#include $<$pthread.\-h$>$}\\*
{\ttfamily \#include $<$signal.\-h$>$}\\*
{\ttfamily \#include $<$sys/signalfd.\-h$>$}\\*
{\ttfamily \#include $<$sys/time.\-h$>$}\\*
{\ttfamily \#include $<$time.\-h$>$}\\*
{\ttfamily \#include $<$getopt.\-h$>$}\\*
{\ttfamily \#include $<$regex.\-h$>$}\\*
\subsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structtagEthernetCmd}{tag\-Ethernet\-Cmd}
\begin{DoxyCompactList}\small\item\em P\-M\-A\-C ethernet packet definition. \end{DoxyCompactList}\item 
struct \hyperlink{structlspmac__cmd__queue__struct}{lspmac\-\_\-cmd\-\_\-queue\-\_\-struct}
\begin{DoxyCompactList}\small\item\em P\-M\-A\-C command queue item. \end{DoxyCompactList}\item 
struct \hyperlink{structlskvs__kvs__struct}{lskvs\-\_\-kvs\-\_\-struct}
\begin{DoxyCompactList}\small\item\em Storage for the key value pairs. \end{DoxyCompactList}\item 
struct \hyperlink{structlskvs__kvs__list__struct}{lskvs\-\_\-kvs\-\_\-list\-\_\-struct}
\begin{DoxyCompactList}\small\item\em A second linked list type to handle private lists of K\-Vs. \end{DoxyCompactList}\item 
struct \hyperlink{structlspmac__motor__struct}{lspmac\-\_\-motor\-\_\-struct}
\begin{DoxyCompactList}\small\item\em Motor information. \end{DoxyCompactList}\item 
struct \hyperlink{structlspg__getcenter__struct}{lspg\-\_\-getcenter\-\_\-struct}
\begin{DoxyCompactList}\small\item\em Storage for getcenter query Used for the md2 R\-O\-T\-A\-T\-E command that generates the centering movies. \end{DoxyCompactList}\item 
struct \hyperlink{structlspg__nextshot__struct}{lspg\-\_\-nextshot\-\_\-struct}
\begin{DoxyCompactList}\small\item\em Storage definition for nextshot query. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \hyperlink{pgpmac_8h_a3bae94e8e4e4347dd5f87b6bda058de6}{L\-S\-\_\-\-D\-I\-S\-P\-L\-A\-Y\-\_\-\-W\-I\-N\-D\-O\-W\-\_\-\-H\-E\-I\-G\-H\-T}~8
\begin{DoxyCompactList}\small\item\em Number of status box rows. \end{DoxyCompactList}\item 
\#define \hyperlink{pgpmac_8h_a1f96754f00a1f82414cebc66f75ded78}{L\-S\-\_\-\-D\-I\-S\-P\-L\-A\-Y\-\_\-\-W\-I\-N\-D\-O\-W\-\_\-\-W\-I\-D\-T\-H}~24
\begin{DoxyCompactList}\small\item\em Number of status box columns. \end{DoxyCompactList}\item 
\#define \hyperlink{pgpmac_8h_a3a8ef1b4b5994d6dd12bf74454ea891b}{L\-S\-\_\-\-P\-G\-\_\-\-Q\-U\-E\-R\-Y\-\_\-\-S\-T\-R\-I\-N\-G\-\_\-\-L\-E\-N\-G\-T\-H}~1024
\begin{DoxyCompactList}\small\item\em Fixed length postgresql query strings. Queries should all be function calls so this is not as weird as one might think. \end{DoxyCompactList}\item 
\#define \hyperlink{pgpmac_8h_ab61d790b5572f116e091babfda53627b}{L\-S\-E\-V\-E\-N\-T\-S\-\_\-\-E\-V\-E\-N\-T\-\_\-\-L\-E\-N\-G\-T\-H}~32
\begin{DoxyCompactList}\small\item\em Fixed length for event names\-: simplifies string handling. \end{DoxyCompactList}\item 
\#define \hyperlink{pgpmac_8h_a30f0f377b0f0695284145d420ea51846}{M\-D2\-C\-M\-D\-S\-\_\-\-C\-M\-D\-\_\-\-L\-E\-N\-G\-T\-H}~32
\end{DoxyCompactItemize}
\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef struct \hyperlink{structtagEthernetCmd}{tag\-Ethernet\-Cmd} \hyperlink{pgpmac_8h_a2d163436571135a457f4a4e2fbd09633}{pmac\-\_\-cmd\-\_\-t}
\begin{DoxyCompactList}\small\item\em P\-M\-A\-C ethernet packet definition. \end{DoxyCompactList}\item 
typedef struct \\*
\hyperlink{structlspmac__cmd__queue__struct}{lspmac\-\_\-cmd\-\_\-queue\-\_\-struct} \hyperlink{pgpmac_8h_a99c275e32ad897dca34d196b91f038cb}{pmac\-\_\-cmd\-\_\-queue\-\_\-t}
\begin{DoxyCompactList}\small\item\em P\-M\-A\-C command queue item. \end{DoxyCompactList}\item 
typedef struct \hyperlink{structlskvs__kvs__struct}{lskvs\-\_\-kvs\-\_\-struct} \hyperlink{pgpmac_8h_a54bd386f945edb8a0311a20199e8f793}{lskvs\-\_\-kvs\-\_\-t}
\begin{DoxyCompactList}\small\item\em Storage for the key value pairs. \end{DoxyCompactList}\item 
typedef struct \\*
\hyperlink{structlskvs__kvs__list__struct}{lskvs\-\_\-kvs\-\_\-list\-\_\-struct} \hyperlink{pgpmac_8h_a47bb31b9c285a4b3e73874070fa8af0c}{lskvs\-\_\-kvs\-\_\-list\-\_\-t}
\begin{DoxyCompactList}\small\item\em A second linked list type to handle private lists of K\-Vs. \end{DoxyCompactList}\item 
typedef struct \hyperlink{structlspmac__motor__struct}{lspmac\-\_\-motor\-\_\-struct} \hyperlink{pgpmac_8h_aa5067fcbaabc5bbfdc52492495518c96}{lspmac\-\_\-motor\-\_\-t}
\begin{DoxyCompactList}\small\item\em Motor information. \end{DoxyCompactList}\item 
typedef struct \\*
\hyperlink{structlspg__getcenter__struct}{lspg\-\_\-getcenter\-\_\-struct} \hyperlink{pgpmac_8h_a48b627e412dd038c1f17cdb0501eec33}{lspg\-\_\-getcenter\-\_\-t}
\begin{DoxyCompactList}\small\item\em Storage for getcenter query Used for the md2 R\-O\-T\-A\-T\-E command that generates the centering movies. \end{DoxyCompactList}\item 
typedef struct \hyperlink{structlspg__nextshot__struct}{lspg\-\_\-nextshot\-\_\-struct} \hyperlink{pgpmac_8h_a17ea2bf07a0b3b892baa00bd392607b3}{lspg\-\_\-nextshot\-\_\-t}
\begin{DoxyCompactList}\small\item\em Storage definition for nextshot query. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{pgpmac_8h_a76b11c62b122ee0fd8399435d4260681}{Pmac\-Sock\-Sendline} (char $\ast$s)
\item 
void \hyperlink{pgpmac_8h_a4253474d4dd305aec0afdd5552b3ddd5}{lspg\-\_\-seq\-\_\-run\-\_\-prep\-\_\-all} (long long skey, double \hyperlink{pgpmac_8h_a0be79ccb7ebf3a665248fd856112b9fd}{kappa}, double \hyperlink{pgpmac_8h_ac8070dc568ad974a3db42b51eca828cc}{phi}, double cx, double cy, double ax, double ay, double az)
\begin{DoxyCompactList}\small\item\em Convinence function to call seq run prep. \end{DoxyCompactList}\item 
void \hyperlink{pgpmac_8h_a95e3fd7c1685d7e6ab6d0a295ab42f78}{lspg\-\_\-zoom\-\_\-lut\-\_\-call} ()
\item 
void \hyperlink{pgpmac_8h_a7762ca7b97b44b979e23ce88ca3b4249}{pgpmac\-\_\-printf} (char $\ast$fmt,...)
\begin{DoxyCompactList}\small\item\em Terminal output routine ala printf. \end{DoxyCompactList}\item 
void \hyperlink{pgpmac_8h_ae3e30b0ba9b5d5a291fa29b77ba920d8}{lspmac\-\_\-init} (int, int)
\begin{DoxyCompactList}\small\item\em Initialize this module. \end{DoxyCompactList}\item 
void \hyperlink{pgpmac_8h_a8a77972df14166e05c94ed0792baa09b}{lspg\-\_\-init} ()
\begin{DoxyCompactList}\small\item\em Initiallize the lspg module. \end{DoxyCompactList}\item 
void \hyperlink{pgpmac_8h_adf63440ffbc65024fef87ea6a11ea8b0}{lsupdate\-\_\-init} ()
\begin{DoxyCompactList}\small\item\em Initialize this module. \end{DoxyCompactList}\item 
void \hyperlink{pgpmac_8h_a0851b1baecda6a67993efde41d77b1c1}{md2cmds\-\_\-init} ()
\begin{DoxyCompactList}\small\item\em Initialize the md2cmds module. \end{DoxyCompactList}\item 
void \hyperlink{pgpmac_8h_a3a7fb93fb3fb9c4454613f30bfb0b1ee}{lspmac\-\_\-run} ()
\begin{DoxyCompactList}\small\item\em Start up the lspmac thread. \end{DoxyCompactList}\item 
void \hyperlink{pgpmac_8h_a1adfdb5ca9fdb5060849d726bf540117}{lspg\-\_\-run} ()
\begin{DoxyCompactList}\small\item\em Start 'er runnin'. \end{DoxyCompactList}\item 
void \hyperlink{pgpmac_8h_af219e9b2cc124f109aa4c2c2e16b5d07}{lsupdate\-\_\-run} ()
\begin{DoxyCompactList}\small\item\em run the update routines \end{DoxyCompactList}\item 
void \hyperlink{pgpmac_8h_aa62da7d423952334d41c7d282f45233d}{md2cmds\-\_\-run} ()
\begin{DoxyCompactList}\small\item\em Start up the thread. \end{DoxyCompactList}\item 
void \hyperlink{pgpmac_8h_af19a77187e7406fc87d36bd26e672e6d}{lsevents\-\_\-init} ()
\begin{DoxyCompactList}\small\item\em Initialize this module. \end{DoxyCompactList}\item 
void \hyperlink{pgpmac_8h_a4ddde538b603e3d4580ae9356bf9b89d}{lsevents\-\_\-run} ()
\begin{DoxyCompactList}\small\item\em Start up the thread and get out of the way. \end{DoxyCompactList}\item 
void \hyperlink{pgpmac_8h_a3661dfc51537c05b11f4fd184fdff07d}{lsevents\-\_\-send\-\_\-event} (char $\ast$,...)
\begin{DoxyCompactList}\small\item\em Call the callback routines for the given event. \end{DoxyCompactList}\item 
void \hyperlink{pgpmac_8h_aac89b916c1152c44042875feac35a9e4}{lsevents\-\_\-add\-\_\-listener} (char $\ast$, void($\ast$cb)(char $\ast$))
\begin{DoxyCompactList}\small\item\em Add a callback routine to listen for a specific event. \end{DoxyCompactList}\item 
void \hyperlink{pgpmac_8h_a024b08c7820bb31c3d5b8f281e07f3e8}{lsevents\-\_\-remove\-\_\-listener} (char $\ast$, void($\ast$cb)(char $\ast$))
\begin{DoxyCompactList}\small\item\em Remove a listener previously added with lsevents\-\_\-add\-\_\-listener. \end{DoxyCompactList}\item 
void \hyperlink{pgpmac_8h_a8cd37a8fb0f061456456a5d79bdd5189}{lstimer\-\_\-init} ()
\begin{DoxyCompactList}\small\item\em Initialize the timer list and pthread stuff. \end{DoxyCompactList}\item 
void \hyperlink{pgpmac_8h_a0b918acc1a4bf737cb62b5a70f8b553a}{lstimer\-\_\-run} ()
\begin{DoxyCompactList}\small\item\em Start up our thread. \end{DoxyCompactList}\item 
void \hyperlink{pgpmac_8h_af712dd2e9419026eff2762ba062eeaf1}{lstimer\-\_\-add\-\_\-timer} (char $\ast$, int, unsigned long int, unsigned long int)
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\hyperlink{pgpmac_8h_a48b627e412dd038c1f17cdb0501eec33}{lspg\-\_\-getcenter\-\_\-t} \hyperlink{pgpmac_8h_a7ef8a09203117578c9b2ce4719519f36}{lspg\-\_\-getcenter}
\begin{DoxyCompactList}\small\item\em the getcenter object \end{DoxyCompactList}\item 
\hyperlink{pgpmac_8h_a17ea2bf07a0b3b892baa00bd392607b3}{lspg\-\_\-nextshot\-\_\-t} \hyperlink{pgpmac_8h_ad8d8e2f578ca79189a80c1fd5b60cefd}{lspg\-\_\-nextshot}
\begin{DoxyCompactList}\small\item\em the nextshot object \end{DoxyCompactList}\item 
\hyperlink{pgpmac_8h_a54bd386f945edb8a0311a20199e8f793}{lskvs\-\_\-kvs\-\_\-t} $\ast$ \hyperlink{pgpmac_8h_a14ca7cca8246dcfc266ad30d56701c0a}{lskvs\-\_\-kvs}
\begin{DoxyCompactList}\small\item\em our list (or at least the start of it \end{DoxyCompactList}\item 
pthread\-\_\-rwlock\-\_\-t \hyperlink{pgpmac_8h_ad329bf890bd9eef896815dd53a323c2f}{lskvs\-\_\-rwlock}
\begin{DoxyCompactList}\small\item\em needed to protect the list \end{DoxyCompactList}\item 
\hyperlink{pgpmac_8h_aa5067fcbaabc5bbfdc52492495518c96}{lspmac\-\_\-motor\-\_\-t} \hyperlink{pgpmac_8h_aebfce5f9cbc8ba7bd4e2ee4880f303e8}{lspmac\-\_\-motors} \mbox{[}$\,$\mbox{]}
\begin{DoxyCompactList}\small\item\em All our motors. \end{DoxyCompactList}\item 
\hyperlink{pgpmac_8h_aa5067fcbaabc5bbfdc52492495518c96}{lspmac\-\_\-motor\-\_\-t} $\ast$ \hyperlink{pgpmac_8h_a8237e646ce032a840637a4ef7bff49b9}{omega}
\begin{DoxyCompactList}\small\item\em M\-D2 omega axis (the air bearing) \end{DoxyCompactList}\item 
\hyperlink{pgpmac_8h_aa5067fcbaabc5bbfdc52492495518c96}{lspmac\-\_\-motor\-\_\-t} $\ast$ \hyperlink{pgpmac_8h_a6cb218bdccfe5a93471c161f15a15cab}{alignx}
\begin{DoxyCompactList}\small\item\em Alignment stage X. \end{DoxyCompactList}\item 
\hyperlink{pgpmac_8h_aa5067fcbaabc5bbfdc52492495518c96}{lspmac\-\_\-motor\-\_\-t} $\ast$ \hyperlink{pgpmac_8h_a737c246c3948e644a18d191a931e1acd}{aligny}
\begin{DoxyCompactList}\small\item\em Alignment stage Y. \end{DoxyCompactList}\item 
\hyperlink{pgpmac_8h_aa5067fcbaabc5bbfdc52492495518c96}{lspmac\-\_\-motor\-\_\-t} $\ast$ \hyperlink{pgpmac_8h_ae7642b1da0f7c7f8448104c691d40a12}{alignz}
\begin{DoxyCompactList}\small\item\em Alignment stage X. \end{DoxyCompactList}\item 
\hyperlink{pgpmac_8h_aa5067fcbaabc5bbfdc52492495518c96}{lspmac\-\_\-motor\-\_\-t} $\ast$ \hyperlink{pgpmac_8h_aa90d2363b744acbd4d45133b7a716d8f}{anal}
\begin{DoxyCompactList}\small\item\em Polaroid analyzer motor. \end{DoxyCompactList}\item 
\hyperlink{pgpmac_8h_aa5067fcbaabc5bbfdc52492495518c96}{lspmac\-\_\-motor\-\_\-t} $\ast$ \hyperlink{pgpmac_8h_ad53a42cfaa04eff0336a44c8c9986333}{zoom}
\begin{DoxyCompactList}\small\item\em Optical zoom. \end{DoxyCompactList}\item 
\hyperlink{pgpmac_8h_aa5067fcbaabc5bbfdc52492495518c96}{lspmac\-\_\-motor\-\_\-t} $\ast$ \hyperlink{pgpmac_8h_a139200ddaa9856a7ffcec0e6cbaa8f1b}{apery}
\begin{DoxyCompactList}\small\item\em Aperture Y. \end{DoxyCompactList}\item 
\hyperlink{pgpmac_8h_aa5067fcbaabc5bbfdc52492495518c96}{lspmac\-\_\-motor\-\_\-t} $\ast$ \hyperlink{pgpmac_8h_ab93bd6ee850b285ca3a95e64d15e9477}{aperz}
\begin{DoxyCompactList}\small\item\em Aperture Z. \end{DoxyCompactList}\item 
\hyperlink{pgpmac_8h_aa5067fcbaabc5bbfdc52492495518c96}{lspmac\-\_\-motor\-\_\-t} $\ast$ \hyperlink{pgpmac_8h_a51358daaea8b5236f08414877d8af6c2}{capy}
\begin{DoxyCompactList}\small\item\em Capillary Y. \end{DoxyCompactList}\item 
\hyperlink{pgpmac_8h_aa5067fcbaabc5bbfdc52492495518c96}{lspmac\-\_\-motor\-\_\-t} $\ast$ \hyperlink{pgpmac_8h_aa45f268d0af9f3d465acfab128919718}{capz}
\begin{DoxyCompactList}\small\item\em Capillary Z. \end{DoxyCompactList}\item 
\hyperlink{pgpmac_8h_aa5067fcbaabc5bbfdc52492495518c96}{lspmac\-\_\-motor\-\_\-t} $\ast$ \hyperlink{pgpmac_8h_ac0eeaffa0996271d8a38344a470d13d7}{scinz}
\begin{DoxyCompactList}\small\item\em Scintillator Z. \end{DoxyCompactList}\item 
\hyperlink{pgpmac_8h_aa5067fcbaabc5bbfdc52492495518c96}{lspmac\-\_\-motor\-\_\-t} $\ast$ \hyperlink{pgpmac_8h_ac940d950d9efeaf3f0ae67e9bf331188}{cenx}
\begin{DoxyCompactList}\small\item\em Centering Table X. \end{DoxyCompactList}\item 
\hyperlink{pgpmac_8h_aa5067fcbaabc5bbfdc52492495518c96}{lspmac\-\_\-motor\-\_\-t} $\ast$ \hyperlink{pgpmac_8h_aaed18e738ba7bfb6c771a44f5d7ea827}{ceny}
\begin{DoxyCompactList}\small\item\em Centering Table Y. \end{DoxyCompactList}\item 
\hyperlink{pgpmac_8h_aa5067fcbaabc5bbfdc52492495518c96}{lspmac\-\_\-motor\-\_\-t} $\ast$ \hyperlink{pgpmac_8h_a0be79ccb7ebf3a665248fd856112b9fd}{kappa}
\begin{DoxyCompactList}\small\item\em Kappa. \end{DoxyCompactList}\item 
\hyperlink{pgpmac_8h_aa5067fcbaabc5bbfdc52492495518c96}{lspmac\-\_\-motor\-\_\-t} $\ast$ \hyperlink{pgpmac_8h_ac8070dc568ad974a3db42b51eca828cc}{phi}
\begin{DoxyCompactList}\small\item\em Phi (not data collection axis) \end{DoxyCompactList}\item 
\hyperlink{pgpmac_8h_aa5067fcbaabc5bbfdc52492495518c96}{lspmac\-\_\-motor\-\_\-t} $\ast$ \hyperlink{pgpmac_8h_a26dec4623af9beed912b8e7e6f99822c}{fshut}
\begin{DoxyCompactList}\small\item\em Fast shutter. \end{DoxyCompactList}\item 
\hyperlink{pgpmac_8h_aa5067fcbaabc5bbfdc52492495518c96}{lspmac\-\_\-motor\-\_\-t} $\ast$ \hyperlink{pgpmac_8h_aeb09895663eff333b7a75acb319a9fc1}{flight}
\begin{DoxyCompactList}\small\item\em Front Light D\-A\-C. \end{DoxyCompactList}\item 
\hyperlink{pgpmac_8h_aa5067fcbaabc5bbfdc52492495518c96}{lspmac\-\_\-motor\-\_\-t} $\ast$ \hyperlink{pgpmac_8h_a85d6eaa4b4a82bb3112574f458d1dc50}{blight}
\begin{DoxyCompactList}\small\item\em Back Light D\-A\-C. \end{DoxyCompactList}\item 
\hyperlink{pgpmac_8h_aa5067fcbaabc5bbfdc52492495518c96}{lspmac\-\_\-motor\-\_\-t} $\ast$ \hyperlink{pgpmac_8h_a8a3ca6fcf5e24dcc26170736843e53b2}{fscint}
\begin{DoxyCompactList}\small\item\em Scintillator Piezo D\-A\-C. \end{DoxyCompactList}\item 
\hyperlink{pgpmac_8h_aa5067fcbaabc5bbfdc52492495518c96}{lspmac\-\_\-motor\-\_\-t} $\ast$ \hyperlink{pgpmac_8h_af813a2eff0b7efa4c70633559054e84c}{blight\-\_\-ud}
\begin{DoxyCompactList}\small\item\em Back Light Up/\-Down actuator. \end{DoxyCompactList}\item 
\hyperlink{pgpmac_8h_aa5067fcbaabc5bbfdc52492495518c96}{lspmac\-\_\-motor\-\_\-t} $\ast$ \hyperlink{pgpmac_8h_ae78d9a757d4c85419fff9c94b15e25d7}{cryo}
\begin{DoxyCompactList}\small\item\em Move the cryostream towards or away from the crystal. \end{DoxyCompactList}\item 
\hyperlink{pgpmac_8h_aa5067fcbaabc5bbfdc52492495518c96}{lspmac\-\_\-motor\-\_\-t} $\ast$ \hyperlink{pgpmac_8h_a9d9c5030d817483ca9518027c91adac4}{dryer}
\begin{DoxyCompactList}\small\item\em blow air on the scintilator to dry it off \end{DoxyCompactList}\item 
int \hyperlink{pgpmac_8h_a56260f012c50a591ee7f97e500f16994}{lspmac\-\_\-nmotors}
\begin{DoxyCompactList}\small\item\em The number of motors we manage. \end{DoxyCompactList}\item 
W\-I\-N\-D\-O\-W $\ast$ \hyperlink{pgpmac_8h_a65daf0f4a5bc6def23a9df98ff5ca57e}{term\-\_\-output}
\begin{DoxyCompactList}\small\item\em place to print stuff out \end{DoxyCompactList}\item 
W\-I\-N\-D\-O\-W $\ast$ \hyperlink{pgpmac_8h_ab0487111dbe3c05d0bd835eb2fb9a3f7}{term\-\_\-input}
\begin{DoxyCompactList}\small\item\em place to put the cursor \end{DoxyCompactList}\item 
W\-I\-N\-D\-O\-W $\ast$ \hyperlink{pgpmac_8h_ae746a6903fb8a4ea216def88eccedc3c}{term\-\_\-status}
\begin{DoxyCompactList}\small\item\em shutter, lamp, air, etc status \end{DoxyCompactList}\item 
W\-I\-N\-D\-O\-W $\ast$ \hyperlink{pgpmac_8h_ae2d7da3afeb756716e6e4ee9cab78f8a}{term\-\_\-status2}
\begin{DoxyCompactList}\small\item\em shutter, lamp, air, etc status \end{DoxyCompactList}\item 
pthread\-\_\-mutex\-\_\-t \hyperlink{pgpmac_8h_ad128c64890c7c0d4f836d9ec6e99216a}{ncurses\-\_\-mutex}
\begin{DoxyCompactList}\small\item\em allow more than one thread access to the screen \end{DoxyCompactList}\item 
pthread\-\_\-cond\-\_\-t \hyperlink{pgpmac_8h_a08d5b18ec9478d753c46a3e28d1f2126}{md2cmds\-\_\-cond}
\begin{DoxyCompactList}\small\item\em condition to signal when it's time to run an md2 command \end{DoxyCompactList}\item 
pthread\-\_\-mutex\-\_\-t \hyperlink{pgpmac_8h_ad67304bb851dc6268b0cda2f40fc5aa8}{md2cmds\-\_\-mutex}
\begin{DoxyCompactList}\small\item\em mutex for the condition \end{DoxyCompactList}\item 
pthread\-\_\-cond\-\_\-t \hyperlink{pgpmac_8h_ab517a930528e2b7d0993e11087765b03}{md2cmds\-\_\-pg\-\_\-cond}
\begin{DoxyCompactList}\small\item\em coordinate call and response \end{DoxyCompactList}\item 
pthread\-\_\-mutex\-\_\-t \hyperlink{pgpmac_8h_a4d2c3ac81d4b13eb21f4ddcdda8c7308}{md2cmds\-\_\-pg\-\_\-mutex}
\begin{DoxyCompactList}\small\item\em message passing between md2cmds and pg \end{DoxyCompactList}\item 
pthread\-\_\-mutex\-\_\-t \hyperlink{pgpmac_8h_a1b78a13c654409333569815e1c109d38}{lspmac\-\_\-shutter\-\_\-mutex}
\begin{DoxyCompactList}\small\item\em Coordinates threads reading shutter status. \end{DoxyCompactList}\item 
pthread\-\_\-cond\-\_\-t \hyperlink{pgpmac_8h_afbd51c2cefcee87afe994c9e9f372241}{lspmac\-\_\-shutter\-\_\-cond}
\begin{DoxyCompactList}\small\item\em Allows waiting for the shutter status to change. \end{DoxyCompactList}\item 
int \hyperlink{pgpmac_8h_a112158e0cd50449a440ac55c7af7bea2}{lspmac\-\_\-shutter\-\_\-state}
\begin{DoxyCompactList}\small\item\em State of the shutter, used to detect changes. \end{DoxyCompactList}\item 
int \hyperlink{pgpmac_8h_a396fbf06208de3ecbe1b0df549f1cd46}{lspmac\-\_\-shutter\-\_\-has\-\_\-opened}
\begin{DoxyCompactList}\small\item\em Indicates that the shutter had opened, perhaps briefly even if the state did not change. \end{DoxyCompactList}\item 
pthread\-\_\-mutex\-\_\-t \hyperlink{pgpmac_8h_a85679cac947e199c88794f8e5a12bf5f}{lspmac\-\_\-moving\-\_\-mutex}
\begin{DoxyCompactList}\small\item\em Coordinate moving motors between threads. \end{DoxyCompactList}\item 
pthread\-\_\-cond\-\_\-t \hyperlink{pgpmac_8h_a57547d211906c981ef20257eba99f8df}{lspmac\-\_\-moving\-\_\-cond}
\begin{DoxyCompactList}\small\item\em Wait for motor(s) to finish moving condition. \end{DoxyCompactList}\item 
int \hyperlink{pgpmac_8h_a7a32c617c183166308241e270959df56}{lspmac\-\_\-moving\-\_\-flags}
\begin{DoxyCompactList}\small\item\em Flag used to implement motor moving condition. \end{DoxyCompactList}\item 
pthread\-\_\-mutex\-\_\-t \hyperlink{pgpmac_8h_a7a3e763682bd7f987d07f149e94b3bf8}{md2\-\_\-status\-\_\-mutex}
\begin{DoxyCompactList}\small\item\em Synchronize reading/writting status buffer. \end{DoxyCompactList}\item 
char \hyperlink{pgpmac_8h_a1ccf455563dc8d828558b6a230e164a6}{md2cmds\-\_\-cmd} \mbox{[}$\,$\mbox{]}
\begin{DoxyCompactList}\small\item\em our command; \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Headers for the entire pgpmac project. \begin{DoxyDate}{Date}
2012 
\end{DoxyDate}
\begin{DoxyAuthor}{Author}
Keith Brister 
\end{DoxyAuthor}
\begin{DoxyCopyright}{Copyright}
All Rights Reserved 
\end{DoxyCopyright}


Definition in file \hyperlink{pgpmac_8h_source}{pgpmac.\-h}.



\subsection{Macro Definition Documentation}
\hypertarget{pgpmac_8h_a3bae94e8e4e4347dd5f87b6bda058de6}{\index{pgpmac.\-h@{pgpmac.\-h}!L\-S\-\_\-\-D\-I\-S\-P\-L\-A\-Y\-\_\-\-W\-I\-N\-D\-O\-W\-\_\-\-H\-E\-I\-G\-H\-T@{L\-S\-\_\-\-D\-I\-S\-P\-L\-A\-Y\-\_\-\-W\-I\-N\-D\-O\-W\-\_\-\-H\-E\-I\-G\-H\-T}}
\index{L\-S\-\_\-\-D\-I\-S\-P\-L\-A\-Y\-\_\-\-W\-I\-N\-D\-O\-W\-\_\-\-H\-E\-I\-G\-H\-T@{L\-S\-\_\-\-D\-I\-S\-P\-L\-A\-Y\-\_\-\-W\-I\-N\-D\-O\-W\-\_\-\-H\-E\-I\-G\-H\-T}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{L\-S\-\_\-\-D\-I\-S\-P\-L\-A\-Y\-\_\-\-W\-I\-N\-D\-O\-W\-\_\-\-H\-E\-I\-G\-H\-T}]{\setlength{\rightskip}{0pt plus 5cm}\#define L\-S\-\_\-\-D\-I\-S\-P\-L\-A\-Y\-\_\-\-W\-I\-N\-D\-O\-W\-\_\-\-H\-E\-I\-G\-H\-T~8}}\label{pgpmac_8h_a3bae94e8e4e4347dd5f87b6bda058de6}


Number of status box rows. 



Definition at line 30 of file pgpmac.\-h.

\hypertarget{pgpmac_8h_a1f96754f00a1f82414cebc66f75ded78}{\index{pgpmac.\-h@{pgpmac.\-h}!L\-S\-\_\-\-D\-I\-S\-P\-L\-A\-Y\-\_\-\-W\-I\-N\-D\-O\-W\-\_\-\-W\-I\-D\-T\-H@{L\-S\-\_\-\-D\-I\-S\-P\-L\-A\-Y\-\_\-\-W\-I\-N\-D\-O\-W\-\_\-\-W\-I\-D\-T\-H}}
\index{L\-S\-\_\-\-D\-I\-S\-P\-L\-A\-Y\-\_\-\-W\-I\-N\-D\-O\-W\-\_\-\-W\-I\-D\-T\-H@{L\-S\-\_\-\-D\-I\-S\-P\-L\-A\-Y\-\_\-\-W\-I\-N\-D\-O\-W\-\_\-\-W\-I\-D\-T\-H}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{L\-S\-\_\-\-D\-I\-S\-P\-L\-A\-Y\-\_\-\-W\-I\-N\-D\-O\-W\-\_\-\-W\-I\-D\-T\-H}]{\setlength{\rightskip}{0pt plus 5cm}\#define L\-S\-\_\-\-D\-I\-S\-P\-L\-A\-Y\-\_\-\-W\-I\-N\-D\-O\-W\-\_\-\-W\-I\-D\-T\-H~24}}\label{pgpmac_8h_a1f96754f00a1f82414cebc66f75ded78}


Number of status box columns. 



Definition at line 34 of file pgpmac.\-h.

\hypertarget{pgpmac_8h_a3a8ef1b4b5994d6dd12bf74454ea891b}{\index{pgpmac.\-h@{pgpmac.\-h}!L\-S\-\_\-\-P\-G\-\_\-\-Q\-U\-E\-R\-Y\-\_\-\-S\-T\-R\-I\-N\-G\-\_\-\-L\-E\-N\-G\-T\-H@{L\-S\-\_\-\-P\-G\-\_\-\-Q\-U\-E\-R\-Y\-\_\-\-S\-T\-R\-I\-N\-G\-\_\-\-L\-E\-N\-G\-T\-H}}
\index{L\-S\-\_\-\-P\-G\-\_\-\-Q\-U\-E\-R\-Y\-\_\-\-S\-T\-R\-I\-N\-G\-\_\-\-L\-E\-N\-G\-T\-H@{L\-S\-\_\-\-P\-G\-\_\-\-Q\-U\-E\-R\-Y\-\_\-\-S\-T\-R\-I\-N\-G\-\_\-\-L\-E\-N\-G\-T\-H}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{L\-S\-\_\-\-P\-G\-\_\-\-Q\-U\-E\-R\-Y\-\_\-\-S\-T\-R\-I\-N\-G\-\_\-\-L\-E\-N\-G\-T\-H}]{\setlength{\rightskip}{0pt plus 5cm}\#define L\-S\-\_\-\-P\-G\-\_\-\-Q\-U\-E\-R\-Y\-\_\-\-S\-T\-R\-I\-N\-G\-\_\-\-L\-E\-N\-G\-T\-H~1024}}\label{pgpmac_8h_a3a8ef1b4b5994d6dd12bf74454ea891b}


Fixed length postgresql query strings. Queries should all be function calls so this is not as weird as one might think. 



Definition at line 37 of file pgpmac.\-h.

\hypertarget{pgpmac_8h_ab61d790b5572f116e091babfda53627b}{\index{pgpmac.\-h@{pgpmac.\-h}!L\-S\-E\-V\-E\-N\-T\-S\-\_\-\-E\-V\-E\-N\-T\-\_\-\-L\-E\-N\-G\-T\-H@{L\-S\-E\-V\-E\-N\-T\-S\-\_\-\-E\-V\-E\-N\-T\-\_\-\-L\-E\-N\-G\-T\-H}}
\index{L\-S\-E\-V\-E\-N\-T\-S\-\_\-\-E\-V\-E\-N\-T\-\_\-\-L\-E\-N\-G\-T\-H@{L\-S\-E\-V\-E\-N\-T\-S\-\_\-\-E\-V\-E\-N\-T\-\_\-\-L\-E\-N\-G\-T\-H}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{L\-S\-E\-V\-E\-N\-T\-S\-\_\-\-E\-V\-E\-N\-T\-\_\-\-L\-E\-N\-G\-T\-H}]{\setlength{\rightskip}{0pt plus 5cm}\#define L\-S\-E\-V\-E\-N\-T\-S\-\_\-\-E\-V\-E\-N\-T\-\_\-\-L\-E\-N\-G\-T\-H~32}}\label{pgpmac_8h_ab61d790b5572f116e091babfda53627b}


Fixed length for event names\-: simplifies string handling. 



Definition at line 40 of file pgpmac.\-h.

\hypertarget{pgpmac_8h_a30f0f377b0f0695284145d420ea51846}{\index{pgpmac.\-h@{pgpmac.\-h}!M\-D2\-C\-M\-D\-S\-\_\-\-C\-M\-D\-\_\-\-L\-E\-N\-G\-T\-H@{M\-D2\-C\-M\-D\-S\-\_\-\-C\-M\-D\-\_\-\-L\-E\-N\-G\-T\-H}}
\index{M\-D2\-C\-M\-D\-S\-\_\-\-C\-M\-D\-\_\-\-L\-E\-N\-G\-T\-H@{M\-D2\-C\-M\-D\-S\-\_\-\-C\-M\-D\-\_\-\-L\-E\-N\-G\-T\-H}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{M\-D2\-C\-M\-D\-S\-\_\-\-C\-M\-D\-\_\-\-L\-E\-N\-G\-T\-H}]{\setlength{\rightskip}{0pt plus 5cm}\#define M\-D2\-C\-M\-D\-S\-\_\-\-C\-M\-D\-\_\-\-L\-E\-N\-G\-T\-H~32}}\label{pgpmac_8h_a30f0f377b0f0695284145d420ea51846}


Definition at line 361 of file pgpmac.\-h.



\subsection{Typedef Documentation}
\hypertarget{pgpmac_8h_a47bb31b9c285a4b3e73874070fa8af0c}{\index{pgpmac.\-h@{pgpmac.\-h}!lskvs\-\_\-kvs\-\_\-list\-\_\-t@{lskvs\-\_\-kvs\-\_\-list\-\_\-t}}
\index{lskvs\-\_\-kvs\-\_\-list\-\_\-t@{lskvs\-\_\-kvs\-\_\-list\-\_\-t}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lskvs\-\_\-kvs\-\_\-list\-\_\-t}]{\setlength{\rightskip}{0pt plus 5cm}typedef struct {\bf lskvs\-\_\-kvs\-\_\-list\-\_\-struct}  {\bf lskvs\-\_\-kvs\-\_\-list\-\_\-t}}}\label{pgpmac_8h_a47bb31b9c285a4b3e73874070fa8af0c}


A second linked list type to handle private lists of K\-Vs. 

Developed to support lists of preset motor positions. \hypertarget{pgpmac_8h_a54bd386f945edb8a0311a20199e8f793}{\index{pgpmac.\-h@{pgpmac.\-h}!lskvs\-\_\-kvs\-\_\-t@{lskvs\-\_\-kvs\-\_\-t}}
\index{lskvs\-\_\-kvs\-\_\-t@{lskvs\-\_\-kvs\-\_\-t}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lskvs\-\_\-kvs\-\_\-t}]{\setlength{\rightskip}{0pt plus 5cm}typedef struct {\bf lskvs\-\_\-kvs\-\_\-struct}  {\bf lskvs\-\_\-kvs\-\_\-t}}}\label{pgpmac_8h_a54bd386f945edb8a0311a20199e8f793}


Storage for the key value pairs. 

the k's and v's are strings and to keep the memory management less crazy we'll calloc some space for these strings and only free and re-\/calloc if we need more space later. Only the values are ever going to be resized. \hypertarget{pgpmac_8h_a48b627e412dd038c1f17cdb0501eec33}{\index{pgpmac.\-h@{pgpmac.\-h}!lspg\-\_\-getcenter\-\_\-t@{lspg\-\_\-getcenter\-\_\-t}}
\index{lspg\-\_\-getcenter\-\_\-t@{lspg\-\_\-getcenter\-\_\-t}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lspg\-\_\-getcenter\-\_\-t}]{\setlength{\rightskip}{0pt plus 5cm}typedef struct {\bf lspg\-\_\-getcenter\-\_\-struct}  {\bf lspg\-\_\-getcenter\-\_\-t}}}\label{pgpmac_8h_a48b627e412dd038c1f17cdb0501eec33}


Storage for getcenter query Used for the md2 R\-O\-T\-A\-T\-E command that generates the centering movies. 

\hypertarget{pgpmac_8h_a17ea2bf07a0b3b892baa00bd392607b3}{\index{pgpmac.\-h@{pgpmac.\-h}!lspg\-\_\-nextshot\-\_\-t@{lspg\-\_\-nextshot\-\_\-t}}
\index{lspg\-\_\-nextshot\-\_\-t@{lspg\-\_\-nextshot\-\_\-t}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lspg\-\_\-nextshot\-\_\-t}]{\setlength{\rightskip}{0pt plus 5cm}typedef struct {\bf lspg\-\_\-nextshot\-\_\-struct}  {\bf lspg\-\_\-nextshot\-\_\-t}}}\label{pgpmac_8h_a17ea2bf07a0b3b892baa00bd392607b3}


Storage definition for nextshot query. 

The next shot query returns all the information needed to collect the next data frame. Since S\-Q\-L allows for null fields independently from blank strings a separate integer is used as a flag for this case. This adds to the program complexity but allows for some important cases. Suck it up.\-definition of the next image to be taken (and the one after that, too!) \hypertarget{pgpmac_8h_aa5067fcbaabc5bbfdc52492495518c96}{\index{pgpmac.\-h@{pgpmac.\-h}!lspmac\-\_\-motor\-\_\-t@{lspmac\-\_\-motor\-\_\-t}}
\index{lspmac\-\_\-motor\-\_\-t@{lspmac\-\_\-motor\-\_\-t}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lspmac\-\_\-motor\-\_\-t}]{\setlength{\rightskip}{0pt plus 5cm}typedef struct {\bf lspmac\-\_\-motor\-\_\-struct}  {\bf lspmac\-\_\-motor\-\_\-t}}}\label{pgpmac_8h_aa5067fcbaabc5bbfdc52492495518c96}


Motor information. 

A catchall for motors and motor like objects. Not all members are used by all objects. \hypertarget{pgpmac_8h_a99c275e32ad897dca34d196b91f038cb}{\index{pgpmac.\-h@{pgpmac.\-h}!pmac\-\_\-cmd\-\_\-queue\-\_\-t@{pmac\-\_\-cmd\-\_\-queue\-\_\-t}}
\index{pmac\-\_\-cmd\-\_\-queue\-\_\-t@{pmac\-\_\-cmd\-\_\-queue\-\_\-t}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{pmac\-\_\-cmd\-\_\-queue\-\_\-t}]{\setlength{\rightskip}{0pt plus 5cm}typedef struct {\bf lspmac\-\_\-cmd\-\_\-queue\-\_\-struct}  {\bf pmac\-\_\-cmd\-\_\-queue\-\_\-t}}}\label{pgpmac_8h_a99c275e32ad897dca34d196b91f038cb}


P\-M\-A\-C command queue item. 

Command queue items are fixed length to simplify memory management. \hypertarget{pgpmac_8h_a2d163436571135a457f4a4e2fbd09633}{\index{pgpmac.\-h@{pgpmac.\-h}!pmac\-\_\-cmd\-\_\-t@{pmac\-\_\-cmd\-\_\-t}}
\index{pmac\-\_\-cmd\-\_\-t@{pmac\-\_\-cmd\-\_\-t}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{pmac\-\_\-cmd\-\_\-t}]{\setlength{\rightskip}{0pt plus 5cm}typedef struct {\bf tag\-Ethernet\-Cmd}  {\bf pmac\-\_\-cmd\-\_\-t}}}\label{pgpmac_8h_a2d163436571135a457f4a4e2fbd09633}


P\-M\-A\-C ethernet packet definition. 

Taken directly from the Delta Tau documentation. 

\subsection{Function Documentation}
\hypertarget{pgpmac_8h_aac89b916c1152c44042875feac35a9e4}{\index{pgpmac.\-h@{pgpmac.\-h}!lsevents\-\_\-add\-\_\-listener@{lsevents\-\_\-add\-\_\-listener}}
\index{lsevents\-\_\-add\-\_\-listener@{lsevents\-\_\-add\-\_\-listener}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lsevents\-\_\-add\-\_\-listener}]{\setlength{\rightskip}{0pt plus 5cm}void lsevents\-\_\-add\-\_\-listener (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{event, }
\item[{void($\ast$)(char $\ast$)}]{cb}
\end{DoxyParamCaption}
)}}\label{pgpmac_8h_aac89b916c1152c44042875feac35a9e4}


Add a callback routine to listen for a specific event. 


\begin{DoxyParams}{Parameters}
{\em event} & the name of the event to listen for \\
\hline
{\em cb} & the routine to call \\
\hline
\end{DoxyParams}


Definition at line 76 of file lsevents.\-c.


\begin{DoxyCode}
                                                             \{
  \hyperlink{structlsevents__listener__struct}{lsevents\_listener\_t} *\textcolor{keyword}{new};

  \textcolor{keyword}{new} = calloc( 1, \textcolor{keyword}{sizeof}( \hyperlink{structlsevents__listener__struct}{lsevents\_listener\_t}));
  \textcolor{keywordflow}{if}( \textcolor{keyword}{new} == NULL) \{
    \hyperlink{lslogging_8c_a0e756b36671055ef02a8f04d2ba8a93b}{lslogging\_log\_message}( \textcolor{stringliteral}{"lsevents\_add\_listener: out of
       memory"});
    exit( -1);
  \}

  strncpy( new->event, event, \hyperlink{pgpmac_8h_ab61d790b5572f116e091babfda53627b}{LSEVENTS\_EVENT\_LENGTH});
  \textcolor{keyword}{new}->event[\hyperlink{pgpmac_8h_ab61d790b5572f116e091babfda53627b}{LSEVENTS\_EVENT\_LENGTH}-1] = 0;
  \textcolor{keyword}{new}->cb   = cb;

  pthread\_mutex\_lock( &\hyperlink{lsevents_8c_a70bba59930a1c7d7d181aa03cdfb6c00}{lsevents\_listener\_mutex});
  \textcolor{keyword}{new}->next = \hyperlink{lsevents_8c_a300dc3edfa8546d75e9f8bab8fa06c5c}{lsevents\_listeners\_p};
  \hyperlink{lsevents_8c_a300dc3edfa8546d75e9f8bab8fa06c5c}{lsevents\_listeners\_p} = \textcolor{keyword}{new};
  pthread\_mutex\_unlock( &\hyperlink{lsevents_8c_a70bba59930a1c7d7d181aa03cdfb6c00}{lsevents\_listener\_mutex});

  \hyperlink{lslogging_8c_a0e756b36671055ef02a8f04d2ba8a93b}{lslogging\_log\_message}( \textcolor{stringliteral}{"lsevents\_add\_listener: added
       listener for event %s"}, event);

\}
\end{DoxyCode}
\hypertarget{pgpmac_8h_af19a77187e7406fc87d36bd26e672e6d}{\index{pgpmac.\-h@{pgpmac.\-h}!lsevents\-\_\-init@{lsevents\-\_\-init}}
\index{lsevents\-\_\-init@{lsevents\-\_\-init}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lsevents\-\_\-init}]{\setlength{\rightskip}{0pt plus 5cm}void lsevents\-\_\-init (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{pgpmac_8h_af19a77187e7406fc87d36bd26e672e6d}


Initialize this module. 



Definition at line 187 of file lsevents.\-c.


\begin{DoxyCode}
                     \{
  pthread\_mutex\_init( &\hyperlink{lsevents_8c_ab46f4ebda5e926a213faedac1a545ec1}{lsevents\_queue\_mutex}, NULL);
  pthread\_cond\_init(  &\hyperlink{lsevents_8c_a8079d9fb8c35db3ca5f83be5aeb2a747}{lsevents\_queue\_cond}, NULL);
  pthread\_mutex\_init( &\hyperlink{lsevents_8c_a70bba59930a1c7d7d181aa03cdfb6c00}{lsevents\_listener\_mutex}, NULL);
\}
\end{DoxyCode}
\hypertarget{pgpmac_8h_a024b08c7820bb31c3d5b8f281e07f3e8}{\index{pgpmac.\-h@{pgpmac.\-h}!lsevents\-\_\-remove\-\_\-listener@{lsevents\-\_\-remove\-\_\-listener}}
\index{lsevents\-\_\-remove\-\_\-listener@{lsevents\-\_\-remove\-\_\-listener}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lsevents\-\_\-remove\-\_\-listener}]{\setlength{\rightskip}{0pt plus 5cm}void lsevents\-\_\-remove\-\_\-listener (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{event, }
\item[{void($\ast$)(char $\ast$)}]{cb}
\end{DoxyParamCaption}
)}}\label{pgpmac_8h_a024b08c7820bb31c3d5b8f281e07f3e8}


Remove a listener previously added with lsevents\-\_\-add\-\_\-listener. 


\begin{DoxyParams}{Parameters}
{\em event} & The name of the event \\
\hline
{\em cb} & The callback routine to remove \\
\hline
\end{DoxyParams}


Definition at line 102 of file lsevents.\-c.


\begin{DoxyCode}
                                                                \{
  
  \hyperlink{structlsevents__listener__struct}{lsevents\_listener\_t} *last, *current;

  \textcolor{comment}{//}
  \textcolor{comment}{// Find the listener to remove}
  \textcolor{comment}{// and unlink it from the list}
  \textcolor{comment}{//}
  pthread\_mutex\_lock( &\hyperlink{lsevents_8c_a70bba59930a1c7d7d181aa03cdfb6c00}{lsevents\_listener\_mutex});
  last = NULL;
  \textcolor{keywordflow}{for}( current = \hyperlink{lsevents_8c_a300dc3edfa8546d75e9f8bab8fa06c5c}{lsevents\_listeners\_p}; current != NULL; 
      current = current->\hyperlink{structlsevents__listener__struct_a8aed9196b0deab84e018b96c0cc59305}{next}) \{
    \textcolor{keywordflow}{if}( strcmp( last->\hyperlink{structlsevents__listener__struct_a270117dccadeda0164592c753dae15a1}{event}, event) == 0 && last->\hyperlink{structlsevents__listener__struct_a005906c1c9f0647e6ed1fb4592d8c5d0}{cb} == cb) \{
      \textcolor{keywordflow}{if}( last == NULL) \{
        \hyperlink{lsevents_8c_a300dc3edfa8546d75e9f8bab8fa06c5c}{lsevents\_listeners\_p} = current->\hyperlink{structlsevents__listener__struct_a8aed9196b0deab84e018b96c0cc59305}{next};
      \} \textcolor{keywordflow}{else} \{
        last->\hyperlink{structlsevents__listener__struct_a8aed9196b0deab84e018b96c0cc59305}{next} = current->\hyperlink{structlsevents__listener__struct_a8aed9196b0deab84e018b96c0cc59305}{next};
      \}
      \textcolor{keywordflow}{break};
    \}
  \}
  pthread\_mutex\_unlock( &\hyperlink{lsevents_8c_a70bba59930a1c7d7d181aa03cdfb6c00}{lsevents\_listener\_mutex});

  \textcolor{comment}{//}
  \textcolor{comment}{// Now remove it}
  \textcolor{comment}{// TODO: use saner memory management where we allocate many listeners at a
       time}
  \textcolor{comment}{// as an array and then just flag the ones that are used}
  \textcolor{comment}{//}
  \textcolor{keywordflow}{if}( current != NULL) \{
    \textcolor{keywordflow}{if}( current->\hyperlink{structlsevents__listener__struct_a270117dccadeda0164592c753dae15a1}{event} != NULL)
      free( current->\hyperlink{structlsevents__listener__struct_a270117dccadeda0164592c753dae15a1}{event});
    free(current);
  \}
\}
\end{DoxyCode}
\hypertarget{pgpmac_8h_a4ddde538b603e3d4580ae9356bf9b89d}{\index{pgpmac.\-h@{pgpmac.\-h}!lsevents\-\_\-run@{lsevents\-\_\-run}}
\index{lsevents\-\_\-run@{lsevents\-\_\-run}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lsevents\-\_\-run}]{\setlength{\rightskip}{0pt plus 5cm}void lsevents\-\_\-run (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{pgpmac_8h_a4ddde538b603e3d4580ae9356bf9b89d}


Start up the thread and get out of the way. 



Definition at line 195 of file lsevents.\-c.


\begin{DoxyCode}
                    \{
  pthread\_create( &\hyperlink{lsevents_8c_a314640d7c3cb4fa90823ab2418fbac9b}{lsevents\_thread}, NULL, \hyperlink{lsevents_8c_a48e8f9dee00710bbe293b4bbded37a39}{lsevents\_worker}
      , NULL);
\}
\end{DoxyCode}
\hypertarget{pgpmac_8h_a3661dfc51537c05b11f4fd184fdff07d}{\index{pgpmac.\-h@{pgpmac.\-h}!lsevents\-\_\-send\-\_\-event@{lsevents\-\_\-send\-\_\-event}}
\index{lsevents\-\_\-send\-\_\-event@{lsevents\-\_\-send\-\_\-event}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lsevents\-\_\-send\-\_\-event}]{\setlength{\rightskip}{0pt plus 5cm}void lsevents\-\_\-send\-\_\-event (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{fmt, }
\item[{}]{...}
\end{DoxyParamCaption}
)}}\label{pgpmac_8h_a3661dfc51537c05b11f4fd184fdff07d}


Call the callback routines for the given event. 


\begin{DoxyParams}{Parameters}
{\em fmt} & a printf style formating string \\
\hline
{\em ...} & list of arguments specified by the format string \\
\hline
\end{DoxyParams}


Definition at line 44 of file lsevents.\-c.


\begin{DoxyCode}
                                          \{
  \textcolor{keywordtype}{char} \textcolor{keyword}{event}[\hyperlink{pgpmac_8h_ab61d790b5572f116e091babfda53627b}{LSEVENTS\_EVENT\_LENGTH}];
  \textcolor{keywordtype}{char} *sp;
  va\_list arg\_ptr;

  va\_start( arg\_ptr, fmt);
  vsnprintf( event, \textcolor{keyword}{sizeof}(event)-1, fmt, arg\_ptr);
  \textcolor{keyword}{event}[\textcolor{keyword}{sizeof}(event)-1]=0;
  va\_end( arg\_ptr);

  \hyperlink{lslogging_8c_a0e756b36671055ef02a8f04d2ba8a93b}{lslogging\_log\_message}( \textcolor{stringliteral}{"lsevents\_send\_event: %s"}, event)
      ;

  pthread\_mutex\_lock( &\hyperlink{lsevents_8c_ab46f4ebda5e926a213faedac1a545ec1}{lsevents\_queue\_mutex});

  \textcolor{comment}{// maybe wait for room on the queue}
  \textcolor{keywordflow}{while}( \hyperlink{lsevents_8c_a3bccf603d56d5b2f4a92fad341d37e2c}{lsevents\_queue\_on} + 1 == \hyperlink{lsevents_8c_a50ad47e12cc4fc2d88659230b2fd44ff}{lsevents\_queue\_off}
      )
    pthread\_cond\_wait( &\hyperlink{lsevents_8c_a8079d9fb8c35db3ca5f83be5aeb2a747}{lsevents\_queue\_cond}, &
      \hyperlink{lsevents_8c_ab46f4ebda5e926a213faedac1a545ec1}{lsevents\_queue\_mutex});
  
  sp = \hyperlink{lsevents_8c_ad1ff5e895b4016113c8414d9a5daa2f2}{lsevents\_queue}[(\hyperlink{lsevents_8c_a3bccf603d56d5b2f4a92fad341d37e2c}{lsevents\_queue\_on}++) % 
      \hyperlink{lsevents_8c_a75469307c70790f04b9b2bfcb1473a48}{LSEVENTS\_QUEUE\_LENGTH}].event;
  strncpy( sp, event, \hyperlink{pgpmac_8h_ab61d790b5572f116e091babfda53627b}{LSEVENTS\_EVENT\_LENGTH});
  sp[\hyperlink{pgpmac_8h_ab61d790b5572f116e091babfda53627b}{LSEVENTS\_EVENT\_LENGTH} - 1] = 0;

  pthread\_cond\_signal(  &\hyperlink{lsevents_8c_a8079d9fb8c35db3ca5f83be5aeb2a747}{lsevents\_queue\_cond});
  pthread\_mutex\_unlock( &\hyperlink{lsevents_8c_ab46f4ebda5e926a213faedac1a545ec1}{lsevents\_queue\_mutex});

\}
\end{DoxyCode}
\hypertarget{pgpmac_8h_a8a77972df14166e05c94ed0792baa09b}{\index{pgpmac.\-h@{pgpmac.\-h}!lspg\-\_\-init@{lspg\-\_\-init}}
\index{lspg\-\_\-init@{lspg\-\_\-init}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lspg\-\_\-init}]{\setlength{\rightskip}{0pt plus 5cm}void lspg\-\_\-init (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{pgpmac_8h_a8a77972df14166e05c94ed0792baa09b}


Initiallize the lspg module. 



Definition at line 1655 of file lspg.\-c.


\begin{DoxyCode}
                 \{
  pthread\_mutex\_init( &\hyperlink{lspg_8c_aed46a94106c583796e3a8ca0e89aa8e4}{lspg\_queue\_mutex}, NULL);
  pthread\_cond\_init( &\hyperlink{lspg_8c_a61a308b6a37afd645beb422653b95baa}{lspg\_queue\_cond}, NULL);
  \hyperlink{lspg_8c_aff91db7d60e6c832684c023813e36dbf}{lspg\_nextshot\_init}();
  \hyperlink{lspg_8c_ad31db17587a02302ac4e40fb7d260b1b}{lspg\_getcenter\_init}();
  \hyperlink{lspg_8c_a3517f8fbed91c998f6036284f9bd0c48}{lspg\_wait\_for\_detector\_init}();
  \hyperlink{lspg_8c_a39bb94f8e0d47702b2b920a3dee61ebc}{lspg\_lock\_diffractometer\_init}();
  \hyperlink{lspg_8c_a0e9bbf847dadfe0d10830d67824d9be8}{lspg\_lock\_detector\_init}();
\}
\end{DoxyCode}
\hypertarget{pgpmac_8h_a1adfdb5ca9fdb5060849d726bf540117}{\index{pgpmac.\-h@{pgpmac.\-h}!lspg\-\_\-run@{lspg\-\_\-run}}
\index{lspg\-\_\-run@{lspg\-\_\-run}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lspg\-\_\-run}]{\setlength{\rightskip}{0pt plus 5cm}void lspg\-\_\-run (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{pgpmac_8h_a1adfdb5ca9fdb5060849d726bf540117}


Start 'er runnin'. 



Definition at line 1667 of file lspg.\-c.


\begin{DoxyCode}
                \{
  pthread\_create( &\hyperlink{lspg_8c_a04eb0cda0d5e5afeae7c393b51689765}{lspg\_thread}, NULL, \hyperlink{lspg_8c_aaf4fadd2943fa3a2ecb5d840e84d68fa}{lspg\_worker}, NULL);
\}
\end{DoxyCode}
\hypertarget{pgpmac_8h_a4253474d4dd305aec0afdd5552b3ddd5}{\index{pgpmac.\-h@{pgpmac.\-h}!lspg\-\_\-seq\-\_\-run\-\_\-prep\-\_\-all@{lspg\-\_\-seq\-\_\-run\-\_\-prep\-\_\-all}}
\index{lspg\-\_\-seq\-\_\-run\-\_\-prep\-\_\-all@{lspg\-\_\-seq\-\_\-run\-\_\-prep\-\_\-all}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lspg\-\_\-seq\-\_\-run\-\_\-prep\-\_\-all}]{\setlength{\rightskip}{0pt plus 5cm}void lspg\-\_\-seq\-\_\-run\-\_\-prep\-\_\-all (
\begin{DoxyParamCaption}
\item[{long long}]{skey, }
\item[{double}]{kappa, }
\item[{double}]{phi, }
\item[{double}]{cx, }
\item[{double}]{cy, }
\item[{double}]{ax, }
\item[{double}]{ay, }
\item[{double}]{az}
\end{DoxyParamCaption}
)}}\label{pgpmac_8h_a4253474d4dd305aec0afdd5552b3ddd5}


Convinence function to call seq run prep. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em skey} & px.\-shots key for this image \\
\hline
\mbox{\tt in}  & {\em kappa} & current kappa postion \\
\hline
\mbox{\tt in}  & {\em phi} & current phi postition \\
\hline
\mbox{\tt in}  & {\em cx} & current center table x \\
\hline
\mbox{\tt in}  & {\em cy} & current center table y \\
\hline
\mbox{\tt in}  & {\em ax} & current alignment table x \\
\hline
\mbox{\tt in}  & {\em ay} & current alignment table y \\
\hline
\mbox{\tt in}  & {\em az} & current alignment table z \\
\hline
\end{DoxyParams}


Definition at line 979 of file lspg.\-c.


\begin{DoxyCode}
                             \{
  \hyperlink{lspg_8c_af7d6efd861b152a371442791deb42bd3}{lspg\_seq\_run\_prep\_call}( skey, \hyperlink{lspmac_8c_a0be79ccb7ebf3a665248fd856112b9fd}{kappa}, \hyperlink{lspmac_8c_ac8070dc568ad974a3db42b51eca828cc}{phi}, cx, 
      cy, ax, ay, az);
  \hyperlink{lspg_8c_ac0b01f501322432a8fa37f31898c3499}{lspg\_seq\_run\_prep\_wait}();
  \hyperlink{lspg_8c_a472b09ddf716c80207f97e2bb5d37d66}{lspg\_seq\_run\_prep\_done}();
\}
\end{DoxyCode}
\hypertarget{pgpmac_8h_a95e3fd7c1685d7e6ab6d0a295ab42f78}{\index{pgpmac.\-h@{pgpmac.\-h}!lspg\-\_\-zoom\-\_\-lut\-\_\-call@{lspg\-\_\-zoom\-\_\-lut\-\_\-call}}
\index{lspg\-\_\-zoom\-\_\-lut\-\_\-call@{lspg\-\_\-zoom\-\_\-lut\-\_\-call}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lspg\-\_\-zoom\-\_\-lut\-\_\-call}]{\setlength{\rightskip}{0pt plus 5cm}void lspg\-\_\-zoom\-\_\-lut\-\_\-call (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{pgpmac_8h_a95e3fd7c1685d7e6ab6d0a295ab42f78}
\hypertarget{pgpmac_8h_ae3e30b0ba9b5d5a291fa29b77ba920d8}{\index{pgpmac.\-h@{pgpmac.\-h}!lspmac\-\_\-init@{lspmac\-\_\-init}}
\index{lspmac\-\_\-init@{lspmac\-\_\-init}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lspmac\-\_\-init}]{\setlength{\rightskip}{0pt plus 5cm}void lspmac\-\_\-init (
\begin{DoxyParamCaption}
\item[{int}]{, }
\item[{int}]{}
\end{DoxyParamCaption}
)}}\label{pgpmac_8h_ae3e30b0ba9b5d5a291fa29b77ba920d8}


Initialize this module. 



Definition at line 2183 of file lspmac.\-c.


\begin{DoxyCode}
                   \{
  \hyperlink{structmd2StatusStruct}{md2\_status\_t} *p;

  \textcolor{comment}{// Set our global harvest flags}
  \hyperlink{lspmac_8c_a07b7b8254772075e6a4ced500b589c36}{getivars} = ivarsflag;
  \hyperlink{lspmac_8c_a50e9c0a06654fd81b3446a6e54ff12c3}{getmvars} = mvarsflag;

  \textcolor{comment}{// All important status mutex}
  pthread\_mutex\_init( &\hyperlink{lspmac_8c_a7a3e763682bd7f987d07f149e94b3bf8}{md2\_status\_mutex}, NULL);

  \textcolor{comment}{//}
  \textcolor{comment}{// Initialize the motor objects}
  \textcolor{comment}{//}

  p = &\hyperlink{lspmac_8c_ad5bce7451d48127bace5af445d03b492}{md2\_status};

  \hyperlink{lspmac_8c_a8237e646ce032a840637a4ef7bff49b9}{omega}  = \hyperlink{lspmac_8c_a45becc46f46e5aea14a388d3ec1b8b13}{lspmac\_motor\_init}( &(\hyperlink{lspmac_8c_a9bffbf72495499b505543cd942f665da}{lspmac\_motors}
      [ 0]),  1, 0, 0, &p->\hyperlink{structmd2StatusStruct_a6ce303bec89082cae1e9b1fddf6b6c10}{omega\_act\_pos},     &p->\hyperlink{structmd2StatusStruct_af6cf3cd65b9ef205685a0d970f168907}{omega\_status\_1}
      ,     &p->\hyperlink{structmd2StatusStruct_a8577c9df7b663b548b2759ac3db721cd}{omega\_status\_2},     \textcolor{stringliteral}{"Omega   #1 &1 X"}, \textcolor{stringliteral}{"omega"},       
      \hyperlink{lspmac_8c_aa4ea5a4c387ef167702c58eaddcb4151}{lspmac\_moveabs\_queue});
  \hyperlink{lspmac_8c_a6cb218bdccfe5a93471c161f15a15cab}{alignx} = \hyperlink{lspmac_8c_a45becc46f46e5aea14a388d3ec1b8b13}{lspmac\_motor\_init}( &(\hyperlink{lspmac_8c_a9bffbf72495499b505543cd942f665da}{lspmac\_motors}
      [ 1]),  2, 0, 1, &p->\hyperlink{structmd2StatusStruct_a9653a75bc0b66c5f86d8b0206dc39b4f}{alignx\_act\_pos},    &p->\hyperlink{structmd2StatusStruct_a56accf8cb00c59bff87ed75df7dafbbe}{alignx\_status\_1}
      ,    &p->\hyperlink{structmd2StatusStruct_a2feb35ceab8129fd2cc34d1104af8b8f}{alignx\_status\_2},    \textcolor{stringliteral}{"Align X #2 &3 X"}, \textcolor{stringliteral}{"align.x"},     
      \hyperlink{lspmac_8c_aa4ea5a4c387ef167702c58eaddcb4151}{lspmac\_moveabs\_queue});
  \hyperlink{lspmac_8c_a737c246c3948e644a18d191a931e1acd}{aligny} = \hyperlink{lspmac_8c_a45becc46f46e5aea14a388d3ec1b8b13}{lspmac\_motor\_init}( &(\hyperlink{lspmac_8c_a9bffbf72495499b505543cd942f665da}{lspmac\_motors}
      [ 2]),  3, 0, 2, &p->\hyperlink{structmd2StatusStruct_a0d40a01d2aa93c443526e826440f77fc}{aligny\_act\_pos},    &p->\hyperlink{structmd2StatusStruct_a2f2a11fe2fc7a446323def2be465185a}{aligny\_status\_1}
      ,    &p->\hyperlink{structmd2StatusStruct_a1f98d8b9831e32d77129f9b0f1d7d255}{aligny\_status\_2},    \textcolor{stringliteral}{"Align Y #3 &3 Y"}, \textcolor{stringliteral}{"align.y"},     
      \hyperlink{lspmac_8c_aa4ea5a4c387ef167702c58eaddcb4151}{lspmac\_moveabs\_queue});
  \hyperlink{lspmac_8c_ae7642b1da0f7c7f8448104c691d40a12}{alignz} = \hyperlink{lspmac_8c_a45becc46f46e5aea14a388d3ec1b8b13}{lspmac\_motor\_init}( &(\hyperlink{lspmac_8c_a9bffbf72495499b505543cd942f665da}{lspmac\_motors}
      [ 3]),  4, 0, 3, &p->\hyperlink{structmd2StatusStruct_a480f892fe91b05b2980fb00064807e2b}{alignz\_act\_pos},    &p->\hyperlink{structmd2StatusStruct_aadbfac5709de57e449a37e2937d6ade7}{alignz\_status\_1}
      ,    &p->\hyperlink{structmd2StatusStruct_ac378da16eeaab2bc47f3f8f88f7411ed}{alignz\_status\_2},    \textcolor{stringliteral}{"Align Z #4 &3 Z"}, \textcolor{stringliteral}{"align.z"},     
      \hyperlink{lspmac_8c_aa4ea5a4c387ef167702c58eaddcb4151}{lspmac\_moveabs\_queue});
  \hyperlink{lspmac_8c_aa90d2363b744acbd4d45133b7a716d8f}{anal}   = \hyperlink{lspmac_8c_a45becc46f46e5aea14a388d3ec1b8b13}{lspmac\_motor\_init}( &(\hyperlink{lspmac_8c_a9bffbf72495499b505543cd942f665da}{lspmac\_motors}
      [ 4]),  5, 0, 4, &p->\hyperlink{structmd2StatusStruct_a49d1151b0e819646587be0ca9c9d612a}{analyzer\_act\_pos},  &p->\hyperlink{structmd2StatusStruct_ab876b484f55bcce576fcd89dcc3f7267}{analyzer\_status\_1}
      ,  &p->\hyperlink{structmd2StatusStruct_a4f88bb778e4e18f1fbf7672ac11e7433}{analyzer\_status\_2},  \textcolor{stringliteral}{"Anal    #5"},      \textcolor{stringliteral}{"lightPolar"},  
      \hyperlink{lspmac_8c_aa4ea5a4c387ef167702c58eaddcb4151}{lspmac\_moveabs\_queue});
  \hyperlink{lspmac_8c_ad53a42cfaa04eff0336a44c8c9986333}{zoom}   = \hyperlink{lspmac_8c_a45becc46f46e5aea14a388d3ec1b8b13}{lspmac\_motor\_init}( &(\hyperlink{lspmac_8c_a9bffbf72495499b505543cd942f665da}{lspmac\_motors}
      [ 5]),  6, 1, 0, &p->\hyperlink{structmd2StatusStruct_a920b80e9f5f08aedac3ad541d5ffc8ae}{zoom\_act\_pos},      &p->\hyperlink{structmd2StatusStruct_af28e978b761dc07eefed3971547cfd4d}{zoom\_status\_1}
      ,      &p->\hyperlink{structmd2StatusStruct_a34e4200315a083deb8a970e21bbbe277}{zoom\_status\_2},      \textcolor{stringliteral}{"Zoom    #6 &4 Z"}, \textcolor{stringliteral}{"zoom"},        
      \hyperlink{lspmac_8c_ad6ae1e37afd118f24ab1c6878da53878}{lspmac\_movezoom\_queue});
  \hyperlink{lspmac_8c_a139200ddaa9856a7ffcec0e6cbaa8f1b}{apery}  = \hyperlink{lspmac_8c_a45becc46f46e5aea14a388d3ec1b8b13}{lspmac\_motor\_init}( &(\hyperlink{lspmac_8c_a9bffbf72495499b505543cd942f665da}{lspmac\_motors}
      [ 6]),  7, 1, 1, &p->\hyperlink{structmd2StatusStruct_a2a434d2b57dbb669de0765486a1516ff}{aperturey\_act\_pos}, &p->\hyperlink{structmd2StatusStruct_a2ef953eaddf7058bf4276585e6ff066b}{aperturey\_status\_1}
      , &p->\hyperlink{structmd2StatusStruct_a0a7738f13a0fa80626cafc2299b104b4}{aperturey\_status\_2}, \textcolor{stringliteral}{"Aper Y  #7 &5 Y"}, \textcolor{stringliteral}{"appy"},        
      \hyperlink{lspmac_8c_aa4ea5a4c387ef167702c58eaddcb4151}{lspmac\_moveabs\_queue});
  \hyperlink{lspmac_8c_ab93bd6ee850b285ca3a95e64d15e9477}{aperz}  = \hyperlink{lspmac_8c_a45becc46f46e5aea14a388d3ec1b8b13}{lspmac\_motor\_init}( &(\hyperlink{lspmac_8c_a9bffbf72495499b505543cd942f665da}{lspmac\_motors}
      [ 7]),  8, 1, 2, &p->\hyperlink{structmd2StatusStruct_a62d584ce23cfd9aa626d3c03649b455c}{aperturez\_act\_pos}, &p->\hyperlink{structmd2StatusStruct_a27880dd795e1ba4fea4870c64ee3aa84}{aperturez\_status\_1}
      , &p->\hyperlink{structmd2StatusStruct_ae407a99e428d9f4a7444a02c8bc3414e}{aperturez\_status\_2}, \textcolor{stringliteral}{"Aper Z  #8 &5 Z"}, \textcolor{stringliteral}{"appz"},        
      \hyperlink{lspmac_8c_aa4ea5a4c387ef167702c58eaddcb4151}{lspmac\_moveabs\_queue});
  \hyperlink{lspmac_8c_a51358daaea8b5236f08414877d8af6c2}{capy}   = \hyperlink{lspmac_8c_a45becc46f46e5aea14a388d3ec1b8b13}{lspmac\_motor\_init}( &(\hyperlink{lspmac_8c_a9bffbf72495499b505543cd942f665da}{lspmac\_motors}
      [ 8]),  9, 1, 3, &p->\hyperlink{structmd2StatusStruct_ae25122a6db146501b51609b9cb59b044}{capy\_act\_pos},      &p->\hyperlink{structmd2StatusStruct_a7f4e945e80b1980b9e69366a69ad79cc}{capy\_status\_1}
      ,      &p->\hyperlink{structmd2StatusStruct_a5d7c10d9a16ebcc53ac4a0770ab2ef62}{capy\_status\_2},      \textcolor{stringliteral}{"Cap Y   #9 &5 U"}, \textcolor{stringliteral}{"capy"},        
      \hyperlink{lspmac_8c_aa4ea5a4c387ef167702c58eaddcb4151}{lspmac\_moveabs\_queue});
  \hyperlink{lspmac_8c_aa45f268d0af9f3d465acfab128919718}{capz}   = \hyperlink{lspmac_8c_a45becc46f46e5aea14a388d3ec1b8b13}{lspmac\_motor\_init}( &(\hyperlink{lspmac_8c_a9bffbf72495499b505543cd942f665da}{lspmac\_motors}
      [ 9]), 10, 1, 4, &p->\hyperlink{structmd2StatusStruct_a257c04efac3a33d5d34b21d64c6f1266}{capz\_act\_pos},      &p->\hyperlink{structmd2StatusStruct_a719db4477f35331eaa8b7b44150e88a2}{capz\_status\_1}
      ,      &p->\hyperlink{structmd2StatusStruct_a3abb998bb89433aed16121d0dae6275a}{capz\_status\_2},      \textcolor{stringliteral}{"Cap Z  #10 &5 V"}, \textcolor{stringliteral}{"capz"},        
      \hyperlink{lspmac_8c_aa4ea5a4c387ef167702c58eaddcb4151}{lspmac\_moveabs\_queue});
  \hyperlink{lspmac_8c_ac0eeaffa0996271d8a38344a470d13d7}{scinz}  = \hyperlink{lspmac_8c_a45becc46f46e5aea14a388d3ec1b8b13}{lspmac\_motor\_init}( &(\hyperlink{lspmac_8c_a9bffbf72495499b505543cd942f665da}{lspmac\_motors}
      [10]), 11, 2, 0, &p->\hyperlink{structmd2StatusStruct_a1c146fc792c4285eed5b2c446c214f98}{scint\_act\_pos},     &p->\hyperlink{structmd2StatusStruct_a1723870357f428ac5c2758a2c9a475c7}{scint\_status\_1}
      ,     &p->\hyperlink{structmd2StatusStruct_a4e5bc72e2f4007370f1c29ea272c952f}{scint\_status\_2},     \textcolor{stringliteral}{"Scin Z #11 &5 W"}, \textcolor{stringliteral}{"scint"},       
      \hyperlink{lspmac_8c_aa4ea5a4c387ef167702c58eaddcb4151}{lspmac\_moveabs\_queue});
  \hyperlink{lspmac_8c_ac940d950d9efeaf3f0ae67e9bf331188}{cenx}   = \hyperlink{lspmac_8c_a45becc46f46e5aea14a388d3ec1b8b13}{lspmac\_motor\_init}( &(\hyperlink{lspmac_8c_a9bffbf72495499b505543cd942f665da}{lspmac\_motors}
      [11]), 17, 2, 1, &p->\hyperlink{structmd2StatusStruct_ae7924b6e91e1de82f6f7910cb3a9c9bd}{centerx\_act\_pos},   &p->\hyperlink{structmd2StatusStruct_aa619cdbd7a563408c6b825ddc4f74ebb}{centerx\_status\_1}
      ,   &p->\hyperlink{structmd2StatusStruct_ae4fad6debe138ed7815d463e83f8d0f6}{centerx\_status\_2},   \textcolor{stringliteral}{"Cen X  #17 &2 X"}, \textcolor{stringliteral}{"centering.x"}, 
      \hyperlink{lspmac_8c_aa4ea5a4c387ef167702c58eaddcb4151}{lspmac\_moveabs\_queue});
  \hyperlink{lspmac_8c_aaed18e738ba7bfb6c771a44f5d7ea827}{ceny}   = \hyperlink{lspmac_8c_a45becc46f46e5aea14a388d3ec1b8b13}{lspmac\_motor\_init}( &(\hyperlink{lspmac_8c_a9bffbf72495499b505543cd942f665da}{lspmac\_motors}
      [12]), 18, 2, 2, &p->\hyperlink{structmd2StatusStruct_a6be71a92a599d490ca808af8c7e7faa0}{centery\_act\_pos},   &p->\hyperlink{structmd2StatusStruct_a57f65ebe28ef88f1c632d9f35d9167eb}{centery\_status\_1}
      ,   &p->\hyperlink{structmd2StatusStruct_aa242098c185cce8f852cd6e081ef0b1d}{centery\_status\_2},   \textcolor{stringliteral}{"Cen Y  #18 &2 Y"}, \textcolor{stringliteral}{"centering.y"}, 
      \hyperlink{lspmac_8c_aa4ea5a4c387ef167702c58eaddcb4151}{lspmac\_moveabs\_queue});
  \hyperlink{lspmac_8c_a0be79ccb7ebf3a665248fd856112b9fd}{kappa}  = \hyperlink{lspmac_8c_a45becc46f46e5aea14a388d3ec1b8b13}{lspmac\_motor\_init}( &(\hyperlink{lspmac_8c_a9bffbf72495499b505543cd942f665da}{lspmac\_motors}
      [13]), 19, 2, 3, &p->\hyperlink{structmd2StatusStruct_ac384fb7073387dd5dcb2e85a00ec8a77}{kappa\_act\_pos},     &p->\hyperlink{structmd2StatusStruct_ab152694bc32d37c1d180f55e8d282020}{kappa\_status\_1}
      ,     &p->\hyperlink{structmd2StatusStruct_af6891f5f8dcfc62668f64c583042c6bc}{kappa\_status\_2},     \textcolor{stringliteral}{"Kappa  #19 &7 X"}, \textcolor{stringliteral}{"kappa"},       
      \hyperlink{lspmac_8c_aa4ea5a4c387ef167702c58eaddcb4151}{lspmac\_moveabs\_queue});
  \hyperlink{lspmac_8c_ac8070dc568ad974a3db42b51eca828cc}{phi}    = \hyperlink{lspmac_8c_a45becc46f46e5aea14a388d3ec1b8b13}{lspmac\_motor\_init}( &(\hyperlink{lspmac_8c_a9bffbf72495499b505543cd942f665da}{lspmac\_motors}[
      14]), 20, 2, 4, &p->\hyperlink{structmd2StatusStruct_a4de22995a72ff6e72a1a9ccab6d00620}{phi\_act\_pos},       &p->\hyperlink{structmd2StatusStruct_ad8b8fd90ffff43016e2adaab5ccbfa02}{phi\_status\_1}, 
            &p->\hyperlink{structmd2StatusStruct_a0e6cea4c32cb34e602b9ac3d21259219}{phi\_status\_2},       \textcolor{stringliteral}{"Phi    #20 &7 Y"}, \textcolor{stringliteral}{"phi"},         
      \hyperlink{lspmac_8c_aa4ea5a4c387ef167702c58eaddcb4151}{lspmac\_moveabs\_queue});

  \hyperlink{lspmac_8c_a26dec4623af9beed912b8e7e6f99822c}{fshut}  = \hyperlink{lspmac_8c_a40aa4aeb5c799a6a3a089137da4fd6a8}{lspmac\_fshut\_init}( &(\hyperlink{lspmac_8c_a9bffbf72495499b505543cd942f665da}{lspmac\_motors}
      [15]));
  \hyperlink{lspmac_8c_aeb09895663eff333b7a75acb319a9fc1}{flight} = \hyperlink{lspmac_8c_a6d88f6db90e4a7219a237b183d10a27d}{lspmac\_dac\_init}( &(\hyperlink{lspmac_8c_a9bffbf72495499b505543cd942f665da}{lspmac\_motors}[1
      6]), &p->\hyperlink{structmd2StatusStruct_a3be73c48b09190241a2bcb801af5b97c}{front\_dac},   160.0, \textcolor{stringliteral}{"M1200"}, \textcolor{stringliteral}{"frontLight.intensity"});
  \hyperlink{lspmac_8c_a85d6eaa4b4a82bb3112574f458d1dc50}{blight} = \hyperlink{lspmac_8c_a6d88f6db90e4a7219a237b183d10a27d}{lspmac\_dac\_init}( &(\hyperlink{lspmac_8c_a9bffbf72495499b505543cd942f665da}{lspmac\_motors}[1
      7]), &p->\hyperlink{structmd2StatusStruct_a33ce490348c8de255cf49b96469d3d4e}{back\_dac},    160.0, \textcolor{stringliteral}{"M1201"}, \textcolor{stringliteral}{"backLight.intensity"});
  \hyperlink{lspmac_8c_a8a3ca6fcf5e24dcc26170736843e53b2}{fscint} = \hyperlink{lspmac_8c_a6d88f6db90e4a7219a237b183d10a27d}{lspmac\_dac\_init}( &(\hyperlink{lspmac_8c_a9bffbf72495499b505543cd942f665da}{lspmac\_motors}[1
      8]), &p->\hyperlink{structmd2StatusStruct_a031be48adfa016c637d6eae49054c435}{scint\_piezo}, 320.0, \textcolor{stringliteral}{"M1203"}, \textcolor{stringliteral}{"scint.focus"});

  \hyperlink{lspmac_8c_af813a2eff0b7efa4c70633559054e84c}{blight\_ud} = \hyperlink{lspmac_8c_a50e22adfb4d14499c1f5647458ca2ad9}{lspmac\_bio\_init}( &(\hyperlink{lspmac_8c_a9bffbf72495499b505543cd942f665da}{lspmac\_motors}
      [19]), \textcolor{stringliteral}{"backLight"}, \textcolor{stringliteral}{"M1101=%d"}, &(\hyperlink{lspmac_8c_ad5bce7451d48127bace5af445d03b492}{md2\_status}.\hyperlink{structmd2StatusStruct_ab09c1342dc12052b8f5b35f78ef95000}{acc11c\_5}), 0x02);
  \hyperlink{lspmac_8c_ae78d9a757d4c85419fff9c94b15e25d7}{cryo}      = \hyperlink{lspmac_8c_a50e22adfb4d14499c1f5647458ca2ad9}{lspmac\_bio\_init}( &(\hyperlink{lspmac_8c_a9bffbf72495499b505543cd942f665da}{lspmac\_motors}[
      20]), \textcolor{stringliteral}{"cryo"},      \textcolor{stringliteral}{"M1102=%d"}, &(\hyperlink{lspmac_8c_ad5bce7451d48127bace5af445d03b492}{md2\_status}.\hyperlink{structmd2StatusStruct_a69fc2e30a5de0a11c992d133e7a761cd}{acc11c\_1}), 0x40);
  \hyperlink{lspmac_8c_a9d9c5030d817483ca9518027c91adac4}{dryer}     = \hyperlink{lspmac_8c_a50e22adfb4d14499c1f5647458ca2ad9}{lspmac\_bio\_init}( &(\hyperlink{lspmac_8c_a9bffbf72495499b505543cd942f665da}{lspmac\_motors}
      [21]), \textcolor{stringliteral}{"dryer"},     \textcolor{stringliteral}{"M1103=%d"}, &(\hyperlink{lspmac_8c_ad5bce7451d48127bace5af445d03b492}{md2\_status}.\hyperlink{structmd2StatusStruct_ab09c1342dc12052b8f5b35f78ef95000}{acc11c\_5}), 0x08);




  \textcolor{comment}{//}
  \textcolor{comment}{// Initialize several commands that get called, perhaps, alot}
  \textcolor{comment}{//}
  \hyperlink{lspmac_8c_a6fcbbe47fe9912533962601f5befdb29}{rr\_cmd}.\hyperlink{structtagEthernetCmd_a6a155eb3ae546dd29369c4a33ddb3310}{RequestType} = \hyperlink{lspmac_8c_a5485d08fdc80533b5cebadff63696ed2}{VR\_UPLOAD};
  \hyperlink{lspmac_8c_a6fcbbe47fe9912533962601f5befdb29}{rr\_cmd}.\hyperlink{structtagEthernetCmd_a0dc566e7edbb226f1a4ea443d93d56e2}{Request}     = \hyperlink{lspmac_8c_aad3c7b4a9403e56c09eceadcf21252c0}{VR\_PMAC\_READREADY};
  \hyperlink{lspmac_8c_a6fcbbe47fe9912533962601f5befdb29}{rr\_cmd}.\hyperlink{structtagEthernetCmd_aec0ee9a5f6c7e3bc6e4bd98f1bd52783}{wValue}      = 0;
  \hyperlink{lspmac_8c_a6fcbbe47fe9912533962601f5befdb29}{rr\_cmd}.\hyperlink{structtagEthernetCmd_a92f5a374e87d4f496b64b4888850d6e6}{wIndex}      = 0;
  \hyperlink{lspmac_8c_a6fcbbe47fe9912533962601f5befdb29}{rr\_cmd}.\hyperlink{structtagEthernetCmd_af5df25ff13ca30fa33719d0df1ab7e97}{wLength}     = htons(2);
  memset( \hyperlink{lspmac_8c_a6fcbbe47fe9912533962601f5befdb29}{rr\_cmd}.\hyperlink{structtagEthernetCmd_a872dab798127d6f589974a79c5d0aef1}{bData}, 0, \textcolor{keyword}{sizeof}(\hyperlink{lspmac_8c_a6fcbbe47fe9912533962601f5befdb29}{rr\_cmd}.\hyperlink{structtagEthernetCmd_a872dab798127d6f589974a79c5d0aef1}{bData}));

  \hyperlink{lspmac_8c_ae7b21213b9c78b6745213409f1ef7320}{gb\_cmd}.\hyperlink{structtagEthernetCmd_a6a155eb3ae546dd29369c4a33ddb3310}{RequestType} = \hyperlink{lspmac_8c_a5485d08fdc80533b5cebadff63696ed2}{VR\_UPLOAD};
  \hyperlink{lspmac_8c_ae7b21213b9c78b6745213409f1ef7320}{gb\_cmd}.\hyperlink{structtagEthernetCmd_a0dc566e7edbb226f1a4ea443d93d56e2}{Request}     = \hyperlink{lspmac_8c_a50e444b5ceb6d62a1be43c88c55c549c}{VR\_PMAC\_GETBUFFER};
  \hyperlink{lspmac_8c_ae7b21213b9c78b6745213409f1ef7320}{gb\_cmd}.\hyperlink{structtagEthernetCmd_aec0ee9a5f6c7e3bc6e4bd98f1bd52783}{wValue}      = 0;
  \hyperlink{lspmac_8c_ae7b21213b9c78b6745213409f1ef7320}{gb\_cmd}.\hyperlink{structtagEthernetCmd_a92f5a374e87d4f496b64b4888850d6e6}{wIndex}      = 0;
  \hyperlink{lspmac_8c_ae7b21213b9c78b6745213409f1ef7320}{gb\_cmd}.\hyperlink{structtagEthernetCmd_af5df25ff13ca30fa33719d0df1ab7e97}{wLength}     = htons(1400);
  memset( \hyperlink{lspmac_8c_ae7b21213b9c78b6745213409f1ef7320}{gb\_cmd}.\hyperlink{structtagEthernetCmd_a872dab798127d6f589974a79c5d0aef1}{bData}, 0, \textcolor{keyword}{sizeof}(\hyperlink{lspmac_8c_ae7b21213b9c78b6745213409f1ef7320}{gb\_cmd}.\hyperlink{structtagEthernetCmd_a872dab798127d6f589974a79c5d0aef1}{bData}));

  \hyperlink{lspmac_8c_a8908812f4ff25c196679e00d330edd81}{cr\_cmd}.\hyperlink{structtagEthernetCmd_a6a155eb3ae546dd29369c4a33ddb3310}{RequestType} = \hyperlink{lspmac_8c_a5485d08fdc80533b5cebadff63696ed2}{VR\_UPLOAD};
  \hyperlink{lspmac_8c_a8908812f4ff25c196679e00d330edd81}{cr\_cmd}.\hyperlink{structtagEthernetCmd_a0dc566e7edbb226f1a4ea443d93d56e2}{Request}     = \hyperlink{lspmac_8c_a8f4ce4666a23a3fb153d680bd1cb6556}{VR\_CTRL\_RESPONSE};
  \hyperlink{lspmac_8c_a8908812f4ff25c196679e00d330edd81}{cr\_cmd}.\hyperlink{structtagEthernetCmd_aec0ee9a5f6c7e3bc6e4bd98f1bd52783}{wValue}      = 0;
  \hyperlink{lspmac_8c_a8908812f4ff25c196679e00d330edd81}{cr\_cmd}.\hyperlink{structtagEthernetCmd_a92f5a374e87d4f496b64b4888850d6e6}{wIndex}      = 0;
  \hyperlink{lspmac_8c_a8908812f4ff25c196679e00d330edd81}{cr\_cmd}.\hyperlink{structtagEthernetCmd_af5df25ff13ca30fa33719d0df1ab7e97}{wLength}     = htons(1400);
  memset( \hyperlink{lspmac_8c_a8908812f4ff25c196679e00d330edd81}{cr\_cmd}.\hyperlink{structtagEthernetCmd_a872dab798127d6f589974a79c5d0aef1}{bData}, 0, \textcolor{keyword}{sizeof}(\hyperlink{lspmac_8c_a8908812f4ff25c196679e00d330edd81}{cr\_cmd}.\hyperlink{structtagEthernetCmd_a872dab798127d6f589974a79c5d0aef1}{bData}));

  \textcolor{comment}{//}
  \textcolor{comment}{// Initialize some mutexs and conditions}
  \textcolor{comment}{//}

  pthread\_mutex\_init( &\hyperlink{lspmac_8c_acc1bb77b9bcbc4d970f841a41fd274b3}{pmac\_queue\_mutex}, NULL);
  pthread\_cond\_init(  &\hyperlink{lspmac_8c_a8a25bd9c593c6985107f90f999ce0b08}{pmac\_queue\_cond}, NULL);

  \hyperlink{lspmac_8c_a112158e0cd50449a440ac55c7af7bea2}{lspmac\_shutter\_state} = 0;                         \textcolor{comment}{//
       assume the shutter is now closed: not a big deal if we are wrong}
  pthread\_mutex\_init( &\hyperlink{lspmac_8c_a1b78a13c654409333569815e1c109d38}{lspmac\_shutter\_mutex}, NULL);
  pthread\_cond\_init(  &\hyperlink{lspmac_8c_afbd51c2cefcee87afe994c9e9f372241}{lspmac\_shutter\_cond}, NULL);
  \hyperlink{lspmac_8c_adba7f5f4bbeabc4dac859221d4c684ba}{pmacfd}.fd = -1;

  pthread\_mutex\_init( &\hyperlink{lspmac_8c_a85679cac947e199c88794f8e5a12bf5f}{lspmac\_moving\_mutex}, NULL);
  pthread\_cond\_init(  &\hyperlink{lspmac_8c_a57547d211906c981ef20257eba99f8df}{lspmac\_moving\_cond}, NULL);

\}
\end{DoxyCode}
\hypertarget{pgpmac_8h_a3a7fb93fb3fb9c4454613f30bfb0b1ee}{\index{pgpmac.\-h@{pgpmac.\-h}!lspmac\-\_\-run@{lspmac\-\_\-run}}
\index{lspmac\-\_\-run@{lspmac\-\_\-run}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lspmac\-\_\-run}]{\setlength{\rightskip}{0pt plus 5cm}void lspmac\-\_\-run (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{pgpmac_8h_a3a7fb93fb3fb9c4454613f30bfb0b1ee}


Start up the lspmac thread. 



Definition at line 2315 of file lspmac.\-c.


\begin{DoxyCode}
                  \{
  pthread\_create( &\hyperlink{lspmac_8c_a6b7011dd7d2c2d3afadff8d3e50e7677}{pmac\_thread}, NULL, \hyperlink{lspmac_8c_abdec5883055967b1eda043670870f55f}{lspmac\_worker}, 
      NULL);
  \hyperlink{lsevents_8c_ab0617d3f0594b51d10e34bf397096654}{lsevents\_add\_listener}( \textcolor{stringliteral}{"NewKV"}, \hyperlink{lspmac_8c_af4547210eb34ffbdcee34ac0f7f9c05f}{lspmac\_newKV\_cb}
      );
\}
\end{DoxyCode}
\hypertarget{pgpmac_8h_af712dd2e9419026eff2762ba062eeaf1}{\index{pgpmac.\-h@{pgpmac.\-h}!lstimer\-\_\-add\-\_\-timer@{lstimer\-\_\-add\-\_\-timer}}
\index{lstimer\-\_\-add\-\_\-timer@{lstimer\-\_\-add\-\_\-timer}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lstimer\-\_\-add\-\_\-timer}]{\setlength{\rightskip}{0pt plus 5cm}void lstimer\-\_\-add\-\_\-timer (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{, }
\item[{int}]{, }
\item[{unsigned long}]{int, }
\item[{unsigned long}]{int}
\end{DoxyParamCaption}
)}}\label{pgpmac_8h_af712dd2e9419026eff2762ba062eeaf1}


Definition at line 44 of file lstimer.\-c.


\begin{DoxyCode}
                                                                               
                        \{
  \textcolor{keywordtype}{int} i;
  \textcolor{keyword}{struct }timespec \hyperlink{lspg_8c_ad40ac52086f6b774928af45b09d54c6e}{now};


  \textcolor{comment}{// Time we were called.  Delay is based on call time, not queued time}
  \textcolor{comment}{//}
  clock\_gettime( CLOCK\_REALTIME, &\hyperlink{lspg_8c_ad40ac52086f6b774928af45b09d54c6e}{now});
  

  pthread\_mutex\_lock( &\hyperlink{lstimer_8c_a170993cbed9b9ec8bc64b6642a3ed581}{lstimer\_mutex});

  \textcolor{keywordflow}{for}( i=0; i<\hyperlink{lstimer_8c_af020a0f708e86162a32d2ca6373c96bb}{LSTIMER\_LIST\_LENGTH}; i++) \{
    \textcolor{keywordflow}{if}( \hyperlink{lstimer_8c_a35b456765fe2c955cef445768d12ca6c}{lstimer\_list}[i].shots == 0)
      \textcolor{keywordflow}{break};
  \}

  \textcolor{keywordflow}{if}( i == LSTIMER\_LIST\_LENGTH) \{
    pthread\_mutex\_unlock( &\hyperlink{lstimer_8c_a170993cbed9b9ec8bc64b6642a3ed581}{lstimer\_mutex});
    
    \hyperlink{lslogging_8c_a0e756b36671055ef02a8f04d2ba8a93b}{lslogging\_log\_message}( \textcolor{stringliteral}{"lstimer\_add\_timer: out of
       timers for event: %s, shots: %d,  secs: %u, nsecs: %u"},
                          event, shots, secs, nsecs);
    \textcolor{keywordflow}{return};
  \}

  strncpy( \hyperlink{lstimer_8c_a35b456765fe2c955cef445768d12ca6c}{lstimer\_list}[i].event, event, \hyperlink{pgpmac_8h_ab61d790b5572f116e091babfda53627b}{LSEVENTS\_EVENT\_LENGTH}
       - 1);
  \hyperlink{lstimer_8c_a35b456765fe2c955cef445768d12ca6c}{lstimer\_list}[i].\hyperlink{structlstimer__list__struct_a54d564e392315b2730278bb925803184}{event}[\hyperlink{pgpmac_8h_ab61d790b5572f116e091babfda53627b}{LSEVENTS\_EVENT\_LENGTH}
       - 1] = 0;
  \hyperlink{lstimer_8c_a35b456765fe2c955cef445768d12ca6c}{lstimer\_list}[i].\hyperlink{structlstimer__list__struct_ac7ab4cd1f3065156f95b49e66bf05283}{shots}        = shots;
  \hyperlink{lstimer_8c_a35b456765fe2c955cef445768d12ca6c}{lstimer\_list}[i].\hyperlink{structlstimer__list__struct_a237da48d81b7e039c54901296aeee18e}{delay\_secs}   = secs;
  \hyperlink{lstimer_8c_a35b456765fe2c955cef445768d12ca6c}{lstimer\_list}[i].\hyperlink{structlstimer__list__struct_acb0c6a1600c4168e5dfb2d477a685b29}{delay\_nsecs}  = nsecs;

  \hyperlink{lstimer_8c_a35b456765fe2c955cef445768d12ca6c}{lstimer\_list}[i].\hyperlink{structlstimer__list__struct_af0dcaad37472462c9f27d54ed0ceb75d}{next\_secs}    = secs + \hyperlink{lspg_8c_ad40ac52086f6b774928af45b09d54c6e}{now}.tv\_sec + (
      \hyperlink{lspg_8c_ad40ac52086f6b774928af45b09d54c6e}{now}.tv\_nsec + nsecs) / 1000000000;
  \hyperlink{lstimer_8c_a35b456765fe2c955cef445768d12ca6c}{lstimer\_list}[i].\hyperlink{structlstimer__list__struct_ab115115d5be7933f98a094b46b6583bb}{next\_nsecs}   = (\hyperlink{lspg_8c_ad40ac52086f6b774928af45b09d54c6e}{now}.tv\_nsec + nsecs)
       % 1000000000;
  \hyperlink{lstimer_8c_a35b456765fe2c955cef445768d12ca6c}{lstimer\_list}[i].\hyperlink{structlstimer__list__struct_ab0ac2907735701cb24ec9af95a1cc787}{last\_secs}    = 0;
  \hyperlink{lstimer_8c_a35b456765fe2c955cef445768d12ca6c}{lstimer\_list}[i].\hyperlink{structlstimer__list__struct_a19acf5aa7f57aa7ce60537c3d3d6a6af}{last\_nsecs}   = 0;
  
  \hyperlink{lstimer_8c_a35b456765fe2c955cef445768d12ca6c}{lstimer\_list}[i].\hyperlink{structlstimer__list__struct_aa56c5b8ce7fa0ae93132cb9908195836}{ncalls}       = 0;
  \hyperlink{lstimer_8c_a35b456765fe2c955cef445768d12ca6c}{lstimer\_list}[i].\hyperlink{structlstimer__list__struct_a1222c76d49b149725467aa698abb7fb1}{init\_secs}    = \hyperlink{lspg_8c_ad40ac52086f6b774928af45b09d54c6e}{now}.tv\_sec;
  \hyperlink{lstimer_8c_a35b456765fe2c955cef445768d12ca6c}{lstimer\_list}[i].\hyperlink{structlstimer__list__struct_ad5bb7fa7d669b7ebbe34d8ed2bdb257a}{init\_nsecs}   = \hyperlink{lspg_8c_ad40ac52086f6b774928af45b09d54c6e}{now}.tv\_nsec;

  \textcolor{keywordflow}{if}( shots != 0) \{
    \hyperlink{lstimer_8c_a1a47dadbec1776920ab83409234c1833}{lstimer\_active\_timers}++;
    \hyperlink{lstimer_8c_a5a3c6ef3507448d284d91958878d3f75}{new\_timer}++;
  \}

  pthread\_cond\_signal(  &\hyperlink{lstimer_8c_a96b7516e4a15c4b879de82a569cd5f0a}{lstimer\_cond});
  pthread\_mutex\_unlock( &\hyperlink{lstimer_8c_a170993cbed9b9ec8bc64b6642a3ed581}{lstimer\_mutex});
\}
\end{DoxyCode}
\hypertarget{pgpmac_8h_a8cd37a8fb0f061456456a5d79bdd5189}{\index{pgpmac.\-h@{pgpmac.\-h}!lstimer\-\_\-init@{lstimer\-\_\-init}}
\index{lstimer\-\_\-init@{lstimer\-\_\-init}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lstimer\-\_\-init}]{\setlength{\rightskip}{0pt plus 5cm}void lstimer\-\_\-init (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{pgpmac_8h_a8cd37a8fb0f061456456a5d79bdd5189}


Initialize the timer list and pthread stuff. 



Definition at line 256 of file lstimer.\-c.


\begin{DoxyCode}
                    \{
  \textcolor{keywordtype}{int} i;

  \textcolor{keywordflow}{for}( i=0; i<\hyperlink{lstimer_8c_af020a0f708e86162a32d2ca6373c96bb}{LSTIMER\_LIST\_LENGTH}; i++) \{
    \hyperlink{lstimer_8c_a35b456765fe2c955cef445768d12ca6c}{lstimer\_list}[i].\hyperlink{structlstimer__list__struct_ac7ab4cd1f3065156f95b49e66bf05283}{shots} = 0;
  \}


  pthread\_mutex\_init( &\hyperlink{lstimer_8c_a170993cbed9b9ec8bc64b6642a3ed581}{lstimer\_mutex}, NULL);
  pthread\_cond\_init(  &\hyperlink{lstimer_8c_a96b7516e4a15c4b879de82a569cd5f0a}{lstimer\_cond}, NULL);
\}
\end{DoxyCode}
\hypertarget{pgpmac_8h_a0b918acc1a4bf737cb62b5a70f8b553a}{\index{pgpmac.\-h@{pgpmac.\-h}!lstimer\-\_\-run@{lstimer\-\_\-run}}
\index{lstimer\-\_\-run@{lstimer\-\_\-run}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lstimer\-\_\-run}]{\setlength{\rightskip}{0pt plus 5cm}void lstimer\-\_\-run (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{pgpmac_8h_a0b918acc1a4bf737cb62b5a70f8b553a}


Start up our thread. 



Definition at line 270 of file lstimer.\-c.


\begin{DoxyCode}
                   \{
  pthread\_create( &\hyperlink{lstimer_8c_a76660e8720b08f4adee2be9f44b5f419}{lstimer\_thread}, NULL, \hyperlink{lstimer_8c_ab8b409bb2a7ff78da22d988cfb3b537a}{lstimer\_worker}
      , NULL);
\}
\end{DoxyCode}
\hypertarget{pgpmac_8h_adf63440ffbc65024fef87ea6a11ea8b0}{\index{pgpmac.\-h@{pgpmac.\-h}!lsupdate\-\_\-init@{lsupdate\-\_\-init}}
\index{lsupdate\-\_\-init@{lsupdate\-\_\-init}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lsupdate\-\_\-init}]{\setlength{\rightskip}{0pt plus 5cm}void lsupdate\-\_\-init (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{pgpmac_8h_adf63440ffbc65024fef87ea6a11ea8b0}


Initialize this module. 



Definition at line 108 of file lsupdate.\-c.


\begin{DoxyCode}
                     \{
\}
\end{DoxyCode}
\hypertarget{pgpmac_8h_af219e9b2cc124f109aa4c2c2e16b5d07}{\index{pgpmac.\-h@{pgpmac.\-h}!lsupdate\-\_\-run@{lsupdate\-\_\-run}}
\index{lsupdate\-\_\-run@{lsupdate\-\_\-run}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lsupdate\-\_\-run}]{\setlength{\rightskip}{0pt plus 5cm}void lsupdate\-\_\-run (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{pgpmac_8h_af219e9b2cc124f109aa4c2c2e16b5d07}


run the update routines 



Definition at line 113 of file lsupdate.\-c.


\begin{DoxyCode}
                    \{
  pthread\_create( &\hyperlink{lsupdate_8c_a00578477e1b3791fc8aed17ebe60b606}{lsupdate\_thread}, NULL, \hyperlink{lsupdate_8c_ac4e85ea626b76b06d68c27db1c3e8b43}{lsupdate\_worker}
      , NULL);
\}
\end{DoxyCode}
\hypertarget{pgpmac_8h_a0851b1baecda6a67993efde41d77b1c1}{\index{pgpmac.\-h@{pgpmac.\-h}!md2cmds\-\_\-init@{md2cmds\-\_\-init}}
\index{md2cmds\-\_\-init@{md2cmds\-\_\-init}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{md2cmds\-\_\-init}]{\setlength{\rightskip}{0pt plus 5cm}void md2cmds\-\_\-init (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{pgpmac_8h_a0851b1baecda6a67993efde41d77b1c1}


Initialize the md2cmds module. 



Definition at line 535 of file md2cmds.\-c.


\begin{DoxyCode}
                    \{
  memset( \hyperlink{md2cmds_8c_a5f0fe1e2dfa92cf345b8c29134ab1ede}{md2cmds\_cmd}, 0, \textcolor{keyword}{sizeof}( \hyperlink{md2cmds_8c_a5f0fe1e2dfa92cf345b8c29134ab1ede}{md2cmds\_cmd}));

  pthread\_mutex\_init( &\hyperlink{md2cmds_8c_ad67304bb851dc6268b0cda2f40fc5aa8}{md2cmds\_mutex}, NULL);
  pthread\_cond\_init( &\hyperlink{md2cmds_8c_a08d5b18ec9478d753c46a3e28d1f2126}{md2cmds\_cond}, NULL);

  pthread\_mutex\_init( &\hyperlink{md2cmds_8c_a4d2c3ac81d4b13eb21f4ddcdda8c7308}{md2cmds\_pg\_mutex}, NULL);
  pthread\_cond\_init( &\hyperlink{md2cmds_8c_ab517a930528e2b7d0993e11087765b03}{md2cmds\_pg\_cond}, NULL);

\}
\end{DoxyCode}
\hypertarget{pgpmac_8h_aa62da7d423952334d41c7d282f45233d}{\index{pgpmac.\-h@{pgpmac.\-h}!md2cmds\-\_\-run@{md2cmds\-\_\-run}}
\index{md2cmds\-\_\-run@{md2cmds\-\_\-run}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{md2cmds\-\_\-run}]{\setlength{\rightskip}{0pt plus 5cm}void md2cmds\-\_\-run (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{pgpmac_8h_aa62da7d423952334d41c7d282f45233d}


Start up the thread. 



Definition at line 548 of file md2cmds.\-c.


\begin{DoxyCode}
                   \{
  pthread\_create( &\hyperlink{md2cmds_8c_aa230921945149692de98fff15c01962f}{md2cmds\_thread}, NULL, \hyperlink{md2cmds_8c_ae967e769d23555a631f615e630f25b00}{md2cmds\_worker}
      , NULL);
\}
\end{DoxyCode}
\hypertarget{pgpmac_8h_a7762ca7b97b44b979e23ce88ca3b4249}{\index{pgpmac.\-h@{pgpmac.\-h}!pgpmac\-\_\-printf@{pgpmac\-\_\-printf}}
\index{pgpmac\-\_\-printf@{pgpmac\-\_\-printf}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{pgpmac\-\_\-printf}]{\setlength{\rightskip}{0pt plus 5cm}void pgpmac\-\_\-printf (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{fmt, }
\item[{}]{...}
\end{DoxyParamCaption}
)}}\label{pgpmac_8h_a7762ca7b97b44b979e23ce88ca3b4249}


Terminal output routine ala printf. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em fmt} & Printf style formating string \\
\hline
\end{DoxyParams}


Definition at line 326 of file pgpmac.\-c.


\begin{DoxyCode}
                     \{
  va\_list arg\_ptr;

  pthread\_mutex\_lock( &\hyperlink{pgpmac_8c_ad128c64890c7c0d4f836d9ec6e99216a}{ncurses\_mutex});

  va\_start( arg\_ptr, fmt);
  vwprintw( \hyperlink{pgpmac_8c_a65daf0f4a5bc6def23a9df98ff5ca57e}{term\_output}, fmt, arg\_ptr);
  va\_end( arg\_ptr);

  wnoutrefresh( \hyperlink{pgpmac_8c_a65daf0f4a5bc6def23a9df98ff5ca57e}{term\_output});
  wnoutrefresh( \hyperlink{pgpmac_8c_ab0487111dbe3c05d0bd835eb2fb9a3f7}{term\_input});
  doupdate();

  pthread\_mutex\_unlock( &\hyperlink{pgpmac_8c_ad128c64890c7c0d4f836d9ec6e99216a}{ncurses\_mutex});

\}
\end{DoxyCode}
\hypertarget{pgpmac_8h_a76b11c62b122ee0fd8399435d4260681}{\index{pgpmac.\-h@{pgpmac.\-h}!Pmac\-Sock\-Sendline@{Pmac\-Sock\-Sendline}}
\index{Pmac\-Sock\-Sendline@{Pmac\-Sock\-Sendline}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{Pmac\-Sock\-Sendline}]{\setlength{\rightskip}{0pt plus 5cm}void Pmac\-Sock\-Sendline (
\begin{DoxyParamCaption}
\item[{char $\ast$}]{s}
\end{DoxyParamCaption}
)}}\label{pgpmac_8h_a76b11c62b122ee0fd8399435d4260681}


\subsection{Variable Documentation}
\hypertarget{pgpmac_8h_a6cb218bdccfe5a93471c161f15a15cab}{\index{pgpmac.\-h@{pgpmac.\-h}!alignx@{alignx}}
\index{alignx@{alignx}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{alignx}]{\setlength{\rightskip}{0pt plus 5cm}{\bf lspmac\-\_\-motor\-\_\-t}$\ast$ alignx}}\label{pgpmac_8h_a6cb218bdccfe5a93471c161f15a15cab}


Alignment stage X. 



Definition at line 73 of file lspmac.\-c.

\hypertarget{pgpmac_8h_a737c246c3948e644a18d191a931e1acd}{\index{pgpmac.\-h@{pgpmac.\-h}!aligny@{aligny}}
\index{aligny@{aligny}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{aligny}]{\setlength{\rightskip}{0pt plus 5cm}{\bf lspmac\-\_\-motor\-\_\-t}$\ast$ aligny}}\label{pgpmac_8h_a737c246c3948e644a18d191a931e1acd}


Alignment stage Y. 



Definition at line 74 of file lspmac.\-c.

\hypertarget{pgpmac_8h_ae7642b1da0f7c7f8448104c691d40a12}{\index{pgpmac.\-h@{pgpmac.\-h}!alignz@{alignz}}
\index{alignz@{alignz}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{alignz}]{\setlength{\rightskip}{0pt plus 5cm}{\bf lspmac\-\_\-motor\-\_\-t}$\ast$ alignz}}\label{pgpmac_8h_ae7642b1da0f7c7f8448104c691d40a12}


Alignment stage X. 



Definition at line 75 of file lspmac.\-c.

\hypertarget{pgpmac_8h_aa90d2363b744acbd4d45133b7a716d8f}{\index{pgpmac.\-h@{pgpmac.\-h}!anal@{anal}}
\index{anal@{anal}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{anal}]{\setlength{\rightskip}{0pt plus 5cm}{\bf lspmac\-\_\-motor\-\_\-t}$\ast$ anal}}\label{pgpmac_8h_aa90d2363b744acbd4d45133b7a716d8f}


Polaroid analyzer motor. 



Definition at line 76 of file lspmac.\-c.

\hypertarget{pgpmac_8h_a139200ddaa9856a7ffcec0e6cbaa8f1b}{\index{pgpmac.\-h@{pgpmac.\-h}!apery@{apery}}
\index{apery@{apery}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{apery}]{\setlength{\rightskip}{0pt plus 5cm}{\bf lspmac\-\_\-motor\-\_\-t}$\ast$ apery}}\label{pgpmac_8h_a139200ddaa9856a7ffcec0e6cbaa8f1b}


Aperture Y. 



Definition at line 78 of file lspmac.\-c.

\hypertarget{pgpmac_8h_ab93bd6ee850b285ca3a95e64d15e9477}{\index{pgpmac.\-h@{pgpmac.\-h}!aperz@{aperz}}
\index{aperz@{aperz}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{aperz}]{\setlength{\rightskip}{0pt plus 5cm}{\bf lspmac\-\_\-motor\-\_\-t}$\ast$ aperz}}\label{pgpmac_8h_ab93bd6ee850b285ca3a95e64d15e9477}


Aperture Z. 



Definition at line 79 of file lspmac.\-c.

\hypertarget{pgpmac_8h_a85d6eaa4b4a82bb3112574f458d1dc50}{\index{pgpmac.\-h@{pgpmac.\-h}!blight@{blight}}
\index{blight@{blight}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{blight}]{\setlength{\rightskip}{0pt plus 5cm}{\bf lspmac\-\_\-motor\-\_\-t}$\ast$ blight}}\label{pgpmac_8h_a85d6eaa4b4a82bb3112574f458d1dc50}


Back Light D\-A\-C. 



Definition at line 90 of file lspmac.\-c.

\hypertarget{pgpmac_8h_af813a2eff0b7efa4c70633559054e84c}{\index{pgpmac.\-h@{pgpmac.\-h}!blight\-\_\-ud@{blight\-\_\-ud}}
\index{blight\-\_\-ud@{blight\-\_\-ud}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{blight\-\_\-ud}]{\setlength{\rightskip}{0pt plus 5cm}{\bf lspmac\-\_\-motor\-\_\-t}$\ast$ blight\-\_\-ud}}\label{pgpmac_8h_af813a2eff0b7efa4c70633559054e84c}


Back Light Up/\-Down actuator. 



Definition at line 93 of file lspmac.\-c.

\hypertarget{pgpmac_8h_a51358daaea8b5236f08414877d8af6c2}{\index{pgpmac.\-h@{pgpmac.\-h}!capy@{capy}}
\index{capy@{capy}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{capy}]{\setlength{\rightskip}{0pt plus 5cm}{\bf lspmac\-\_\-motor\-\_\-t}$\ast$ capy}}\label{pgpmac_8h_a51358daaea8b5236f08414877d8af6c2}


Capillary Y. 



Definition at line 80 of file lspmac.\-c.

\hypertarget{pgpmac_8h_aa45f268d0af9f3d465acfab128919718}{\index{pgpmac.\-h@{pgpmac.\-h}!capz@{capz}}
\index{capz@{capz}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{capz}]{\setlength{\rightskip}{0pt plus 5cm}{\bf lspmac\-\_\-motor\-\_\-t}$\ast$ capz}}\label{pgpmac_8h_aa45f268d0af9f3d465acfab128919718}


Capillary Z. 



Definition at line 81 of file lspmac.\-c.

\hypertarget{pgpmac_8h_ac940d950d9efeaf3f0ae67e9bf331188}{\index{pgpmac.\-h@{pgpmac.\-h}!cenx@{cenx}}
\index{cenx@{cenx}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{cenx}]{\setlength{\rightskip}{0pt plus 5cm}{\bf lspmac\-\_\-motor\-\_\-t}$\ast$ cenx}}\label{pgpmac_8h_ac940d950d9efeaf3f0ae67e9bf331188}


Centering Table X. 



Definition at line 83 of file lspmac.\-c.

\hypertarget{pgpmac_8h_aaed18e738ba7bfb6c771a44f5d7ea827}{\index{pgpmac.\-h@{pgpmac.\-h}!ceny@{ceny}}
\index{ceny@{ceny}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{ceny}]{\setlength{\rightskip}{0pt plus 5cm}{\bf lspmac\-\_\-motor\-\_\-t}$\ast$ ceny}}\label{pgpmac_8h_aaed18e738ba7bfb6c771a44f5d7ea827}


Centering Table Y. 



Definition at line 84 of file lspmac.\-c.

\hypertarget{pgpmac_8h_ae78d9a757d4c85419fff9c94b15e25d7}{\index{pgpmac.\-h@{pgpmac.\-h}!cryo@{cryo}}
\index{cryo@{cryo}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{cryo}]{\setlength{\rightskip}{0pt plus 5cm}{\bf lspmac\-\_\-motor\-\_\-t}$\ast$ cryo}}\label{pgpmac_8h_ae78d9a757d4c85419fff9c94b15e25d7}


Move the cryostream towards or away from the crystal. 



Definition at line 94 of file lspmac.\-c.

\hypertarget{pgpmac_8h_a9d9c5030d817483ca9518027c91adac4}{\index{pgpmac.\-h@{pgpmac.\-h}!dryer@{dryer}}
\index{dryer@{dryer}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{dryer}]{\setlength{\rightskip}{0pt plus 5cm}{\bf lspmac\-\_\-motor\-\_\-t}$\ast$ dryer}}\label{pgpmac_8h_a9d9c5030d817483ca9518027c91adac4}


blow air on the scintilator to dry it off 



Definition at line 95 of file lspmac.\-c.

\hypertarget{pgpmac_8h_aeb09895663eff333b7a75acb319a9fc1}{\index{pgpmac.\-h@{pgpmac.\-h}!flight@{flight}}
\index{flight@{flight}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{flight}]{\setlength{\rightskip}{0pt plus 5cm}{\bf lspmac\-\_\-motor\-\_\-t}$\ast$ flight}}\label{pgpmac_8h_aeb09895663eff333b7a75acb319a9fc1}


Front Light D\-A\-C. 



Definition at line 89 of file lspmac.\-c.

\hypertarget{pgpmac_8h_a8a3ca6fcf5e24dcc26170736843e53b2}{\index{pgpmac.\-h@{pgpmac.\-h}!fscint@{fscint}}
\index{fscint@{fscint}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{fscint}]{\setlength{\rightskip}{0pt plus 5cm}{\bf lspmac\-\_\-motor\-\_\-t}$\ast$ fscint}}\label{pgpmac_8h_a8a3ca6fcf5e24dcc26170736843e53b2}


Scintillator Piezo D\-A\-C. 



Definition at line 91 of file lspmac.\-c.

\hypertarget{pgpmac_8h_a26dec4623af9beed912b8e7e6f99822c}{\index{pgpmac.\-h@{pgpmac.\-h}!fshut@{fshut}}
\index{fshut@{fshut}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{fshut}]{\setlength{\rightskip}{0pt plus 5cm}{\bf lspmac\-\_\-motor\-\_\-t}$\ast$ fshut}}\label{pgpmac_8h_a26dec4623af9beed912b8e7e6f99822c}


Fast shutter. 



Definition at line 88 of file lspmac.\-c.

\hypertarget{pgpmac_8h_a0be79ccb7ebf3a665248fd856112b9fd}{\index{pgpmac.\-h@{pgpmac.\-h}!kappa@{kappa}}
\index{kappa@{kappa}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{kappa}]{\setlength{\rightskip}{0pt plus 5cm}{\bf lspmac\-\_\-motor\-\_\-t}$\ast$ kappa}}\label{pgpmac_8h_a0be79ccb7ebf3a665248fd856112b9fd}


Kappa. 



Definition at line 85 of file lspmac.\-c.

\hypertarget{pgpmac_8h_a14ca7cca8246dcfc266ad30d56701c0a}{\index{pgpmac.\-h@{pgpmac.\-h}!lskvs\-\_\-kvs@{lskvs\-\_\-kvs}}
\index{lskvs\-\_\-kvs@{lskvs\-\_\-kvs}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lskvs\-\_\-kvs}]{\setlength{\rightskip}{0pt plus 5cm}{\bf lskvs\-\_\-kvs\-\_\-t}$\ast$ lskvs\-\_\-kvs}}\label{pgpmac_8h_a14ca7cca8246dcfc266ad30d56701c0a}


our list (or at least the start of it 



Definition at line 11 of file lskvs.\-c.

\hypertarget{pgpmac_8h_ad329bf890bd9eef896815dd53a323c2f}{\index{pgpmac.\-h@{pgpmac.\-h}!lskvs\-\_\-rwlock@{lskvs\-\_\-rwlock}}
\index{lskvs\-\_\-rwlock@{lskvs\-\_\-rwlock}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lskvs\-\_\-rwlock}]{\setlength{\rightskip}{0pt plus 5cm}pthread\-\_\-rwlock\-\_\-t lskvs\-\_\-rwlock}}\label{pgpmac_8h_ad329bf890bd9eef896815dd53a323c2f}


needed to protect the list 



Definition at line 12 of file lskvs.\-c.

\hypertarget{pgpmac_8h_a7ef8a09203117578c9b2ce4719519f36}{\index{pgpmac.\-h@{pgpmac.\-h}!lspg\-\_\-getcenter@{lspg\-\_\-getcenter}}
\index{lspg\-\_\-getcenter@{lspg\-\_\-getcenter}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lspg\-\_\-getcenter}]{\setlength{\rightskip}{0pt plus 5cm}{\bf lspg\-\_\-getcenter\-\_\-t} lspg\-\_\-getcenter}}\label{pgpmac_8h_a7ef8a09203117578c9b2ce4719519f36}


the getcenter object 



Definition at line 73 of file lspg.\-c.

\hypertarget{pgpmac_8h_ad8d8e2f578ca79189a80c1fd5b60cefd}{\index{pgpmac.\-h@{pgpmac.\-h}!lspg\-\_\-nextshot@{lspg\-\_\-nextshot}}
\index{lspg\-\_\-nextshot@{lspg\-\_\-nextshot}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lspg\-\_\-nextshot}]{\setlength{\rightskip}{0pt plus 5cm}{\bf lspg\-\_\-nextshot\-\_\-t} lspg\-\_\-nextshot}}\label{pgpmac_8h_ad8d8e2f578ca79189a80c1fd5b60cefd}


the nextshot object 



Definition at line 72 of file lspg.\-c.

\hypertarget{pgpmac_8h_aebfce5f9cbc8ba7bd4e2ee4880f303e8}{\index{pgpmac.\-h@{pgpmac.\-h}!lspmac\-\_\-motors@{lspmac\-\_\-motors}}
\index{lspmac\-\_\-motors@{lspmac\-\_\-motors}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lspmac\-\_\-motors}]{\setlength{\rightskip}{0pt plus 5cm}{\bf lspmac\-\_\-motor\-\_\-t} lspmac\-\_\-motors\mbox{[}$\,$\mbox{]}}}\label{pgpmac_8h_aebfce5f9cbc8ba7bd4e2ee4880f303e8}


All our motors. 



Definition at line 70 of file lspmac.\-c.

\hypertarget{pgpmac_8h_a57547d211906c981ef20257eba99f8df}{\index{pgpmac.\-h@{pgpmac.\-h}!lspmac\-\_\-moving\-\_\-cond@{lspmac\-\_\-moving\-\_\-cond}}
\index{lspmac\-\_\-moving\-\_\-cond@{lspmac\-\_\-moving\-\_\-cond}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lspmac\-\_\-moving\-\_\-cond}]{\setlength{\rightskip}{0pt plus 5cm}pthread\-\_\-cond\-\_\-t lspmac\-\_\-moving\-\_\-cond}}\label{pgpmac_8h_a57547d211906c981ef20257eba99f8df}


Wait for motor(s) to finish moving condition. 



Definition at line 58 of file lspmac.\-c.

\hypertarget{pgpmac_8h_a7a32c617c183166308241e270959df56}{\index{pgpmac.\-h@{pgpmac.\-h}!lspmac\-\_\-moving\-\_\-flags@{lspmac\-\_\-moving\-\_\-flags}}
\index{lspmac\-\_\-moving\-\_\-flags@{lspmac\-\_\-moving\-\_\-flags}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lspmac\-\_\-moving\-\_\-flags}]{\setlength{\rightskip}{0pt plus 5cm}int lspmac\-\_\-moving\-\_\-flags}}\label{pgpmac_8h_a7a32c617c183166308241e270959df56}


Flag used to implement motor moving condition. 



Definition at line 59 of file lspmac.\-c.

\hypertarget{pgpmac_8h_a85679cac947e199c88794f8e5a12bf5f}{\index{pgpmac.\-h@{pgpmac.\-h}!lspmac\-\_\-moving\-\_\-mutex@{lspmac\-\_\-moving\-\_\-mutex}}
\index{lspmac\-\_\-moving\-\_\-mutex@{lspmac\-\_\-moving\-\_\-mutex}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lspmac\-\_\-moving\-\_\-mutex}]{\setlength{\rightskip}{0pt plus 5cm}pthread\-\_\-mutex\-\_\-t lspmac\-\_\-moving\-\_\-mutex}}\label{pgpmac_8h_a85679cac947e199c88794f8e5a12bf5f}


Coordinate moving motors between threads. 



Definition at line 57 of file lspmac.\-c.

\hypertarget{pgpmac_8h_a56260f012c50a591ee7f97e500f16994}{\index{pgpmac.\-h@{pgpmac.\-h}!lspmac\-\_\-nmotors@{lspmac\-\_\-nmotors}}
\index{lspmac\-\_\-nmotors@{lspmac\-\_\-nmotors}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lspmac\-\_\-nmotors}]{\setlength{\rightskip}{0pt plus 5cm}int lspmac\-\_\-nmotors}}\label{pgpmac_8h_a56260f012c50a591ee7f97e500f16994}


The number of motors we manage. 



Definition at line 71 of file lspmac.\-c.

\hypertarget{pgpmac_8h_afbd51c2cefcee87afe994c9e9f372241}{\index{pgpmac.\-h@{pgpmac.\-h}!lspmac\-\_\-shutter\-\_\-cond@{lspmac\-\_\-shutter\-\_\-cond}}
\index{lspmac\-\_\-shutter\-\_\-cond@{lspmac\-\_\-shutter\-\_\-cond}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lspmac\-\_\-shutter\-\_\-cond}]{\setlength{\rightskip}{0pt plus 5cm}pthread\-\_\-cond\-\_\-t lspmac\-\_\-shutter\-\_\-cond}}\label{pgpmac_8h_afbd51c2cefcee87afe994c9e9f372241}


Allows waiting for the shutter status to change. 



Definition at line 56 of file lspmac.\-c.

\hypertarget{pgpmac_8h_a396fbf06208de3ecbe1b0df549f1cd46}{\index{pgpmac.\-h@{pgpmac.\-h}!lspmac\-\_\-shutter\-\_\-has\-\_\-opened@{lspmac\-\_\-shutter\-\_\-has\-\_\-opened}}
\index{lspmac\-\_\-shutter\-\_\-has\-\_\-opened@{lspmac\-\_\-shutter\-\_\-has\-\_\-opened}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lspmac\-\_\-shutter\-\_\-has\-\_\-opened}]{\setlength{\rightskip}{0pt plus 5cm}int lspmac\-\_\-shutter\-\_\-has\-\_\-opened}}\label{pgpmac_8h_a396fbf06208de3ecbe1b0df549f1cd46}


Indicates that the shutter had opened, perhaps briefly even if the state did not change. 



Definition at line 54 of file lspmac.\-c.

\hypertarget{pgpmac_8h_a1b78a13c654409333569815e1c109d38}{\index{pgpmac.\-h@{pgpmac.\-h}!lspmac\-\_\-shutter\-\_\-mutex@{lspmac\-\_\-shutter\-\_\-mutex}}
\index{lspmac\-\_\-shutter\-\_\-mutex@{lspmac\-\_\-shutter\-\_\-mutex}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lspmac\-\_\-shutter\-\_\-mutex}]{\setlength{\rightskip}{0pt plus 5cm}pthread\-\_\-mutex\-\_\-t lspmac\-\_\-shutter\-\_\-mutex}}\label{pgpmac_8h_a1b78a13c654409333569815e1c109d38}


Coordinates threads reading shutter status. 



Definition at line 55 of file lspmac.\-c.

\hypertarget{pgpmac_8h_a112158e0cd50449a440ac55c7af7bea2}{\index{pgpmac.\-h@{pgpmac.\-h}!lspmac\-\_\-shutter\-\_\-state@{lspmac\-\_\-shutter\-\_\-state}}
\index{lspmac\-\_\-shutter\-\_\-state@{lspmac\-\_\-shutter\-\_\-state}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{lspmac\-\_\-shutter\-\_\-state}]{\setlength{\rightskip}{0pt plus 5cm}int lspmac\-\_\-shutter\-\_\-state}}\label{pgpmac_8h_a112158e0cd50449a440ac55c7af7bea2}


State of the shutter, used to detect changes. 



Definition at line 53 of file lspmac.\-c.

\hypertarget{pgpmac_8h_a7a3e763682bd7f987d07f149e94b3bf8}{\index{pgpmac.\-h@{pgpmac.\-h}!md2\-\_\-status\-\_\-mutex@{md2\-\_\-status\-\_\-mutex}}
\index{md2\-\_\-status\-\_\-mutex@{md2\-\_\-status\-\_\-mutex}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{md2\-\_\-status\-\_\-mutex}]{\setlength{\rightskip}{0pt plus 5cm}pthread\-\_\-mutex\-\_\-t md2\-\_\-status\-\_\-mutex}}\label{pgpmac_8h_a7a3e763682bd7f987d07f149e94b3bf8}


Synchronize reading/writting status buffer. 



Definition at line 282 of file lspmac.\-c.

\hypertarget{pgpmac_8h_a1ccf455563dc8d828558b6a230e164a6}{\index{pgpmac.\-h@{pgpmac.\-h}!md2cmds\-\_\-cmd@{md2cmds\-\_\-cmd}}
\index{md2cmds\-\_\-cmd@{md2cmds\-\_\-cmd}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{md2cmds\-\_\-cmd}]{\setlength{\rightskip}{0pt plus 5cm}char md2cmds\-\_\-cmd\mbox{[}$\,$\mbox{]}}}\label{pgpmac_8h_a1ccf455563dc8d828558b6a230e164a6}


our command; 



Definition at line 16 of file md2cmds.\-c.

\hypertarget{pgpmac_8h_a08d5b18ec9478d753c46a3e28d1f2126}{\index{pgpmac.\-h@{pgpmac.\-h}!md2cmds\-\_\-cond@{md2cmds\-\_\-cond}}
\index{md2cmds\-\_\-cond@{md2cmds\-\_\-cond}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{md2cmds\-\_\-cond}]{\setlength{\rightskip}{0pt plus 5cm}pthread\-\_\-cond\-\_\-t md2cmds\-\_\-cond}}\label{pgpmac_8h_a08d5b18ec9478d753c46a3e28d1f2126}


condition to signal when it's time to run an md2 command 



Definition at line 10 of file md2cmds.\-c.

\hypertarget{pgpmac_8h_ad67304bb851dc6268b0cda2f40fc5aa8}{\index{pgpmac.\-h@{pgpmac.\-h}!md2cmds\-\_\-mutex@{md2cmds\-\_\-mutex}}
\index{md2cmds\-\_\-mutex@{md2cmds\-\_\-mutex}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{md2cmds\-\_\-mutex}]{\setlength{\rightskip}{0pt plus 5cm}pthread\-\_\-mutex\-\_\-t md2cmds\-\_\-mutex}}\label{pgpmac_8h_ad67304bb851dc6268b0cda2f40fc5aa8}


mutex for the condition 



Definition at line 11 of file md2cmds.\-c.

\hypertarget{pgpmac_8h_ab517a930528e2b7d0993e11087765b03}{\index{pgpmac.\-h@{pgpmac.\-h}!md2cmds\-\_\-pg\-\_\-cond@{md2cmds\-\_\-pg\-\_\-cond}}
\index{md2cmds\-\_\-pg\-\_\-cond@{md2cmds\-\_\-pg\-\_\-cond}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{md2cmds\-\_\-pg\-\_\-cond}]{\setlength{\rightskip}{0pt plus 5cm}pthread\-\_\-cond\-\_\-t md2cmds\-\_\-pg\-\_\-cond}}\label{pgpmac_8h_ab517a930528e2b7d0993e11087765b03}


coordinate call and response 



Definition at line 13 of file md2cmds.\-c.

\hypertarget{pgpmac_8h_a4d2c3ac81d4b13eb21f4ddcdda8c7308}{\index{pgpmac.\-h@{pgpmac.\-h}!md2cmds\-\_\-pg\-\_\-mutex@{md2cmds\-\_\-pg\-\_\-mutex}}
\index{md2cmds\-\_\-pg\-\_\-mutex@{md2cmds\-\_\-pg\-\_\-mutex}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{md2cmds\-\_\-pg\-\_\-mutex}]{\setlength{\rightskip}{0pt plus 5cm}pthread\-\_\-mutex\-\_\-t md2cmds\-\_\-pg\-\_\-mutex}}\label{pgpmac_8h_a4d2c3ac81d4b13eb21f4ddcdda8c7308}


message passing between md2cmds and pg 



Definition at line 14 of file md2cmds.\-c.

\hypertarget{pgpmac_8h_ad128c64890c7c0d4f836d9ec6e99216a}{\index{pgpmac.\-h@{pgpmac.\-h}!ncurses\-\_\-mutex@{ncurses\-\_\-mutex}}
\index{ncurses\-\_\-mutex@{ncurses\-\_\-mutex}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{ncurses\-\_\-mutex}]{\setlength{\rightskip}{0pt plus 5cm}pthread\-\_\-mutex\-\_\-t ncurses\-\_\-mutex}}\label{pgpmac_8h_ad128c64890c7c0d4f836d9ec6e99216a}


allow more than one thread access to the screen 



Definition at line 242 of file pgpmac.\-c.

\hypertarget{pgpmac_8h_a8237e646ce032a840637a4ef7bff49b9}{\index{pgpmac.\-h@{pgpmac.\-h}!omega@{omega}}
\index{omega@{omega}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{omega}]{\setlength{\rightskip}{0pt plus 5cm}{\bf lspmac\-\_\-motor\-\_\-t}$\ast$ omega}}\label{pgpmac_8h_a8237e646ce032a840637a4ef7bff49b9}


M\-D2 omega axis (the air bearing) 



Definition at line 72 of file lspmac.\-c.

\hypertarget{pgpmac_8h_ac8070dc568ad974a3db42b51eca828cc}{\index{pgpmac.\-h@{pgpmac.\-h}!phi@{phi}}
\index{phi@{phi}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{phi}]{\setlength{\rightskip}{0pt plus 5cm}{\bf lspmac\-\_\-motor\-\_\-t}$\ast$ phi}}\label{pgpmac_8h_ac8070dc568ad974a3db42b51eca828cc}


Phi (not data collection axis) 



Definition at line 86 of file lspmac.\-c.

\hypertarget{pgpmac_8h_ac0eeaffa0996271d8a38344a470d13d7}{\index{pgpmac.\-h@{pgpmac.\-h}!scinz@{scinz}}
\index{scinz@{scinz}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{scinz}]{\setlength{\rightskip}{0pt plus 5cm}{\bf lspmac\-\_\-motor\-\_\-t}$\ast$ scinz}}\label{pgpmac_8h_ac0eeaffa0996271d8a38344a470d13d7}


Scintillator Z. 



Definition at line 82 of file lspmac.\-c.

\hypertarget{pgpmac_8h_ab0487111dbe3c05d0bd835eb2fb9a3f7}{\index{pgpmac.\-h@{pgpmac.\-h}!term\-\_\-input@{term\-\_\-input}}
\index{term\-\_\-input@{term\-\_\-input}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{term\-\_\-input}]{\setlength{\rightskip}{0pt plus 5cm}W\-I\-N\-D\-O\-W$\ast$ term\-\_\-input}}\label{pgpmac_8h_ab0487111dbe3c05d0bd835eb2fb9a3f7}


place to put the cursor 



Definition at line 238 of file pgpmac.\-c.

\hypertarget{pgpmac_8h_a65daf0f4a5bc6def23a9df98ff5ca57e}{\index{pgpmac.\-h@{pgpmac.\-h}!term\-\_\-output@{term\-\_\-output}}
\index{term\-\_\-output@{term\-\_\-output}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{term\-\_\-output}]{\setlength{\rightskip}{0pt plus 5cm}W\-I\-N\-D\-O\-W$\ast$ term\-\_\-output}}\label{pgpmac_8h_a65daf0f4a5bc6def23a9df98ff5ca57e}


place to print stuff out 



Definition at line 237 of file pgpmac.\-c.

\hypertarget{pgpmac_8h_ae746a6903fb8a4ea216def88eccedc3c}{\index{pgpmac.\-h@{pgpmac.\-h}!term\-\_\-status@{term\-\_\-status}}
\index{term\-\_\-status@{term\-\_\-status}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{term\-\_\-status}]{\setlength{\rightskip}{0pt plus 5cm}W\-I\-N\-D\-O\-W$\ast$ term\-\_\-status}}\label{pgpmac_8h_ae746a6903fb8a4ea216def88eccedc3c}


shutter, lamp, air, etc status 



Definition at line 239 of file pgpmac.\-c.

\hypertarget{pgpmac_8h_ae2d7da3afeb756716e6e4ee9cab78f8a}{\index{pgpmac.\-h@{pgpmac.\-h}!term\-\_\-status2@{term\-\_\-status2}}
\index{term\-\_\-status2@{term\-\_\-status2}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{term\-\_\-status2}]{\setlength{\rightskip}{0pt plus 5cm}W\-I\-N\-D\-O\-W$\ast$ term\-\_\-status2}}\label{pgpmac_8h_ae2d7da3afeb756716e6e4ee9cab78f8a}


shutter, lamp, air, etc status 



Definition at line 240 of file pgpmac.\-c.

\hypertarget{pgpmac_8h_ad53a42cfaa04eff0336a44c8c9986333}{\index{pgpmac.\-h@{pgpmac.\-h}!zoom@{zoom}}
\index{zoom@{zoom}!pgpmac.h@{pgpmac.\-h}}
\subsubsection[{zoom}]{\setlength{\rightskip}{0pt plus 5cm}{\bf lspmac\-\_\-motor\-\_\-t}$\ast$ zoom}}\label{pgpmac_8h_ad53a42cfaa04eff0336a44c8c9986333}


Optical zoom. 



Definition at line 77 of file lspmac.\-c.

